/*! For license information please see main.dbe90c26.js.LICENSE.txt */
!function(){var e={141:function(e){e.exports={eventCodes:{fixation:1,evidence:5,show_earnings:7,test_connect:32,open_task:18}}},485:function(e,t,n){var r,i=n(890);try{var a=window.require("electron");r=a.ipcRenderer}catch(o){r=!1}e.exports={photodiodeGhostBox:function(){return'<div class="photodiode-box '.concat("visible",'" id="photodiode-box">\n\t\t\t\t\t\t\t\t\t\t<span id="photodiode-spot" class="photodiode-spot"></span>\n\t\t\t\t\t\t\t\t\t</div>')},pdSpotEncode:function(e,t,n){if(n.USE_PHOTODIODE){!function e(t,n){n>0&&function(e,t){i(".photodiode-spot").css({"background-color":"black"}),setTimeout((function(){i(".photodiode-spot").css({"background-color":"white"}),t()}),e)}(t,(function(){setTimeout((function(){e(t,n-1)}),t)}))}(40,t),r&&r.send("trigger",e)}}}},661:function(e){e.exports={baseStimulus:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=n?"center_container":t?"main-prompt":"main";return"<div class=".concat(r,">").concat(e,"</div>")}}},694:function(e,t){var n;!function(){"use strict";var r={}.hasOwnProperty;function i(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var a=typeof n;if("string"===a||"number"===a)e.push(n);else if(Array.isArray(n)){if(n.length){var o=i.apply(null,n);o&&e.push(o)}}else if("object"===a)if(n.toString===Object.prototype.toString)for(var u in n)r.call(n,u)&&n[u]&&e.push(u);else e.push(n.toString())}}return e.join(" ")}e.exports?(i.default=i,e.exports=i):void 0===(n=function(){return i}.apply(t,[]))||(e.exports=n)}()},890:function(e,t){var n;!function(t,n){"use strict";"object"===typeof e.exports?e.exports=t.document?n(t,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return n(e)}:n(t)}("undefined"!==typeof window?window:this,(function(r,i){"use strict";var a=[],o=Object.getPrototypeOf,u=a.slice,s=a.flat?function(e){return a.flat.call(e)}:function(e){return a.concat.apply([],e)},l=a.push,c=a.indexOf,f={},h=f.toString,d=f.hasOwnProperty,p=d.toString,v=p.call(Object),y={},m=function(e){return"function"===typeof e&&"number"!==typeof e.nodeType&&"function"!==typeof e.item},g=function(e){return null!=e&&e===e.window},b=r.document,w={type:!0,src:!0,nonce:!0,noModule:!0};function k(e,t,n){var r,i,a=(n=n||b).createElement("script");if(a.text=e,t)for(r in w)(i=t[r]||t.getAttribute&&t.getAttribute(r))&&a.setAttribute(r,i);n.head.appendChild(a).parentNode.removeChild(a)}function _(e){return null==e?e+"":"object"===typeof e||"function"===typeof e?f[h.call(e)]||"object":typeof e}var x="3.6.0",E=function e(t,n){return new e.fn.init(t,n)};function T(e){var t=!!e&&"length"in e&&e.length,n=_(e);return!m(e)&&!g(e)&&("array"===n||0===t||"number"===typeof t&&t>0&&t-1 in e)}E.fn=E.prototype={jquery:x,constructor:E,length:0,toArray:function(){return u.call(this)},get:function(e){return null==e?u.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=E.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return E.each(this,e)},map:function(e){return this.pushStack(E.map(this,(function(t,n){return e.call(t,n,t)})))},slice:function(){return this.pushStack(u.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(E.grep(this,(function(e,t){return(t+1)%2})))},odd:function(){return this.pushStack(E.grep(this,(function(e,t){return t%2})))},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:l,sort:a.sort,splice:a.splice},E.extend=E.fn.extend=function(){var e,t,n,r,i,a,o=arguments[0]||{},u=1,s=arguments.length,l=!1;for("boolean"===typeof o&&(l=o,o=arguments[u]||{},u++),"object"===typeof o||m(o)||(o={}),u===s&&(o=this,u--);u<s;u++)if(null!=(e=arguments[u]))for(t in e)r=e[t],"__proto__"!==t&&o!==r&&(l&&r&&(E.isPlainObject(r)||(i=Array.isArray(r)))?(n=o[t],a=i&&!Array.isArray(n)?[]:i||E.isPlainObject(n)?n:{},i=!1,o[t]=E.extend(l,a,r)):void 0!==r&&(o[t]=r));return o},E.extend({expando:"jQuery"+(x+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==h.call(e))&&(!(t=o(e))||"function"===typeof(n=d.call(t,"constructor")&&t.constructor)&&p.call(n)===v)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t,n){k(e,{nonce:t&&t.nonce},n)},each:function(e,t){var n,r=0;if(T(e))for(n=e.length;r<n&&!1!==t.call(e[r],r,e[r]);r++);else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},makeArray:function(e,t){var n=t||[];return null!=e&&(T(Object(e))?E.merge(n,"string"===typeof e?[e]:e):l.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:c.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;r<n;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r=[],i=0,a=e.length,o=!n;i<a;i++)!t(e[i],i)!==o&&r.push(e[i]);return r},map:function(e,t,n){var r,i,a=0,o=[];if(T(e))for(r=e.length;a<r;a++)null!=(i=t(e[a],a,n))&&o.push(i);else for(a in e)null!=(i=t(e[a],a,n))&&o.push(i);return s(o)},guid:1,support:y}),"function"===typeof Symbol&&(E.fn[Symbol.iterator]=a[Symbol.iterator]),E.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(e,t){f["[object "+t+"]"]=t.toLowerCase()}));var S=function(e){var t,n,r,i,a,o,u,s,l,c,f,h,d,p,v,y,m,g,b,w="sizzle"+1*new Date,k=e.document,_=0,x=0,E=se(),T=se(),S=se(),I=se(),C=function(e,t){return e===t&&(f=!0),0},A={}.hasOwnProperty,D=[],N=D.pop,P=D.push,O=D.push,L=D.slice,R=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},j="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",M="[\\x20\\t\\r\\n\\f]",F="(?:\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",q="\\[[\\x20\\t\\r\\n\\f]*("+F+")(?:"+M+"*([*^$|!~]?=)"+M+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+F+"))|)"+M+"*\\]",V=":("+F+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+q+")*)|.*)\\)|)",U=new RegExp(M+"+","g"),B=new RegExp("^[\\x20\\t\\r\\n\\f]+|((?:^|[^\\\\])(?:\\\\.)*)[\\x20\\t\\r\\n\\f]+$","g"),z=new RegExp("^[\\x20\\t\\r\\n\\f]*,[\\x20\\t\\r\\n\\f]*"),H=new RegExp("^[\\x20\\t\\r\\n\\f]*([>+~]|[\\x20\\t\\r\\n\\f])[\\x20\\t\\r\\n\\f]*"),K=new RegExp(M+"|>"),G=new RegExp(V),W=new RegExp("^"+F+"$"),Q={ID:new RegExp("^#("+F+")"),CLASS:new RegExp("^\\.("+F+")"),TAG:new RegExp("^("+F+"|[*])"),ATTR:new RegExp("^"+q),PSEUDO:new RegExp("^"+V),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\([\\x20\\t\\r\\n\\f]*(even|odd|(([+-]|)(\\d*)n|)[\\x20\\t\\r\\n\\f]*(?:([+-]|)[\\x20\\t\\r\\n\\f]*(\\d+)|))[\\x20\\t\\r\\n\\f]*\\)|)","i"),bool:new RegExp("^(?:"+j+")$","i"),needsContext:new RegExp("^[\\x20\\t\\r\\n\\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\([\\x20\\t\\r\\n\\f]*((?:-\\d)?\\d*)[\\x20\\t\\r\\n\\f]*\\)|)(?=[^-]|$)","i")},$=/HTML$/i,Y=/^(?:input|select|textarea|button)$/i,X=/^h\d$/i,J=/^[^{]+\{\s*\[native \w/,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ee=/[+~]/,te=new RegExp("\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\([^\\r\\n\\f])","g"),ne=function(e,t){var n="0x"+e.slice(1)-65536;return t||(n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320))},re=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ie=function(e,t){return t?"\0"===e?"\ufffd":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},ae=function(){h()},oe=we((function(e){return!0===e.disabled&&"fieldset"===e.nodeName.toLowerCase()}),{dir:"parentNode",next:"legend"});try{O.apply(D=L.call(k.childNodes),k.childNodes),D[k.childNodes.length].nodeType}catch(Te){O={apply:D.length?function(e,t){P.apply(e,L.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}function ue(e,t,r,i){var a,u,l,c,f,p,m,g=t&&t.ownerDocument,k=t?t.nodeType:9;if(r=r||[],"string"!==typeof e||!e||1!==k&&9!==k&&11!==k)return r;if(!i&&(h(t),t=t||d,v)){if(11!==k&&(f=Z.exec(e)))if(a=f[1]){if(9===k){if(!(l=t.getElementById(a)))return r;if(l.id===a)return r.push(l),r}else if(g&&(l=g.getElementById(a))&&b(t,l)&&l.id===a)return r.push(l),r}else{if(f[2])return O.apply(r,t.getElementsByTagName(e)),r;if((a=f[3])&&n.getElementsByClassName&&t.getElementsByClassName)return O.apply(r,t.getElementsByClassName(a)),r}if(n.qsa&&!I[e+" "]&&(!y||!y.test(e))&&(1!==k||"object"!==t.nodeName.toLowerCase())){if(m=e,g=t,1===k&&(K.test(e)||H.test(e))){for((g=ee.test(e)&&me(t.parentNode)||t)===t&&n.scope||((c=t.getAttribute("id"))?c=c.replace(re,ie):t.setAttribute("id",c=w)),u=(p=o(e)).length;u--;)p[u]=(c?"#"+c:":scope")+" "+be(p[u]);m=p.join(",")}try{return O.apply(r,g.querySelectorAll(m)),r}catch(_){I(e,!0)}finally{c===w&&t.removeAttribute("id")}}}return s(e.replace(B,"$1"),t,r,i)}function se(){var e=[];return function t(n,i){return e.push(n+" ")>r.cacheLength&&delete t[e.shift()],t[n+" "]=i}}function le(e){return e[w]=!0,e}function ce(e){var t=d.createElement("fieldset");try{return!!e(t)}catch(Te){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function fe(e,t){for(var n=e.split("|"),i=n.length;i--;)r.attrHandle[n[i]]=t}function he(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function de(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function pe(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function ve(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&oe(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function ye(e){return le((function(t){return t=+t,le((function(n,r){for(var i,a=e([],n.length,t),o=a.length;o--;)n[i=a[o]]&&(n[i]=!(r[i]=n[i]))}))}))}function me(e){return e&&"undefined"!==typeof e.getElementsByTagName&&e}for(t in n=ue.support={},a=ue.isXML=function(e){var t=e&&e.namespaceURI,n=e&&(e.ownerDocument||e).documentElement;return!$.test(t||n&&n.nodeName||"HTML")},h=ue.setDocument=function(e){var t,i,o=e?e.ownerDocument||e:k;return o!=d&&9===o.nodeType&&o.documentElement?(p=(d=o).documentElement,v=!a(d),k!=d&&(i=d.defaultView)&&i.top!==i&&(i.addEventListener?i.addEventListener("unload",ae,!1):i.attachEvent&&i.attachEvent("onunload",ae)),n.scope=ce((function(e){return p.appendChild(e).appendChild(d.createElement("div")),"undefined"!==typeof e.querySelectorAll&&!e.querySelectorAll(":scope fieldset div").length})),n.attributes=ce((function(e){return e.className="i",!e.getAttribute("className")})),n.getElementsByTagName=ce((function(e){return e.appendChild(d.createComment("")),!e.getElementsByTagName("*").length})),n.getElementsByClassName=J.test(d.getElementsByClassName),n.getById=ce((function(e){return p.appendChild(e).id=w,!d.getElementsByName||!d.getElementsByName(w).length})),n.getById?(r.filter.ID=function(e){var t=e.replace(te,ne);return function(e){return e.getAttribute("id")===t}},r.find.ID=function(e,t){if("undefined"!==typeof t.getElementById&&v){var n=t.getElementById(e);return n?[n]:[]}}):(r.filter.ID=function(e){var t=e.replace(te,ne);return function(e){var n="undefined"!==typeof e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}},r.find.ID=function(e,t){if("undefined"!==typeof t.getElementById&&v){var n,r,i,a=t.getElementById(e);if(a){if((n=a.getAttributeNode("id"))&&n.value===e)return[a];for(i=t.getElementsByName(e),r=0;a=i[r++];)if((n=a.getAttributeNode("id"))&&n.value===e)return[a]}return[]}}),r.find.TAG=n.getElementsByTagName?function(e,t){return"undefined"!==typeof t.getElementsByTagName?t.getElementsByTagName(e):n.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],i=0,a=t.getElementsByTagName(e);if("*"===e){for(;n=a[i++];)1===n.nodeType&&r.push(n);return r}return a},r.find.CLASS=n.getElementsByClassName&&function(e,t){if("undefined"!==typeof t.getElementsByClassName&&v)return t.getElementsByClassName(e)},m=[],y=[],(n.qsa=J.test(d.querySelectorAll))&&(ce((function(e){var t;p.appendChild(e).innerHTML="<a id='"+w+"'></a><select id='"+w+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&y.push("[*^$]=[\\x20\\t\\r\\n\\f]*(?:''|\"\")"),e.querySelectorAll("[selected]").length||y.push("\\[[\\x20\\t\\r\\n\\f]*(?:value|"+j+")"),e.querySelectorAll("[id~="+w+"-]").length||y.push("~="),(t=d.createElement("input")).setAttribute("name",""),e.appendChild(t),e.querySelectorAll("[name='']").length||y.push("\\[[\\x20\\t\\r\\n\\f]*name[\\x20\\t\\r\\n\\f]*=[\\x20\\t\\r\\n\\f]*(?:''|\"\")"),e.querySelectorAll(":checked").length||y.push(":checked"),e.querySelectorAll("a#"+w+"+*").length||y.push(".#.+[+~]"),e.querySelectorAll("\\\f"),y.push("[\\r\\n\\f]")})),ce((function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=d.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&y.push("name[\\x20\\t\\r\\n\\f]*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&y.push(":enabled",":disabled"),p.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&y.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),y.push(",.*:")}))),(n.matchesSelector=J.test(g=p.matches||p.webkitMatchesSelector||p.mozMatchesSelector||p.oMatchesSelector||p.msMatchesSelector))&&ce((function(e){n.disconnectedMatch=g.call(e,"*"),g.call(e,"[s!='']:x"),m.push("!=",V)})),y=y.length&&new RegExp(y.join("|")),m=m.length&&new RegExp(m.join("|")),t=J.test(p.compareDocumentPosition),b=t||J.test(p.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},C=t?function(e,t){if(e===t)return f=!0,0;var r=!e.compareDocumentPosition-!t.compareDocumentPosition;return r||(1&(r=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!n.sortDetached&&t.compareDocumentPosition(e)===r?e==d||e.ownerDocument==k&&b(k,e)?-1:t==d||t.ownerDocument==k&&b(k,t)?1:c?R(c,e)-R(c,t):0:4&r?-1:1)}:function(e,t){if(e===t)return f=!0,0;var n,r=0,i=e.parentNode,a=t.parentNode,o=[e],u=[t];if(!i||!a)return e==d?-1:t==d?1:i?-1:a?1:c?R(c,e)-R(c,t):0;if(i===a)return he(e,t);for(n=e;n=n.parentNode;)o.unshift(n);for(n=t;n=n.parentNode;)u.unshift(n);for(;o[r]===u[r];)r++;return r?he(o[r],u[r]):o[r]==k?-1:u[r]==k?1:0},d):d},ue.matches=function(e,t){return ue(e,null,null,t)},ue.matchesSelector=function(e,t){if(h(e),n.matchesSelector&&v&&!I[t+" "]&&(!m||!m.test(t))&&(!y||!y.test(t)))try{var r=g.call(e,t);if(r||n.disconnectedMatch||e.document&&11!==e.document.nodeType)return r}catch(Te){I(t,!0)}return ue(t,d,null,[e]).length>0},ue.contains=function(e,t){return(e.ownerDocument||e)!=d&&h(e),b(e,t)},ue.attr=function(e,t){(e.ownerDocument||e)!=d&&h(e);var i=r.attrHandle[t.toLowerCase()],a=i&&A.call(r.attrHandle,t.toLowerCase())?i(e,t,!v):void 0;return void 0!==a?a:n.attributes||!v?e.getAttribute(t):(a=e.getAttributeNode(t))&&a.specified?a.value:null},ue.escape=function(e){return(e+"").replace(re,ie)},ue.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},ue.uniqueSort=function(e){var t,r=[],i=0,a=0;if(f=!n.detectDuplicates,c=!n.sortStable&&e.slice(0),e.sort(C),f){for(;t=e[a++];)t===e[a]&&(i=r.push(a));for(;i--;)e.splice(r[i],1)}return c=null,e},i=ue.getText=function(e){var t,n="",r=0,a=e.nodeType;if(a){if(1===a||9===a||11===a){if("string"===typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=i(e)}else if(3===a||4===a)return e.nodeValue}else for(;t=e[r++];)n+=i(t);return n},r=ue.selectors={cacheLength:50,createPseudo:le,match:Q,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(te,ne),e[3]=(e[3]||e[4]||e[5]||"").replace(te,ne),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||ue.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&ue.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return Q.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&G.test(n)&&(t=o(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(te,ne).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=E[e+" "];return t||(t=new RegExp("(^|[\\x20\\t\\r\\n\\f])"+e+"("+M+"|$)"))&&E(e,(function(e){return t.test("string"===typeof e.className&&e.className||"undefined"!==typeof e.getAttribute&&e.getAttribute("class")||"")}))},ATTR:function(e,t,n){return function(r){var i=ue.attr(r,e);return null==i?"!="===t:!t||(i+="","="===t?i===n:"!="===t?i!==n:"^="===t?n&&0===i.indexOf(n):"*="===t?n&&i.indexOf(n)>-1:"$="===t?n&&i.slice(-n.length)===n:"~="===t?(" "+i.replace(U," ")+" ").indexOf(n)>-1:"|="===t&&(i===n||i.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,n,r,i){var a="nth"!==e.slice(0,3),o="last"!==e.slice(-4),u="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,s){var l,c,f,h,d,p,v=a!==o?"nextSibling":"previousSibling",y=t.parentNode,m=u&&t.nodeName.toLowerCase(),g=!s&&!u,b=!1;if(y){if(a){for(;v;){for(h=t;h=h[v];)if(u?h.nodeName.toLowerCase()===m:1===h.nodeType)return!1;p=v="only"===e&&!p&&"nextSibling"}return!0}if(p=[o?y.firstChild:y.lastChild],o&&g){for(b=(d=(l=(c=(f=(h=y)[w]||(h[w]={}))[h.uniqueID]||(f[h.uniqueID]={}))[e]||[])[0]===_&&l[1])&&l[2],h=d&&y.childNodes[d];h=++d&&h&&h[v]||(b=d=0)||p.pop();)if(1===h.nodeType&&++b&&h===t){c[e]=[_,d,b];break}}else if(g&&(b=d=(l=(c=(f=(h=t)[w]||(h[w]={}))[h.uniqueID]||(f[h.uniqueID]={}))[e]||[])[0]===_&&l[1]),!1===b)for(;(h=++d&&h&&h[v]||(b=d=0)||p.pop())&&((u?h.nodeName.toLowerCase()!==m:1!==h.nodeType)||!++b||(g&&((c=(f=h[w]||(h[w]={}))[h.uniqueID]||(f[h.uniqueID]={}))[e]=[_,b]),h!==t)););return(b-=i)===r||b%r===0&&b/r>=0}}},PSEUDO:function(e,t){var n,i=r.pseudos[e]||r.setFilters[e.toLowerCase()]||ue.error("unsupported pseudo: "+e);return i[w]?i(t):i.length>1?(n=[e,e,"",t],r.setFilters.hasOwnProperty(e.toLowerCase())?le((function(e,n){for(var r,a=i(e,t),o=a.length;o--;)e[r=R(e,a[o])]=!(n[r]=a[o])})):function(e){return i(e,0,n)}):i}},pseudos:{not:le((function(e){var t=[],n=[],r=u(e.replace(B,"$1"));return r[w]?le((function(e,t,n,i){for(var a,o=r(e,null,i,[]),u=e.length;u--;)(a=o[u])&&(e[u]=!(t[u]=a))})):function(e,i,a){return t[0]=e,r(t,null,a,n),t[0]=null,!n.pop()}})),has:le((function(e){return function(t){return ue(e,t).length>0}})),contains:le((function(e){return e=e.replace(te,ne),function(t){return(t.textContent||i(t)).indexOf(e)>-1}})),lang:le((function(e){return W.test(e||"")||ue.error("unsupported lang: "+e),e=e.replace(te,ne).toLowerCase(),function(t){var n;do{if(n=v?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}})),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===p},focus:function(e){return e===d.activeElement&&(!d.hasFocus||d.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:ve(!1),disabled:ve(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!r.pseudos.empty(e)},header:function(e){return X.test(e.nodeName)},input:function(e){return Y.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:ye((function(){return[0]})),last:ye((function(e,t){return[t-1]})),eq:ye((function(e,t,n){return[n<0?n+t:n]})),even:ye((function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e})),odd:ye((function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e})),lt:ye((function(e,t,n){for(var r=n<0?n+t:n>t?t:n;--r>=0;)e.push(r);return e})),gt:ye((function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e}))}},r.pseudos.nth=r.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})r.pseudos[t]=de(t);for(t in{submit:!0,reset:!0})r.pseudos[t]=pe(t);function ge(){}function be(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function we(e,t,n){var r=t.dir,i=t.next,a=i||r,o=n&&"parentNode"===a,u=x++;return t.first?function(t,n,i){for(;t=t[r];)if(1===t.nodeType||o)return e(t,n,i);return!1}:function(t,n,s){var l,c,f,h=[_,u];if(s){for(;t=t[r];)if((1===t.nodeType||o)&&e(t,n,s))return!0}else for(;t=t[r];)if(1===t.nodeType||o)if(c=(f=t[w]||(t[w]={}))[t.uniqueID]||(f[t.uniqueID]={}),i&&i===t.nodeName.toLowerCase())t=t[r]||t;else{if((l=c[a])&&l[0]===_&&l[1]===u)return h[2]=l[2];if(c[a]=h,h[2]=e(t,n,s))return!0}return!1}}function ke(e){return e.length>1?function(t,n,r){for(var i=e.length;i--;)if(!e[i](t,n,r))return!1;return!0}:e[0]}function _e(e,t,n,r,i){for(var a,o=[],u=0,s=e.length,l=null!=t;u<s;u++)(a=e[u])&&(n&&!n(a,r,i)||(o.push(a),l&&t.push(u)));return o}function xe(e,t,n,r,i,a){return r&&!r[w]&&(r=xe(r)),i&&!i[w]&&(i=xe(i,a)),le((function(a,o,u,s){var l,c,f,h=[],d=[],p=o.length,v=a||function(e,t,n){for(var r=0,i=t.length;r<i;r++)ue(e,t[r],n);return n}(t||"*",u.nodeType?[u]:u,[]),y=!e||!a&&t?v:_e(v,h,e,u,s),m=n?i||(a?e:p||r)?[]:o:y;if(n&&n(y,m,u,s),r)for(l=_e(m,d),r(l,[],u,s),c=l.length;c--;)(f=l[c])&&(m[d[c]]=!(y[d[c]]=f));if(a){if(i||e){if(i){for(l=[],c=m.length;c--;)(f=m[c])&&l.push(y[c]=f);i(null,m=[],l,s)}for(c=m.length;c--;)(f=m[c])&&(l=i?R(a,f):h[c])>-1&&(a[l]=!(o[l]=f))}}else m=_e(m===o?m.splice(p,m.length):m),i?i(null,o,m,s):O.apply(o,m)}))}function Ee(e){for(var t,n,i,a=e.length,o=r.relative[e[0].type],u=o||r.relative[" "],s=o?1:0,c=we((function(e){return e===t}),u,!0),f=we((function(e){return R(t,e)>-1}),u,!0),h=[function(e,n,r){var i=!o&&(r||n!==l)||((t=n).nodeType?c(e,n,r):f(e,n,r));return t=null,i}];s<a;s++)if(n=r.relative[e[s].type])h=[we(ke(h),n)];else{if((n=r.filter[e[s].type].apply(null,e[s].matches))[w]){for(i=++s;i<a&&!r.relative[e[i].type];i++);return xe(s>1&&ke(h),s>1&&be(e.slice(0,s-1).concat({value:" "===e[s-2].type?"*":""})).replace(B,"$1"),n,s<i&&Ee(e.slice(s,i)),i<a&&Ee(e=e.slice(i)),i<a&&be(e))}h.push(n)}return ke(h)}return ge.prototype=r.filters=r.pseudos,r.setFilters=new ge,o=ue.tokenize=function(e,t){var n,i,a,o,u,s,l,c=T[e+" "];if(c)return t?0:c.slice(0);for(u=e,s=[],l=r.preFilter;u;){for(o in n&&!(i=z.exec(u))||(i&&(u=u.slice(i[0].length)||u),s.push(a=[])),n=!1,(i=H.exec(u))&&(n=i.shift(),a.push({value:n,type:i[0].replace(B," ")}),u=u.slice(n.length)),r.filter)!(i=Q[o].exec(u))||l[o]&&!(i=l[o](i))||(n=i.shift(),a.push({value:n,type:o,matches:i}),u=u.slice(n.length));if(!n)break}return t?u.length:u?ue.error(e):T(e,s).slice(0)},u=ue.compile=function(e,t){var n,i=[],a=[],u=S[e+" "];if(!u){for(t||(t=o(e)),n=t.length;n--;)(u=Ee(t[n]))[w]?i.push(u):a.push(u);u=S(e,function(e,t){var n=t.length>0,i=e.length>0,a=function(a,o,u,s,c){var f,p,y,m=0,g="0",b=a&&[],w=[],k=l,x=a||i&&r.find.TAG("*",c),E=_+=null==k?1:Math.random()||.1,T=x.length;for(c&&(l=o==d||o||c);g!==T&&null!=(f=x[g]);g++){if(i&&f){for(p=0,o||f.ownerDocument==d||(h(f),u=!v);y=e[p++];)if(y(f,o||d,u)){s.push(f);break}c&&(_=E)}n&&((f=!y&&f)&&m--,a&&b.push(f))}if(m+=g,n&&g!==m){for(p=0;y=t[p++];)y(b,w,o,u);if(a){if(m>0)for(;g--;)b[g]||w[g]||(w[g]=N.call(s));w=_e(w)}O.apply(s,w),c&&!a&&w.length>0&&m+t.length>1&&ue.uniqueSort(s)}return c&&(_=E,l=k),b};return n?le(a):a}(a,i)),u.selector=e}return u},s=ue.select=function(e,t,n,i){var a,s,l,c,f,h="function"===typeof e&&e,d=!i&&o(e=h.selector||e);if(n=n||[],1===d.length){if((s=d[0]=d[0].slice(0)).length>2&&"ID"===(l=s[0]).type&&9===t.nodeType&&v&&r.relative[s[1].type]){if(!(t=(r.find.ID(l.matches[0].replace(te,ne),t)||[])[0]))return n;h&&(t=t.parentNode),e=e.slice(s.shift().value.length)}for(a=Q.needsContext.test(e)?0:s.length;a--&&(l=s[a],!r.relative[c=l.type]);)if((f=r.find[c])&&(i=f(l.matches[0].replace(te,ne),ee.test(s[0].type)&&me(t.parentNode)||t))){if(s.splice(a,1),!(e=i.length&&be(s)))return O.apply(n,i),n;break}}return(h||u(e,d))(i,t,!v,n,!t||ee.test(e)&&me(t.parentNode)||t),n},n.sortStable=w.split("").sort(C).join("")===w,n.detectDuplicates=!!f,h(),n.sortDetached=ce((function(e){return 1&e.compareDocumentPosition(d.createElement("fieldset"))})),ce((function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")}))||fe("type|href|height|width",(function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)})),n.attributes&&ce((function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")}))||fe("value",(function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue})),ce((function(e){return null==e.getAttribute("disabled")}))||fe(j,(function(e,t,n){var r;if(!n)return!0===e[t]?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null})),ue}(r);E.find=S,(E.expr=S.selectors)[":"]=E.expr.pseudos,E.uniqueSort=E.unique=S.uniqueSort,E.text=S.getText,E.isXMLDoc=S.isXML,E.contains=S.contains,E.escapeSelector=S.escape;var I=function(e,t,n){for(var r=[],i=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(i&&E(e).is(n))break;r.push(e)}return r},C=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},A=E.expr.match.needsContext;function D(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var N=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function P(e,t,n){return m(t)?E.grep(e,(function(e,r){return!!t.call(e,r,e)!==n})):t.nodeType?E.grep(e,(function(e){return e===t!==n})):"string"!==typeof t?E.grep(e,(function(e){return c.call(t,e)>-1!==n})):E.filter(t,e,n)}E.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?E.find.matchesSelector(r,e)?[r]:[]:E.find.matches(e,E.grep(t,(function(e){return 1===e.nodeType})))},E.fn.extend({find:function(e){var t,n,r=this.length,i=this;if("string"!==typeof e)return this.pushStack(E(e).filter((function(){for(t=0;t<r;t++)if(E.contains(i[t],this))return!0})));for(n=this.pushStack([]),t=0;t<r;t++)E.find(e,i[t],n);return r>1?E.uniqueSort(n):n},filter:function(e){return this.pushStack(P(this,e||[],!1))},not:function(e){return this.pushStack(P(this,e||[],!0))},is:function(e){return!!P(this,"string"===typeof e&&A.test(e)?E(e):e||[],!1).length}});var O,L=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(E.fn.init=function(e,t,n){var r,i;if(!e)return this;if(n=n||O,"string"===typeof e){if(!(r="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:L.exec(e))||!r[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof E?t[0]:t,E.merge(this,E.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:b,!0)),N.test(r[1])&&E.isPlainObject(t))for(r in t)m(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return(i=b.getElementById(r[2]))&&(this[0]=i,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):m(e)?void 0!==n.ready?n.ready(e):e(E):E.makeArray(e,this)}).prototype=E.fn,O=E(b);var R=/^(?:parents|prev(?:Until|All))/,j={children:!0,contents:!0,next:!0,prev:!0};function M(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}E.fn.extend({has:function(e){var t=E(e,this),n=t.length;return this.filter((function(){for(var e=0;e<n;e++)if(E.contains(this,t[e]))return!0}))},closest:function(e,t){var n,r=0,i=this.length,a=[],o="string"!==typeof e&&E(e);if(!A.test(e))for(;r<i;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(o?o.index(n)>-1:1===n.nodeType&&E.find.matchesSelector(n,e))){a.push(n);break}return this.pushStack(a.length>1?E.uniqueSort(a):a)},index:function(e){return e?"string"===typeof e?c.call(E(e),this[0]):c.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(E.uniqueSort(E.merge(this.get(),E(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),E.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return I(e,"parentNode")},parentsUntil:function(e,t,n){return I(e,"parentNode",n)},next:function(e){return M(e,"nextSibling")},prev:function(e){return M(e,"previousSibling")},nextAll:function(e){return I(e,"nextSibling")},prevAll:function(e){return I(e,"previousSibling")},nextUntil:function(e,t,n){return I(e,"nextSibling",n)},prevUntil:function(e,t,n){return I(e,"previousSibling",n)},siblings:function(e){return C((e.parentNode||{}).firstChild,e)},children:function(e){return C(e.firstChild)},contents:function(e){return null!=e.contentDocument&&o(e.contentDocument)?e.contentDocument:(D(e,"template")&&(e=e.content||e),E.merge([],e.childNodes))}},(function(e,t){E.fn[e]=function(n,r){var i=E.map(this,t,n);return"Until"!==e.slice(-5)&&(r=n),r&&"string"===typeof r&&(i=E.filter(r,i)),this.length>1&&(j[e]||E.uniqueSort(i),R.test(e)&&i.reverse()),this.pushStack(i)}}));var F=/[^\x20\t\r\n\f]+/g;function q(e){return e}function V(e){throw e}function U(e,t,n,r){var i;try{e&&m(i=e.promise)?i.call(e).done(t).fail(n):e&&m(i=e.then)?i.call(e,t,n):t.apply(void 0,[e].slice(r))}catch(e){n.apply(void 0,[e])}}E.Callbacks=function(e){e="string"===typeof e?function(e){var t={};return E.each(e.match(F)||[],(function(e,n){t[n]=!0})),t}(e):E.extend({},e);var t,n,r,i,a=[],o=[],u=-1,s=function(){for(i=i||e.once,r=t=!0;o.length;u=-1)for(n=o.shift();++u<a.length;)!1===a[u].apply(n[0],n[1])&&e.stopOnFalse&&(u=a.length,n=!1);e.memory||(n=!1),t=!1,i&&(a=n?[]:"")},l={add:function(){return a&&(n&&!t&&(u=a.length-1,o.push(n)),function t(n){E.each(n,(function(n,r){m(r)?e.unique&&l.has(r)||a.push(r):r&&r.length&&"string"!==_(r)&&t(r)}))}(arguments),n&&!t&&s()),this},remove:function(){return E.each(arguments,(function(e,t){for(var n;(n=E.inArray(t,a,n))>-1;)a.splice(n,1),n<=u&&u--})),this},has:function(e){return e?E.inArray(e,a)>-1:a.length>0},empty:function(){return a&&(a=[]),this},disable:function(){return i=o=[],a=n="",this},disabled:function(){return!a},lock:function(){return i=o=[],n||t||(a=n=""),this},locked:function(){return!!i},fireWith:function(e,n){return i||(n=[e,(n=n||[]).slice?n.slice():n],o.push(n),t||s()),this},fire:function(){return l.fireWith(this,arguments),this},fired:function(){return!!r}};return l},E.extend({Deferred:function(e){var t=[["notify","progress",E.Callbacks("memory"),E.Callbacks("memory"),2],["resolve","done",E.Callbacks("once memory"),E.Callbacks("once memory"),0,"resolved"],["reject","fail",E.Callbacks("once memory"),E.Callbacks("once memory"),1,"rejected"]],n="pending",i={state:function(){return n},always:function(){return a.done(arguments).fail(arguments),this},catch:function(e){return i.then(null,e)},pipe:function(){var e=arguments;return E.Deferred((function(n){E.each(t,(function(t,r){var i=m(e[r[4]])&&e[r[4]];a[r[1]]((function(){var e=i&&i.apply(this,arguments);e&&m(e.promise)?e.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[r[0]+"With"](this,i?[e]:arguments)}))})),e=null})).promise()},then:function(e,n,i){var a=0;function o(e,t,n,i){return function(){var u=this,s=arguments,l=function(){var r,l;if(!(e<a)){if((r=n.apply(u,s))===t.promise())throw new TypeError("Thenable self-resolution");l=r&&("object"===typeof r||"function"===typeof r)&&r.then,m(l)?i?l.call(r,o(a,t,q,i),o(a,t,V,i)):(a++,l.call(r,o(a,t,q,i),o(a,t,V,i),o(a,t,q,t.notifyWith))):(n!==q&&(u=void 0,s=[r]),(i||t.resolveWith)(u,s))}},c=i?l:function(){try{l()}catch(r){E.Deferred.exceptionHook&&E.Deferred.exceptionHook(r,c.stackTrace),e+1>=a&&(n!==V&&(u=void 0,s=[r]),t.rejectWith(u,s))}};e?c():(E.Deferred.getStackHook&&(c.stackTrace=E.Deferred.getStackHook()),r.setTimeout(c))}}return E.Deferred((function(r){t[0][3].add(o(0,r,m(i)?i:q,r.notifyWith)),t[1][3].add(o(0,r,m(e)?e:q)),t[2][3].add(o(0,r,m(n)?n:V))})).promise()},promise:function(e){return null!=e?E.extend(e,i):i}},a={};return E.each(t,(function(e,r){var o=r[2],u=r[5];i[r[1]]=o.add,u&&o.add((function(){n=u}),t[3-e][2].disable,t[3-e][3].disable,t[0][2].lock,t[0][3].lock),o.add(r[3].fire),a[r[0]]=function(){return a[r[0]+"With"](this===a?void 0:this,arguments),this},a[r[0]+"With"]=o.fireWith})),i.promise(a),e&&e.call(a,a),a},when:function(e){var t=arguments.length,n=t,r=Array(n),i=u.call(arguments),a=E.Deferred(),o=function(e){return function(n){r[e]=this,i[e]=arguments.length>1?u.call(arguments):n,--t||a.resolveWith(r,i)}};if(t<=1&&(U(e,a.done(o(n)).resolve,a.reject,!t),"pending"===a.state()||m(i[n]&&i[n].then)))return a.then();for(;n--;)U(i[n],o(n),a.reject);return a.promise()}});var B=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;E.Deferred.exceptionHook=function(e,t){r.console&&r.console.warn&&e&&B.test(e.name)&&r.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},E.readyException=function(e){r.setTimeout((function(){throw e}))};var z=E.Deferred();function H(){b.removeEventListener("DOMContentLoaded",H),r.removeEventListener("load",H),E.ready()}E.fn.ready=function(e){return z.then(e).catch((function(e){E.readyException(e)})),this},E.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--E.readyWait:E.isReady)||(E.isReady=!0,!0!==e&&--E.readyWait>0||z.resolveWith(b,[E]))}}),E.ready.then=z.then,"complete"===b.readyState||"loading"!==b.readyState&&!b.documentElement.doScroll?r.setTimeout(E.ready):(b.addEventListener("DOMContentLoaded",H),r.addEventListener("load",H));var K=function e(t,n,r,i,a,o,u){var s=0,l=t.length,c=null==r;if("object"===_(r))for(s in a=!0,r)e(t,n,s,r[s],!0,o,u);else if(void 0!==i&&(a=!0,m(i)||(u=!0),c&&(u?(n.call(t,i),n=null):(c=n,n=function(e,t,n){return c.call(E(e),n)})),n))for(;s<l;s++)n(t[s],r,u?i:i.call(t[s],s,n(t[s],r)));return a?t:c?n.call(t):l?n(t[0],r):o},G=/^-ms-/,W=/-([a-z])/g;function Q(e,t){return t.toUpperCase()}function $(e){return e.replace(G,"ms-").replace(W,Q)}var Y=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function X(){this.expando=E.expando+X.uid++}X.uid=1,X.prototype={cache:function(e){var t=e[this.expando];return t||(t={},Y(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r,i=this.cache(e);if("string"===typeof t)i[$(t)]=n;else for(r in t)i[$(r)]=t[r];return i},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][$(t)]},access:function(e,t,n){return void 0===t||t&&"string"===typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r=e[this.expando];if(void 0!==r){if(void 0!==t){n=(t=Array.isArray(t)?t.map($):(t=$(t))in r?[t]:t.match(F)||[]).length;for(;n--;)delete r[t[n]]}(void 0===t||E.isEmptyObject(r))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!E.isEmptyObject(t)}};var J=new X,Z=new X,ee=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,te=/[A-Z]/g;function ne(e,t,n){var r;if(void 0===n&&1===e.nodeType)if(r="data-"+t.replace(te,"-$&").toLowerCase(),"string"===typeof(n=e.getAttribute(r))){try{n=function(e){return"true"===e||"false"!==e&&("null"===e?null:e===+e+""?+e:ee.test(e)?JSON.parse(e):e)}(n)}catch(i){}Z.set(e,t,n)}else n=void 0;return n}E.extend({hasData:function(e){return Z.hasData(e)||J.hasData(e)},data:function(e,t,n){return Z.access(e,t,n)},removeData:function(e,t){Z.remove(e,t)},_data:function(e,t,n){return J.access(e,t,n)},_removeData:function(e,t){J.remove(e,t)}}),E.fn.extend({data:function(e,t){var n,r,i,a=this[0],o=a&&a.attributes;if(void 0===e){if(this.length&&(i=Z.get(a),1===a.nodeType&&!J.get(a,"hasDataAttrs"))){for(n=o.length;n--;)o[n]&&0===(r=o[n].name).indexOf("data-")&&(r=$(r.slice(5)),ne(a,r,i[r]));J.set(a,"hasDataAttrs",!0)}return i}return"object"===typeof e?this.each((function(){Z.set(this,e)})):K(this,(function(t){var n;if(a&&void 0===t)return void 0!==(n=Z.get(a,e))||void 0!==(n=ne(a,e))?n:void 0;this.each((function(){Z.set(this,e,t)}))}),null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each((function(){Z.remove(this,e)}))}}),E.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=J.get(e,t),n&&(!r||Array.isArray(n)?r=J.access(e,t,E.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){var n=E.queue(e,t=t||"fx"),r=n.length,i=n.shift(),a=E._queueHooks(e,t);"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete a.stop,i.call(e,(function(){E.dequeue(e,t)}),a)),!r&&a&&a.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return J.get(e,n)||J.access(e,n,{empty:E.Callbacks("once memory").add((function(){J.remove(e,[t+"queue",n])}))})}}),E.fn.extend({queue:function(e,t){var n=2;return"string"!==typeof e&&(t=e,e="fx",n--),arguments.length<n?E.queue(this[0],e):void 0===t?this:this.each((function(){var n=E.queue(this,e,t);E._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&E.dequeue(this,e)}))},dequeue:function(e){return this.each((function(){E.dequeue(this,e)}))},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=E.Deferred(),a=this,o=this.length,u=function(){--r||i.resolveWith(a,[a])};for("string"!==typeof e&&(t=e,e=void 0),e=e||"fx";o--;)(n=J.get(a[o],e+"queueHooks"))&&n.empty&&(r++,n.empty.add(u));return u(),i.promise(t)}});var re=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ie=new RegExp("^(?:([+-])=|)("+re+")([a-z%]*)$","i"),ae=["Top","Right","Bottom","Left"],oe=b.documentElement,ue=function(e){return E.contains(e.ownerDocument,e)},se={composed:!0};oe.getRootNode&&(ue=function(e){return E.contains(e.ownerDocument,e)||e.getRootNode(se)===e.ownerDocument});var le=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&ue(e)&&"none"===E.css(e,"display")};function ce(e,t,n,r){var i,a,o=20,u=r?function(){return r.cur()}:function(){return E.css(e,t,"")},s=u(),l=n&&n[3]||(E.cssNumber[t]?"":"px"),c=e.nodeType&&(E.cssNumber[t]||"px"!==l&&+s)&&ie.exec(E.css(e,t));if(c&&c[3]!==l){for(s/=2,l=l||c[3],c=+s||1;o--;)E.style(e,t,c+l),(1-a)*(1-(a=u()/s||.5))<=0&&(o=0),c/=a;E.style(e,t,(c*=2)+l),n=n||[]}return n&&(c=+c||+s||0,i=n[1]?c+(n[1]+1)*n[2]:+n[2],r&&(r.unit=l,r.start=c,r.end=i)),i}var fe={};function he(e){var t,n=e.ownerDocument,r=e.nodeName,i=fe[r];return i||(t=n.body.appendChild(n.createElement(r)),i=E.css(t,"display"),t.parentNode.removeChild(t),"none"===i&&(i="block"),fe[r]=i,i)}function de(e,t){for(var n,r,i=[],a=0,o=e.length;a<o;a++)(r=e[a]).style&&(n=r.style.display,t?("none"===n&&(i[a]=J.get(r,"display")||null,i[a]||(r.style.display="")),""===r.style.display&&le(r)&&(i[a]=he(r))):"none"!==n&&(i[a]="none",J.set(r,"display",n)));for(a=0;a<o;a++)null!=i[a]&&(e[a].style.display=i[a]);return e}E.fn.extend({show:function(){return de(this,!0)},hide:function(){return de(this)},toggle:function(e){return"boolean"===typeof e?e?this.show():this.hide():this.each((function(){le(this)?E(this).show():E(this).hide()}))}});var pe=/^(?:checkbox|radio)$/i,ve=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,ye=/^$|^module$|\/(?:java|ecma)script/i;!function(){var e=b.createDocumentFragment().appendChild(b.createElement("div")),t=b.createElement("input");t.setAttribute("type","radio"),t.setAttribute("checked","checked"),t.setAttribute("name","t"),e.appendChild(t),y.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,e.innerHTML="<textarea>x</textarea>",y.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue,e.innerHTML="<option></option>",y.option=!!e.lastChild}();var me={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function ge(e,t){var n;return n="undefined"!==typeof e.getElementsByTagName?e.getElementsByTagName(t||"*"):"undefined"!==typeof e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&D(e,t)?E.merge([e],n):n}function be(e,t){for(var n=0,r=e.length;n<r;n++)J.set(e[n],"globalEval",!t||J.get(t[n],"globalEval"))}me.tbody=me.tfoot=me.colgroup=me.caption=me.thead,me.th=me.td,y.option||(me.optgroup=me.option=[1,"<select multiple='multiple'>","</select>"]);var we=/<|&#?\w+;/;function ke(e,t,n,r,i){for(var a,o,u,s,l,c,f=t.createDocumentFragment(),h=[],d=0,p=e.length;d<p;d++)if((a=e[d])||0===a)if("object"===_(a))E.merge(h,a.nodeType?[a]:a);else if(we.test(a)){for(o=o||f.appendChild(t.createElement("div")),u=(ve.exec(a)||["",""])[1].toLowerCase(),s=me[u]||me._default,o.innerHTML=s[1]+E.htmlPrefilter(a)+s[2],c=s[0];c--;)o=o.lastChild;E.merge(h,o.childNodes),(o=f.firstChild).textContent=""}else h.push(t.createTextNode(a));for(f.textContent="",d=0;a=h[d++];)if(r&&E.inArray(a,r)>-1)i&&i.push(a);else if(l=ue(a),o=ge(f.appendChild(a),"script"),l&&be(o),n)for(c=0;a=o[c++];)ye.test(a.type||"")&&n.push(a);return f}var _e=/^([^.]*)(?:\.(.+)|)/;function xe(){return!0}function Ee(){return!1}function Te(e,t){return e===function(){try{return b.activeElement}catch(e){}}()===("focus"===t)}function Se(e,t,n,r,i,a){var o,u;if("object"===typeof t){for(u in"string"!==typeof n&&(r=r||n,n=void 0),t)Se(e,u,n,r,t[u],a);return e}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&("string"===typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),!1===i)i=Ee;else if(!i)return e;return 1===a&&(o=i,i=function(e){return E().off(e),o.apply(this,arguments)},i.guid=o.guid||(o.guid=E.guid++)),e.each((function(){E.event.add(this,t,i,r,n)}))}function Ie(e,t,n){n?(J.set(e,t,!1),E.event.add(e,t,{namespace:!1,handler:function(e){var r,i,a=J.get(this,t);if(1&e.isTrigger&&this[t]){if(a.length)(E.event.special[t]||{}).delegateType&&e.stopPropagation();else if(a=u.call(arguments),J.set(this,t,a),r=n(this,t),this[t](),a!==(i=J.get(this,t))||r?J.set(this,t,!1):i={},a!==i)return e.stopImmediatePropagation(),e.preventDefault(),i&&i.value}else a.length&&(J.set(this,t,{value:E.event.trigger(E.extend(a[0],E.Event.prototype),a.slice(1),this)}),e.stopImmediatePropagation())}})):void 0===J.get(e,t)&&E.event.add(e,t,xe)}E.event={global:{},add:function(e,t,n,r,i){var a,o,u,s,l,c,f,h,d,p,v,y=J.get(e);if(Y(e))for(n.handler&&(n=(a=n).handler,i=a.selector),i&&E.find.matchesSelector(oe,i),n.guid||(n.guid=E.guid++),(s=y.events)||(s=y.events=Object.create(null)),(o=y.handle)||(o=y.handle=function(t){return E.event.triggered!==t.type?E.event.dispatch.apply(e,arguments):void 0}),l=(t=(t||"").match(F)||[""]).length;l--;)d=v=(u=_e.exec(t[l])||[])[1],p=(u[2]||"").split(".").sort(),d&&(f=E.event.special[d]||{},d=(i?f.delegateType:f.bindType)||d,f=E.event.special[d]||{},c=E.extend({type:d,origType:v,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&E.expr.match.needsContext.test(i),namespace:p.join(".")},a),(h=s[d])||((h=s[d]=[]).delegateCount=0,f.setup&&!1!==f.setup.call(e,r,p,o)||e.addEventListener&&e.addEventListener(d,o)),f.add&&(f.add.call(e,c),c.handler.guid||(c.handler.guid=n.guid)),i?h.splice(h.delegateCount++,0,c):h.push(c),E.event.global[d]=!0)},remove:function(e,t,n,r,i){var a,o,u,s,l,c,f,h,d,p,v,y=J.hasData(e)&&J.get(e);if(y&&(s=y.events)){for(l=(t=(t||"").match(F)||[""]).length;l--;)if(d=v=(u=_e.exec(t[l])||[])[1],p=(u[2]||"").split(".").sort(),d){for(f=E.event.special[d]||{},h=s[d=(r?f.delegateType:f.bindType)||d]||[],u=u[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),o=a=h.length;a--;)c=h[a],!i&&v!==c.origType||n&&n.guid!==c.guid||u&&!u.test(c.namespace)||r&&r!==c.selector&&("**"!==r||!c.selector)||(h.splice(a,1),c.selector&&h.delegateCount--,f.remove&&f.remove.call(e,c));o&&!h.length&&(f.teardown&&!1!==f.teardown.call(e,p,y.handle)||E.removeEvent(e,d,y.handle),delete s[d])}else for(d in s)E.event.remove(e,d+t[l],n,r,!0);E.isEmptyObject(s)&&J.remove(e,"handle events")}},dispatch:function(e){var t,n,r,i,a,o,u=new Array(arguments.length),s=E.event.fix(e),l=(J.get(this,"events")||Object.create(null))[s.type]||[],c=E.event.special[s.type]||{};for(u[0]=s,t=1;t<arguments.length;t++)u[t]=arguments[t];if(s.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,s)){for(o=E.event.handlers.call(this,s,l),t=0;(i=o[t++])&&!s.isPropagationStopped();)for(s.currentTarget=i.elem,n=0;(a=i.handlers[n++])&&!s.isImmediatePropagationStopped();)s.rnamespace&&!1!==a.namespace&&!s.rnamespace.test(a.namespace)||(s.handleObj=a,s.data=a.data,void 0!==(r=((E.event.special[a.origType]||{}).handle||a.handler).apply(i.elem,u))&&!1===(s.result=r)&&(s.preventDefault(),s.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,s),s.result}},handlers:function(e,t){var n,r,i,a,o,u=[],s=t.delegateCount,l=e.target;if(s&&l.nodeType&&!("click"===e.type&&e.button>=1))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&("click"!==e.type||!0!==l.disabled)){for(a=[],o={},n=0;n<s;n++)void 0===o[i=(r=t[n]).selector+" "]&&(o[i]=r.needsContext?E(i,this).index(l)>-1:E.find(i,this,null,[l]).length),o[i]&&a.push(r);a.length&&u.push({elem:l,handlers:a})}return l=this,s<t.length&&u.push({elem:l,handlers:t.slice(s)}),u},addProp:function(e,t){Object.defineProperty(E.Event.prototype,e,{enumerable:!0,configurable:!0,get:m(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[E.expando]?e:new E.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return pe.test(t.type)&&t.click&&D(t,"input")&&Ie(t,"click",xe),!1},trigger:function(e){var t=this||e;return pe.test(t.type)&&t.click&&D(t,"input")&&Ie(t,"click"),!0},_default:function(e){var t=e.target;return pe.test(t.type)&&t.click&&D(t,"input")&&J.get(t,"click")||D(t,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},E.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},(E.Event=function(e,t){if(!(this instanceof E.Event))return new E.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?xe:Ee,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&E.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[E.expando]=!0}).prototype={constructor:E.Event,isDefaultPrevented:Ee,isPropagationStopped:Ee,isImmediatePropagationStopped:Ee,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=xe,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=xe,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=xe,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},E.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},E.event.addProp),E.each({focus:"focusin",blur:"focusout"},(function(e,t){E.event.special[e]={setup:function(){return Ie(this,e,Te),!1},trigger:function(){return Ie(this,e),!0},_default:function(){return!0},delegateType:t}})),E.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},(function(e,t){E.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,a=e.handleObj;return i&&(i===r||E.contains(r,i))||(e.type=a.origType,n=a.handler.apply(this,arguments),e.type=t),n}}})),E.fn.extend({on:function(e,t,n,r){return Se(this,e,t,n,r)},one:function(e,t,n,r){return Se(this,e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,E(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"===typeof e){for(i in e)this.off(i,t,e[i]);return this}return!1!==t&&"function"!==typeof t||(n=t,t=void 0),!1===n&&(n=Ee),this.each((function(){E.event.remove(this,e,n,t)}))}});var Ce=/<script|<style|<link/i,Ae=/checked\s*(?:[^=]|=\s*.checked.)/i,De=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Ne(e,t){return D(e,"table")&&D(11!==t.nodeType?t:t.firstChild,"tr")&&E(e).children("tbody")[0]||e}function Pe(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function Oe(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function Le(e,t){var n,r,i,a,o,u;if(1===t.nodeType){if(J.hasData(e)&&(u=J.get(e).events))for(i in J.remove(t,"handle events"),u)for(n=0,r=u[i].length;n<r;n++)E.event.add(t,i,u[i][n]);Z.hasData(e)&&(a=Z.access(e),o=E.extend({},a),Z.set(t,o))}}function Re(e,t){var n=t.nodeName.toLowerCase();"input"===n&&pe.test(e.type)?t.checked=e.checked:"input"!==n&&"textarea"!==n||(t.defaultValue=e.defaultValue)}function je(e,t,n,r){t=s(t);var i,a,o,u,l,c,f=0,h=e.length,d=h-1,p=t[0],v=m(p);if(v||h>1&&"string"===typeof p&&!y.checkClone&&Ae.test(p))return e.each((function(i){var a=e.eq(i);v&&(t[0]=p.call(this,i,a.html())),je(a,t,n,r)}));if(h&&(a=(i=ke(t,e[0].ownerDocument,!1,e,r)).firstChild,1===i.childNodes.length&&(i=a),a||r)){for(u=(o=E.map(ge(i,"script"),Pe)).length;f<h;f++)l=i,f!==d&&(l=E.clone(l,!0,!0),u&&E.merge(o,ge(l,"script"))),n.call(e[f],l,f);if(u)for(c=o[o.length-1].ownerDocument,E.map(o,Oe),f=0;f<u;f++)l=o[f],ye.test(l.type||"")&&!J.access(l,"globalEval")&&E.contains(c,l)&&(l.src&&"module"!==(l.type||"").toLowerCase()?E._evalUrl&&!l.noModule&&E._evalUrl(l.src,{nonce:l.nonce||l.getAttribute("nonce")},c):k(l.textContent.replace(De,""),l,c))}return e}function Me(e,t,n){for(var r,i=t?E.filter(t,e):e,a=0;null!=(r=i[a]);a++)n||1!==r.nodeType||E.cleanData(ge(r)),r.parentNode&&(n&&ue(r)&&be(ge(r,"script")),r.parentNode.removeChild(r));return e}E.extend({htmlPrefilter:function(e){return e},clone:function(e,t,n){var r,i,a,o,u=e.cloneNode(!0),s=ue(e);if(!y.noCloneChecked&&(1===e.nodeType||11===e.nodeType)&&!E.isXMLDoc(e))for(o=ge(u),r=0,i=(a=ge(e)).length;r<i;r++)Re(a[r],o[r]);if(t)if(n)for(a=a||ge(e),o=o||ge(u),r=0,i=a.length;r<i;r++)Le(a[r],o[r]);else Le(e,u);return(o=ge(u,"script")).length>0&&be(o,!s&&ge(e,"script")),u},cleanData:function(e){for(var t,n,r,i=E.event.special,a=0;void 0!==(n=e[a]);a++)if(Y(n)){if(t=n[J.expando]){if(t.events)for(r in t.events)i[r]?E.event.remove(n,r):E.removeEvent(n,r,t.handle);n[J.expando]=void 0}n[Z.expando]&&(n[Z.expando]=void 0)}}}),E.fn.extend({detach:function(e){return Me(this,e,!0)},remove:function(e){return Me(this,e)},text:function(e){return K(this,(function(e){return void 0===e?E.text(this):this.empty().each((function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)}))}),null,e,arguments.length)},append:function(){return je(this,arguments,(function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Ne(this,e).appendChild(e)}))},prepend:function(){return je(this,arguments,(function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Ne(this,e);t.insertBefore(e,t.firstChild)}}))},before:function(){return je(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this)}))},after:function(){return je(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)}))},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(E.cleanData(ge(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map((function(){return E.clone(this,e,t)}))},html:function(e){return K(this,(function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"===typeof e&&!Ce.test(e)&&!me[(ve.exec(e)||["",""])[1].toLowerCase()]){e=E.htmlPrefilter(e);try{for(;n<r;n++)1===(t=this[n]||{}).nodeType&&(E.cleanData(ge(t,!1)),t.innerHTML=e);t=0}catch(i){}}t&&this.empty().append(e)}),null,e,arguments.length)},replaceWith:function(){var e=[];return je(this,arguments,(function(t){var n=this.parentNode;E.inArray(this,e)<0&&(E.cleanData(ge(this)),n&&n.replaceChild(t,this))}),e)}}),E.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(e,t){E.fn[e]=function(e){for(var n,r=[],i=E(e),a=i.length-1,o=0;o<=a;o++)n=o===a?this:this.clone(!0),E(i[o])[t](n),l.apply(r,n.get());return this.pushStack(r)}}));var Fe=new RegExp("^("+re+")(?!px)[a-z%]+$","i"),qe=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=r),t.getComputedStyle(e)},Ve=function(e,t,n){var r,i,a={};for(i in t)a[i]=e.style[i],e.style[i]=t[i];for(i in r=n.call(e),t)e.style[i]=a[i];return r},Ue=new RegExp(ae.join("|"),"i");function Be(e,t,n){var r,i,a,o,u=e.style;return(n=n||qe(e))&&(""!==(o=n.getPropertyValue(t)||n[t])||ue(e)||(o=E.style(e,t)),!y.pixelBoxStyles()&&Fe.test(o)&&Ue.test(t)&&(r=u.width,i=u.minWidth,a=u.maxWidth,u.minWidth=u.maxWidth=u.width=o,o=n.width,u.width=r,u.minWidth=i,u.maxWidth=a)),void 0!==o?o+"":o}function ze(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function e(){if(c){l.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",c.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",oe.appendChild(l).appendChild(c);var e=r.getComputedStyle(c);n="1%"!==e.top,s=12===t(e.marginLeft),c.style.right="60%",o=36===t(e.right),i=36===t(e.width),c.style.position="absolute",a=12===t(c.offsetWidth/3),oe.removeChild(l),c=null}}function t(e){return Math.round(parseFloat(e))}var n,i,a,o,u,s,l=b.createElement("div"),c=b.createElement("div");c.style&&(c.style.backgroundClip="content-box",c.cloneNode(!0).style.backgroundClip="",y.clearCloneStyle="content-box"===c.style.backgroundClip,E.extend(y,{boxSizingReliable:function(){return e(),i},pixelBoxStyles:function(){return e(),o},pixelPosition:function(){return e(),n},reliableMarginLeft:function(){return e(),s},scrollboxSize:function(){return e(),a},reliableTrDimensions:function(){var e,t,n,i;return null==u&&(e=b.createElement("table"),t=b.createElement("tr"),n=b.createElement("div"),e.style.cssText="position:absolute;left:-11111px;border-collapse:separate",t.style.cssText="border:1px solid",t.style.height="1px",n.style.height="9px",n.style.display="block",oe.appendChild(e).appendChild(t).appendChild(n),i=r.getComputedStyle(t),u=parseInt(i.height,10)+parseInt(i.borderTopWidth,10)+parseInt(i.borderBottomWidth,10)===t.offsetHeight,oe.removeChild(e)),u}}))}();var He=["Webkit","Moz","ms"],Ke=b.createElement("div").style,Ge={};function We(e){var t=E.cssProps[e]||Ge[e];return t||(e in Ke?e:Ge[e]=function(e){for(var t=e[0].toUpperCase()+e.slice(1),n=He.length;n--;)if((e=He[n]+t)in Ke)return e}(e)||e)}var Qe=/^(none|table(?!-c[ea]).+)/,$e=/^--/,Ye={position:"absolute",visibility:"hidden",display:"block"},Xe={letterSpacing:"0",fontWeight:"400"};function Je(e,t,n){var r=ie.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):t}function Ze(e,t,n,r,i,a){var o="width"===t?1:0,u=0,s=0;if(n===(r?"border":"content"))return 0;for(;o<4;o+=2)"margin"===n&&(s+=E.css(e,n+ae[o],!0,i)),r?("content"===n&&(s-=E.css(e,"padding"+ae[o],!0,i)),"margin"!==n&&(s-=E.css(e,"border"+ae[o]+"Width",!0,i))):(s+=E.css(e,"padding"+ae[o],!0,i),"padding"!==n?s+=E.css(e,"border"+ae[o]+"Width",!0,i):u+=E.css(e,"border"+ae[o]+"Width",!0,i));return!r&&a>=0&&(s+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-a-s-u-.5))||0),s}function et(e,t,n){var r=qe(e),i=(!y.boxSizingReliable()||n)&&"border-box"===E.css(e,"boxSizing",!1,r),a=i,o=Be(e,t,r),u="offset"+t[0].toUpperCase()+t.slice(1);if(Fe.test(o)){if(!n)return o;o="auto"}return(!y.boxSizingReliable()&&i||!y.reliableTrDimensions()&&D(e,"tr")||"auto"===o||!parseFloat(o)&&"inline"===E.css(e,"display",!1,r))&&e.getClientRects().length&&(i="border-box"===E.css(e,"boxSizing",!1,r),(a=u in e)&&(o=e[u])),(o=parseFloat(o)||0)+Ze(e,t,n||(i?"border":"content"),a,r,o)+"px"}function tt(e,t,n,r,i){return new tt.prototype.init(e,t,n,r,i)}E.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Be(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,a,o,u=$(t),s=$e.test(t),l=e.style;if(s||(t=We(u)),o=E.cssHooks[t]||E.cssHooks[u],void 0===n)return o&&"get"in o&&void 0!==(i=o.get(e,!1,r))?i:l[t];"string"===(a=typeof n)&&(i=ie.exec(n))&&i[1]&&(n=ce(e,t,i),a="number"),null!=n&&n===n&&("number"!==a||s||(n+=i&&i[3]||(E.cssNumber[u]?"":"px")),y.clearCloneStyle||""!==n||0!==t.indexOf("background")||(l[t]="inherit"),o&&"set"in o&&void 0===(n=o.set(e,n,r))||(s?l.setProperty(t,n):l[t]=n))}},css:function(e,t,n,r){var i,a,o,u=$(t);return $e.test(t)||(t=We(u)),(o=E.cssHooks[t]||E.cssHooks[u])&&"get"in o&&(i=o.get(e,!0,n)),void 0===i&&(i=Be(e,t,r)),"normal"===i&&t in Xe&&(i=Xe[t]),""===n||n?(a=parseFloat(i),!0===n||isFinite(a)?a||0:i):i}}),E.each(["height","width"],(function(e,t){E.cssHooks[t]={get:function(e,n,r){if(n)return!Qe.test(E.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?et(e,t,r):Ve(e,Ye,(function(){return et(e,t,r)}))},set:function(e,n,r){var i,a=qe(e),o=!y.scrollboxSize()&&"absolute"===a.position,u=(o||r)&&"border-box"===E.css(e,"boxSizing",!1,a),s=r?Ze(e,t,r,u,a):0;return u&&o&&(s-=Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(a[t])-Ze(e,t,"border",!1,a)-.5)),s&&(i=ie.exec(n))&&"px"!==(i[3]||"px")&&(e.style[t]=n,n=E.css(e,t)),Je(0,n,s)}}})),E.cssHooks.marginLeft=ze(y.reliableMarginLeft,(function(e,t){if(t)return(parseFloat(Be(e,"marginLeft"))||e.getBoundingClientRect().left-Ve(e,{marginLeft:0},(function(){return e.getBoundingClientRect().left})))+"px"})),E.each({margin:"",padding:"",border:"Width"},(function(e,t){E.cssHooks[e+t]={expand:function(n){for(var r=0,i={},a="string"===typeof n?n.split(" "):[n];r<4;r++)i[e+ae[r]+t]=a[r]||a[r-2]||a[0];return i}},"margin"!==e&&(E.cssHooks[e+t].set=Je)})),E.fn.extend({css:function(e,t){return K(this,(function(e,t,n){var r,i,a={},o=0;if(Array.isArray(t)){for(r=qe(e),i=t.length;o<i;o++)a[t[o]]=E.css(e,t[o],!1,r);return a}return void 0!==n?E.style(e,t,n):E.css(e,t)}),e,t,arguments.length>1)}}),E.Tween=tt,tt.prototype={constructor:tt,init:function(e,t,n,r,i,a){this.elem=e,this.prop=n,this.easing=i||E.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=a||(E.cssNumber[n]?"":"px")},cur:function(){var e=tt.propHooks[this.prop];return e&&e.get?e.get(this):tt.propHooks._default.get(this)},run:function(e){var t,n=tt.propHooks[this.prop];return this.options.duration?this.pos=t=E.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):tt.propHooks._default.set(this),this}},tt.prototype.init.prototype=tt.prototype,tt.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=E.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){E.fx.step[e.prop]?E.fx.step[e.prop](e):1!==e.elem.nodeType||!E.cssHooks[e.prop]&&null==e.elem.style[We(e.prop)]?e.elem[e.prop]=e.now:E.style(e.elem,e.prop,e.now+e.unit)}}},tt.propHooks.scrollTop=tt.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},E.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},(E.fx=tt.prototype.init).step={};var nt,rt,it=/^(?:toggle|show|hide)$/,at=/queueHooks$/;function ot(){rt&&(!1===b.hidden&&r.requestAnimationFrame?r.requestAnimationFrame(ot):r.setTimeout(ot,E.fx.interval),E.fx.tick())}function ut(){return r.setTimeout((function(){nt=void 0})),nt=Date.now()}function st(e,t){var n,r=0,i={height:e};for(t=t?1:0;r<4;r+=2-t)i["margin"+(n=ae[r])]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function lt(e,t,n){for(var r,i=(ct.tweeners[t]||[]).concat(ct.tweeners["*"]),a=0,o=i.length;a<o;a++)if(r=i[a].call(n,t,e))return r}function ct(e,t,n){var r,i,a=0,o=ct.prefilters.length,u=E.Deferred().always((function(){delete s.elem})),s=function(){if(i)return!1;for(var t=nt||ut(),n=Math.max(0,l.startTime+l.duration-t),r=1-(n/l.duration||0),a=0,o=l.tweens.length;a<o;a++)l.tweens[a].run(r);return u.notifyWith(e,[l,r,n]),r<1&&o?n:(o||u.notifyWith(e,[l,1,0]),u.resolveWith(e,[l]),!1)},l=u.promise({elem:e,props:E.extend({},t),opts:E.extend(!0,{specialEasing:{},easing:E.easing._default},n),originalProperties:t,originalOptions:n,startTime:nt||ut(),duration:n.duration,tweens:[],createTween:function(t,n){var r=E.Tween(e,l.opts,t,n,l.opts.specialEasing[t]||l.opts.easing);return l.tweens.push(r),r},stop:function(t){var n=0,r=t?l.tweens.length:0;if(i)return this;for(i=!0;n<r;n++)l.tweens[n].run(1);return t?(u.notifyWith(e,[l,1,0]),u.resolveWith(e,[l,t])):u.rejectWith(e,[l,t]),this}}),c=l.props;for(!function(e,t){var n,r,i,a,o;for(n in e)if(i=t[r=$(n)],a=e[n],Array.isArray(a)&&(i=a[1],a=e[n]=a[0]),n!==r&&(e[r]=a,delete e[n]),(o=E.cssHooks[r])&&"expand"in o)for(n in a=o.expand(a),delete e[r],a)n in e||(e[n]=a[n],t[n]=i);else t[r]=i}(c,l.opts.specialEasing);a<o;a++)if(r=ct.prefilters[a].call(l,e,c,l.opts))return m(r.stop)&&(E._queueHooks(l.elem,l.opts.queue).stop=r.stop.bind(r)),r;return E.map(c,lt,l),m(l.opts.start)&&l.opts.start.call(e,l),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always),E.fx.timer(E.extend(s,{elem:e,anim:l,queue:l.opts.queue})),l}E.Animation=E.extend(ct,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return ce(n.elem,e,ie.exec(t),n),n}]},tweener:function(e,t){m(e)?(t=e,e=["*"]):e=e.match(F);for(var n,r=0,i=e.length;r<i;r++)n=e[r],ct.tweeners[n]=ct.tweeners[n]||[],ct.tweeners[n].unshift(t)},prefilters:[function(e,t,n){var r,i,a,o,u,s,l,c,f="width"in t||"height"in t,h=this,d={},p=e.style,v=e.nodeType&&le(e),y=J.get(e,"fxshow");for(r in n.queue||(null==(o=E._queueHooks(e,"fx")).unqueued&&(o.unqueued=0,u=o.empty.fire,o.empty.fire=function(){o.unqueued||u()}),o.unqueued++,h.always((function(){h.always((function(){o.unqueued--,E.queue(e,"fx").length||o.empty.fire()}))}))),t)if(i=t[r],it.test(i)){if(delete t[r],a=a||"toggle"===i,i===(v?"hide":"show")){if("show"!==i||!y||void 0===y[r])continue;v=!0}d[r]=y&&y[r]||E.style(e,r)}if((s=!E.isEmptyObject(t))||!E.isEmptyObject(d))for(r in f&&1===e.nodeType&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],null==(l=y&&y.display)&&(l=J.get(e,"display")),"none"===(c=E.css(e,"display"))&&(l?c=l:(de([e],!0),l=e.style.display||l,c=E.css(e,"display"),de([e]))),("inline"===c||"inline-block"===c&&null!=l)&&"none"===E.css(e,"float")&&(s||(h.done((function(){p.display=l})),null==l&&(c=p.display,l="none"===c?"":c)),p.display="inline-block")),n.overflow&&(p.overflow="hidden",h.always((function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]}))),s=!1,d)s||(y?"hidden"in y&&(v=y.hidden):y=J.access(e,"fxshow",{display:l}),a&&(y.hidden=!v),v&&de([e],!0),h.done((function(){for(r in v||de([e]),J.remove(e,"fxshow"),d)E.style(e,r,d[r])}))),s=lt(v?y[r]:0,r,h),r in y||(y[r]=s.start,v&&(s.end=s.start,s.start=0))}],prefilter:function(e,t){t?ct.prefilters.unshift(e):ct.prefilters.push(e)}}),E.speed=function(e,t,n){var r=e&&"object"===typeof e?E.extend({},e):{complete:n||!n&&t||m(e)&&e,duration:e,easing:n&&t||t&&!m(t)&&t};return E.fx.off?r.duration=0:"number"!==typeof r.duration&&(r.duration in E.fx.speeds?r.duration=E.fx.speeds[r.duration]:r.duration=E.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){m(r.old)&&r.old.call(this),r.queue&&E.dequeue(this,r.queue)},r},E.fn.extend({fadeTo:function(e,t,n,r){return this.filter(le).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=E.isEmptyObject(e),a=E.speed(t,n,r),o=function(){var t=ct(this,E.extend({},e),a);(i||J.get(this,"finish"))&&t.stop(!0)};return o.finish=o,i||!1===a.queue?this.each(o):this.queue(a.queue,o)},stop:function(e,t,n){var r=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!==typeof e&&(n=t,t=e,e=void 0),t&&this.queue(e||"fx",[]),this.each((function(){var t=!0,i=null!=e&&e+"queueHooks",a=E.timers,o=J.get(this);if(i)o[i]&&o[i].stop&&r(o[i]);else for(i in o)o[i]&&o[i].stop&&at.test(i)&&r(o[i]);for(i=a.length;i--;)a[i].elem!==this||null!=e&&a[i].queue!==e||(a[i].anim.stop(n),t=!1,a.splice(i,1));!t&&n||E.dequeue(this,e)}))},finish:function(e){return!1!==e&&(e=e||"fx"),this.each((function(){var t,n=J.get(this),r=n[e+"queue"],i=n[e+"queueHooks"],a=E.timers,o=r?r.length:0;for(n.finish=!0,E.queue(this,e,[]),i&&i.stop&&i.stop.call(this,!0),t=a.length;t--;)a[t].elem===this&&a[t].queue===e&&(a[t].anim.stop(!0),a.splice(t,1));for(t=0;t<o;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish}))}}),E.each(["toggle","show","hide"],(function(e,t){var n=E.fn[t];E.fn[t]=function(e,r,i){return null==e||"boolean"===typeof e?n.apply(this,arguments):this.animate(st(t,!0),e,r,i)}})),E.each({slideDown:st("show"),slideUp:st("hide"),slideToggle:st("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},(function(e,t){E.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}})),E.timers=[],E.fx.tick=function(){var e,t=0,n=E.timers;for(nt=Date.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||E.fx.stop(),nt=void 0},E.fx.timer=function(e){E.timers.push(e),E.fx.start()},E.fx.interval=13,E.fx.start=function(){rt||(rt=!0,ot())},E.fx.stop=function(){rt=null},E.fx.speeds={slow:600,fast:200,_default:400},E.fn.delay=function(e,t){return e=E.fx&&E.fx.speeds[e]||e,t=t||"fx",this.queue(t,(function(t,n){var i=r.setTimeout(t,e);n.stop=function(){r.clearTimeout(i)}}))},function(){var e=b.createElement("input"),t=b.createElement("select").appendChild(b.createElement("option"));e.type="checkbox",y.checkOn=""!==e.value,y.optSelected=t.selected,(e=b.createElement("input")).value="t",e.type="radio",y.radioValue="t"===e.value}();var ft,ht=E.expr.attrHandle;E.fn.extend({attr:function(e,t){return K(this,E.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each((function(){E.removeAttr(this,e)}))}}),E.extend({attr:function(e,t,n){var r,i,a=e.nodeType;if(3!==a&&8!==a&&2!==a)return"undefined"===typeof e.getAttribute?E.prop(e,t,n):(1===a&&E.isXMLDoc(e)||(i=E.attrHooks[t.toLowerCase()]||(E.expr.match.bool.test(t)?ft:void 0)),void 0!==n?null===n?void E.removeAttr(e,t):i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:(e.setAttribute(t,n+""),n):i&&"get"in i&&null!==(r=i.get(e,t))?r:null==(r=E.find.attr(e,t))?void 0:r)},attrHooks:{type:{set:function(e,t){if(!y.radioValue&&"radio"===t&&D(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r=0,i=t&&t.match(F);if(i&&1===e.nodeType)for(;n=i[r++];)e.removeAttribute(n)}}),ft={set:function(e,t,n){return!1===t?E.removeAttr(e,n):e.setAttribute(n,n),n}},E.each(E.expr.match.bool.source.match(/\w+/g),(function(e,t){var n=ht[t]||E.find.attr;ht[t]=function(e,t,r){var i,a,o=t.toLowerCase();return r||(a=ht[o],ht[o]=i,i=null!=n(e,t,r)?o:null,ht[o]=a),i}}));var dt=/^(?:input|select|textarea|button)$/i,pt=/^(?:a|area)$/i;function vt(e){return(e.match(F)||[]).join(" ")}function yt(e){return e.getAttribute&&e.getAttribute("class")||""}function mt(e){return Array.isArray(e)?e:"string"===typeof e&&e.match(F)||[]}E.fn.extend({prop:function(e,t){return K(this,E.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each((function(){delete this[E.propFix[e]||e]}))}}),E.extend({prop:function(e,t,n){var r,i,a=e.nodeType;if(3!==a&&8!==a&&2!==a)return 1===a&&E.isXMLDoc(e)||(t=E.propFix[t]||t,i=E.propHooks[t]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=E.find.attr(e,"tabindex");return t?parseInt(t,10):dt.test(e.nodeName)||pt.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),y.optSelected||(E.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),E.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){E.propFix[this.toLowerCase()]=this})),E.fn.extend({addClass:function(e){var t,n,r,i,a,o,u,s=0;if(m(e))return this.each((function(t){E(this).addClass(e.call(this,t,yt(this)))}));if((t=mt(e)).length)for(;n=this[s++];)if(i=yt(n),r=1===n.nodeType&&" "+vt(i)+" "){for(o=0;a=t[o++];)r.indexOf(" "+a+" ")<0&&(r+=a+" ");i!==(u=vt(r))&&n.setAttribute("class",u)}return this},removeClass:function(e){var t,n,r,i,a,o,u,s=0;if(m(e))return this.each((function(t){E(this).removeClass(e.call(this,t,yt(this)))}));if(!arguments.length)return this.attr("class","");if((t=mt(e)).length)for(;n=this[s++];)if(i=yt(n),r=1===n.nodeType&&" "+vt(i)+" "){for(o=0;a=t[o++];)for(;r.indexOf(" "+a+" ")>-1;)r=r.replace(" "+a+" "," ");i!==(u=vt(r))&&n.setAttribute("class",u)}return this},toggleClass:function(e,t){var n=typeof e,r="string"===n||Array.isArray(e);return"boolean"===typeof t&&r?t?this.addClass(e):this.removeClass(e):m(e)?this.each((function(n){E(this).toggleClass(e.call(this,n,yt(this),t),t)})):this.each((function(){var t,i,a,o;if(r)for(i=0,a=E(this),o=mt(e);t=o[i++];)a.hasClass(t)?a.removeClass(t):a.addClass(t);else void 0!==e&&"boolean"!==n||((t=yt(this))&&J.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||!1===e?"":J.get(this,"__className__")||""))}))},hasClass:function(e){var t,n,r=0;for(t=" "+e+" ";n=this[r++];)if(1===n.nodeType&&(" "+vt(yt(n))+" ").indexOf(t)>-1)return!0;return!1}});var gt=/\r/g;E.fn.extend({val:function(e){var t,n,r,i=this[0];return arguments.length?(r=m(e),this.each((function(n){var i;1===this.nodeType&&(null==(i=r?e.call(this,n,E(this).val()):e)?i="":"number"===typeof i?i+="":Array.isArray(i)&&(i=E.map(i,(function(e){return null==e?"":e+""}))),(t=E.valHooks[this.type]||E.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,i,"value")||(this.value=i))}))):i?(t=E.valHooks[i.type]||E.valHooks[i.nodeName.toLowerCase()])&&"get"in t&&void 0!==(n=t.get(i,"value"))?n:"string"===typeof(n=i.value)?n.replace(gt,""):null==n?"":n:void 0}}),E.extend({valHooks:{option:{get:function(e){var t=E.find.attr(e,"value");return null!=t?t:vt(E.text(e))}},select:{get:function(e){var t,n,r,i=e.options,a=e.selectedIndex,o="select-one"===e.type,u=o?null:[],s=o?a+1:i.length;for(r=a<0?s:o?a:0;r<s;r++)if(((n=i[r]).selected||r===a)&&!n.disabled&&(!n.parentNode.disabled||!D(n.parentNode,"optgroup"))){if(t=E(n).val(),o)return t;u.push(t)}return u},set:function(e,t){for(var n,r,i=e.options,a=E.makeArray(t),o=i.length;o--;)((r=i[o]).selected=E.inArray(E.valHooks.option.get(r),a)>-1)&&(n=!0);return n||(e.selectedIndex=-1),a}}}}),E.each(["radio","checkbox"],(function(){E.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=E.inArray(E(e).val(),t)>-1}},y.checkOn||(E.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})})),y.focusin="onfocusin"in r;var bt=/^(?:focusinfocus|focusoutblur)$/,wt=function(e){e.stopPropagation()};E.extend(E.event,{trigger:function(e,t,n,i){var a,o,u,s,l,c,f,h,p=[n||b],v=d.call(e,"type")?e.type:e,y=d.call(e,"namespace")?e.namespace.split("."):[];if(o=h=u=n=n||b,3!==n.nodeType&&8!==n.nodeType&&!bt.test(v+E.event.triggered)&&(v.indexOf(".")>-1&&(y=v.split("."),v=y.shift(),y.sort()),l=v.indexOf(":")<0&&"on"+v,(e=e[E.expando]?e:new E.Event(v,"object"===typeof e&&e)).isTrigger=i?2:3,e.namespace=y.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+y.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),t=null==t?[e]:E.makeArray(t,[e]),f=E.event.special[v]||{},i||!f.trigger||!1!==f.trigger.apply(n,t))){if(!i&&!f.noBubble&&!g(n)){for(s=f.delegateType||v,bt.test(s+v)||(o=o.parentNode);o;o=o.parentNode)p.push(o),u=o;u===(n.ownerDocument||b)&&p.push(u.defaultView||u.parentWindow||r)}for(a=0;(o=p[a++])&&!e.isPropagationStopped();)h=o,e.type=a>1?s:f.bindType||v,(c=(J.get(o,"events")||Object.create(null))[e.type]&&J.get(o,"handle"))&&c.apply(o,t),(c=l&&o[l])&&c.apply&&Y(o)&&(e.result=c.apply(o,t),!1===e.result&&e.preventDefault());return e.type=v,i||e.isDefaultPrevented()||f._default&&!1!==f._default.apply(p.pop(),t)||!Y(n)||l&&m(n[v])&&!g(n)&&((u=n[l])&&(n[l]=null),E.event.triggered=v,e.isPropagationStopped()&&h.addEventListener(v,wt),n[v](),e.isPropagationStopped()&&h.removeEventListener(v,wt),E.event.triggered=void 0,u&&(n[l]=u)),e.result}},simulate:function(e,t,n){var r=E.extend(new E.Event,n,{type:e,isSimulated:!0});E.event.trigger(r,null,t)}}),E.fn.extend({trigger:function(e,t){return this.each((function(){E.event.trigger(e,t,this)}))},triggerHandler:function(e,t){var n=this[0];if(n)return E.event.trigger(e,t,n,!0)}}),y.focusin||E.each({focus:"focusin",blur:"focusout"},(function(e,t){var n=function(e){E.event.simulate(t,e.target,E.event.fix(e))};E.event.special[t]={setup:function(){var r=this.ownerDocument||this.document||this,i=J.access(r,t);i||r.addEventListener(e,n,!0),J.access(r,t,(i||0)+1)},teardown:function(){var r=this.ownerDocument||this.document||this,i=J.access(r,t)-1;i?J.access(r,t,i):(r.removeEventListener(e,n,!0),J.remove(r,t))}}}));var kt=r.location,_t={guid:Date.now()},xt=/\?/;E.parseXML=function(e){var t,n;if(!e||"string"!==typeof e)return null;try{t=(new r.DOMParser).parseFromString(e,"text/xml")}catch(i){}return n=t&&t.getElementsByTagName("parsererror")[0],t&&!n||E.error("Invalid XML: "+(n?E.map(n.childNodes,(function(e){return e.textContent})).join("\n"):e)),t};var Et=/\[\]$/,Tt=/\r?\n/g,St=/^(?:submit|button|image|reset|file)$/i,It=/^(?:input|select|textarea|keygen)/i;function Ct(e,t,n,r){var i;if(Array.isArray(t))E.each(t,(function(t,i){n||Et.test(e)?r(e,i):Ct(e+"["+("object"===typeof i&&null!=i?t:"")+"]",i,n,r)}));else if(n||"object"!==_(t))r(e,t);else for(i in t)Ct(e+"["+i+"]",t[i],n,r)}E.param=function(e,t){var n,r=[],i=function(e,t){var n=m(t)?t():t;r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(null==e)return"";if(Array.isArray(e)||e.jquery&&!E.isPlainObject(e))E.each(e,(function(){i(this.name,this.value)}));else for(n in e)Ct(n,e[n],t,i);return r.join("&")},E.fn.extend({serialize:function(){return E.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var e=E.prop(this,"elements");return e?E.makeArray(e):this})).filter((function(){var e=this.type;return this.name&&!E(this).is(":disabled")&&It.test(this.nodeName)&&!St.test(e)&&(this.checked||!pe.test(e))})).map((function(e,t){var n=E(this).val();return null==n?null:Array.isArray(n)?E.map(n,(function(e){return{name:t.name,value:e.replace(Tt,"\r\n")}})):{name:t.name,value:n.replace(Tt,"\r\n")}})).get()}});var At=/%20/g,Dt=/#.*$/,Nt=/([?&])_=[^&]*/,Pt=/^(.*?):[ \t]*([^\r\n]*)$/gm,Ot=/^(?:GET|HEAD)$/,Lt=/^\/\//,Rt={},jt={},Mt="*/".concat("*"),Ft=b.createElement("a");function qt(e){return function(t,n){"string"!==typeof t&&(n=t,t="*");var r,i=0,a=t.toLowerCase().match(F)||[];if(m(n))for(;r=a[i++];)"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function Vt(e,t,n,r){var i={},a=e===jt;function o(u){var s;return i[u]=!0,E.each(e[u]||[],(function(e,u){var l=u(t,n,r);return"string"!==typeof l||a||i[l]?a?!(s=l):void 0:(t.dataTypes.unshift(l),o(l),!1)})),s}return o(t.dataTypes[0])||!i["*"]&&o("*")}function Ut(e,t){var n,r,i=E.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((i[n]?e:r||(r={}))[n]=t[n]);return r&&E.extend(!0,e,r),e}Ft.href=kt.href,E.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:kt.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(kt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Mt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":E.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Ut(Ut(e,E.ajaxSettings),t):Ut(E.ajaxSettings,e)},ajaxPrefilter:qt(Rt),ajaxTransport:qt(jt),ajax:function(e,t){"object"===typeof e&&(t=e,e=void 0);var n,i,a,o,u,s,l,c,f,h,d=E.ajaxSetup({},t=t||{}),p=d.context||d,v=d.context&&(p.nodeType||p.jquery)?E(p):E.event,y=E.Deferred(),m=E.Callbacks("once memory"),g=d.statusCode||{},w={},k={},_="canceled",x={readyState:0,getResponseHeader:function(e){var t;if(l){if(!o)for(o={};t=Pt.exec(a);)o[t[1].toLowerCase()+" "]=(o[t[1].toLowerCase()+" "]||[]).concat(t[2]);t=o[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return l?a:null},setRequestHeader:function(e,t){return null==l&&(e=k[e.toLowerCase()]=k[e.toLowerCase()]||e,w[e]=t),this},overrideMimeType:function(e){return null==l&&(d.mimeType=e),this},statusCode:function(e){var t;if(e)if(l)x.always(e[x.status]);else for(t in e)g[t]=[g[t],e[t]];return this},abort:function(e){var t=e||_;return n&&n.abort(t),T(0,t),this}};if(y.promise(x),d.url=((e||d.url||kt.href)+"").replace(Lt,kt.protocol+"//"),d.type=t.method||t.type||d.method||d.type,d.dataTypes=(d.dataType||"*").toLowerCase().match(F)||[""],null==d.crossDomain){s=b.createElement("a");try{s.href=d.url,s.href=s.href,d.crossDomain=Ft.protocol+"//"+Ft.host!==s.protocol+"//"+s.host}catch(S){d.crossDomain=!0}}if(d.data&&d.processData&&"string"!==typeof d.data&&(d.data=E.param(d.data,d.traditional)),Vt(Rt,d,t,x),l)return x;for(f in(c=E.event&&d.global)&&0===E.active++&&E.event.trigger("ajaxStart"),d.type=d.type.toUpperCase(),d.hasContent=!Ot.test(d.type),i=d.url.replace(Dt,""),d.hasContent?d.data&&d.processData&&0===(d.contentType||"").indexOf("application/x-www-form-urlencoded")&&(d.data=d.data.replace(At,"+")):(h=d.url.slice(i.length),d.data&&(d.processData||"string"===typeof d.data)&&(i+=(xt.test(i)?"&":"?")+d.data,delete d.data),!1===d.cache&&(i=i.replace(Nt,"$1"),h=(xt.test(i)?"&":"?")+"_="+_t.guid+++h),d.url=i+h),d.ifModified&&(E.lastModified[i]&&x.setRequestHeader("If-Modified-Since",E.lastModified[i]),E.etag[i]&&x.setRequestHeader("If-None-Match",E.etag[i])),(d.data&&d.hasContent&&!1!==d.contentType||t.contentType)&&x.setRequestHeader("Content-Type",d.contentType),x.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+("*"!==d.dataTypes[0]?", "+Mt+"; q=0.01":""):d.accepts["*"]),d.headers)x.setRequestHeader(f,d.headers[f]);if(d.beforeSend&&(!1===d.beforeSend.call(p,x,d)||l))return x.abort();if(_="abort",m.add(d.complete),x.done(d.success),x.fail(d.error),n=Vt(jt,d,t,x)){if(x.readyState=1,c&&v.trigger("ajaxSend",[x,d]),l)return x;d.async&&d.timeout>0&&(u=r.setTimeout((function(){x.abort("timeout")}),d.timeout));try{l=!1,n.send(w,T)}catch(S){if(l)throw S;T(-1,S)}}else T(-1,"No Transport");function T(e,t,o,s){var f,h,b,w,k,_=t;l||(l=!0,u&&r.clearTimeout(u),n=void 0,a=s||"",x.readyState=e>0?4:0,f=e>=200&&e<300||304===e,o&&(w=function(e,t,n){for(var r,i,a,o,u=e.contents,s=e.dataTypes;"*"===s[0];)s.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(i in u)if(u[i]&&u[i].test(r)){s.unshift(i);break}if(s[0]in n)a=s[0];else{for(i in n){if(!s[0]||e.converters[i+" "+s[0]]){a=i;break}o||(o=i)}a=a||o}if(a)return a!==s[0]&&s.unshift(a),n[a]}(d,x,o)),!f&&E.inArray("script",d.dataTypes)>-1&&E.inArray("json",d.dataTypes)<0&&(d.converters["text script"]=function(){}),w=function(e,t,n,r){var i,a,o,u,s,l={},c=e.dataTypes.slice();if(c[1])for(o in e.converters)l[o.toLowerCase()]=e.converters[o];for(a=c.shift();a;)if(e.responseFields[a]&&(n[e.responseFields[a]]=t),!s&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),s=a,a=c.shift())if("*"===a)a=s;else if("*"!==s&&s!==a){if(!(o=l[s+" "+a]||l["* "+a]))for(i in l)if((u=i.split(" "))[1]===a&&(o=l[s+" "+u[0]]||l["* "+u[0]])){!0===o?o=l[i]:!0!==l[i]&&(a=u[0],c.unshift(u[1]));break}if(!0!==o)if(o&&e.throws)t=o(t);else try{t=o(t)}catch(S){return{state:"parsererror",error:o?S:"No conversion from "+s+" to "+a}}}return{state:"success",data:t}}(d,w,x,f),f?(d.ifModified&&((k=x.getResponseHeader("Last-Modified"))&&(E.lastModified[i]=k),(k=x.getResponseHeader("etag"))&&(E.etag[i]=k)),204===e||"HEAD"===d.type?_="nocontent":304===e?_="notmodified":(_=w.state,h=w.data,f=!(b=w.error))):(b=_,!e&&_||(_="error",e<0&&(e=0))),x.status=e,x.statusText=(t||_)+"",f?y.resolveWith(p,[h,_,x]):y.rejectWith(p,[x,_,b]),x.statusCode(g),g=void 0,c&&v.trigger(f?"ajaxSuccess":"ajaxError",[x,d,f?h:b]),m.fireWith(p,[x,_]),c&&(v.trigger("ajaxComplete",[x,d]),--E.active||E.event.trigger("ajaxStop")))}return x},getJSON:function(e,t,n){return E.get(e,t,n,"json")},getScript:function(e,t){return E.get(e,void 0,t,"script")}}),E.each(["get","post"],(function(e,t){E[t]=function(e,n,r,i){return m(n)&&(i=i||r,r=n,n=void 0),E.ajax(E.extend({url:e,type:t,dataType:i,data:n,success:r},E.isPlainObject(e)&&e))}})),E.ajaxPrefilter((function(e){var t;for(t in e.headers)"content-type"===t.toLowerCase()&&(e.contentType=e.headers[t]||"")})),E._evalUrl=function(e,t,n){return E.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){E.globalEval(e,t,n)}})},E.fn.extend({wrapAll:function(e){var t;return this[0]&&(m(e)&&(e=e.call(this[0])),t=E(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map((function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e})).append(this)),this},wrapInner:function(e){return m(e)?this.each((function(t){E(this).wrapInner(e.call(this,t))})):this.each((function(){var t=E(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)}))},wrap:function(e){var t=m(e);return this.each((function(n){E(this).wrapAll(t?e.call(this,n):e)}))},unwrap:function(e){return this.parent(e).not("body").each((function(){E(this).replaceWith(this.childNodes)})),this}}),E.expr.pseudos.hidden=function(e){return!E.expr.pseudos.visible(e)},E.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},E.ajaxSettings.xhr=function(){try{return new r.XMLHttpRequest}catch(e){}};var Bt={0:200,1223:204},zt=E.ajaxSettings.xhr();y.cors=!!zt&&"withCredentials"in zt,y.ajax=zt=!!zt,E.ajaxTransport((function(e){var t,n;if(y.cors||zt&&!e.crossDomain)return{send:function(i,a){var o,u=e.xhr();if(u.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(o in e.xhrFields)u[o]=e.xhrFields[o];for(o in e.mimeType&&u.overrideMimeType&&u.overrideMimeType(e.mimeType),e.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest"),i)u.setRequestHeader(o,i[o]);t=function(e){return function(){t&&(t=n=u.onload=u.onerror=u.onabort=u.ontimeout=u.onreadystatechange=null,"abort"===e?u.abort():"error"===e?"number"!==typeof u.status?a(0,"error"):a(u.status,u.statusText):a(Bt[u.status]||u.status,u.statusText,"text"!==(u.responseType||"text")||"string"!==typeof u.responseText?{binary:u.response}:{text:u.responseText},u.getAllResponseHeaders()))}},u.onload=t(),n=u.onerror=u.ontimeout=t("error"),void 0!==u.onabort?u.onabort=n:u.onreadystatechange=function(){4===u.readyState&&r.setTimeout((function(){t&&n()}))},t=t("abort");try{u.send(e.hasContent&&e.data||null)}catch(s){if(t)throw s}},abort:function(){t&&t()}}})),E.ajaxPrefilter((function(e){e.crossDomain&&(e.contents.script=!1)})),E.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return E.globalEval(e),e}}}),E.ajaxPrefilter("script",(function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")})),E.ajaxTransport("script",(function(e){var t,n;if(e.crossDomain||e.scriptAttrs)return{send:function(r,i){t=E("<script>").attr(e.scriptAttrs||{}).prop({charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&i("error"===e.type?404:200,e.type)}),b.head.appendChild(t[0])},abort:function(){n&&n()}}}));var Ht=[],Kt=/(=)\?(?=&|$)|\?\?/;E.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Ht.pop()||E.expando+"_"+_t.guid++;return this[e]=!0,e}}),E.ajaxPrefilter("json jsonp",(function(e,t,n){var i,a,o,u=!1!==e.jsonp&&(Kt.test(e.url)?"url":"string"===typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Kt.test(e.data)&&"data");if(u||"jsonp"===e.dataTypes[0])return i=e.jsonpCallback=m(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,u?e[u]=e[u].replace(Kt,"$1"+i):!1!==e.jsonp&&(e.url+=(xt.test(e.url)?"&":"?")+e.jsonp+"="+i),e.converters["script json"]=function(){return o||E.error(i+" was not called"),o[0]},e.dataTypes[0]="json",a=r[i],r[i]=function(){o=arguments},n.always((function(){void 0===a?E(r).removeProp(i):r[i]=a,e[i]&&(e.jsonpCallback=t.jsonpCallback,Ht.push(i)),o&&m(a)&&a(o[0]),o=a=void 0})),"script"})),y.createHTMLDocument=function(){var e=b.implementation.createHTMLDocument("").body;return e.innerHTML="<form></form><form></form>",2===e.childNodes.length}(),E.parseHTML=function(e,t,n){return"string"!==typeof e?[]:("boolean"===typeof t&&(n=t,t=!1),t||(y.createHTMLDocument?((r=(t=b.implementation.createHTMLDocument("")).createElement("base")).href=b.location.href,t.head.appendChild(r)):t=b),a=!n&&[],(i=N.exec(e))?[t.createElement(i[1])]:(i=ke([e],t,a),a&&a.length&&E(a).remove(),E.merge([],i.childNodes)));var r,i,a},E.fn.load=function(e,t,n){var r,i,a,o=this,u=e.indexOf(" ");return u>-1&&(r=vt(e.slice(u)),e=e.slice(0,u)),m(t)?(n=t,t=void 0):t&&"object"===typeof t&&(i="POST"),o.length>0&&E.ajax({url:e,type:i||"GET",dataType:"html",data:t}).done((function(e){a=arguments,o.html(r?E("<div>").append(E.parseHTML(e)).find(r):e)})).always(n&&function(e,t){o.each((function(){n.apply(this,a||[e.responseText,t,e])}))}),this},E.expr.pseudos.animated=function(e){return E.grep(E.timers,(function(t){return e===t.elem})).length},E.offset={setOffset:function(e,t,n){var r,i,a,o,u,s,l=E.css(e,"position"),c=E(e),f={};"static"===l&&(e.style.position="relative"),u=c.offset(),a=E.css(e,"top"),s=E.css(e,"left"),("absolute"===l||"fixed"===l)&&(a+s).indexOf("auto")>-1?(o=(r=c.position()).top,i=r.left):(o=parseFloat(a)||0,i=parseFloat(s)||0),m(t)&&(t=t.call(e,n,E.extend({},u))),null!=t.top&&(f.top=t.top-u.top+o),null!=t.left&&(f.left=t.left-u.left+i),"using"in t?t.using.call(e,f):c.css(f)}},E.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each((function(t){E.offset.setOffset(this,e,t)}));var t,n,r=this[0];return r?r.getClientRects().length?(t=r.getBoundingClientRect(),n=r.ownerDocument.defaultView,{top:t.top+n.pageYOffset,left:t.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n,r=this[0],i={top:0,left:0};if("fixed"===E.css(r,"position"))t=r.getBoundingClientRect();else{for(t=this.offset(),n=r.ownerDocument,e=r.offsetParent||n.documentElement;e&&(e===n.body||e===n.documentElement)&&"static"===E.css(e,"position");)e=e.parentNode;e&&e!==r&&1===e.nodeType&&((i=E(e).offset()).top+=E.css(e,"borderTopWidth",!0),i.left+=E.css(e,"borderLeftWidth",!0))}return{top:t.top-i.top-E.css(r,"marginTop",!0),left:t.left-i.left-E.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map((function(){for(var e=this.offsetParent;e&&"static"===E.css(e,"position");)e=e.offsetParent;return e||oe}))}}),E.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(e,t){var n="pageYOffset"===t;E.fn[e]=function(r){return K(this,(function(e,r,i){var a;if(g(e)?a=e:9===e.nodeType&&(a=e.defaultView),void 0===i)return a?a[t]:e[r];a?a.scrollTo(n?a.pageXOffset:i,n?i:a.pageYOffset):e[r]=i}),e,r,arguments.length)}})),E.each(["top","left"],(function(e,t){E.cssHooks[t]=ze(y.pixelPosition,(function(e,n){if(n)return n=Be(e,t),Fe.test(n)?E(e).position()[t]+"px":n}))})),E.each({Height:"height",Width:"width"},(function(e,t){E.each({padding:"inner"+e,content:t,"":"outer"+e},(function(n,r){E.fn[r]=function(i,a){var o=arguments.length&&(n||"boolean"!==typeof i),u=n||(!0===i||!0===a?"margin":"border");return K(this,(function(t,n,i){var a;return g(t)?0===r.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(a=t.documentElement,Math.max(t.body["scroll"+e],a["scroll"+e],t.body["offset"+e],a["offset"+e],a["client"+e])):void 0===i?E.css(t,n,u):E.style(t,n,i,u)}),t,o?i:void 0,o)}}))})),E.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],(function(e,t){E.fn[t]=function(e){return this.on(t,e)}})),E.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),E.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),(function(e,t){E.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}));var Gt=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;E.proxy=function(e,t){var n,r,i;if("string"===typeof t&&(n=e[t],t=e,e=n),m(e))return r=u.call(arguments,2),i=function(){return e.apply(t||this,r.concat(u.call(arguments)))},i.guid=e.guid=e.guid||E.guid++,i},E.holdReady=function(e){e?E.readyWait++:E.ready(!0)},E.isArray=Array.isArray,E.parseJSON=JSON.parse,E.nodeName=D,E.isFunction=m,E.isWindow=g,E.camelCase=$,E.type=_,E.now=Date.now,E.isNumeric=function(e){var t=E.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},E.trim=function(e){return null==e?"":(e+"").replace(Gt,"")},void 0===(n=function(){return E}.apply(t,[]))||(e.exports=n);var Wt=r.jQuery,Qt=r.$;return E.noConflict=function(e){return r.$===E&&(r.$=Qt),e&&r.jQuery===E&&(r.jQuery=Wt),E},"undefined"===typeof i&&(r.jQuery=r.$=E),E}))},763:function(e,t,n){var r;e=n.nmd(e),function(){var i,a="Expected a function",o="__lodash_hash_undefined__",u="__lodash_placeholder__",s=16,l=32,c=64,f=128,h=256,d=1/0,p=9007199254740991,v=NaN,y=4294967295,m=[["ary",f],["bind",1],["bindKey",2],["curry",8],["curryRight",s],["flip",512],["partial",l],["partialRight",c],["rearg",h]],g="[object Arguments]",b="[object Array]",w="[object Boolean]",k="[object Date]",_="[object Error]",x="[object Function]",E="[object GeneratorFunction]",T="[object Map]",S="[object Number]",I="[object Object]",C="[object Promise]",A="[object RegExp]",D="[object Set]",N="[object String]",P="[object Symbol]",O="[object WeakMap]",L="[object ArrayBuffer]",R="[object DataView]",j="[object Float32Array]",M="[object Float64Array]",F="[object Int8Array]",q="[object Int16Array]",V="[object Int32Array]",U="[object Uint8Array]",B="[object Uint8ClampedArray]",z="[object Uint16Array]",H="[object Uint32Array]",K=/\b__p \+= '';/g,G=/\b(__p \+=) '' \+/g,W=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Q=/&(?:amp|lt|gt|quot|#39);/g,$=/[&<>"']/g,Y=RegExp(Q.source),X=RegExp($.source),J=/<%-([\s\S]+?)%>/g,Z=/<%([\s\S]+?)%>/g,ee=/<%=([\s\S]+?)%>/g,te=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ne=/^\w*$/,re=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ie=/[\\^$.*+?()[\]{}|]/g,ae=RegExp(ie.source),oe=/^\s+/,ue=/\s/,se=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,le=/\{\n\/\* \[wrapped with (.+)\] \*/,ce=/,? & /,fe=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,he=/[()=,{}\[\]\/\s]/,de=/\\(\\)?/g,pe=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ve=/\w*$/,ye=/^[-+]0x[0-9a-f]+$/i,me=/^0b[01]+$/i,ge=/^\[object .+?Constructor\]$/,be=/^0o[0-7]+$/i,we=/^(?:0|[1-9]\d*)$/,ke=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,_e=/($^)/,xe=/['\n\r\u2028\u2029\\]/g,Ee="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Te="\\u2700-\\u27bf",Se="a-z\\xdf-\\xf6\\xf8-\\xff",Ie="A-Z\\xc0-\\xd6\\xd8-\\xde",Ce="\\ufe0e\\ufe0f",Ae="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",De="['\u2019]",Ne="[\\ud800-\\udfff]",Pe="["+Ae+"]",Oe="["+Ee+"]",Le="\\d+",Re="[\\u2700-\\u27bf]",je="["+Se+"]",Me="[^\\ud800-\\udfff"+Ae+Le+Te+Se+Ie+"]",Fe="\\ud83c[\\udffb-\\udfff]",qe="[^\\ud800-\\udfff]",Ve="(?:\\ud83c[\\udde6-\\uddff]){2}",Ue="[\\ud800-\\udbff][\\udc00-\\udfff]",Be="["+Ie+"]",ze="(?:"+je+"|"+Me+")",He="(?:"+Be+"|"+Me+")",Ke="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",Ge="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",We="(?:"+Oe+"|"+Fe+")"+"?",Qe="[\\ufe0e\\ufe0f]?",$e=Qe+We+("(?:\\u200d(?:"+[qe,Ve,Ue].join("|")+")"+Qe+We+")*"),Ye="(?:"+[Re,Ve,Ue].join("|")+")"+$e,Xe="(?:"+[qe+Oe+"?",Oe,Ve,Ue,Ne].join("|")+")",Je=RegExp(De,"g"),Ze=RegExp(Oe,"g"),et=RegExp(Fe+"(?="+Fe+")|"+Xe+$e,"g"),tt=RegExp([Be+"?"+je+"+"+Ke+"(?="+[Pe,Be,"$"].join("|")+")",He+"+"+Ge+"(?="+[Pe,Be+ze,"$"].join("|")+")",Be+"?"+ze+"+"+Ke,Be+"+"+Ge,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Le,Ye].join("|"),"g"),nt=RegExp("[\\u200d\\ud800-\\udfff"+Ee+Ce+"]"),rt=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,it=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],at=-1,ot={};ot[j]=ot[M]=ot[F]=ot[q]=ot[V]=ot[U]=ot[B]=ot[z]=ot[H]=!0,ot[g]=ot[b]=ot[L]=ot[w]=ot[R]=ot[k]=ot[_]=ot[x]=ot[T]=ot[S]=ot[I]=ot[A]=ot[D]=ot[N]=ot[O]=!1;var ut={};ut[g]=ut[b]=ut[L]=ut[R]=ut[w]=ut[k]=ut[j]=ut[M]=ut[F]=ut[q]=ut[V]=ut[T]=ut[S]=ut[I]=ut[A]=ut[D]=ut[N]=ut[P]=ut[U]=ut[B]=ut[z]=ut[H]=!0,ut[_]=ut[x]=ut[O]=!1;var st={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},lt=parseFloat,ct=parseInt,ft="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,ht="object"==typeof self&&self&&self.Object===Object&&self,dt=ft||ht||Function("return this")(),pt=t&&!t.nodeType&&t,vt=pt&&e&&!e.nodeType&&e,yt=vt&&vt.exports===pt,mt=yt&&ft.process,gt=function(){try{var e=vt&&vt.require&&vt.require("util").types;return e||mt&&mt.binding&&mt.binding("util")}catch(t){}}(),bt=gt&&gt.isArrayBuffer,wt=gt&&gt.isDate,kt=gt&&gt.isMap,_t=gt&&gt.isRegExp,xt=gt&&gt.isSet,Et=gt&&gt.isTypedArray;function Tt(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function St(e,t,n,r){for(var i=-1,a=null==e?0:e.length;++i<a;){var o=e[i];t(r,o,n(o),e)}return r}function It(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}function Ct(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e}function At(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}function Dt(e,t){for(var n=-1,r=null==e?0:e.length,i=0,a=[];++n<r;){var o=e[n];t(o,n,e)&&(a[i++]=o)}return a}function Nt(e,t){return!!(null==e?0:e.length)&&Ut(e,t,0)>-1}function Pt(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}function Ot(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}function Lt(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}function Rt(e,t,n,r){var i=-1,a=null==e?0:e.length;for(r&&a&&(n=e[++i]);++i<a;)n=t(n,e[i],i,e);return n}function jt(e,t,n,r){var i=null==e?0:e.length;for(r&&i&&(n=e[--i]);i--;)n=t(n,e[i],i,e);return n}function Mt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var Ft=Kt("length");function qt(e,t,n){var r;return n(e,(function(e,n,i){if(t(e,n,i))return r=n,!1})),r}function Vt(e,t,n,r){for(var i=e.length,a=n+(r?1:-1);r?a--:++a<i;)if(t(e[a],a,e))return a;return-1}function Ut(e,t,n){return t===t?function(e,t,n){var r=n-1,i=e.length;for(;++r<i;)if(e[r]===t)return r;return-1}(e,t,n):Vt(e,zt,n)}function Bt(e,t,n,r){for(var i=n-1,a=e.length;++i<a;)if(r(e[i],t))return i;return-1}function zt(e){return e!==e}function Ht(e,t){var n=null==e?0:e.length;return n?Qt(e,t)/n:v}function Kt(e){return function(t){return null==t?i:t[e]}}function Gt(e){return function(t){return null==e?i:e[t]}}function Wt(e,t,n,r,i){return i(e,(function(e,i,a){n=r?(r=!1,e):t(n,e,i,a)})),n}function Qt(e,t){for(var n,r=-1,a=e.length;++r<a;){var o=t(e[r]);o!==i&&(n=n===i?o:n+o)}return n}function $t(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function Yt(e){return e?e.slice(0,vn(e)+1).replace(oe,""):e}function Xt(e){return function(t){return e(t)}}function Jt(e,t){return Ot(t,(function(t){return e[t]}))}function Zt(e,t){return e.has(t)}function en(e,t){for(var n=-1,r=e.length;++n<r&&Ut(t,e[n],0)>-1;);return n}function tn(e,t){for(var n=e.length;n--&&Ut(t,e[n],0)>-1;);return n}function nn(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&++r;return r}var rn=Gt({"\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\xc7":"C","\xe7":"c","\xd0":"D","\xf0":"d","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\xd1":"N","\xf1":"n","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\xd8":"O","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xdd":"Y","\xfd":"y","\xff":"y","\xc6":"Ae","\xe6":"ae","\xde":"Th","\xfe":"th","\xdf":"ss","\u0100":"A","\u0102":"A","\u0104":"A","\u0101":"a","\u0103":"a","\u0105":"a","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\u010e":"D","\u0110":"D","\u010f":"d","\u0111":"d","\u0112":"E","\u0114":"E","\u0116":"E","\u0118":"E","\u011a":"E","\u0113":"e","\u0115":"e","\u0117":"e","\u0119":"e","\u011b":"e","\u011c":"G","\u011e":"G","\u0120":"G","\u0122":"G","\u011d":"g","\u011f":"g","\u0121":"g","\u0123":"g","\u0124":"H","\u0126":"H","\u0125":"h","\u0127":"h","\u0128":"I","\u012a":"I","\u012c":"I","\u012e":"I","\u0130":"I","\u0129":"i","\u012b":"i","\u012d":"i","\u012f":"i","\u0131":"i","\u0134":"J","\u0135":"j","\u0136":"K","\u0137":"k","\u0138":"k","\u0139":"L","\u013b":"L","\u013d":"L","\u013f":"L","\u0141":"L","\u013a":"l","\u013c":"l","\u013e":"l","\u0140":"l","\u0142":"l","\u0143":"N","\u0145":"N","\u0147":"N","\u014a":"N","\u0144":"n","\u0146":"n","\u0148":"n","\u014b":"n","\u014c":"O","\u014e":"O","\u0150":"O","\u014d":"o","\u014f":"o","\u0151":"o","\u0154":"R","\u0156":"R","\u0158":"R","\u0155":"r","\u0157":"r","\u0159":"r","\u015a":"S","\u015c":"S","\u015e":"S","\u0160":"S","\u015b":"s","\u015d":"s","\u015f":"s","\u0161":"s","\u0162":"T","\u0164":"T","\u0166":"T","\u0163":"t","\u0165":"t","\u0167":"t","\u0168":"U","\u016a":"U","\u016c":"U","\u016e":"U","\u0170":"U","\u0172":"U","\u0169":"u","\u016b":"u","\u016d":"u","\u016f":"u","\u0171":"u","\u0173":"u","\u0174":"W","\u0175":"w","\u0176":"Y","\u0177":"y","\u0178":"Y","\u0179":"Z","\u017b":"Z","\u017d":"Z","\u017a":"z","\u017c":"z","\u017e":"z","\u0132":"IJ","\u0133":"ij","\u0152":"Oe","\u0153":"oe","\u0149":"'n","\u017f":"s"}),an=Gt({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function on(e){return"\\"+st[e]}function un(e){return nt.test(e)}function sn(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function ln(e,t){return function(n){return e(t(n))}}function cn(e,t){for(var n=-1,r=e.length,i=0,a=[];++n<r;){var o=e[n];o!==t&&o!==u||(e[n]=u,a[i++]=n)}return a}function fn(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}function hn(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=[e,e]})),n}function dn(e){return un(e)?function(e){var t=et.lastIndex=0;for(;et.test(e);)++t;return t}(e):Ft(e)}function pn(e){return un(e)?function(e){return e.match(et)||[]}(e):function(e){return e.split("")}(e)}function vn(e){for(var t=e.length;t--&&ue.test(e.charAt(t)););return t}var yn=Gt({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var mn=function e(t){var n=(t=null==t?dt:mn.defaults(dt.Object(),t,mn.pick(dt,it))).Array,r=t.Date,ue=t.Error,Ee=t.Function,Te=t.Math,Se=t.Object,Ie=t.RegExp,Ce=t.String,Ae=t.TypeError,De=n.prototype,Ne=Ee.prototype,Pe=Se.prototype,Oe=t["__core-js_shared__"],Le=Ne.toString,Re=Pe.hasOwnProperty,je=0,Me=function(){var e=/[^.]+$/.exec(Oe&&Oe.keys&&Oe.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),Fe=Pe.toString,qe=Le.call(Se),Ve=dt._,Ue=Ie("^"+Le.call(Re).replace(ie,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Be=yt?t.Buffer:i,ze=t.Symbol,He=t.Uint8Array,Ke=Be?Be.allocUnsafe:i,Ge=ln(Se.getPrototypeOf,Se),We=Se.create,Qe=Pe.propertyIsEnumerable,$e=De.splice,Ye=ze?ze.isConcatSpreadable:i,Xe=ze?ze.iterator:i,et=ze?ze.toStringTag:i,nt=function(){try{var e=ha(Se,"defineProperty");return e({},"",{}),e}catch(t){}}(),st=t.clearTimeout!==dt.clearTimeout&&t.clearTimeout,ft=r&&r.now!==dt.Date.now&&r.now,ht=t.setTimeout!==dt.setTimeout&&t.setTimeout,pt=Te.ceil,vt=Te.floor,mt=Se.getOwnPropertySymbols,gt=Be?Be.isBuffer:i,Ft=t.isFinite,Gt=De.join,gn=ln(Se.keys,Se),bn=Te.max,wn=Te.min,kn=r.now,_n=t.parseInt,xn=Te.random,En=De.reverse,Tn=ha(t,"DataView"),Sn=ha(t,"Map"),In=ha(t,"Promise"),Cn=ha(t,"Set"),An=ha(t,"WeakMap"),Dn=ha(Se,"create"),Nn=An&&new An,Pn={},On=qa(Tn),Ln=qa(Sn),Rn=qa(In),jn=qa(Cn),Mn=qa(An),Fn=ze?ze.prototype:i,qn=Fn?Fn.valueOf:i,Vn=Fn?Fn.toString:i;function Un(e){if(ru(e)&&!Go(e)&&!(e instanceof Kn)){if(e instanceof Hn)return e;if(Re.call(e,"__wrapped__"))return Va(e)}return new Hn(e)}var Bn=function(){function e(){}return function(t){if(!nu(t))return{};if(We)return We(t);e.prototype=t;var n=new e;return e.prototype=i,n}}();function zn(){}function Hn(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=i}function Kn(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=y,this.__views__=[]}function Gn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Wn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Qn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function $n(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new Qn;++t<n;)this.add(e[t])}function Yn(e){var t=this.__data__=new Wn(e);this.size=t.size}function Xn(e,t){var n=Go(e),r=!n&&Ko(e),i=!n&&!r&&Yo(e),a=!n&&!r&&!i&&fu(e),o=n||r||i||a,u=o?$t(e.length,Ce):[],s=u.length;for(var l in e)!t&&!Re.call(e,l)||o&&("length"==l||i&&("offset"==l||"parent"==l)||a&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||ba(l,s))||u.push(l);return u}function Jn(e){var t=e.length;return t?e[$r(0,t-1)]:i}function Zn(e,t){return ja(Di(e),sr(t,0,e.length))}function er(e){return ja(Di(e))}function tr(e,t,n){(n!==i&&!Bo(e[t],n)||n===i&&!(t in e))&&or(e,t,n)}function nr(e,t,n){var r=e[t];Re.call(e,t)&&Bo(r,n)&&(n!==i||t in e)||or(e,t,n)}function rr(e,t){for(var n=e.length;n--;)if(Bo(e[n][0],t))return n;return-1}function ir(e,t,n,r){return dr(e,(function(e,i,a){t(r,e,n(e),a)})),r}function ar(e,t){return e&&Ni(t,Ou(t),e)}function or(e,t,n){"__proto__"==t&&nt?nt(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function ur(e,t){for(var r=-1,a=t.length,o=n(a),u=null==e;++r<a;)o[r]=u?i:Cu(e,t[r]);return o}function sr(e,t,n){return e===e&&(n!==i&&(e=e<=n?e:n),t!==i&&(e=e>=t?e:t)),e}function lr(e,t,n,r,a,o){var u,s=1&t,l=2&t,c=4&t;if(n&&(u=a?n(e,r,a,o):n(e)),u!==i)return u;if(!nu(e))return e;var f=Go(e);if(f){if(u=function(e){var t=e.length,n=new e.constructor(t);t&&"string"==typeof e[0]&&Re.call(e,"index")&&(n.index=e.index,n.input=e.input);return n}(e),!s)return Di(e,u)}else{var h=va(e),d=h==x||h==E;if(Yo(e))return Ei(e,s);if(h==I||h==g||d&&!a){if(u=l||d?{}:ma(e),!s)return l?function(e,t){return Ni(e,pa(e),t)}(e,function(e,t){return e&&Ni(t,Lu(t),e)}(u,e)):function(e,t){return Ni(e,da(e),t)}(e,ar(u,e))}else{if(!ut[h])return a?e:{};u=function(e,t,n){var r=e.constructor;switch(t){case L:return Ti(e);case w:case k:return new r(+e);case R:return function(e,t){var n=t?Ti(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case j:case M:case F:case q:case V:case U:case B:case z:case H:return Si(e,n);case T:return new r;case S:case N:return new r(e);case A:return function(e){var t=new e.constructor(e.source,ve.exec(e));return t.lastIndex=e.lastIndex,t}(e);case D:return new r;case P:return i=e,qn?Se(qn.call(i)):{}}var i}(e,h,s)}}o||(o=new Yn);var p=o.get(e);if(p)return p;o.set(e,u),su(e)?e.forEach((function(r){u.add(lr(r,t,n,r,e,o))})):iu(e)&&e.forEach((function(r,i){u.set(i,lr(r,t,n,i,e,o))}));var v=f?i:(c?l?aa:ia:l?Lu:Ou)(e);return It(v||e,(function(r,i){v&&(r=e[i=r]),nr(u,i,lr(r,t,n,i,e,o))})),u}function cr(e,t,n){var r=n.length;if(null==e)return!r;for(e=Se(e);r--;){var a=n[r],o=t[a],u=e[a];if(u===i&&!(a in e)||!o(u))return!1}return!0}function fr(e,t,n){if("function"!=typeof e)throw new Ae(a);return Pa((function(){e.apply(i,n)}),t)}function hr(e,t,n,r){var i=-1,a=Nt,o=!0,u=e.length,s=[],l=t.length;if(!u)return s;n&&(t=Ot(t,Xt(n))),r?(a=Pt,o=!1):t.length>=200&&(a=Zt,o=!1,t=new $n(t));e:for(;++i<u;){var c=e[i],f=null==n?c:n(c);if(c=r||0!==c?c:0,o&&f===f){for(var h=l;h--;)if(t[h]===f)continue e;s.push(c)}else a(t,f,r)||s.push(c)}return s}Un.templateSettings={escape:J,evaluate:Z,interpolate:ee,variable:"",imports:{_:Un}},Un.prototype=zn.prototype,Un.prototype.constructor=Un,Hn.prototype=Bn(zn.prototype),Hn.prototype.constructor=Hn,Kn.prototype=Bn(zn.prototype),Kn.prototype.constructor=Kn,Gn.prototype.clear=function(){this.__data__=Dn?Dn(null):{},this.size=0},Gn.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Gn.prototype.get=function(e){var t=this.__data__;if(Dn){var n=t[e];return n===o?i:n}return Re.call(t,e)?t[e]:i},Gn.prototype.has=function(e){var t=this.__data__;return Dn?t[e]!==i:Re.call(t,e)},Gn.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Dn&&t===i?o:t,this},Wn.prototype.clear=function(){this.__data__=[],this.size=0},Wn.prototype.delete=function(e){var t=this.__data__,n=rr(t,e);return!(n<0)&&(n==t.length-1?t.pop():$e.call(t,n,1),--this.size,!0)},Wn.prototype.get=function(e){var t=this.__data__,n=rr(t,e);return n<0?i:t[n][1]},Wn.prototype.has=function(e){return rr(this.__data__,e)>-1},Wn.prototype.set=function(e,t){var n=this.__data__,r=rr(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},Qn.prototype.clear=function(){this.size=0,this.__data__={hash:new Gn,map:new(Sn||Wn),string:new Gn}},Qn.prototype.delete=function(e){var t=ca(this,e).delete(e);return this.size-=t?1:0,t},Qn.prototype.get=function(e){return ca(this,e).get(e)},Qn.prototype.has=function(e){return ca(this,e).has(e)},Qn.prototype.set=function(e,t){var n=ca(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},$n.prototype.add=$n.prototype.push=function(e){return this.__data__.set(e,o),this},$n.prototype.has=function(e){return this.__data__.has(e)},Yn.prototype.clear=function(){this.__data__=new Wn,this.size=0},Yn.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},Yn.prototype.get=function(e){return this.__data__.get(e)},Yn.prototype.has=function(e){return this.__data__.has(e)},Yn.prototype.set=function(e,t){var n=this.__data__;if(n instanceof Wn){var r=n.__data__;if(!Sn||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new Qn(r)}return n.set(e,t),this.size=n.size,this};var dr=Li(kr),pr=Li(_r,!0);function vr(e,t){var n=!0;return dr(e,(function(e,r,i){return n=!!t(e,r,i)})),n}function yr(e,t,n){for(var r=-1,a=e.length;++r<a;){var o=e[r],u=t(o);if(null!=u&&(s===i?u===u&&!cu(u):n(u,s)))var s=u,l=o}return l}function mr(e,t){var n=[];return dr(e,(function(e,r,i){t(e,r,i)&&n.push(e)})),n}function gr(e,t,n,r,i){var a=-1,o=e.length;for(n||(n=ga),i||(i=[]);++a<o;){var u=e[a];t>0&&n(u)?t>1?gr(u,t-1,n,r,i):Lt(i,u):r||(i[i.length]=u)}return i}var br=Ri(),wr=Ri(!0);function kr(e,t){return e&&br(e,t,Ou)}function _r(e,t){return e&&wr(e,t,Ou)}function xr(e,t){return Dt(t,(function(t){return Zo(e[t])}))}function Er(e,t){for(var n=0,r=(t=wi(t,e)).length;null!=e&&n<r;)e=e[Fa(t[n++])];return n&&n==r?e:i}function Tr(e,t,n){var r=t(e);return Go(e)?r:Lt(r,n(e))}function Sr(e){return null==e?e===i?"[object Undefined]":"[object Null]":et&&et in Se(e)?function(e){var t=Re.call(e,et),n=e[et];try{e[et]=i;var r=!0}catch(o){}var a=Fe.call(e);r&&(t?e[et]=n:delete e[et]);return a}(e):function(e){return Fe.call(e)}(e)}function Ir(e,t){return e>t}function Cr(e,t){return null!=e&&Re.call(e,t)}function Ar(e,t){return null!=e&&t in Se(e)}function Dr(e,t,r){for(var a=r?Pt:Nt,o=e[0].length,u=e.length,s=u,l=n(u),c=1/0,f=[];s--;){var h=e[s];s&&t&&(h=Ot(h,Xt(t))),c=wn(h.length,c),l[s]=!r&&(t||o>=120&&h.length>=120)?new $n(s&&h):i}h=e[0];var d=-1,p=l[0];e:for(;++d<o&&f.length<c;){var v=h[d],y=t?t(v):v;if(v=r||0!==v?v:0,!(p?Zt(p,y):a(f,y,r))){for(s=u;--s;){var m=l[s];if(!(m?Zt(m,y):a(e[s],y,r)))continue e}p&&p.push(y),f.push(v)}}return f}function Nr(e,t,n){var r=null==(e=Ca(e,t=wi(t,e)))?e:e[Fa(Xa(t))];return null==r?i:Tt(r,e,n)}function Pr(e){return ru(e)&&Sr(e)==g}function Or(e,t,n,r,a){return e===t||(null==e||null==t||!ru(e)&&!ru(t)?e!==e&&t!==t:function(e,t,n,r,a,o){var u=Go(e),s=Go(t),l=u?b:va(e),c=s?b:va(t),f=(l=l==g?I:l)==I,h=(c=c==g?I:c)==I,d=l==c;if(d&&Yo(e)){if(!Yo(t))return!1;u=!0,f=!1}if(d&&!f)return o||(o=new Yn),u||fu(e)?na(e,t,n,r,a,o):function(e,t,n,r,i,a,o){switch(n){case R:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case L:return!(e.byteLength!=t.byteLength||!a(new He(e),new He(t)));case w:case k:case S:return Bo(+e,+t);case _:return e.name==t.name&&e.message==t.message;case A:case N:return e==t+"";case T:var u=sn;case D:var s=1&r;if(u||(u=fn),e.size!=t.size&&!s)return!1;var l=o.get(e);if(l)return l==t;r|=2,o.set(e,t);var c=na(u(e),u(t),r,i,a,o);return o.delete(e),c;case P:if(qn)return qn.call(e)==qn.call(t)}return!1}(e,t,l,n,r,a,o);if(!(1&n)){var p=f&&Re.call(e,"__wrapped__"),v=h&&Re.call(t,"__wrapped__");if(p||v){var y=p?e.value():e,m=v?t.value():t;return o||(o=new Yn),a(y,m,n,r,o)}}if(!d)return!1;return o||(o=new Yn),function(e,t,n,r,a,o){var u=1&n,s=ia(e),l=s.length,c=ia(t).length;if(l!=c&&!u)return!1;var f=l;for(;f--;){var h=s[f];if(!(u?h in t:Re.call(t,h)))return!1}var d=o.get(e),p=o.get(t);if(d&&p)return d==t&&p==e;var v=!0;o.set(e,t),o.set(t,e);var y=u;for(;++f<l;){var m=e[h=s[f]],g=t[h];if(r)var b=u?r(g,m,h,t,e,o):r(m,g,h,e,t,o);if(!(b===i?m===g||a(m,g,n,r,o):b)){v=!1;break}y||(y="constructor"==h)}if(v&&!y){var w=e.constructor,k=t.constructor;w==k||!("constructor"in e)||!("constructor"in t)||"function"==typeof w&&w instanceof w&&"function"==typeof k&&k instanceof k||(v=!1)}return o.delete(e),o.delete(t),v}(e,t,n,r,a,o)}(e,t,n,r,Or,a))}function Lr(e,t,n,r){var a=n.length,o=a,u=!r;if(null==e)return!o;for(e=Se(e);a--;){var s=n[a];if(u&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++a<o;){var l=(s=n[a])[0],c=e[l],f=s[1];if(u&&s[2]){if(c===i&&!(l in e))return!1}else{var h=new Yn;if(r)var d=r(c,f,l,e,t,h);if(!(d===i?Or(f,c,3,r,h):d))return!1}}return!0}function Rr(e){return!(!nu(e)||(t=e,Me&&Me in t))&&(Zo(e)?Ue:ge).test(qa(e));var t}function jr(e){return"function"==typeof e?e:null==e?as:"object"==typeof e?Go(e)?Br(e[0],e[1]):Ur(e):ps(e)}function Mr(e){if(!Ea(e))return gn(e);var t=[];for(var n in Se(e))Re.call(e,n)&&"constructor"!=n&&t.push(n);return t}function Fr(e){if(!nu(e))return function(e){var t=[];if(null!=e)for(var n in Se(e))t.push(n);return t}(e);var t=Ea(e),n=[];for(var r in e)("constructor"!=r||!t&&Re.call(e,r))&&n.push(r);return n}function qr(e,t){return e<t}function Vr(e,t){var r=-1,i=Qo(e)?n(e.length):[];return dr(e,(function(e,n,a){i[++r]=t(e,n,a)})),i}function Ur(e){var t=fa(e);return 1==t.length&&t[0][2]?Sa(t[0][0],t[0][1]):function(n){return n===e||Lr(n,e,t)}}function Br(e,t){return ka(e)&&Ta(t)?Sa(Fa(e),t):function(n){var r=Cu(n,e);return r===i&&r===t?Au(n,e):Or(t,r,3)}}function zr(e,t,n,r,a){e!==t&&br(t,(function(o,u){if(a||(a=new Yn),nu(o))!function(e,t,n,r,a,o,u){var s=Da(e,n),l=Da(t,n),c=u.get(l);if(c)return void tr(e,n,c);var f=o?o(s,l,n+"",e,t,u):i,h=f===i;if(h){var d=Go(l),p=!d&&Yo(l),v=!d&&!p&&fu(l);f=l,d||p||v?Go(s)?f=s:$o(s)?f=Di(s):p?(h=!1,f=Ei(l,!0)):v?(h=!1,f=Si(l,!0)):f=[]:ou(l)||Ko(l)?(f=s,Ko(s)?f=bu(s):nu(s)&&!Zo(s)||(f=ma(l))):h=!1}h&&(u.set(l,f),a(f,l,r,o,u),u.delete(l));tr(e,n,f)}(e,t,u,n,zr,r,a);else{var s=r?r(Da(e,u),o,u+"",e,t,a):i;s===i&&(s=o),tr(e,u,s)}}),Lu)}function Hr(e,t){var n=e.length;if(n)return ba(t+=t<0?n:0,n)?e[t]:i}function Kr(e,t,n){t=t.length?Ot(t,(function(e){return Go(e)?function(t){return Er(t,1===e.length?e[0]:e)}:e})):[as];var r=-1;t=Ot(t,Xt(la()));var i=Vr(e,(function(e,n,i){var a=Ot(t,(function(t){return t(e)}));return{criteria:a,index:++r,value:e}}));return function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}(i,(function(e,t){return function(e,t,n){var r=-1,i=e.criteria,a=t.criteria,o=i.length,u=n.length;for(;++r<o;){var s=Ii(i[r],a[r]);if(s)return r>=u?s:s*("desc"==n[r]?-1:1)}return e.index-t.index}(e,t,n)}))}function Gr(e,t,n){for(var r=-1,i=t.length,a={};++r<i;){var o=t[r],u=Er(e,o);n(u,o)&&ei(a,wi(o,e),u)}return a}function Wr(e,t,n,r){var i=r?Bt:Ut,a=-1,o=t.length,u=e;for(e===t&&(t=Di(t)),n&&(u=Ot(e,Xt(n)));++a<o;)for(var s=0,l=t[a],c=n?n(l):l;(s=i(u,c,s,r))>-1;)u!==e&&$e.call(u,s,1),$e.call(e,s,1);return e}function Qr(e,t){for(var n=e?t.length:0,r=n-1;n--;){var i=t[n];if(n==r||i!==a){var a=i;ba(i)?$e.call(e,i,1):hi(e,i)}}return e}function $r(e,t){return e+vt(xn()*(t-e+1))}function Yr(e,t){var n="";if(!e||t<1||t>p)return n;do{t%2&&(n+=e),(t=vt(t/2))&&(e+=e)}while(t);return n}function Xr(e,t){return Oa(Ia(e,t,as),e+"")}function Jr(e){return Jn(Bu(e))}function Zr(e,t){var n=Bu(e);return ja(n,sr(t,0,n.length))}function ei(e,t,n,r){if(!nu(e))return e;for(var a=-1,o=(t=wi(t,e)).length,u=o-1,s=e;null!=s&&++a<o;){var l=Fa(t[a]),c=n;if("__proto__"===l||"constructor"===l||"prototype"===l)return e;if(a!=u){var f=s[l];(c=r?r(f,l,s):i)===i&&(c=nu(f)?f:ba(t[a+1])?[]:{})}nr(s,l,c),s=s[l]}return e}var ti=Nn?function(e,t){return Nn.set(e,t),e}:as,ni=nt?function(e,t){return nt(e,"toString",{configurable:!0,enumerable:!1,value:ns(t),writable:!0})}:as;function ri(e){return ja(Bu(e))}function ii(e,t,r){var i=-1,a=e.length;t<0&&(t=-t>a?0:a+t),(r=r>a?a:r)<0&&(r+=a),a=t>r?0:r-t>>>0,t>>>=0;for(var o=n(a);++i<a;)o[i]=e[i+t];return o}function ai(e,t){var n;return dr(e,(function(e,r,i){return!(n=t(e,r,i))})),!!n}function oi(e,t,n){var r=0,i=null==e?r:e.length;if("number"==typeof t&&t===t&&i<=2147483647){for(;r<i;){var a=r+i>>>1,o=e[a];null!==o&&!cu(o)&&(n?o<=t:o<t)?r=a+1:i=a}return i}return ui(e,t,as,n)}function ui(e,t,n,r){var a=0,o=null==e?0:e.length;if(0===o)return 0;for(var u=(t=n(t))!==t,s=null===t,l=cu(t),c=t===i;a<o;){var f=vt((a+o)/2),h=n(e[f]),d=h!==i,p=null===h,v=h===h,y=cu(h);if(u)var m=r||v;else m=c?v&&(r||d):s?v&&d&&(r||!p):l?v&&d&&!p&&(r||!y):!p&&!y&&(r?h<=t:h<t);m?a=f+1:o=f}return wn(o,4294967294)}function si(e,t){for(var n=-1,r=e.length,i=0,a=[];++n<r;){var o=e[n],u=t?t(o):o;if(!n||!Bo(u,s)){var s=u;a[i++]=0===o?0:o}}return a}function li(e){return"number"==typeof e?e:cu(e)?v:+e}function ci(e){if("string"==typeof e)return e;if(Go(e))return Ot(e,ci)+"";if(cu(e))return Vn?Vn.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function fi(e,t,n){var r=-1,i=Nt,a=e.length,o=!0,u=[],s=u;if(n)o=!1,i=Pt;else if(a>=200){var l=t?null:Yi(e);if(l)return fn(l);o=!1,i=Zt,s=new $n}else s=t?[]:u;e:for(;++r<a;){var c=e[r],f=t?t(c):c;if(c=n||0!==c?c:0,o&&f===f){for(var h=s.length;h--;)if(s[h]===f)continue e;t&&s.push(f),u.push(c)}else i(s,f,n)||(s!==u&&s.push(f),u.push(c))}return u}function hi(e,t){return null==(e=Ca(e,t=wi(t,e)))||delete e[Fa(Xa(t))]}function di(e,t,n,r){return ei(e,t,n(Er(e,t)),r)}function pi(e,t,n,r){for(var i=e.length,a=r?i:-1;(r?a--:++a<i)&&t(e[a],a,e););return n?ii(e,r?0:a,r?a+1:i):ii(e,r?a+1:0,r?i:a)}function vi(e,t){var n=e;return n instanceof Kn&&(n=n.value()),Rt(t,(function(e,t){return t.func.apply(t.thisArg,Lt([e],t.args))}),n)}function yi(e,t,r){var i=e.length;if(i<2)return i?fi(e[0]):[];for(var a=-1,o=n(i);++a<i;)for(var u=e[a],s=-1;++s<i;)s!=a&&(o[a]=hr(o[a]||u,e[s],t,r));return fi(gr(o,1),t,r)}function mi(e,t,n){for(var r=-1,a=e.length,o=t.length,u={};++r<a;){var s=r<o?t[r]:i;n(u,e[r],s)}return u}function gi(e){return $o(e)?e:[]}function bi(e){return"function"==typeof e?e:as}function wi(e,t){return Go(e)?e:ka(e,t)?[e]:Ma(wu(e))}var ki=Xr;function _i(e,t,n){var r=e.length;return n=n===i?r:n,!t&&n>=r?e:ii(e,t,n)}var xi=st||function(e){return dt.clearTimeout(e)};function Ei(e,t){if(t)return e.slice();var n=e.length,r=Ke?Ke(n):new e.constructor(n);return e.copy(r),r}function Ti(e){var t=new e.constructor(e.byteLength);return new He(t).set(new He(e)),t}function Si(e,t){var n=t?Ti(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function Ii(e,t){if(e!==t){var n=e!==i,r=null===e,a=e===e,o=cu(e),u=t!==i,s=null===t,l=t===t,c=cu(t);if(!s&&!c&&!o&&e>t||o&&u&&l&&!s&&!c||r&&u&&l||!n&&l||!a)return 1;if(!r&&!o&&!c&&e<t||c&&n&&a&&!r&&!o||s&&n&&a||!u&&a||!l)return-1}return 0}function Ci(e,t,r,i){for(var a=-1,o=e.length,u=r.length,s=-1,l=t.length,c=bn(o-u,0),f=n(l+c),h=!i;++s<l;)f[s]=t[s];for(;++a<u;)(h||a<o)&&(f[r[a]]=e[a]);for(;c--;)f[s++]=e[a++];return f}function Ai(e,t,r,i){for(var a=-1,o=e.length,u=-1,s=r.length,l=-1,c=t.length,f=bn(o-s,0),h=n(f+c),d=!i;++a<f;)h[a]=e[a];for(var p=a;++l<c;)h[p+l]=t[l];for(;++u<s;)(d||a<o)&&(h[p+r[u]]=e[a++]);return h}function Di(e,t){var r=-1,i=e.length;for(t||(t=n(i));++r<i;)t[r]=e[r];return t}function Ni(e,t,n,r){var a=!n;n||(n={});for(var o=-1,u=t.length;++o<u;){var s=t[o],l=r?r(n[s],e[s],s,n,e):i;l===i&&(l=e[s]),a?or(n,s,l):nr(n,s,l)}return n}function Pi(e,t){return function(n,r){var i=Go(n)?St:ir,a=t?t():{};return i(n,e,la(r,2),a)}}function Oi(e){return Xr((function(t,n){var r=-1,a=n.length,o=a>1?n[a-1]:i,u=a>2?n[2]:i;for(o=e.length>3&&"function"==typeof o?(a--,o):i,u&&wa(n[0],n[1],u)&&(o=a<3?i:o,a=1),t=Se(t);++r<a;){var s=n[r];s&&e(t,s,r,o)}return t}))}function Li(e,t){return function(n,r){if(null==n)return n;if(!Qo(n))return e(n,r);for(var i=n.length,a=t?i:-1,o=Se(n);(t?a--:++a<i)&&!1!==r(o[a],a,o););return n}}function Ri(e){return function(t,n,r){for(var i=-1,a=Se(t),o=r(t),u=o.length;u--;){var s=o[e?u:++i];if(!1===n(a[s],s,a))break}return t}}function ji(e){return function(t){var n=un(t=wu(t))?pn(t):i,r=n?n[0]:t.charAt(0),a=n?_i(n,1).join(""):t.slice(1);return r[e]()+a}}function Mi(e){return function(t){return Rt(Zu(Ku(t).replace(Je,"")),e,"")}}function Fi(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=Bn(e.prototype),r=e.apply(n,t);return nu(r)?r:n}}function qi(e){return function(t,n,r){var a=Se(t);if(!Qo(t)){var o=la(n,3);t=Ou(t),n=function(e){return o(a[e],e,a)}}var u=e(t,n,r);return u>-1?a[o?t[u]:u]:i}}function Vi(e){return ra((function(t){var n=t.length,r=n,o=Hn.prototype.thru;for(e&&t.reverse();r--;){var u=t[r];if("function"!=typeof u)throw new Ae(a);if(o&&!s&&"wrapper"==ua(u))var s=new Hn([],!0)}for(r=s?r:n;++r<n;){var l=ua(u=t[r]),c="wrapper"==l?oa(u):i;s=c&&_a(c[0])&&424==c[1]&&!c[4].length&&1==c[9]?s[ua(c[0])].apply(s,c[3]):1==u.length&&_a(u)?s[l]():s.thru(u)}return function(){var e=arguments,r=e[0];if(s&&1==e.length&&Go(r))return s.plant(r).value();for(var i=0,a=n?t[i].apply(this,e):r;++i<n;)a=t[i].call(this,a);return a}}))}function Ui(e,t,r,a,o,u,s,l,c,h){var d=t&f,p=1&t,v=2&t,y=24&t,m=512&t,g=v?i:Fi(e);return function i(){for(var f=arguments.length,b=n(f),w=f;w--;)b[w]=arguments[w];if(y)var k=sa(i),_=nn(b,k);if(a&&(b=Ci(b,a,o,y)),u&&(b=Ai(b,u,s,y)),f-=_,y&&f<h){var x=cn(b,k);return Qi(e,t,Ui,i.placeholder,r,b,x,l,c,h-f)}var E=p?r:this,T=v?E[e]:e;return f=b.length,l?b=Aa(b,l):m&&f>1&&b.reverse(),d&&c<f&&(b.length=c),this&&this!==dt&&this instanceof i&&(T=g||Fi(T)),T.apply(E,b)}}function Bi(e,t){return function(n,r){return function(e,t,n,r){return kr(e,(function(e,i,a){t(r,n(e),i,a)})),r}(n,e,t(r),{})}}function zi(e,t){return function(n,r){var a;if(n===i&&r===i)return t;if(n!==i&&(a=n),r!==i){if(a===i)return r;"string"==typeof n||"string"==typeof r?(n=ci(n),r=ci(r)):(n=li(n),r=li(r)),a=e(n,r)}return a}}function Hi(e){return ra((function(t){return t=Ot(t,Xt(la())),Xr((function(n){var r=this;return e(t,(function(e){return Tt(e,r,n)}))}))}))}function Ki(e,t){var n=(t=t===i?" ":ci(t)).length;if(n<2)return n?Yr(t,e):t;var r=Yr(t,pt(e/dn(t)));return un(t)?_i(pn(r),0,e).join(""):r.slice(0,e)}function Gi(e){return function(t,r,a){return a&&"number"!=typeof a&&wa(t,r,a)&&(r=a=i),t=vu(t),r===i?(r=t,t=0):r=vu(r),function(e,t,r,i){for(var a=-1,o=bn(pt((t-e)/(r||1)),0),u=n(o);o--;)u[i?o:++a]=e,e+=r;return u}(t,r,a=a===i?t<r?1:-1:vu(a),e)}}function Wi(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=gu(t),n=gu(n)),e(t,n)}}function Qi(e,t,n,r,a,o,u,s,f,h){var d=8&t;t|=d?l:c,4&(t&=~(d?c:l))||(t&=-4);var p=[e,t,a,d?o:i,d?u:i,d?i:o,d?i:u,s,f,h],v=n.apply(i,p);return _a(e)&&Na(v,p),v.placeholder=r,La(v,e,t)}function $i(e){var t=Te[e];return function(e,n){if(e=gu(e),(n=null==n?0:wn(yu(n),292))&&Ft(e)){var r=(wu(e)+"e").split("e");return+((r=(wu(t(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return t(e)}}var Yi=Cn&&1/fn(new Cn([,-0]))[1]==d?function(e){return new Cn(e)}:cs;function Xi(e){return function(t){var n=va(t);return n==T?sn(t):n==D?hn(t):function(e,t){return Ot(t,(function(t){return[t,e[t]]}))}(t,e(t))}}function Ji(e,t,r,o,d,p,v,y){var m=2&t;if(!m&&"function"!=typeof e)throw new Ae(a);var g=o?o.length:0;if(g||(t&=-97,o=d=i),v=v===i?v:bn(yu(v),0),y=y===i?y:yu(y),g-=d?d.length:0,t&c){var b=o,w=d;o=d=i}var k=m?i:oa(e),_=[e,t,r,o,d,b,w,p,v,y];if(k&&function(e,t){var n=e[1],r=t[1],i=n|r,a=i<131,o=r==f&&8==n||r==f&&n==h&&e[7].length<=t[8]||384==r&&t[7].length<=t[8]&&8==n;if(!a&&!o)return e;1&r&&(e[2]=t[2],i|=1&n?0:4);var s=t[3];if(s){var l=e[3];e[3]=l?Ci(l,s,t[4]):s,e[4]=l?cn(e[3],u):t[4]}(s=t[5])&&(l=e[5],e[5]=l?Ai(l,s,t[6]):s,e[6]=l?cn(e[5],u):t[6]);(s=t[7])&&(e[7]=s);r&f&&(e[8]=null==e[8]?t[8]:wn(e[8],t[8]));null==e[9]&&(e[9]=t[9]);e[0]=t[0],e[1]=i}(_,k),e=_[0],t=_[1],r=_[2],o=_[3],d=_[4],!(y=_[9]=_[9]===i?m?0:e.length:bn(_[9]-g,0))&&24&t&&(t&=-25),t&&1!=t)x=8==t||t==s?function(e,t,r){var a=Fi(e);return function o(){for(var u=arguments.length,s=n(u),l=u,c=sa(o);l--;)s[l]=arguments[l];var f=u<3&&s[0]!==c&&s[u-1]!==c?[]:cn(s,c);return(u-=f.length)<r?Qi(e,t,Ui,o.placeholder,i,s,f,i,i,r-u):Tt(this&&this!==dt&&this instanceof o?a:e,this,s)}}(e,t,y):t!=l&&33!=t||d.length?Ui.apply(i,_):function(e,t,r,i){var a=1&t,o=Fi(e);return function t(){for(var u=-1,s=arguments.length,l=-1,c=i.length,f=n(c+s),h=this&&this!==dt&&this instanceof t?o:e;++l<c;)f[l]=i[l];for(;s--;)f[l++]=arguments[++u];return Tt(h,a?r:this,f)}}(e,t,r,o);else var x=function(e,t,n){var r=1&t,i=Fi(e);return function t(){return(this&&this!==dt&&this instanceof t?i:e).apply(r?n:this,arguments)}}(e,t,r);return La((k?ti:Na)(x,_),e,t)}function Zi(e,t,n,r){return e===i||Bo(e,Pe[n])&&!Re.call(r,n)?t:e}function ea(e,t,n,r,a,o){return nu(e)&&nu(t)&&(o.set(t,e),zr(e,t,i,ea,o),o.delete(t)),e}function ta(e){return ou(e)?i:e}function na(e,t,n,r,a,o){var u=1&n,s=e.length,l=t.length;if(s!=l&&!(u&&l>s))return!1;var c=o.get(e),f=o.get(t);if(c&&f)return c==t&&f==e;var h=-1,d=!0,p=2&n?new $n:i;for(o.set(e,t),o.set(t,e);++h<s;){var v=e[h],y=t[h];if(r)var m=u?r(y,v,h,t,e,o):r(v,y,h,e,t,o);if(m!==i){if(m)continue;d=!1;break}if(p){if(!Mt(t,(function(e,t){if(!Zt(p,t)&&(v===e||a(v,e,n,r,o)))return p.push(t)}))){d=!1;break}}else if(v!==y&&!a(v,y,n,r,o)){d=!1;break}}return o.delete(e),o.delete(t),d}function ra(e){return Oa(Ia(e,i,Ga),e+"")}function ia(e){return Tr(e,Ou,da)}function aa(e){return Tr(e,Lu,pa)}var oa=Nn?function(e){return Nn.get(e)}:cs;function ua(e){for(var t=e.name+"",n=Pn[t],r=Re.call(Pn,t)?n.length:0;r--;){var i=n[r],a=i.func;if(null==a||a==e)return i.name}return t}function sa(e){return(Re.call(Un,"placeholder")?Un:e).placeholder}function la(){var e=Un.iteratee||os;return e=e===os?jr:e,arguments.length?e(arguments[0],arguments[1]):e}function ca(e,t){var n=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?n["string"==typeof t?"string":"hash"]:n.map}function fa(e){for(var t=Ou(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,Ta(i)]}return t}function ha(e,t){var n=function(e,t){return null==e?i:e[t]}(e,t);return Rr(n)?n:i}var da=mt?function(e){return null==e?[]:(e=Se(e),Dt(mt(e),(function(t){return Qe.call(e,t)})))}:ms,pa=mt?function(e){for(var t=[];e;)Lt(t,da(e)),e=Ge(e);return t}:ms,va=Sr;function ya(e,t,n){for(var r=-1,i=(t=wi(t,e)).length,a=!1;++r<i;){var o=Fa(t[r]);if(!(a=null!=e&&n(e,o)))break;e=e[o]}return a||++r!=i?a:!!(i=null==e?0:e.length)&&tu(i)&&ba(o,i)&&(Go(e)||Ko(e))}function ma(e){return"function"!=typeof e.constructor||Ea(e)?{}:Bn(Ge(e))}function ga(e){return Go(e)||Ko(e)||!!(Ye&&e&&e[Ye])}function ba(e,t){var n=typeof e;return!!(t=null==t?p:t)&&("number"==n||"symbol"!=n&&we.test(e))&&e>-1&&e%1==0&&e<t}function wa(e,t,n){if(!nu(n))return!1;var r=typeof t;return!!("number"==r?Qo(n)&&ba(t,n.length):"string"==r&&t in n)&&Bo(n[t],e)}function ka(e,t){if(Go(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!cu(e))||(ne.test(e)||!te.test(e)||null!=t&&e in Se(t))}function _a(e){var t=ua(e),n=Un[t];if("function"!=typeof n||!(t in Kn.prototype))return!1;if(e===n)return!0;var r=oa(n);return!!r&&e===r[0]}(Tn&&va(new Tn(new ArrayBuffer(1)))!=R||Sn&&va(new Sn)!=T||In&&va(In.resolve())!=C||Cn&&va(new Cn)!=D||An&&va(new An)!=O)&&(va=function(e){var t=Sr(e),n=t==I?e.constructor:i,r=n?qa(n):"";if(r)switch(r){case On:return R;case Ln:return T;case Rn:return C;case jn:return D;case Mn:return O}return t});var xa=Oe?Zo:gs;function Ea(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Pe)}function Ta(e){return e===e&&!nu(e)}function Sa(e,t){return function(n){return null!=n&&(n[e]===t&&(t!==i||e in Se(n)))}}function Ia(e,t,r){return t=bn(t===i?e.length-1:t,0),function(){for(var i=arguments,a=-1,o=bn(i.length-t,0),u=n(o);++a<o;)u[a]=i[t+a];a=-1;for(var s=n(t+1);++a<t;)s[a]=i[a];return s[t]=r(u),Tt(e,this,s)}}function Ca(e,t){return t.length<2?e:Er(e,ii(t,0,-1))}function Aa(e,t){for(var n=e.length,r=wn(t.length,n),a=Di(e);r--;){var o=t[r];e[r]=ba(o,n)?a[o]:i}return e}function Da(e,t){if(("constructor"!==t||"function"!==typeof e[t])&&"__proto__"!=t)return e[t]}var Na=Ra(ti),Pa=ht||function(e,t){return dt.setTimeout(e,t)},Oa=Ra(ni);function La(e,t,n){var r=t+"";return Oa(e,function(e,t){var n=t.length;if(!n)return e;var r=n-1;return t[r]=(n>1?"& ":"")+t[r],t=t.join(n>2?", ":" "),e.replace(se,"{\n/* [wrapped with "+t+"] */\n")}(r,function(e,t){return It(m,(function(n){var r="_."+n[0];t&n[1]&&!Nt(e,r)&&e.push(r)})),e.sort()}(function(e){var t=e.match(le);return t?t[1].split(ce):[]}(r),n)))}function Ra(e){var t=0,n=0;return function(){var r=kn(),a=16-(r-n);if(n=r,a>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(i,arguments)}}function ja(e,t){var n=-1,r=e.length,a=r-1;for(t=t===i?r:t;++n<t;){var o=$r(n,a),u=e[o];e[o]=e[n],e[n]=u}return e.length=t,e}var Ma=function(e){var t=jo(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(re,(function(e,n,r,i){t.push(r?i.replace(de,"$1"):n||e)})),t}));function Fa(e){if("string"==typeof e||cu(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function qa(e){if(null!=e){try{return Le.call(e)}catch(t){}try{return e+""}catch(t){}}return""}function Va(e){if(e instanceof Kn)return e.clone();var t=new Hn(e.__wrapped__,e.__chain__);return t.__actions__=Di(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var Ua=Xr((function(e,t){return $o(e)?hr(e,gr(t,1,$o,!0)):[]})),Ba=Xr((function(e,t){var n=Xa(t);return $o(n)&&(n=i),$o(e)?hr(e,gr(t,1,$o,!0),la(n,2)):[]})),za=Xr((function(e,t){var n=Xa(t);return $o(n)&&(n=i),$o(e)?hr(e,gr(t,1,$o,!0),i,n):[]}));function Ha(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:yu(n);return i<0&&(i=bn(r+i,0)),Vt(e,la(t,3),i)}function Ka(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var a=r-1;return n!==i&&(a=yu(n),a=n<0?bn(r+a,0):wn(a,r-1)),Vt(e,la(t,3),a,!0)}function Ga(e){return(null==e?0:e.length)?gr(e,1):[]}function Wa(e){return e&&e.length?e[0]:i}var Qa=Xr((function(e){var t=Ot(e,gi);return t.length&&t[0]===e[0]?Dr(t):[]})),$a=Xr((function(e){var t=Xa(e),n=Ot(e,gi);return t===Xa(n)?t=i:n.pop(),n.length&&n[0]===e[0]?Dr(n,la(t,2)):[]})),Ya=Xr((function(e){var t=Xa(e),n=Ot(e,gi);return(t="function"==typeof t?t:i)&&n.pop(),n.length&&n[0]===e[0]?Dr(n,i,t):[]}));function Xa(e){var t=null==e?0:e.length;return t?e[t-1]:i}var Ja=Xr(Za);function Za(e,t){return e&&e.length&&t&&t.length?Wr(e,t):e}var eo=ra((function(e,t){var n=null==e?0:e.length,r=ur(e,t);return Qr(e,Ot(t,(function(e){return ba(e,n)?+e:e})).sort(Ii)),r}));function to(e){return null==e?e:En.call(e)}var no=Xr((function(e){return fi(gr(e,1,$o,!0))})),ro=Xr((function(e){var t=Xa(e);return $o(t)&&(t=i),fi(gr(e,1,$o,!0),la(t,2))})),io=Xr((function(e){var t=Xa(e);return t="function"==typeof t?t:i,fi(gr(e,1,$o,!0),i,t)}));function ao(e){if(!e||!e.length)return[];var t=0;return e=Dt(e,(function(e){if($o(e))return t=bn(e.length,t),!0})),$t(t,(function(t){return Ot(e,Kt(t))}))}function oo(e,t){if(!e||!e.length)return[];var n=ao(e);return null==t?n:Ot(n,(function(e){return Tt(t,i,e)}))}var uo=Xr((function(e,t){return $o(e)?hr(e,t):[]})),so=Xr((function(e){return yi(Dt(e,$o))})),lo=Xr((function(e){var t=Xa(e);return $o(t)&&(t=i),yi(Dt(e,$o),la(t,2))})),co=Xr((function(e){var t=Xa(e);return t="function"==typeof t?t:i,yi(Dt(e,$o),i,t)})),fo=Xr(ao);var ho=Xr((function(e){var t=e.length,n=t>1?e[t-1]:i;return n="function"==typeof n?(e.pop(),n):i,oo(e,n)}));function po(e){var t=Un(e);return t.__chain__=!0,t}function vo(e,t){return t(e)}var yo=ra((function(e){var t=e.length,n=t?e[0]:0,r=this.__wrapped__,a=function(t){return ur(t,e)};return!(t>1||this.__actions__.length)&&r instanceof Kn&&ba(n)?((r=r.slice(n,+n+(t?1:0))).__actions__.push({func:vo,args:[a],thisArg:i}),new Hn(r,this.__chain__).thru((function(e){return t&&!e.length&&e.push(i),e}))):this.thru(a)}));var mo=Pi((function(e,t,n){Re.call(e,n)?++e[n]:or(e,n,1)}));var go=qi(Ha),bo=qi(Ka);function wo(e,t){return(Go(e)?It:dr)(e,la(t,3))}function ko(e,t){return(Go(e)?Ct:pr)(e,la(t,3))}var _o=Pi((function(e,t,n){Re.call(e,n)?e[n].push(t):or(e,n,[t])}));var xo=Xr((function(e,t,r){var i=-1,a="function"==typeof t,o=Qo(e)?n(e.length):[];return dr(e,(function(e){o[++i]=a?Tt(t,e,r):Nr(e,t,r)})),o})),Eo=Pi((function(e,t,n){or(e,n,t)}));function To(e,t){return(Go(e)?Ot:Vr)(e,la(t,3))}var So=Pi((function(e,t,n){e[n?0:1].push(t)}),(function(){return[[],[]]}));var Io=Xr((function(e,t){if(null==e)return[];var n=t.length;return n>1&&wa(e,t[0],t[1])?t=[]:n>2&&wa(t[0],t[1],t[2])&&(t=[t[0]]),Kr(e,gr(t,1),[])})),Co=ft||function(){return dt.Date.now()};function Ao(e,t,n){return t=n?i:t,t=e&&null==t?e.length:t,Ji(e,f,i,i,i,i,t)}function Do(e,t){var n;if("function"!=typeof t)throw new Ae(a);return e=yu(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=i),n}}var No=Xr((function(e,t,n){var r=1;if(n.length){var i=cn(n,sa(No));r|=l}return Ji(e,r,t,n,i)})),Po=Xr((function(e,t,n){var r=3;if(n.length){var i=cn(n,sa(Po));r|=l}return Ji(t,r,e,n,i)}));function Oo(e,t,n){var r,o,u,s,l,c,f=0,h=!1,d=!1,p=!0;if("function"!=typeof e)throw new Ae(a);function v(t){var n=r,a=o;return r=o=i,f=t,s=e.apply(a,n)}function y(e){return f=e,l=Pa(g,t),h?v(e):s}function m(e){var n=e-c;return c===i||n>=t||n<0||d&&e-f>=u}function g(){var e=Co();if(m(e))return b(e);l=Pa(g,function(e){var n=t-(e-c);return d?wn(n,u-(e-f)):n}(e))}function b(e){return l=i,p&&r?v(e):(r=o=i,s)}function w(){var e=Co(),n=m(e);if(r=arguments,o=this,c=e,n){if(l===i)return y(c);if(d)return xi(l),l=Pa(g,t),v(c)}return l===i&&(l=Pa(g,t)),s}return t=gu(t)||0,nu(n)&&(h=!!n.leading,u=(d="maxWait"in n)?bn(gu(n.maxWait)||0,t):u,p="trailing"in n?!!n.trailing:p),w.cancel=function(){l!==i&&xi(l),f=0,r=c=o=l=i},w.flush=function(){return l===i?s:b(Co())},w}var Lo=Xr((function(e,t){return fr(e,1,t)})),Ro=Xr((function(e,t,n){return fr(e,gu(t)||0,n)}));function jo(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new Ae(a);var n=function n(){var r=arguments,i=t?t.apply(this,r):r[0],a=n.cache;if(a.has(i))return a.get(i);var o=e.apply(this,r);return n.cache=a.set(i,o)||a,o};return n.cache=new(jo.Cache||Qn),n}function Mo(e){if("function"!=typeof e)throw new Ae(a);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}jo.Cache=Qn;var Fo=ki((function(e,t){var n=(t=1==t.length&&Go(t[0])?Ot(t[0],Xt(la())):Ot(gr(t,1),Xt(la()))).length;return Xr((function(r){for(var i=-1,a=wn(r.length,n);++i<a;)r[i]=t[i].call(this,r[i]);return Tt(e,this,r)}))})),qo=Xr((function(e,t){var n=cn(t,sa(qo));return Ji(e,l,i,t,n)})),Vo=Xr((function(e,t){var n=cn(t,sa(Vo));return Ji(e,c,i,t,n)})),Uo=ra((function(e,t){return Ji(e,h,i,i,i,t)}));function Bo(e,t){return e===t||e!==e&&t!==t}var zo=Wi(Ir),Ho=Wi((function(e,t){return e>=t})),Ko=Pr(function(){return arguments}())?Pr:function(e){return ru(e)&&Re.call(e,"callee")&&!Qe.call(e,"callee")},Go=n.isArray,Wo=bt?Xt(bt):function(e){return ru(e)&&Sr(e)==L};function Qo(e){return null!=e&&tu(e.length)&&!Zo(e)}function $o(e){return ru(e)&&Qo(e)}var Yo=gt||gs,Xo=wt?Xt(wt):function(e){return ru(e)&&Sr(e)==k};function Jo(e){if(!ru(e))return!1;var t=Sr(e);return t==_||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!ou(e)}function Zo(e){if(!nu(e))return!1;var t=Sr(e);return t==x||t==E||"[object AsyncFunction]"==t||"[object Proxy]"==t}function eu(e){return"number"==typeof e&&e==yu(e)}function tu(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=p}function nu(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function ru(e){return null!=e&&"object"==typeof e}var iu=kt?Xt(kt):function(e){return ru(e)&&va(e)==T};function au(e){return"number"==typeof e||ru(e)&&Sr(e)==S}function ou(e){if(!ru(e)||Sr(e)!=I)return!1;var t=Ge(e);if(null===t)return!0;var n=Re.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&Le.call(n)==qe}var uu=_t?Xt(_t):function(e){return ru(e)&&Sr(e)==A};var su=xt?Xt(xt):function(e){return ru(e)&&va(e)==D};function lu(e){return"string"==typeof e||!Go(e)&&ru(e)&&Sr(e)==N}function cu(e){return"symbol"==typeof e||ru(e)&&Sr(e)==P}var fu=Et?Xt(Et):function(e){return ru(e)&&tu(e.length)&&!!ot[Sr(e)]};var hu=Wi(qr),du=Wi((function(e,t){return e<=t}));function pu(e){if(!e)return[];if(Qo(e))return lu(e)?pn(e):Di(e);if(Xe&&e[Xe])return function(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}(e[Xe]());var t=va(e);return(t==T?sn:t==D?fn:Bu)(e)}function vu(e){return e?(e=gu(e))===d||e===-1/0?17976931348623157e292*(e<0?-1:1):e===e?e:0:0===e?e:0}function yu(e){var t=vu(e),n=t%1;return t===t?n?t-n:t:0}function mu(e){return e?sr(yu(e),0,y):0}function gu(e){if("number"==typeof e)return e;if(cu(e))return v;if(nu(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=nu(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Yt(e);var n=me.test(e);return n||be.test(e)?ct(e.slice(2),n?2:8):ye.test(e)?v:+e}function bu(e){return Ni(e,Lu(e))}function wu(e){return null==e?"":ci(e)}var ku=Oi((function(e,t){if(Ea(t)||Qo(t))Ni(t,Ou(t),e);else for(var n in t)Re.call(t,n)&&nr(e,n,t[n])})),_u=Oi((function(e,t){Ni(t,Lu(t),e)})),xu=Oi((function(e,t,n,r){Ni(t,Lu(t),e,r)})),Eu=Oi((function(e,t,n,r){Ni(t,Ou(t),e,r)})),Tu=ra(ur);var Su=Xr((function(e,t){e=Se(e);var n=-1,r=t.length,a=r>2?t[2]:i;for(a&&wa(t[0],t[1],a)&&(r=1);++n<r;)for(var o=t[n],u=Lu(o),s=-1,l=u.length;++s<l;){var c=u[s],f=e[c];(f===i||Bo(f,Pe[c])&&!Re.call(e,c))&&(e[c]=o[c])}return e})),Iu=Xr((function(e){return e.push(i,ea),Tt(ju,i,e)}));function Cu(e,t,n){var r=null==e?i:Er(e,t);return r===i?n:r}function Au(e,t){return null!=e&&ya(e,t,Ar)}var Du=Bi((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Fe.call(t)),e[t]=n}),ns(as)),Nu=Bi((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Fe.call(t)),Re.call(e,t)?e[t].push(n):e[t]=[n]}),la),Pu=Xr(Nr);function Ou(e){return Qo(e)?Xn(e):Mr(e)}function Lu(e){return Qo(e)?Xn(e,!0):Fr(e)}var Ru=Oi((function(e,t,n){zr(e,t,n)})),ju=Oi((function(e,t,n,r){zr(e,t,n,r)})),Mu=ra((function(e,t){var n={};if(null==e)return n;var r=!1;t=Ot(t,(function(t){return t=wi(t,e),r||(r=t.length>1),t})),Ni(e,aa(e),n),r&&(n=lr(n,7,ta));for(var i=t.length;i--;)hi(n,t[i]);return n}));var Fu=ra((function(e,t){return null==e?{}:function(e,t){return Gr(e,t,(function(t,n){return Au(e,n)}))}(e,t)}));function qu(e,t){if(null==e)return{};var n=Ot(aa(e),(function(e){return[e]}));return t=la(t),Gr(e,n,(function(e,n){return t(e,n[0])}))}var Vu=Xi(Ou),Uu=Xi(Lu);function Bu(e){return null==e?[]:Jt(e,Ou(e))}var zu=Mi((function(e,t,n){return t=t.toLowerCase(),e+(n?Hu(t):t)}));function Hu(e){return Ju(wu(e).toLowerCase())}function Ku(e){return(e=wu(e))&&e.replace(ke,rn).replace(Ze,"")}var Gu=Mi((function(e,t,n){return e+(n?"-":"")+t.toLowerCase()})),Wu=Mi((function(e,t,n){return e+(n?" ":"")+t.toLowerCase()})),Qu=ji("toLowerCase");var $u=Mi((function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}));var Yu=Mi((function(e,t,n){return e+(n?" ":"")+Ju(t)}));var Xu=Mi((function(e,t,n){return e+(n?" ":"")+t.toUpperCase()})),Ju=ji("toUpperCase");function Zu(e,t,n){return e=wu(e),(t=n?i:t)===i?function(e){return rt.test(e)}(e)?function(e){return e.match(tt)||[]}(e):function(e){return e.match(fe)||[]}(e):e.match(t)||[]}var es=Xr((function(e,t){try{return Tt(e,i,t)}catch(n){return Jo(n)?n:new ue(n)}})),ts=ra((function(e,t){return It(t,(function(t){t=Fa(t),or(e,t,No(e[t],e))})),e}));function ns(e){return function(){return e}}var rs=Vi(),is=Vi(!0);function as(e){return e}function os(e){return jr("function"==typeof e?e:lr(e,1))}var us=Xr((function(e,t){return function(n){return Nr(n,e,t)}})),ss=Xr((function(e,t){return function(n){return Nr(e,n,t)}}));function ls(e,t,n){var r=Ou(t),i=xr(t,r);null!=n||nu(t)&&(i.length||!r.length)||(n=t,t=e,e=this,i=xr(t,Ou(t)));var a=!(nu(n)&&"chain"in n)||!!n.chain,o=Zo(e);return It(i,(function(n){var r=t[n];e[n]=r,o&&(e.prototype[n]=function(){var t=this.__chain__;if(a||t){var n=e(this.__wrapped__),i=n.__actions__=Di(this.__actions__);return i.push({func:r,args:arguments,thisArg:e}),n.__chain__=t,n}return r.apply(e,Lt([this.value()],arguments))})})),e}function cs(){}var fs=Hi(Ot),hs=Hi(At),ds=Hi(Mt);function ps(e){return ka(e)?Kt(Fa(e)):function(e){return function(t){return Er(t,e)}}(e)}var vs=Gi(),ys=Gi(!0);function ms(){return[]}function gs(){return!1}var bs=zi((function(e,t){return e+t}),0),ws=$i("ceil"),ks=zi((function(e,t){return e/t}),1),_s=$i("floor");var xs=zi((function(e,t){return e*t}),1),Es=$i("round"),Ts=zi((function(e,t){return e-t}),0);return Un.after=function(e,t){if("function"!=typeof t)throw new Ae(a);return e=yu(e),function(){if(--e<1)return t.apply(this,arguments)}},Un.ary=Ao,Un.assign=ku,Un.assignIn=_u,Un.assignInWith=xu,Un.assignWith=Eu,Un.at=Tu,Un.before=Do,Un.bind=No,Un.bindAll=ts,Un.bindKey=Po,Un.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return Go(e)?e:[e]},Un.chain=po,Un.chunk=function(e,t,r){t=(r?wa(e,t,r):t===i)?1:bn(yu(t),0);var a=null==e?0:e.length;if(!a||t<1)return[];for(var o=0,u=0,s=n(pt(a/t));o<a;)s[u++]=ii(e,o,o+=t);return s},Un.compact=function(e){for(var t=-1,n=null==e?0:e.length,r=0,i=[];++t<n;){var a=e[t];a&&(i[r++]=a)}return i},Un.concat=function(){var e=arguments.length;if(!e)return[];for(var t=n(e-1),r=arguments[0],i=e;i--;)t[i-1]=arguments[i];return Lt(Go(r)?Di(r):[r],gr(t,1))},Un.cond=function(e){var t=null==e?0:e.length,n=la();return e=t?Ot(e,(function(e){if("function"!=typeof e[1])throw new Ae(a);return[n(e[0]),e[1]]})):[],Xr((function(n){for(var r=-1;++r<t;){var i=e[r];if(Tt(i[0],this,n))return Tt(i[1],this,n)}}))},Un.conforms=function(e){return function(e){var t=Ou(e);return function(n){return cr(n,e,t)}}(lr(e,1))},Un.constant=ns,Un.countBy=mo,Un.create=function(e,t){var n=Bn(e);return null==t?n:ar(n,t)},Un.curry=function e(t,n,r){var a=Ji(t,8,i,i,i,i,i,n=r?i:n);return a.placeholder=e.placeholder,a},Un.curryRight=function e(t,n,r){var a=Ji(t,s,i,i,i,i,i,n=r?i:n);return a.placeholder=e.placeholder,a},Un.debounce=Oo,Un.defaults=Su,Un.defaultsDeep=Iu,Un.defer=Lo,Un.delay=Ro,Un.difference=Ua,Un.differenceBy=Ba,Un.differenceWith=za,Un.drop=function(e,t,n){var r=null==e?0:e.length;return r?ii(e,(t=n||t===i?1:yu(t))<0?0:t,r):[]},Un.dropRight=function(e,t,n){var r=null==e?0:e.length;return r?ii(e,0,(t=r-(t=n||t===i?1:yu(t)))<0?0:t):[]},Un.dropRightWhile=function(e,t){return e&&e.length?pi(e,la(t,3),!0,!0):[]},Un.dropWhile=function(e,t){return e&&e.length?pi(e,la(t,3),!0):[]},Un.fill=function(e,t,n,r){var a=null==e?0:e.length;return a?(n&&"number"!=typeof n&&wa(e,t,n)&&(n=0,r=a),function(e,t,n,r){var a=e.length;for((n=yu(n))<0&&(n=-n>a?0:a+n),(r=r===i||r>a?a:yu(r))<0&&(r+=a),r=n>r?0:mu(r);n<r;)e[n++]=t;return e}(e,t,n,r)):[]},Un.filter=function(e,t){return(Go(e)?Dt:mr)(e,la(t,3))},Un.flatMap=function(e,t){return gr(To(e,t),1)},Un.flatMapDeep=function(e,t){return gr(To(e,t),d)},Un.flatMapDepth=function(e,t,n){return n=n===i?1:yu(n),gr(To(e,t),n)},Un.flatten=Ga,Un.flattenDeep=function(e){return(null==e?0:e.length)?gr(e,d):[]},Un.flattenDepth=function(e,t){return(null==e?0:e.length)?gr(e,t=t===i?1:yu(t)):[]},Un.flip=function(e){return Ji(e,512)},Un.flow=rs,Un.flowRight=is,Un.fromPairs=function(e){for(var t=-1,n=null==e?0:e.length,r={};++t<n;){var i=e[t];r[i[0]]=i[1]}return r},Un.functions=function(e){return null==e?[]:xr(e,Ou(e))},Un.functionsIn=function(e){return null==e?[]:xr(e,Lu(e))},Un.groupBy=_o,Un.initial=function(e){return(null==e?0:e.length)?ii(e,0,-1):[]},Un.intersection=Qa,Un.intersectionBy=$a,Un.intersectionWith=Ya,Un.invert=Du,Un.invertBy=Nu,Un.invokeMap=xo,Un.iteratee=os,Un.keyBy=Eo,Un.keys=Ou,Un.keysIn=Lu,Un.map=To,Un.mapKeys=function(e,t){var n={};return t=la(t,3),kr(e,(function(e,r,i){or(n,t(e,r,i),e)})),n},Un.mapValues=function(e,t){var n={};return t=la(t,3),kr(e,(function(e,r,i){or(n,r,t(e,r,i))})),n},Un.matches=function(e){return Ur(lr(e,1))},Un.matchesProperty=function(e,t){return Br(e,lr(t,1))},Un.memoize=jo,Un.merge=Ru,Un.mergeWith=ju,Un.method=us,Un.methodOf=ss,Un.mixin=ls,Un.negate=Mo,Un.nthArg=function(e){return e=yu(e),Xr((function(t){return Hr(t,e)}))},Un.omit=Mu,Un.omitBy=function(e,t){return qu(e,Mo(la(t)))},Un.once=function(e){return Do(2,e)},Un.orderBy=function(e,t,n,r){return null==e?[]:(Go(t)||(t=null==t?[]:[t]),Go(n=r?i:n)||(n=null==n?[]:[n]),Kr(e,t,n))},Un.over=fs,Un.overArgs=Fo,Un.overEvery=hs,Un.overSome=ds,Un.partial=qo,Un.partialRight=Vo,Un.partition=So,Un.pick=Fu,Un.pickBy=qu,Un.property=ps,Un.propertyOf=function(e){return function(t){return null==e?i:Er(e,t)}},Un.pull=Ja,Un.pullAll=Za,Un.pullAllBy=function(e,t,n){return e&&e.length&&t&&t.length?Wr(e,t,la(n,2)):e},Un.pullAllWith=function(e,t,n){return e&&e.length&&t&&t.length?Wr(e,t,i,n):e},Un.pullAt=eo,Un.range=vs,Un.rangeRight=ys,Un.rearg=Uo,Un.reject=function(e,t){return(Go(e)?Dt:mr)(e,Mo(la(t,3)))},Un.remove=function(e,t){var n=[];if(!e||!e.length)return n;var r=-1,i=[],a=e.length;for(t=la(t,3);++r<a;){var o=e[r];t(o,r,e)&&(n.push(o),i.push(r))}return Qr(e,i),n},Un.rest=function(e,t){if("function"!=typeof e)throw new Ae(a);return Xr(e,t=t===i?t:yu(t))},Un.reverse=to,Un.sampleSize=function(e,t,n){return t=(n?wa(e,t,n):t===i)?1:yu(t),(Go(e)?Zn:Zr)(e,t)},Un.set=function(e,t,n){return null==e?e:ei(e,t,n)},Un.setWith=function(e,t,n,r){return r="function"==typeof r?r:i,null==e?e:ei(e,t,n,r)},Un.shuffle=function(e){return(Go(e)?er:ri)(e)},Un.slice=function(e,t,n){var r=null==e?0:e.length;return r?(n&&"number"!=typeof n&&wa(e,t,n)?(t=0,n=r):(t=null==t?0:yu(t),n=n===i?r:yu(n)),ii(e,t,n)):[]},Un.sortBy=Io,Un.sortedUniq=function(e){return e&&e.length?si(e):[]},Un.sortedUniqBy=function(e,t){return e&&e.length?si(e,la(t,2)):[]},Un.split=function(e,t,n){return n&&"number"!=typeof n&&wa(e,t,n)&&(t=n=i),(n=n===i?y:n>>>0)?(e=wu(e))&&("string"==typeof t||null!=t&&!uu(t))&&!(t=ci(t))&&un(e)?_i(pn(e),0,n):e.split(t,n):[]},Un.spread=function(e,t){if("function"!=typeof e)throw new Ae(a);return t=null==t?0:bn(yu(t),0),Xr((function(n){var r=n[t],i=_i(n,0,t);return r&&Lt(i,r),Tt(e,this,i)}))},Un.tail=function(e){var t=null==e?0:e.length;return t?ii(e,1,t):[]},Un.take=function(e,t,n){return e&&e.length?ii(e,0,(t=n||t===i?1:yu(t))<0?0:t):[]},Un.takeRight=function(e,t,n){var r=null==e?0:e.length;return r?ii(e,(t=r-(t=n||t===i?1:yu(t)))<0?0:t,r):[]},Un.takeRightWhile=function(e,t){return e&&e.length?pi(e,la(t,3),!1,!0):[]},Un.takeWhile=function(e,t){return e&&e.length?pi(e,la(t,3)):[]},Un.tap=function(e,t){return t(e),e},Un.throttle=function(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw new Ae(a);return nu(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),Oo(e,t,{leading:r,maxWait:t,trailing:i})},Un.thru=vo,Un.toArray=pu,Un.toPairs=Vu,Un.toPairsIn=Uu,Un.toPath=function(e){return Go(e)?Ot(e,Fa):cu(e)?[e]:Di(Ma(wu(e)))},Un.toPlainObject=bu,Un.transform=function(e,t,n){var r=Go(e),i=r||Yo(e)||fu(e);if(t=la(t,4),null==n){var a=e&&e.constructor;n=i?r?new a:[]:nu(e)&&Zo(a)?Bn(Ge(e)):{}}return(i?It:kr)(e,(function(e,r,i){return t(n,e,r,i)})),n},Un.unary=function(e){return Ao(e,1)},Un.union=no,Un.unionBy=ro,Un.unionWith=io,Un.uniq=function(e){return e&&e.length?fi(e):[]},Un.uniqBy=function(e,t){return e&&e.length?fi(e,la(t,2)):[]},Un.uniqWith=function(e,t){return t="function"==typeof t?t:i,e&&e.length?fi(e,i,t):[]},Un.unset=function(e,t){return null==e||hi(e,t)},Un.unzip=ao,Un.unzipWith=oo,Un.update=function(e,t,n){return null==e?e:di(e,t,bi(n))},Un.updateWith=function(e,t,n,r){return r="function"==typeof r?r:i,null==e?e:di(e,t,bi(n),r)},Un.values=Bu,Un.valuesIn=function(e){return null==e?[]:Jt(e,Lu(e))},Un.without=uo,Un.words=Zu,Un.wrap=function(e,t){return qo(bi(t),e)},Un.xor=so,Un.xorBy=lo,Un.xorWith=co,Un.zip=fo,Un.zipObject=function(e,t){return mi(e||[],t||[],nr)},Un.zipObjectDeep=function(e,t){return mi(e||[],t||[],ei)},Un.zipWith=ho,Un.entries=Vu,Un.entriesIn=Uu,Un.extend=_u,Un.extendWith=xu,ls(Un,Un),Un.add=bs,Un.attempt=es,Un.camelCase=zu,Un.capitalize=Hu,Un.ceil=ws,Un.clamp=function(e,t,n){return n===i&&(n=t,t=i),n!==i&&(n=(n=gu(n))===n?n:0),t!==i&&(t=(t=gu(t))===t?t:0),sr(gu(e),t,n)},Un.clone=function(e){return lr(e,4)},Un.cloneDeep=function(e){return lr(e,5)},Un.cloneDeepWith=function(e,t){return lr(e,5,t="function"==typeof t?t:i)},Un.cloneWith=function(e,t){return lr(e,4,t="function"==typeof t?t:i)},Un.conformsTo=function(e,t){return null==t||cr(e,t,Ou(t))},Un.deburr=Ku,Un.defaultTo=function(e,t){return null==e||e!==e?t:e},Un.divide=ks,Un.endsWith=function(e,t,n){e=wu(e),t=ci(t);var r=e.length,a=n=n===i?r:sr(yu(n),0,r);return(n-=t.length)>=0&&e.slice(n,a)==t},Un.eq=Bo,Un.escape=function(e){return(e=wu(e))&&X.test(e)?e.replace($,an):e},Un.escapeRegExp=function(e){return(e=wu(e))&&ae.test(e)?e.replace(ie,"\\$&"):e},Un.every=function(e,t,n){var r=Go(e)?At:vr;return n&&wa(e,t,n)&&(t=i),r(e,la(t,3))},Un.find=go,Un.findIndex=Ha,Un.findKey=function(e,t){return qt(e,la(t,3),kr)},Un.findLast=bo,Un.findLastIndex=Ka,Un.findLastKey=function(e,t){return qt(e,la(t,3),_r)},Un.floor=_s,Un.forEach=wo,Un.forEachRight=ko,Un.forIn=function(e,t){return null==e?e:br(e,la(t,3),Lu)},Un.forInRight=function(e,t){return null==e?e:wr(e,la(t,3),Lu)},Un.forOwn=function(e,t){return e&&kr(e,la(t,3))},Un.forOwnRight=function(e,t){return e&&_r(e,la(t,3))},Un.get=Cu,Un.gt=zo,Un.gte=Ho,Un.has=function(e,t){return null!=e&&ya(e,t,Cr)},Un.hasIn=Au,Un.head=Wa,Un.identity=as,Un.includes=function(e,t,n,r){e=Qo(e)?e:Bu(e),n=n&&!r?yu(n):0;var i=e.length;return n<0&&(n=bn(i+n,0)),lu(e)?n<=i&&e.indexOf(t,n)>-1:!!i&&Ut(e,t,n)>-1},Un.indexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:yu(n);return i<0&&(i=bn(r+i,0)),Ut(e,t,i)},Un.inRange=function(e,t,n){return t=vu(t),n===i?(n=t,t=0):n=vu(n),function(e,t,n){return e>=wn(t,n)&&e<bn(t,n)}(e=gu(e),t,n)},Un.invoke=Pu,Un.isArguments=Ko,Un.isArray=Go,Un.isArrayBuffer=Wo,Un.isArrayLike=Qo,Un.isArrayLikeObject=$o,Un.isBoolean=function(e){return!0===e||!1===e||ru(e)&&Sr(e)==w},Un.isBuffer=Yo,Un.isDate=Xo,Un.isElement=function(e){return ru(e)&&1===e.nodeType&&!ou(e)},Un.isEmpty=function(e){if(null==e)return!0;if(Qo(e)&&(Go(e)||"string"==typeof e||"function"==typeof e.splice||Yo(e)||fu(e)||Ko(e)))return!e.length;var t=va(e);if(t==T||t==D)return!e.size;if(Ea(e))return!Mr(e).length;for(var n in e)if(Re.call(e,n))return!1;return!0},Un.isEqual=function(e,t){return Or(e,t)},Un.isEqualWith=function(e,t,n){var r=(n="function"==typeof n?n:i)?n(e,t):i;return r===i?Or(e,t,i,n):!!r},Un.isError=Jo,Un.isFinite=function(e){return"number"==typeof e&&Ft(e)},Un.isFunction=Zo,Un.isInteger=eu,Un.isLength=tu,Un.isMap=iu,Un.isMatch=function(e,t){return e===t||Lr(e,t,fa(t))},Un.isMatchWith=function(e,t,n){return n="function"==typeof n?n:i,Lr(e,t,fa(t),n)},Un.isNaN=function(e){return au(e)&&e!=+e},Un.isNative=function(e){if(xa(e))throw new ue("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Rr(e)},Un.isNil=function(e){return null==e},Un.isNull=function(e){return null===e},Un.isNumber=au,Un.isObject=nu,Un.isObjectLike=ru,Un.isPlainObject=ou,Un.isRegExp=uu,Un.isSafeInteger=function(e){return eu(e)&&e>=-9007199254740991&&e<=p},Un.isSet=su,Un.isString=lu,Un.isSymbol=cu,Un.isTypedArray=fu,Un.isUndefined=function(e){return e===i},Un.isWeakMap=function(e){return ru(e)&&va(e)==O},Un.isWeakSet=function(e){return ru(e)&&"[object WeakSet]"==Sr(e)},Un.join=function(e,t){return null==e?"":Gt.call(e,t)},Un.kebabCase=Gu,Un.last=Xa,Un.lastIndexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var a=r;return n!==i&&(a=(a=yu(n))<0?bn(r+a,0):wn(a,r-1)),t===t?function(e,t,n){for(var r=n+1;r--;)if(e[r]===t)return r;return r}(e,t,a):Vt(e,zt,a,!0)},Un.lowerCase=Wu,Un.lowerFirst=Qu,Un.lt=hu,Un.lte=du,Un.max=function(e){return e&&e.length?yr(e,as,Ir):i},Un.maxBy=function(e,t){return e&&e.length?yr(e,la(t,2),Ir):i},Un.mean=function(e){return Ht(e,as)},Un.meanBy=function(e,t){return Ht(e,la(t,2))},Un.min=function(e){return e&&e.length?yr(e,as,qr):i},Un.minBy=function(e,t){return e&&e.length?yr(e,la(t,2),qr):i},Un.stubArray=ms,Un.stubFalse=gs,Un.stubObject=function(){return{}},Un.stubString=function(){return""},Un.stubTrue=function(){return!0},Un.multiply=xs,Un.nth=function(e,t){return e&&e.length?Hr(e,yu(t)):i},Un.noConflict=function(){return dt._===this&&(dt._=Ve),this},Un.noop=cs,Un.now=Co,Un.pad=function(e,t,n){e=wu(e);var r=(t=yu(t))?dn(e):0;if(!t||r>=t)return e;var i=(t-r)/2;return Ki(vt(i),n)+e+Ki(pt(i),n)},Un.padEnd=function(e,t,n){e=wu(e);var r=(t=yu(t))?dn(e):0;return t&&r<t?e+Ki(t-r,n):e},Un.padStart=function(e,t,n){e=wu(e);var r=(t=yu(t))?dn(e):0;return t&&r<t?Ki(t-r,n)+e:e},Un.parseInt=function(e,t,n){return n||null==t?t=0:t&&(t=+t),_n(wu(e).replace(oe,""),t||0)},Un.random=function(e,t,n){if(n&&"boolean"!=typeof n&&wa(e,t,n)&&(t=n=i),n===i&&("boolean"==typeof t?(n=t,t=i):"boolean"==typeof e&&(n=e,e=i)),e===i&&t===i?(e=0,t=1):(e=vu(e),t===i?(t=e,e=0):t=vu(t)),e>t){var r=e;e=t,t=r}if(n||e%1||t%1){var a=xn();return wn(e+a*(t-e+lt("1e-"+((a+"").length-1))),t)}return $r(e,t)},Un.reduce=function(e,t,n){var r=Go(e)?Rt:Wt,i=arguments.length<3;return r(e,la(t,4),n,i,dr)},Un.reduceRight=function(e,t,n){var r=Go(e)?jt:Wt,i=arguments.length<3;return r(e,la(t,4),n,i,pr)},Un.repeat=function(e,t,n){return t=(n?wa(e,t,n):t===i)?1:yu(t),Yr(wu(e),t)},Un.replace=function(){var e=arguments,t=wu(e[0]);return e.length<3?t:t.replace(e[1],e[2])},Un.result=function(e,t,n){var r=-1,a=(t=wi(t,e)).length;for(a||(a=1,e=i);++r<a;){var o=null==e?i:e[Fa(t[r])];o===i&&(r=a,o=n),e=Zo(o)?o.call(e):o}return e},Un.round=Es,Un.runInContext=e,Un.sample=function(e){return(Go(e)?Jn:Jr)(e)},Un.size=function(e){if(null==e)return 0;if(Qo(e))return lu(e)?dn(e):e.length;var t=va(e);return t==T||t==D?e.size:Mr(e).length},Un.snakeCase=$u,Un.some=function(e,t,n){var r=Go(e)?Mt:ai;return n&&wa(e,t,n)&&(t=i),r(e,la(t,3))},Un.sortedIndex=function(e,t){return oi(e,t)},Un.sortedIndexBy=function(e,t,n){return ui(e,t,la(n,2))},Un.sortedIndexOf=function(e,t){var n=null==e?0:e.length;if(n){var r=oi(e,t);if(r<n&&Bo(e[r],t))return r}return-1},Un.sortedLastIndex=function(e,t){return oi(e,t,!0)},Un.sortedLastIndexBy=function(e,t,n){return ui(e,t,la(n,2),!0)},Un.sortedLastIndexOf=function(e,t){if(null==e?0:e.length){var n=oi(e,t,!0)-1;if(Bo(e[n],t))return n}return-1},Un.startCase=Yu,Un.startsWith=function(e,t,n){return e=wu(e),n=null==n?0:sr(yu(n),0,e.length),t=ci(t),e.slice(n,n+t.length)==t},Un.subtract=Ts,Un.sum=function(e){return e&&e.length?Qt(e,as):0},Un.sumBy=function(e,t){return e&&e.length?Qt(e,la(t,2)):0},Un.template=function(e,t,n){var r=Un.templateSettings;n&&wa(e,t,n)&&(t=i),e=wu(e),t=xu({},t,r,Zi);var a,o,u=xu({},t.imports,r.imports,Zi),s=Ou(u),l=Jt(u,s),c=0,f=t.interpolate||_e,h="__p += '",d=Ie((t.escape||_e).source+"|"+f.source+"|"+(f===ee?pe:_e).source+"|"+(t.evaluate||_e).source+"|$","g"),p="//# sourceURL="+(Re.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++at+"]")+"\n";e.replace(d,(function(t,n,r,i,u,s){return r||(r=i),h+=e.slice(c,s).replace(xe,on),n&&(a=!0,h+="' +\n__e("+n+") +\n'"),u&&(o=!0,h+="';\n"+u+";\n__p += '"),r&&(h+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),c=s+t.length,t})),h+="';\n";var v=Re.call(t,"variable")&&t.variable;if(v){if(he.test(v))throw new ue("Invalid `variable` option passed into `_.template`")}else h="with (obj) {\n"+h+"\n}\n";h=(o?h.replace(K,""):h).replace(G,"$1").replace(W,"$1;"),h="function("+(v||"obj")+") {\n"+(v?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(a?", __e = _.escape":"")+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+h+"return __p\n}";var y=es((function(){return Ee(s,p+"return "+h).apply(i,l)}));if(y.source=h,Jo(y))throw y;return y},Un.times=function(e,t){if((e=yu(e))<1||e>p)return[];var n=y,r=wn(e,y);t=la(t),e-=y;for(var i=$t(r,t);++n<e;)t(n);return i},Un.toFinite=vu,Un.toInteger=yu,Un.toLength=mu,Un.toLower=function(e){return wu(e).toLowerCase()},Un.toNumber=gu,Un.toSafeInteger=function(e){return e?sr(yu(e),-9007199254740991,p):0===e?e:0},Un.toString=wu,Un.toUpper=function(e){return wu(e).toUpperCase()},Un.trim=function(e,t,n){if((e=wu(e))&&(n||t===i))return Yt(e);if(!e||!(t=ci(t)))return e;var r=pn(e),a=pn(t);return _i(r,en(r,a),tn(r,a)+1).join("")},Un.trimEnd=function(e,t,n){if((e=wu(e))&&(n||t===i))return e.slice(0,vn(e)+1);if(!e||!(t=ci(t)))return e;var r=pn(e);return _i(r,0,tn(r,pn(t))+1).join("")},Un.trimStart=function(e,t,n){if((e=wu(e))&&(n||t===i))return e.replace(oe,"");if(!e||!(t=ci(t)))return e;var r=pn(e);return _i(r,en(r,pn(t))).join("")},Un.truncate=function(e,t){var n=30,r="...";if(nu(t)){var a="separator"in t?t.separator:a;n="length"in t?yu(t.length):n,r="omission"in t?ci(t.omission):r}var o=(e=wu(e)).length;if(un(e)){var u=pn(e);o=u.length}if(n>=o)return e;var s=n-dn(r);if(s<1)return r;var l=u?_i(u,0,s).join(""):e.slice(0,s);if(a===i)return l+r;if(u&&(s+=l.length-s),uu(a)){if(e.slice(s).search(a)){var c,f=l;for(a.global||(a=Ie(a.source,wu(ve.exec(a))+"g")),a.lastIndex=0;c=a.exec(f);)var h=c.index;l=l.slice(0,h===i?s:h)}}else if(e.indexOf(ci(a),s)!=s){var d=l.lastIndexOf(a);d>-1&&(l=l.slice(0,d))}return l+r},Un.unescape=function(e){return(e=wu(e))&&Y.test(e)?e.replace(Q,yn):e},Un.uniqueId=function(e){var t=++je;return wu(e)+t},Un.upperCase=Xu,Un.upperFirst=Ju,Un.each=wo,Un.eachRight=ko,Un.first=Wa,ls(Un,function(){var e={};return kr(Un,(function(t,n){Re.call(Un.prototype,n)||(e[n]=t)})),e}(),{chain:!1}),Un.VERSION="4.17.21",It(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(e){Un[e].placeholder=Un})),It(["drop","take"],(function(e,t){Kn.prototype[e]=function(n){n=n===i?1:bn(yu(n),0);var r=this.__filtered__&&!t?new Kn(this):this.clone();return r.__filtered__?r.__takeCount__=wn(n,r.__takeCount__):r.__views__.push({size:wn(n,y),type:e+(r.__dir__<0?"Right":"")}),r},Kn.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}})),It(["filter","map","takeWhile"],(function(e,t){var n=t+1,r=1==n||3==n;Kn.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:la(e,3),type:n}),t.__filtered__=t.__filtered__||r,t}})),It(["head","last"],(function(e,t){var n="take"+(t?"Right":"");Kn.prototype[e]=function(){return this[n](1).value()[0]}})),It(["initial","tail"],(function(e,t){var n="drop"+(t?"":"Right");Kn.prototype[e]=function(){return this.__filtered__?new Kn(this):this[n](1)}})),Kn.prototype.compact=function(){return this.filter(as)},Kn.prototype.find=function(e){return this.filter(e).head()},Kn.prototype.findLast=function(e){return this.reverse().find(e)},Kn.prototype.invokeMap=Xr((function(e,t){return"function"==typeof e?new Kn(this):this.map((function(n){return Nr(n,e,t)}))})),Kn.prototype.reject=function(e){return this.filter(Mo(la(e)))},Kn.prototype.slice=function(e,t){e=yu(e);var n=this;return n.__filtered__&&(e>0||t<0)?new Kn(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==i&&(n=(t=yu(t))<0?n.dropRight(-t):n.take(t-e)),n)},Kn.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Kn.prototype.toArray=function(){return this.take(y)},kr(Kn.prototype,(function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),r=/^(?:head|last)$/.test(t),a=Un[r?"take"+("last"==t?"Right":""):t],o=r||/^find/.test(t);a&&(Un.prototype[t]=function(){var t=this.__wrapped__,u=r?[1]:arguments,s=t instanceof Kn,l=u[0],c=s||Go(t),f=function(e){var t=a.apply(Un,Lt([e],u));return r&&h?t[0]:t};c&&n&&"function"==typeof l&&1!=l.length&&(s=c=!1);var h=this.__chain__,d=!!this.__actions__.length,p=o&&!h,v=s&&!d;if(!o&&c){t=v?t:new Kn(this);var y=e.apply(t,u);return y.__actions__.push({func:vo,args:[f],thisArg:i}),new Hn(y,h)}return p&&v?e.apply(this,u):(y=this.thru(f),p?r?y.value()[0]:y.value():y)})})),It(["pop","push","shift","sort","splice","unshift"],(function(e){var t=De[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:pop|shift)$/.test(e);Un.prototype[e]=function(){var e=arguments;if(r&&!this.__chain__){var i=this.value();return t.apply(Go(i)?i:[],e)}return this[n]((function(n){return t.apply(Go(n)?n:[],e)}))}})),kr(Kn.prototype,(function(e,t){var n=Un[t];if(n){var r=n.name+"";Re.call(Pn,r)||(Pn[r]=[]),Pn[r].push({name:t,func:n})}})),Pn[Ui(i,2).name]=[{name:"wrapper",func:i}],Kn.prototype.clone=function(){var e=new Kn(this.__wrapped__);return e.__actions__=Di(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Di(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Di(this.__views__),e},Kn.prototype.reverse=function(){if(this.__filtered__){var e=new Kn(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},Kn.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,n=Go(e),r=t<0,i=n?e.length:0,a=function(e,t,n){var r=-1,i=n.length;for(;++r<i;){var a=n[r],o=a.size;switch(a.type){case"drop":e+=o;break;case"dropRight":t-=o;break;case"take":t=wn(t,e+o);break;case"takeRight":e=bn(e,t-o)}}return{start:e,end:t}}(0,i,this.__views__),o=a.start,u=a.end,s=u-o,l=r?u:o-1,c=this.__iteratees__,f=c.length,h=0,d=wn(s,this.__takeCount__);if(!n||!r&&i==s&&d==s)return vi(e,this.__actions__);var p=[];e:for(;s--&&h<d;){for(var v=-1,y=e[l+=t];++v<f;){var m=c[v],g=m.iteratee,b=m.type,w=g(y);if(2==b)y=w;else if(!w){if(1==b)continue e;break e}}p[h++]=y}return p},Un.prototype.at=yo,Un.prototype.chain=function(){return po(this)},Un.prototype.commit=function(){return new Hn(this.value(),this.__chain__)},Un.prototype.next=function(){this.__values__===i&&(this.__values__=pu(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?i:this.__values__[this.__index__++]}},Un.prototype.plant=function(e){for(var t,n=this;n instanceof zn;){var r=Va(n);r.__index__=0,r.__values__=i,t?a.__wrapped__=r:t=r;var a=r;n=n.__wrapped__}return a.__wrapped__=e,t},Un.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof Kn){var t=e;return this.__actions__.length&&(t=new Kn(this)),(t=t.reverse()).__actions__.push({func:vo,args:[to],thisArg:i}),new Hn(t,this.__chain__)}return this.thru(to)},Un.prototype.toJSON=Un.prototype.valueOf=Un.prototype.value=function(){return vi(this.__wrapped__,this.__actions__)},Un.prototype.first=Un.prototype.head,Xe&&(Un.prototype[Xe]=function(){return this}),Un}();dt._=mn,(r=function(){return mn}.call(t,n,t,e))===i||(e.exports=r)}.call(this)},725:function(e){"use strict";var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;function i(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(i){return!1}}()?Object.assign:function(e,a){for(var o,u,s=i(e),l=1;l<arguments.length;l++){for(var c in o=Object(arguments[l]))n.call(o,c)&&(s[c]=o[c]);if(t){u=t(o);for(var f=0;f<u.length;f++)r.call(o,u[f])&&(s[u[f]]=o[u[f]])}}return s}},573:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];function r(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=null;return t.forEach((function(e){if(null==i){var t=e.apply(void 0,n);null!=t&&(i=t)}})),i}return(0,a.default)(r)};var r,i=n(54),a=(r=i)&&r.__esModule?r:{default:r};e.exports=t.default},54:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){function t(t,n,r,i,a,o){var u=i||"<<anonymous>>",s=o||r;if(null==n[r])return t?new Error("Required "+a+" `"+s+"` was not specified in `"+u+"`."):null;for(var l=arguments.length,c=Array(l>6?l-6:0),f=6;f<l;f++)c[f-6]=arguments[f];return e.apply(void 0,[n,r,u,a,s].concat(c))}var n=t.bind(null,!1);return n.isRequired=t.bind(null,!0),n},e.exports=t.default},888:function(e,t,n){"use strict";var r=n(47);function i(){}function a(){}a.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,a,o){if(o!==r){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:i};return n.PropTypes=n,n}},7:function(e,t,n){e.exports=n(888)()},47:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},463:function(e,t,n){"use strict";var r=n(791),i=n(725),a=n(296);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(o(227));function u(e,t,n,r,i,a,o,u,s){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(c){this.onError(c)}}var s=!1,l=null,c=!1,f=null,h={onError:function(e){s=!0,l=e}};function d(e,t,n,r,i,a,o,c,f){s=!1,l=null,u.apply(h,arguments)}var p=null,v=null,y=null;function m(e,t,n){var r=e.type||"unknown-event";e.currentTarget=y(n),function(e,t,n,r,i,a,u,h,p){if(d.apply(this,arguments),s){if(!s)throw Error(o(198));var v=l;s=!1,l=null,c||(c=!0,f=v)}}(r,t,void 0,e),e.currentTarget=null}var g=null,b={};function w(){if(g)for(var e in b){var t=b[e],n=g.indexOf(e);if(!(-1<n))throw Error(o(96,e));if(!_[n]){if(!t.extractEvents)throw Error(o(97,e));for(var r in _[n]=t,n=t.eventTypes){var i=void 0,a=n[r],u=t,s=r;if(x.hasOwnProperty(s))throw Error(o(99,s));x[s]=a;var l=a.phasedRegistrationNames;if(l){for(i in l)l.hasOwnProperty(i)&&k(l[i],u,s);i=!0}else a.registrationName?(k(a.registrationName,u,s),i=!0):i=!1;if(!i)throw Error(o(98,r,e))}}}}function k(e,t,n){if(E[e])throw Error(o(100,e));E[e]=t,T[e]=t.eventTypes[n].dependencies}var _=[],x={},E={},T={};function S(e){var t,n=!1;for(t in e)if(e.hasOwnProperty(t)){var r=e[t];if(!b.hasOwnProperty(t)||b[t]!==r){if(b[t])throw Error(o(102,t));b[t]=r,n=!0}}n&&w()}var I=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),C=null,A=null,D=null;function N(e){if(e=v(e)){if("function"!==typeof C)throw Error(o(280));var t=e.stateNode;t&&(t=p(t),C(e.stateNode,e.type,t))}}function P(e){A?D?D.push(e):D=[e]:A=e}function O(){if(A){var e=A,t=D;if(D=A=null,N(e),t)for(e=0;e<t.length;e++)N(t[e])}}function L(e,t){return e(t)}function R(e,t,n,r,i){return e(t,n,r,i)}function j(){}var M=L,F=!1,q=!1;function V(){null===A&&null===D||(j(),O())}function U(e,t,n){if(q)return e(t,n);q=!0;try{return M(e,t,n)}finally{q=!1,V()}}var B=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,z=Object.prototype.hasOwnProperty,H={},K={};function G(e,t,n,r,i,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a}var W={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){W[e]=new G(e,0,!1,e,null,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];W[t]=new G(t,1,!1,e[1],null,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){W[e]=new G(e,2,!1,e.toLowerCase(),null,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){W[e]=new G(e,2,!1,e,null,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){W[e]=new G(e,3,!1,e.toLowerCase(),null,!1)})),["checked","multiple","muted","selected"].forEach((function(e){W[e]=new G(e,3,!0,e,null,!1)})),["capture","download"].forEach((function(e){W[e]=new G(e,4,!1,e,null,!1)})),["cols","rows","size","span"].forEach((function(e){W[e]=new G(e,6,!1,e,null,!1)})),["rowSpan","start"].forEach((function(e){W[e]=new G(e,5,!1,e.toLowerCase(),null,!1)}));var Q=/[\-:]([a-z])/g;function $(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(Q,$);W[t]=new G(t,1,!1,e,null,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(Q,$);W[t]=new G(t,1,!1,e,"http://www.w3.org/1999/xlink",!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(Q,$);W[t]=new G(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1)})),["tabIndex","crossOrigin"].forEach((function(e){W[e]=new G(e,1,!1,e.toLowerCase(),null,!1)})),W.xlinkHref=new G("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0),["src","href","action","formAction"].forEach((function(e){W[e]=new G(e,1,!1,e.toLowerCase(),null,!0)}));var Y=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function X(e,t,n,r){var i=W.hasOwnProperty(t)?W[t]:null;(null!==i?0===i.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!z.call(K,e)||!z.call(H,e)&&(B.test(e)?K[e]=!0:(H[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}Y.hasOwnProperty("ReactCurrentDispatcher")||(Y.ReactCurrentDispatcher={current:null}),Y.hasOwnProperty("ReactCurrentBatchConfig")||(Y.ReactCurrentBatchConfig={suspense:null});var J=/^(.*)[\\\/]/,Z="function"===typeof Symbol&&Symbol.for,ee=Z?Symbol.for("react.element"):60103,te=Z?Symbol.for("react.portal"):60106,ne=Z?Symbol.for("react.fragment"):60107,re=Z?Symbol.for("react.strict_mode"):60108,ie=Z?Symbol.for("react.profiler"):60114,ae=Z?Symbol.for("react.provider"):60109,oe=Z?Symbol.for("react.context"):60110,ue=Z?Symbol.for("react.concurrent_mode"):60111,se=Z?Symbol.for("react.forward_ref"):60112,le=Z?Symbol.for("react.suspense"):60113,ce=Z?Symbol.for("react.suspense_list"):60120,fe=Z?Symbol.for("react.memo"):60115,he=Z?Symbol.for("react.lazy"):60116,de=Z?Symbol.for("react.block"):60121,pe="function"===typeof Symbol&&Symbol.iterator;function ve(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=pe&&e[pe]||e["@@iterator"])?e:null}function ye(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case ne:return"Fragment";case te:return"Portal";case ie:return"Profiler";case re:return"StrictMode";case le:return"Suspense";case ce:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case oe:return"Context.Consumer";case ae:return"Context.Provider";case se:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case fe:return ye(e.type);case de:return ye(e.render);case he:if(e=1===e._status?e._result:null)return ye(e)}return null}function me(e){var t="";do{e:switch(e.tag){case 3:case 4:case 6:case 7:case 10:case 9:var n="";break e;default:var r=e._debugOwner,i=e._debugSource,a=ye(e.type);n=null,r&&(n=ye(r.type)),r=a,a="",i?a=" (at "+i.fileName.replace(J,"")+":"+i.lineNumber+")":n&&(a=" (created by "+n+")"),n="\n    in "+(r||"Unknown")+a}t+=n,e=e.return}while(e);return t}function ge(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function be(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function we(e){e._valueTracker||(e._valueTracker=function(e){var t=be(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function ke(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=be(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function _e(e,t){var n=t.checked;return i({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function xe(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=ge(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Ee(e,t){null!=(t=t.checked)&&X(e,"checked",t,!1)}function Te(e,t){Ee(e,t);var n=ge(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?Ie(e,t.type,n):t.hasOwnProperty("defaultValue")&&Ie(e,t.type,ge(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Se(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function Ie(e,t,n){"number"===t&&e.ownerDocument.activeElement===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function Ce(e,t){return e=i({children:void 0},t),(t=function(e){var t="";return r.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function Ae(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+ge(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function De(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return i({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Ne(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:ge(n)}}function Pe(e,t){var n=ge(t.value),r=ge(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function Oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var Le="http://www.w3.org/1999/xhtml",Re="http://www.w3.org/2000/svg";function je(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Me(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?je(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var Fe,qe,Ve=(qe=function(e,t){if(e.namespaceURI!==Re||"innerHTML"in e)e.innerHTML=t;else{for((Fe=Fe||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Fe.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return qe(e,t)}))}:qe);function Ue(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}function Be(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var ze={animationend:Be("Animation","AnimationEnd"),animationiteration:Be("Animation","AnimationIteration"),animationstart:Be("Animation","AnimationStart"),transitionend:Be("Transition","TransitionEnd")},He={},Ke={};function Ge(e){if(He[e])return He[e];if(!ze[e])return e;var t,n=ze[e];for(t in n)if(n.hasOwnProperty(t)&&t in Ke)return He[e]=n[t];return e}I&&(Ke=document.createElement("div").style,"AnimationEvent"in window||(delete ze.animationend.animation,delete ze.animationiteration.animation,delete ze.animationstart.animation),"TransitionEvent"in window||delete ze.transitionend.transition);var We=Ge("animationend"),Qe=Ge("animationiteration"),$e=Ge("animationstart"),Ye=Ge("transitionend"),Xe="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Je=new("function"===typeof WeakMap?WeakMap:Map);function Ze(e){var t=Je.get(e);return void 0===t&&(t=new Map,Je.set(e,t)),t}function et(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(1026&(t=e).effectTag)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function tt(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function nt(e){if(et(e)!==e)throw Error(o(188))}function rt(e){if(e=function(e){var t=e.alternate;if(!t){if(null===(t=et(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return nt(i),e;if(a===r)return nt(i),t;a=a.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=a;else{for(var u=!1,s=i.child;s;){if(s===n){u=!0,n=i,r=a;break}if(s===r){u=!0,r=i,n=a;break}s=s.sibling}if(!u){for(s=a.child;s;){if(s===n){u=!0,n=a,r=i;break}if(s===r){u=!0,r=a,n=i;break}s=s.sibling}if(!u)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e),!e)return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function it(e,t){if(null==t)throw Error(o(30));return null==e?t:Array.isArray(e)?Array.isArray(t)?(e.push.apply(e,t),e):(e.push(t),e):Array.isArray(t)?[e].concat(t):[e,t]}function at(e,t,n){Array.isArray(e)?e.forEach(t,n):e&&t.call(n,e)}var ot=null;function ut(e){if(e){var t=e._dispatchListeners,n=e._dispatchInstances;if(Array.isArray(t))for(var r=0;r<t.length&&!e.isPropagationStopped();r++)m(e,t[r],n[r]);else t&&m(e,t,n);e._dispatchListeners=null,e._dispatchInstances=null,e.isPersistent()||e.constructor.release(e)}}function st(e){if(null!==e&&(ot=it(ot,e)),e=ot,ot=null,e){if(at(e,ut),ot)throw Error(o(95));if(c)throw e=f,c=!1,f=null,e}}function lt(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}function ct(e){if(!I)return!1;var t=(e="on"+e)in document;return t||((t=document.createElement("div")).setAttribute(e,"return;"),t="function"===typeof t[e]),t}var ft=[];function ht(e){e.topLevelType=null,e.nativeEvent=null,e.targetInst=null,e.ancestors.length=0,10>ft.length&&ft.push(e)}function dt(e,t,n,r){if(ft.length){var i=ft.pop();return i.topLevelType=e,i.eventSystemFlags=r,i.nativeEvent=t,i.targetInst=n,i}return{topLevelType:e,eventSystemFlags:r,nativeEvent:t,targetInst:n,ancestors:[]}}function pt(e){var t=e.targetInst,n=t;do{if(!n){e.ancestors.push(n);break}var r=n;if(3===r.tag)r=r.stateNode.containerInfo;else{for(;r.return;)r=r.return;r=3!==r.tag?null:r.stateNode.containerInfo}if(!r)break;5!==(t=n.tag)&&6!==t||e.ancestors.push(n),n=Nn(r)}while(n);for(n=0;n<e.ancestors.length;n++){t=e.ancestors[n];var i=lt(e.nativeEvent);r=e.topLevelType;var a=e.nativeEvent,o=e.eventSystemFlags;0===n&&(o|=64);for(var u=null,s=0;s<_.length;s++){var l=_[s];l&&(l=l.extractEvents(r,t,a,i,o))&&(u=it(u,l))}st(u)}}function vt(e,t,n){if(!n.has(e)){switch(e){case"scroll":$t(t,"scroll",!0);break;case"focus":case"blur":$t(t,"focus",!0),$t(t,"blur",!0),n.set("blur",null),n.set("focus",null);break;case"cancel":case"close":ct(e)&&$t(t,e,!0);break;case"invalid":case"submit":case"reset":break;default:-1===Xe.indexOf(e)&&Qt(e,t)}n.set(e,null)}}var yt,mt,gt,bt=!1,wt=[],kt=null,_t=null,xt=null,Et=new Map,Tt=new Map,St=[],It="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput close cancel copy cut paste click change contextmenu reset submit".split(" "),Ct="focus blur dragenter dragleave mouseover mouseout pointerover pointerout gotpointercapture lostpointercapture".split(" ");function At(e,t,n,r,i){return{blockedOn:e,topLevelType:t,eventSystemFlags:32|n,nativeEvent:i,container:r}}function Dt(e,t){switch(e){case"focus":case"blur":kt=null;break;case"dragenter":case"dragleave":_t=null;break;case"mouseover":case"mouseout":xt=null;break;case"pointerover":case"pointerout":Et.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Tt.delete(t.pointerId)}}function Nt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e=At(t,n,r,i,a),null!==t&&(null!==(t=Pn(t))&&mt(t)),e):(e.eventSystemFlags|=r,e)}function Pt(e){var t=Nn(e.target);if(null!==t){var n=et(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=tt(n)))return e.blockedOn=t,void a.unstable_runWithPriority(e.priority,(function(){gt(n)}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ot(e){if(null!==e.blockedOn)return!1;var t=Zt(e.topLevelType,e.eventSystemFlags,e.container,e.nativeEvent);if(null!==t){var n=Pn(t);return null!==n&&mt(n),e.blockedOn=t,!1}return!0}function Lt(e,t,n){Ot(e)&&n.delete(t)}function Rt(){for(bt=!1;0<wt.length;){var e=wt[0];if(null!==e.blockedOn){null!==(e=Pn(e.blockedOn))&&yt(e);break}var t=Zt(e.topLevelType,e.eventSystemFlags,e.container,e.nativeEvent);null!==t?e.blockedOn=t:wt.shift()}null!==kt&&Ot(kt)&&(kt=null),null!==_t&&Ot(_t)&&(_t=null),null!==xt&&Ot(xt)&&(xt=null),Et.forEach(Lt),Tt.forEach(Lt)}function jt(e,t){e.blockedOn===t&&(e.blockedOn=null,bt||(bt=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,Rt)))}function Mt(e){function t(t){return jt(t,e)}if(0<wt.length){jt(wt[0],e);for(var n=1;n<wt.length;n++){var r=wt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==kt&&jt(kt,e),null!==_t&&jt(_t,e),null!==xt&&jt(xt,e),Et.forEach(t),Tt.forEach(t),n=0;n<St.length;n++)(r=St[n]).blockedOn===e&&(r.blockedOn=null);for(;0<St.length&&null===(n=St[0]).blockedOn;)Pt(n),null===n.blockedOn&&St.shift()}var Ft={},qt=new Map,Vt=new Map,Ut=["abort","abort",We,"animationEnd",Qe,"animationIteration",$e,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Ye,"transitionEnd","waiting","waiting"];function Bt(e,t){for(var n=0;n<e.length;n+=2){var r=e[n],i=e[n+1],a="on"+(i[0].toUpperCase()+i.slice(1));a={phasedRegistrationNames:{bubbled:a,captured:a+"Capture"},dependencies:[r],eventPriority:t},Vt.set(r,t),qt.set(r,a),Ft[i]=a}}Bt("blur blur cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focus focus input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Bt("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Bt(Ut,2);for(var zt="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Ht=0;Ht<zt.length;Ht++)Vt.set(zt[Ht],0);var Kt=a.unstable_UserBlockingPriority,Gt=a.unstable_runWithPriority,Wt=!0;function Qt(e,t){$t(t,e,!1)}function $t(e,t,n){var r=Vt.get(t);switch(void 0===r?2:r){case 0:r=Yt.bind(null,t,1,e);break;case 1:r=Xt.bind(null,t,1,e);break;default:r=Jt.bind(null,t,1,e)}n?e.addEventListener(t,r,!0):e.addEventListener(t,r,!1)}function Yt(e,t,n,r){F||j();var i=Jt,a=F;F=!0;try{R(i,e,t,n,r)}finally{(F=a)||V()}}function Xt(e,t,n,r){Gt(Kt,Jt.bind(null,e,t,n,r))}function Jt(e,t,n,r){if(Wt)if(0<wt.length&&-1<It.indexOf(e))e=At(null,e,t,n,r),wt.push(e);else{var i=Zt(e,t,n,r);if(null===i)Dt(e,r);else if(-1<It.indexOf(e))e=At(i,e,t,n,r),wt.push(e);else if(!function(e,t,n,r,i){switch(t){case"focus":return kt=Nt(kt,e,t,n,r,i),!0;case"dragenter":return _t=Nt(_t,e,t,n,r,i),!0;case"mouseover":return xt=Nt(xt,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Et.set(a,Nt(Et.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Tt.set(a,Nt(Tt.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r)){Dt(e,r),e=dt(e,r,null,t);try{U(pt,e)}finally{ht(e)}}}}function Zt(e,t,n,r){if(null!==(n=Nn(n=lt(r)))){var i=et(n);if(null===i)n=null;else{var a=i.tag;if(13===a){if(null!==(n=tt(i)))return n;n=null}else if(3===a){if(i.stateNode.hydrate)return 3===i.tag?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null)}}e=dt(e,r,n,t);try{U(pt,e)}finally{ht(e)}return null}var en={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},tn=["Webkit","ms","Moz","O"];function nn(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||en.hasOwnProperty(e)&&en[e]?(""+t).trim():t+"px"}function rn(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=nn(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(en).forEach((function(e){tn.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),en[t]=en[e]}))}));var an=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function on(e,t){if(t){if(an[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e,""));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62,""))}}function un(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var sn=Le;function ln(e,t){var n=Ze(e=9===e.nodeType||11===e.nodeType?e:e.ownerDocument);t=T[t];for(var r=0;r<t.length;r++)vt(t[r],e,n)}function cn(){}function fn(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function hn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function dn(e,t){var n,r=hn(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=hn(r)}}function pn(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?pn(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function vn(){for(var e=window,t=fn();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=fn((e=t.contentWindow).document)}return t}function yn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var mn="$?",gn="$!",bn=null,wn=null;function kn(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function _n(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var xn="function"===typeof setTimeout?setTimeout:void 0,En="function"===typeof clearTimeout?clearTimeout:void 0;function Tn(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function Sn(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||n===gn||n===mn){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var In=Math.random().toString(36).slice(2),Cn="__reactInternalInstance$"+In,An="__reactEventHandlers$"+In,Dn="__reactContainere$"+In;function Nn(e){var t=e[Cn];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Dn]||n[Cn]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Sn(e);null!==e;){if(n=e[Cn])return n;e=Sn(e)}return t}n=(e=n).parentNode}return null}function Pn(e){return!(e=e[Cn]||e[Dn])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function On(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function Ln(e){return e[An]||null}function Rn(e){do{e=e.return}while(e&&5!==e.tag);return e||null}function jn(e,t){var n=e.stateNode;if(!n)return null;var r=p(n);if(!r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}function Mn(e,t,n){(t=jn(e,n.dispatchConfig.phasedRegistrationNames[t]))&&(n._dispatchListeners=it(n._dispatchListeners,t),n._dispatchInstances=it(n._dispatchInstances,e))}function Fn(e){if(e&&e.dispatchConfig.phasedRegistrationNames){for(var t=e._targetInst,n=[];t;)n.push(t),t=Rn(t);for(t=n.length;0<t--;)Mn(n[t],"captured",e);for(t=0;t<n.length;t++)Mn(n[t],"bubbled",e)}}function qn(e,t,n){e&&n&&n.dispatchConfig.registrationName&&(t=jn(e,n.dispatchConfig.registrationName))&&(n._dispatchListeners=it(n._dispatchListeners,t),n._dispatchInstances=it(n._dispatchInstances,e))}function Vn(e){e&&e.dispatchConfig.registrationName&&qn(e._targetInst,null,e)}function Un(e){at(e,Fn)}var Bn=null,zn=null,Hn=null;function Kn(){if(Hn)return Hn;var e,t,n=zn,r=n.length,i="value"in Bn?Bn.value:Bn.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return Hn=i.slice(e,1<t?1-t:void 0)}function Gn(){return!0}function Wn(){return!1}function Qn(e,t,n,r){for(var i in this.dispatchConfig=e,this._targetInst=t,this.nativeEvent=n,e=this.constructor.Interface)e.hasOwnProperty(i)&&((t=e[i])?this[i]=t(n):"target"===i?this.target=r:this[i]=n[i]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?Gn:Wn,this.isPropagationStopped=Wn,this}function $n(e,t,n,r){if(this.eventPool.length){var i=this.eventPool.pop();return this.call(i,e,t,n,r),i}return new this(e,t,n,r)}function Yn(e){if(!(e instanceof this))throw Error(o(279));e.destructor(),10>this.eventPool.length&&this.eventPool.push(e)}function Xn(e){e.eventPool=[],e.getPooled=$n,e.release=Yn}i(Qn.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Gn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Gn)},persist:function(){this.isPersistent=Gn},isPersistent:Wn,destructor:function(){var e,t=this.constructor.Interface;for(e in t)this[e]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=Wn,this._dispatchInstances=this._dispatchListeners=null}}),Qn.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null},Qn.extend=function(e){function t(){}function n(){return r.apply(this,arguments)}var r=this;t.prototype=r.prototype;var a=new t;return i(a,n.prototype),n.prototype=a,n.prototype.constructor=n,n.Interface=i({},r.Interface,e),n.extend=r.extend,Xn(n),n},Xn(Qn);var Jn=Qn.extend({data:null}),Zn=Qn.extend({data:null}),er=[9,13,27,32],tr=I&&"CompositionEvent"in window,nr=null;I&&"documentMode"in document&&(nr=document.documentMode);var rr=I&&"TextEvent"in window&&!nr,ir=I&&(!tr||nr&&8<nr&&11>=nr),ar=String.fromCharCode(32),or={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},ur=!1;function sr(e,t){switch(e){case"keyup":return-1!==er.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function lr(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var cr=!1;var fr={eventTypes:or,extractEvents:function(e,t,n,r){var i;if(tr)e:{switch(e){case"compositionstart":var a=or.compositionStart;break e;case"compositionend":a=or.compositionEnd;break e;case"compositionupdate":a=or.compositionUpdate;break e}a=void 0}else cr?sr(e,n)&&(a=or.compositionEnd):"keydown"===e&&229===n.keyCode&&(a=or.compositionStart);return a?(ir&&"ko"!==n.locale&&(cr||a!==or.compositionStart?a===or.compositionEnd&&cr&&(i=Kn()):(zn="value"in(Bn=r)?Bn.value:Bn.textContent,cr=!0)),a=Jn.getPooled(a,t,n,r),i?a.data=i:null!==(i=lr(n))&&(a.data=i),Un(a),i=a):i=null,(e=rr?function(e,t){switch(e){case"compositionend":return lr(t);case"keypress":return 32!==t.which?null:(ur=!0,ar);case"textInput":return(e=t.data)===ar&&ur?null:e;default:return null}}(e,n):function(e,t){if(cr)return"compositionend"===e||!tr&&sr(e,t)?(e=Kn(),Hn=zn=Bn=null,cr=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return ir&&"ko"!==t.locale?null:t.data}}(e,n))?((t=Zn.getPooled(or.beforeInput,t,n,r)).data=e,Un(t)):t=null,null===i?t:null===t?i:[i,t]}},hr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function dr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!hr[e.type]:"textarea"===t}var pr={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}};function vr(e,t,n){return(e=Qn.getPooled(pr.change,e,t,n)).type="change",P(n),Un(e),e}var yr=null,mr=null;function gr(e){st(e)}function br(e){if(ke(On(e)))return e}function wr(e,t){if("change"===e)return t}var kr=!1;function _r(){yr&&(yr.detachEvent("onpropertychange",xr),mr=yr=null)}function xr(e){if("value"===e.propertyName&&br(mr))if(e=vr(mr,e,lt(e)),F)st(e);else{F=!0;try{L(gr,e)}finally{F=!1,V()}}}function Er(e,t,n){"focus"===e?(_r(),mr=n,(yr=t).attachEvent("onpropertychange",xr)):"blur"===e&&_r()}function Tr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return br(mr)}function Sr(e,t){if("click"===e)return br(t)}function Ir(e,t){if("input"===e||"change"===e)return br(t)}I&&(kr=ct("input")&&(!document.documentMode||9<document.documentMode));var Cr={eventTypes:pr,_isInputEventSupported:kr,extractEvents:function(e,t,n,r){var i=t?On(t):window,a=i.nodeName&&i.nodeName.toLowerCase();if("select"===a||"input"===a&&"file"===i.type)var o=wr;else if(dr(i))if(kr)o=Ir;else{o=Tr;var u=Er}else(a=i.nodeName)&&"input"===a.toLowerCase()&&("checkbox"===i.type||"radio"===i.type)&&(o=Sr);if(o&&(o=o(e,t)))return vr(o,n,r);u&&u(e,i,t),"blur"===e&&(e=i._wrapperState)&&e.controlled&&"number"===i.type&&Ie(i,"number",i.value)}},Ar=Qn.extend({view:null,detail:null}),Dr={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Nr(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Dr[e])&&!!t[e]}function Pr(){return Nr}var Or=0,Lr=0,Rr=!1,jr=!1,Mr=Ar.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:Pr,button:null,buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)},movementX:function(e){if("movementX"in e)return e.movementX;var t=Or;return Or=e.screenX,Rr?"mousemove"===e.type?e.screenX-t:0:(Rr=!0,0)},movementY:function(e){if("movementY"in e)return e.movementY;var t=Lr;return Lr=e.screenY,jr?"mousemove"===e.type?e.screenY-t:0:(jr=!0,0)}}),Fr=Mr.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),qr={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},Vr={eventTypes:qr,extractEvents:function(e,t,n,r,i){var a="mouseover"===e||"pointerover"===e,o="mouseout"===e||"pointerout"===e;if(a&&0===(32&i)&&(n.relatedTarget||n.fromElement)||!o&&!a)return null;(a=r.window===r?r:(a=r.ownerDocument)?a.defaultView||a.parentWindow:window,o)?(o=t,null!==(t=(t=n.relatedTarget||n.toElement)?Nn(t):null)&&(t!==et(t)||5!==t.tag&&6!==t.tag)&&(t=null)):o=null;if(o===t)return null;if("mouseout"===e||"mouseover"===e)var u=Mr,s=qr.mouseLeave,l=qr.mouseEnter,c="mouse";else"pointerout"!==e&&"pointerover"!==e||(u=Fr,s=qr.pointerLeave,l=qr.pointerEnter,c="pointer");if(e=null==o?a:On(o),a=null==t?a:On(t),(s=u.getPooled(s,o,n,r)).type=c+"leave",s.target=e,s.relatedTarget=a,(n=u.getPooled(l,t,n,r)).type=c+"enter",n.target=a,n.relatedTarget=e,c=t,(r=o)&&c)e:{for(l=c,o=0,e=u=r;e;e=Rn(e))o++;for(e=0,t=l;t;t=Rn(t))e++;for(;0<o-e;)u=Rn(u),o--;for(;0<e-o;)l=Rn(l),e--;for(;o--;){if(u===l||u===l.alternate)break e;u=Rn(u),l=Rn(l)}u=null}else u=null;for(l=u,u=[];r&&r!==l&&(null===(o=r.alternate)||o!==l);)u.push(r),r=Rn(r);for(r=[];c&&c!==l&&(null===(o=c.alternate)||o!==l);)r.push(c),c=Rn(c);for(c=0;c<u.length;c++)qn(u[c],"bubbled",s);for(c=r.length;0<c--;)qn(r[c],"captured",n);return 0===(64&i)?[s]:[s,n]}};var Ur="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},Br=Object.prototype.hasOwnProperty;function zr(e,t){if(Ur(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!Br.call(t,n[r])||!Ur(e[n[r]],t[n[r]]))return!1;return!0}var Hr=I&&"documentMode"in document&&11>=document.documentMode,Kr={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},Gr=null,Wr=null,Qr=null,$r=!1;function Yr(e,t){var n=t.window===t?t.document:9===t.nodeType?t:t.ownerDocument;return $r||null==Gr||Gr!==fn(n)?null:("selectionStart"in(n=Gr)&&yn(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},Qr&&zr(Qr,n)?null:(Qr=n,(e=Qn.getPooled(Kr.select,Wr,e,t)).type="select",e.target=Gr,Un(e),e))}var Xr={eventTypes:Kr,extractEvents:function(e,t,n,r,i,a){if(!(a=!(i=a||(r.window===r?r.document:9===r.nodeType?r:r.ownerDocument)))){e:{i=Ze(i),a=T.onSelect;for(var o=0;o<a.length;o++)if(!i.has(a[o])){i=!1;break e}i=!0}a=!i}if(a)return null;switch(i=t?On(t):window,e){case"focus":(dr(i)||"true"===i.contentEditable)&&(Gr=i,Wr=t,Qr=null);break;case"blur":Qr=Wr=Gr=null;break;case"mousedown":$r=!0;break;case"contextmenu":case"mouseup":case"dragend":return $r=!1,Yr(n,r);case"selectionchange":if(Hr)break;case"keydown":case"keyup":return Yr(n,r)}return null}},Jr=Qn.extend({animationName:null,elapsedTime:null,pseudoElement:null}),Zr=Qn.extend({clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),ei=Ar.extend({relatedTarget:null});function ti(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}var ni={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ri={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ii=Ar.extend({key:function(e){if(e.key){var t=ni[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=ti(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?ri[e.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:Pr,charCode:function(e){return"keypress"===e.type?ti(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?ti(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),ai=Mr.extend({dataTransfer:null}),oi=Ar.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:Pr}),ui=Qn.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),si=Mr.extend({deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null}),li={eventTypes:Ft,extractEvents:function(e,t,n,r){var i=qt.get(e);if(!i)return null;switch(e){case"keypress":if(0===ti(n))return null;case"keydown":case"keyup":e=ii;break;case"blur":case"focus":e=ei;break;case"click":if(2===n.button)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":e=Mr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":e=ai;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":e=oi;break;case We:case Qe:case $e:e=Jr;break;case Ye:e=ui;break;case"scroll":e=Ar;break;case"wheel":e=si;break;case"copy":case"cut":case"paste":e=Zr;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":e=Fr;break;default:e=Qn}return Un(t=e.getPooled(i,t,n,r)),t}};if(g)throw Error(o(101));g=Array.prototype.slice.call("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),w(),p=Ln,v=Pn,y=On,S({SimpleEventPlugin:li,EnterLeaveEventPlugin:Vr,ChangeEventPlugin:Cr,SelectEventPlugin:Xr,BeforeInputEventPlugin:fr});var ci=[],fi=-1;function hi(e){0>fi||(e.current=ci[fi],ci[fi]=null,fi--)}function di(e,t){fi++,ci[fi]=e.current,e.current=t}var pi={},vi={current:pi},yi={current:!1},mi=pi;function gi(e,t){var n=e.type.contextTypes;if(!n)return pi;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function bi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function wi(){hi(yi),hi(vi)}function ki(e,t,n){if(vi.current!==pi)throw Error(o(168));di(vi,t),di(yi,n)}function _i(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var a in r=r.getChildContext())if(!(a in e))throw Error(o(108,ye(t)||"Unknown",a));return i({},n,{},r)}function xi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||pi,mi=vi.current,di(vi,e),di(yi,yi.current),!0}function Ei(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=_i(e,t,mi),r.__reactInternalMemoizedMergedChildContext=e,hi(yi),hi(vi),di(vi,e)):hi(yi),di(yi,n)}var Ti=a.unstable_runWithPriority,Si=a.unstable_scheduleCallback,Ii=a.unstable_cancelCallback,Ci=a.unstable_requestPaint,Ai=a.unstable_now,Di=a.unstable_getCurrentPriorityLevel,Ni=a.unstable_ImmediatePriority,Pi=a.unstable_UserBlockingPriority,Oi=a.unstable_NormalPriority,Li=a.unstable_LowPriority,Ri=a.unstable_IdlePriority,ji={},Mi=a.unstable_shouldYield,Fi=void 0!==Ci?Ci:function(){},qi=null,Vi=null,Ui=!1,Bi=Ai(),zi=1e4>Bi?Ai:function(){return Ai()-Bi};function Hi(){switch(Di()){case Ni:return 99;case Pi:return 98;case Oi:return 97;case Li:return 96;case Ri:return 95;default:throw Error(o(332))}}function Ki(e){switch(e){case 99:return Ni;case 98:return Pi;case 97:return Oi;case 96:return Li;case 95:return Ri;default:throw Error(o(332))}}function Gi(e,t){return e=Ki(e),Ti(e,t)}function Wi(e,t,n){return e=Ki(e),Si(e,t,n)}function Qi(e){return null===qi?(qi=[e],Vi=Si(Ni,Yi)):qi.push(e),ji}function $i(){if(null!==Vi){var e=Vi;Vi=null,Ii(e)}Yi()}function Yi(){if(!Ui&&null!==qi){Ui=!0;var e=0;try{var t=qi;Gi(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),qi=null}catch(n){throw null!==qi&&(qi=qi.slice(e+1)),Si(Ni,$i),n}finally{Ui=!1}}}function Xi(e,t,n){return 1073741821-(1+((1073741821-e+t/10)/(n/=10)|0))*n}function Ji(e,t){if(e&&e.defaultProps)for(var n in t=i({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}var Zi={current:null},ea=null,ta=null,na=null;function ra(){na=ta=ea=null}function ia(e){var t=Zi.current;hi(Zi),e.type._context._currentValue=t}function aa(e,t){for(;null!==e;){var n=e.alternate;if(e.childExpirationTime<t)e.childExpirationTime=t,null!==n&&n.childExpirationTime<t&&(n.childExpirationTime=t);else{if(!(null!==n&&n.childExpirationTime<t))break;n.childExpirationTime=t}e=e.return}}function oa(e,t){ea=e,na=ta=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(e.expirationTime>=t&&(Lo=!0),e.firstContext=null)}function ua(e,t){if(na!==e&&!1!==t&&0!==t)if("number"===typeof t&&1073741823!==t||(na=e,t=1073741823),t={context:e,observedBits:t,next:null},null===ta){if(null===ea)throw Error(o(308));ta=t,ea.dependencies={expirationTime:0,firstContext:t,responders:null}}else ta=ta.next=t;return e._currentValue}var sa=!1;function la(e){e.updateQueue={baseState:e.memoizedState,baseQueue:null,shared:{pending:null},effects:null}}function ca(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,baseQueue:e.baseQueue,shared:e.shared,effects:e.effects})}function fa(e,t){return(e={expirationTime:e,suspenseConfig:t,tag:0,payload:null,callback:null,next:null}).next=e}function ha(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function da(e,t){var n=e.alternate;null!==n&&ca(n,e),null===(n=(e=e.updateQueue).baseQueue)?(e.baseQueue=t.next=t,t.next=t):(t.next=n.next,n.next=t)}function pa(e,t,n,r){var a=e.updateQueue;sa=!1;var o=a.baseQueue,u=a.shared.pending;if(null!==u){if(null!==o){var s=o.next;o.next=u.next,u.next=s}o=u,a.shared.pending=null,null!==(s=e.alternate)&&(null!==(s=s.updateQueue)&&(s.baseQueue=u))}if(null!==o){s=o.next;var l=a.baseState,c=0,f=null,h=null,d=null;if(null!==s)for(var p=s;;){if((u=p.expirationTime)<r){var v={expirationTime:p.expirationTime,suspenseConfig:p.suspenseConfig,tag:p.tag,payload:p.payload,callback:p.callback,next:null};null===d?(h=d=v,f=l):d=d.next=v,u>c&&(c=u)}else{null!==d&&(d=d.next={expirationTime:1073741823,suspenseConfig:p.suspenseConfig,tag:p.tag,payload:p.payload,callback:p.callback,next:null}),ds(u,p.suspenseConfig);e:{var y=e,m=p;switch(u=t,v=n,m.tag){case 1:if("function"===typeof(y=m.payload)){l=y.call(v,l,u);break e}l=y;break e;case 3:y.effectTag=-4097&y.effectTag|64;case 0:if(null===(u="function"===typeof(y=m.payload)?y.call(v,l,u):y)||void 0===u)break e;l=i({},l,u);break e;case 2:sa=!0}}null!==p.callback&&(e.effectTag|=32,null===(u=a.effects)?a.effects=[p]:u.push(p))}if(null===(p=p.next)||p===s){if(null===(u=a.shared.pending))break;p=o.next=u.next,u.next=s,a.baseQueue=o=u,a.shared.pending=null}}null===d?f=l:d.next=h,a.baseState=f,a.baseQueue=d,ps(c),e.expirationTime=c,e.memoizedState=l}}function va(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=i,i=n,"function"!==typeof r)throw Error(o(191,r));r.call(i)}}}var ya=Y.ReactCurrentBatchConfig,ma=(new r.Component).refs;function ga(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:i({},t,n),e.memoizedState=n,0===e.expirationTime&&(e.updateQueue.baseState=n)}var ba={isMounted:function(e){return!!(e=e._reactInternalFiber)&&et(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternalFiber;var r=es(),i=ya.suspense;(i=fa(r=ts(r,e,i),i)).payload=t,void 0!==n&&null!==n&&(i.callback=n),ha(e,i),ns(e,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternalFiber;var r=es(),i=ya.suspense;(i=fa(r=ts(r,e,i),i)).tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),ha(e,i),ns(e,r)},enqueueForceUpdate:function(e,t){e=e._reactInternalFiber;var n=es(),r=ya.suspense;(r=fa(n=ts(n,e,r),r)).tag=2,void 0!==t&&null!==t&&(r.callback=t),ha(e,r),ns(e,n)}};function wa(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!zr(n,r)||!zr(i,a))}function ka(e,t,n){var r=!1,i=pi,a=t.contextType;return"object"===typeof a&&null!==a?a=ua(a):(i=bi(t)?mi:vi.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?gi(e,i):pi),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ba,e.stateNode=t,t._reactInternalFiber=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function _a(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ba.enqueueReplaceState(t,t.state,null)}function xa(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=ma,la(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=ua(a):(a=bi(t)?mi:vi.current,i.context=gi(e,a)),pa(e,n,i,r),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(ga(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ba.enqueueReplaceState(i,i.state,null),pa(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.effectTag|=4)}var Ea=Array.isArray;function Ta(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=r.refs;t===ma&&(t=r.refs={}),null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function Sa(e,t){if("textarea"!==e.type)throw Error(o(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t,""))}function Ia(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.effectTag=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Ls(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.effectTag=2,n):r:(t.effectTag=2,n):n}function u(t){return e&&null===t.alternate&&(t.effectTag=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=Ms(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function l(e,t,n,r){return null!==t&&t.elementType===n.type?((r=i(t,n.props)).ref=Ta(e,t,n),r.return=e,r):((r=Rs(n.type,n.key,n.props,null,e.mode,r)).ref=Ta(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Fs(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function f(e,t,n,r,a){return null===t||7!==t.tag?((t=js(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t||"number"===typeof t)return(t=Ms(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case ee:return(n=Rs(t.type,t.key,t.props,null,e.mode,n)).ref=Ta(e,null,t),n.return=e,n;case te:return(t=Fs(t,e.mode,n)).return=e,t}if(Ea(t)||ve(t))return(t=js(t,e.mode,n,null)).return=e,t;Sa(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n||"number"===typeof n)return null!==i?null:s(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case ee:return n.key===i?n.type===ne?f(e,t,n.props.children,r,i):l(e,t,n,r):null;case te:return n.key===i?c(e,t,n,r):null}if(Ea(n)||ve(n))return null!==i?null:f(e,t,n,r,null);Sa(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r||"number"===typeof r)return s(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case ee:return e=e.get(null===r.key?n:r.key)||null,r.type===ne?f(t,e,r.props.children,i,r.key):l(t,e,r,i);case te:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i)}if(Ea(r)||ve(r))return f(t,e=e.get(n)||null,r,i,null);Sa(t,r)}return null}function v(i,o,u,s){for(var l=null,c=null,f=o,v=o=0,y=null;null!==f&&v<u.length;v++){f.index>v?(y=f,f=null):y=f.sibling;var m=d(i,f,u[v],s);if(null===m){null===f&&(f=y);break}e&&f&&null===m.alternate&&t(i,f),o=a(m,o,v),null===c?l=m:c.sibling=m,c=m,f=y}if(v===u.length)return n(i,f),l;if(null===f){for(;v<u.length;v++)null!==(f=h(i,u[v],s))&&(o=a(f,o,v),null===c?l=f:c.sibling=f,c=f);return l}for(f=r(i,f);v<u.length;v++)null!==(y=p(f,i,v,u[v],s))&&(e&&null!==y.alternate&&f.delete(null===y.key?v:y.key),o=a(y,o,v),null===c?l=y:c.sibling=y,c=y);return e&&f.forEach((function(e){return t(i,e)})),l}function y(i,u,s,l){var c=ve(s);if("function"!==typeof c)throw Error(o(150));if(null==(s=c.call(s)))throw Error(o(151));for(var f=c=null,v=u,y=u=0,m=null,g=s.next();null!==v&&!g.done;y++,g=s.next()){v.index>y?(m=v,v=null):m=v.sibling;var b=d(i,v,g.value,l);if(null===b){null===v&&(v=m);break}e&&v&&null===b.alternate&&t(i,v),u=a(b,u,y),null===f?c=b:f.sibling=b,f=b,v=m}if(g.done)return n(i,v),c;if(null===v){for(;!g.done;y++,g=s.next())null!==(g=h(i,g.value,l))&&(u=a(g,u,y),null===f?c=g:f.sibling=g,f=g);return c}for(v=r(i,v);!g.done;y++,g=s.next())null!==(g=p(v,i,y,g.value,l))&&(e&&null!==g.alternate&&v.delete(null===g.key?y:g.key),u=a(g,u,y),null===f?c=g:f.sibling=g,f=g);return e&&v.forEach((function(e){return t(i,e)})),c}return function(e,r,a,s){var l="object"===typeof a&&null!==a&&a.type===ne&&null===a.key;l&&(a=a.props.children);var c="object"===typeof a&&null!==a;if(c)switch(a.$$typeof){case ee:e:{for(c=a.key,l=r;null!==l;){if(l.key===c){if(7===l.tag){if(a.type===ne){n(e,l.sibling),(r=i(l,a.props.children)).return=e,e=r;break e}}else if(l.elementType===a.type){n(e,l.sibling),(r=i(l,a.props)).ref=Ta(e,l,a),r.return=e,e=r;break e}n(e,l);break}t(e,l),l=l.sibling}a.type===ne?((r=js(a.props.children,e.mode,s,a.key)).return=e,e=r):((s=Rs(a.type,a.key,a.props,null,e.mode,s)).ref=Ta(e,r,a),s.return=e,e=s)}return u(e);case te:e:{for(l=a.key;null!==r;){if(r.key===l){if(4===r.tag&&r.stateNode.containerInfo===a.containerInfo&&r.stateNode.implementation===a.implementation){n(e,r.sibling),(r=i(r,a.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=Fs(a,e.mode,s)).return=e,e=r}return u(e)}if("string"===typeof a||"number"===typeof a)return a=""+a,null!==r&&6===r.tag?(n(e,r.sibling),(r=i(r,a)).return=e,e=r):(n(e,r),(r=Ms(a,e.mode,s)).return=e,e=r),u(e);if(Ea(a))return v(e,r,a,s);if(ve(a))return y(e,r,a,s);if(c&&Sa(e,a),"undefined"===typeof a&&!l)switch(e.tag){case 1:case 0:throw e=e.type,Error(o(152,e.displayName||e.name||"Component"))}return n(e,r)}}var Ca=Ia(!0),Aa=Ia(!1),Da={},Na={current:Da},Pa={current:Da},Oa={current:Da};function La(e){if(e===Da)throw Error(o(174));return e}function Ra(e,t){switch(di(Oa,t),di(Pa,e),di(Na,Da),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Me(null,"");break;default:t=Me(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}hi(Na),di(Na,t)}function ja(){hi(Na),hi(Pa),hi(Oa)}function Ma(e){La(Oa.current);var t=La(Na.current),n=Me(t,e.type);t!==n&&(di(Pa,e),di(Na,n))}function Fa(e){Pa.current===e&&(hi(Na),hi(Pa))}var qa={current:0};function Va(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||n.data===mn||n.data===gn))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(64&t.effectTag))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function Ua(e,t){return{responder:e,props:t}}var Ba=Y.ReactCurrentDispatcher,za=Y.ReactCurrentBatchConfig,Ha=0,Ka=null,Ga=null,Wa=null,Qa=!1;function $a(){throw Error(o(321))}function Ya(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Ur(e[n],t[n]))return!1;return!0}function Xa(e,t,n,r,i,a){if(Ha=a,Ka=t,t.memoizedState=null,t.updateQueue=null,t.expirationTime=0,Ba.current=null===e||null===e.memoizedState?ko:_o,e=n(r,i),t.expirationTime===Ha){a=0;do{if(t.expirationTime=0,!(25>a))throw Error(o(301));a+=1,Wa=Ga=null,t.updateQueue=null,Ba.current=xo,e=n(r,i)}while(t.expirationTime===Ha)}if(Ba.current=wo,t=null!==Ga&&null!==Ga.next,Ha=0,Wa=Ga=Ka=null,Qa=!1,t)throw Error(o(300));return e}function Ja(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Wa?Ka.memoizedState=Wa=e:Wa=Wa.next=e,Wa}function Za(){if(null===Ga){var e=Ka.alternate;e=null!==e?e.memoizedState:null}else e=Ga.next;var t=null===Wa?Ka.memoizedState:Wa.next;if(null!==t)Wa=t,Ga=e;else{if(null===e)throw Error(o(310));e={memoizedState:(Ga=e).memoizedState,baseState:Ga.baseState,baseQueue:Ga.baseQueue,queue:Ga.queue,next:null},null===Wa?Ka.memoizedState=Wa=e:Wa=Wa.next=e}return Wa}function eo(e,t){return"function"===typeof t?t(e):t}function to(e){var t=Za(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=Ga,i=r.baseQueue,a=n.pending;if(null!==a){if(null!==i){var u=i.next;i.next=a.next,a.next=u}r.baseQueue=i=a,n.pending=null}if(null!==i){i=i.next,r=r.baseState;var s=u=a=null,l=i;do{var c=l.expirationTime;if(c<Ha){var f={expirationTime:l.expirationTime,suspenseConfig:l.suspenseConfig,action:l.action,eagerReducer:l.eagerReducer,eagerState:l.eagerState,next:null};null===s?(u=s=f,a=r):s=s.next=f,c>Ka.expirationTime&&(Ka.expirationTime=c,ps(c))}else null!==s&&(s=s.next={expirationTime:1073741823,suspenseConfig:l.suspenseConfig,action:l.action,eagerReducer:l.eagerReducer,eagerState:l.eagerState,next:null}),ds(c,l.suspenseConfig),r=l.eagerReducer===e?l.eagerState:e(r,l.action);l=l.next}while(null!==l&&l!==i);null===s?a=r:s.next=u,Ur(r,t.memoizedState)||(Lo=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=s,n.lastRenderedState=r}return[t.memoizedState,n.dispatch]}function no(e){var t=Za(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(null!==i){n.pending=null;var u=i=i.next;do{a=e(a,u.action),u=u.next}while(u!==i);Ur(a,t.memoizedState)||(Lo=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function ro(e){var t=Ja();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:eo,lastRenderedState:e}).dispatch=bo.bind(null,Ka,e),[t.memoizedState,e]}function io(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=Ka.updateQueue)?(t={lastEffect:null},Ka.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function ao(){return Za().memoizedState}function oo(e,t,n,r){var i=Ja();Ka.effectTag|=e,i.memoizedState=io(1|t,n,void 0,void 0===r?null:r)}function uo(e,t,n,r){var i=Za();r=void 0===r?null:r;var a=void 0;if(null!==Ga){var o=Ga.memoizedState;if(a=o.destroy,null!==r&&Ya(r,o.deps))return void io(t,n,a,r)}Ka.effectTag|=e,i.memoizedState=io(1|t,n,a,r)}function so(e,t){return oo(516,4,e,t)}function lo(e,t){return uo(516,4,e,t)}function co(e,t){return uo(4,2,e,t)}function fo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function ho(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,uo(4,2,fo.bind(null,t,e),n)}function po(){}function vo(e,t){return Ja().memoizedState=[e,void 0===t?null:t],e}function yo(e,t){var n=Za();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Ya(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function mo(e,t){var n=Za();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Ya(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function go(e,t,n){var r=Hi();Gi(98>r?98:r,(function(){e(!0)})),Gi(97<r?97:r,(function(){var r=za.suspense;za.suspense=void 0===t?null:t;try{e(!1),n()}finally{za.suspense=r}}))}function bo(e,t,n){var r=es(),i=ya.suspense;i={expirationTime:r=ts(r,e,i),suspenseConfig:i,action:n,eagerReducer:null,eagerState:null,next:null};var a=t.pending;if(null===a?i.next=i:(i.next=a.next,a.next=i),t.pending=i,a=e.alternate,e===Ka||null!==a&&a===Ka)Qa=!0,i.expirationTime=Ha,Ka.expirationTime=Ha;else{if(0===e.expirationTime&&(null===a||0===a.expirationTime)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,u=a(o,n);if(i.eagerReducer=a,i.eagerState=u,Ur(u,o))return}catch(s){}ns(e,r)}}var wo={readContext:ua,useCallback:$a,useContext:$a,useEffect:$a,useImperativeHandle:$a,useLayoutEffect:$a,useMemo:$a,useReducer:$a,useRef:$a,useState:$a,useDebugValue:$a,useResponder:$a,useDeferredValue:$a,useTransition:$a},ko={readContext:ua,useCallback:vo,useContext:ua,useEffect:so,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,oo(4,2,fo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return oo(4,2,e,t)},useMemo:function(e,t){var n=Ja();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Ja();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=bo.bind(null,Ka,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Ja().memoizedState=e},useState:ro,useDebugValue:po,useResponder:Ua,useDeferredValue:function(e,t){var n=ro(e),r=n[0],i=n[1];return so((function(){var n=za.suspense;za.suspense=void 0===t?null:t;try{i(e)}finally{za.suspense=n}}),[e,t]),r},useTransition:function(e){var t=ro(!1),n=t[0];return t=t[1],[vo(go.bind(null,t,e),[t,e]),n]}},_o={readContext:ua,useCallback:yo,useContext:ua,useEffect:lo,useImperativeHandle:ho,useLayoutEffect:co,useMemo:mo,useReducer:to,useRef:ao,useState:function(){return to(eo)},useDebugValue:po,useResponder:Ua,useDeferredValue:function(e,t){var n=to(eo),r=n[0],i=n[1];return lo((function(){var n=za.suspense;za.suspense=void 0===t?null:t;try{i(e)}finally{za.suspense=n}}),[e,t]),r},useTransition:function(e){var t=to(eo),n=t[0];return t=t[1],[yo(go.bind(null,t,e),[t,e]),n]}},xo={readContext:ua,useCallback:yo,useContext:ua,useEffect:lo,useImperativeHandle:ho,useLayoutEffect:co,useMemo:mo,useReducer:no,useRef:ao,useState:function(){return no(eo)},useDebugValue:po,useResponder:Ua,useDeferredValue:function(e,t){var n=no(eo),r=n[0],i=n[1];return lo((function(){var n=za.suspense;za.suspense=void 0===t?null:t;try{i(e)}finally{za.suspense=n}}),[e,t]),r},useTransition:function(e){var t=no(eo),n=t[0];return t=t[1],[yo(go.bind(null,t,e),[t,e]),n]}},Eo=null,To=null,So=!1;function Io(e,t){var n=Ps(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.effectTag=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function Co(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);default:return!1}}function Ao(e){if(So){var t=To;if(t){var n=t;if(!Co(e,t)){if(!(t=Tn(n.nextSibling))||!Co(e,t))return e.effectTag=-1025&e.effectTag|2,So=!1,void(Eo=e);Io(Eo,n)}Eo=e,To=Tn(t.firstChild)}else e.effectTag=-1025&e.effectTag|2,So=!1,Eo=e}}function Do(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Eo=e}function No(e){if(e!==Eo)return!1;if(!So)return Do(e),So=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!_n(t,e.memoizedProps))for(t=To;t;)Io(e,t),t=Tn(t.nextSibling);if(Do(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){To=Tn(e.nextSibling);break e}t--}else"$"!==n&&n!==gn&&n!==mn||t++}e=e.nextSibling}To=null}}else To=Eo?Tn(e.stateNode.nextSibling):null;return!0}function Po(){To=Eo=null,So=!1}var Oo=Y.ReactCurrentOwner,Lo=!1;function Ro(e,t,n,r){t.child=null===e?Aa(t,null,n,r):Ca(t,e.child,n,r)}function jo(e,t,n,r,i){n=n.render;var a=t.ref;return oa(t,i),r=Xa(e,t,n,r,a,i),null===e||Lo?(t.effectTag|=1,Ro(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=i&&(e.expirationTime=0),Jo(e,t,i))}function Mo(e,t,n,r,i,a){if(null===e){var o=n.type;return"function"!==typeof o||Os(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Rs(n.type,null,r,null,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Fo(e,t,o,r,i,a))}return o=e.child,i<a&&(i=o.memoizedProps,(n=null!==(n=n.compare)?n:zr)(i,r)&&e.ref===t.ref)?Jo(e,t,a):(t.effectTag|=1,(e=Ls(o,r)).ref=t.ref,e.return=t,t.child=e)}function Fo(e,t,n,r,i,a){return null!==e&&zr(e.memoizedProps,r)&&e.ref===t.ref&&(Lo=!1,i<a)?(t.expirationTime=e.expirationTime,Jo(e,t,a)):Vo(e,t,n,r,a)}function qo(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.effectTag|=128)}function Vo(e,t,n,r,i){var a=bi(n)?mi:vi.current;return a=gi(t,a),oa(t,i),n=Xa(e,t,n,r,a,i),null===e||Lo?(t.effectTag|=1,Ro(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=i&&(e.expirationTime=0),Jo(e,t,i))}function Uo(e,t,n,r,i){if(bi(n)){var a=!0;xi(t)}else a=!1;if(oa(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),ka(t,n,r),xa(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,u=t.memoizedProps;o.props=u;var s=o.context,l=n.contextType;"object"===typeof l&&null!==l?l=ua(l):l=gi(t,l=bi(n)?mi:vi.current);var c=n.getDerivedStateFromProps,f="function"===typeof c||"function"===typeof o.getSnapshotBeforeUpdate;f||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==r||s!==l)&&_a(t,o,r,l),sa=!1;var h=t.memoizedState;o.state=h,pa(t,r,o,i),s=t.memoizedState,u!==r||h!==s||yi.current||sa?("function"===typeof c&&(ga(t,n,c,r),s=t.memoizedState),(u=sa||wa(t,n,u,r,h,s,l))?(f||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.effectTag|=4)):("function"===typeof o.componentDidMount&&(t.effectTag|=4),t.memoizedProps=r,t.memoizedState=s),o.props=r,o.state=s,o.context=l,r=u):("function"===typeof o.componentDidMount&&(t.effectTag|=4),r=!1)}else o=t.stateNode,ca(e,t),u=t.memoizedProps,o.props=t.type===t.elementType?u:Ji(t.type,u),s=o.context,"object"===typeof(l=n.contextType)&&null!==l?l=ua(l):l=gi(t,l=bi(n)?mi:vi.current),(f="function"===typeof(c=n.getDerivedStateFromProps)||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==r||s!==l)&&_a(t,o,r,l),sa=!1,s=t.memoizedState,o.state=s,pa(t,r,o,i),h=t.memoizedState,u!==r||s!==h||yi.current||sa?("function"===typeof c&&(ga(t,n,c,r),h=t.memoizedState),(c=sa||wa(t,n,u,r,s,h,l))?(f||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,h,l),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,h,l)),"function"===typeof o.componentDidUpdate&&(t.effectTag|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.effectTag|=256)):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&s===e.memoizedState||(t.effectTag|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&s===e.memoizedState||(t.effectTag|=256),t.memoizedProps=r,t.memoizedState=h),o.props=r,o.state=h,o.context=l,r=c):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&s===e.memoizedState||(t.effectTag|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&s===e.memoizedState||(t.effectTag|=256),r=!1);return Bo(e,t,n,r,a,i)}function Bo(e,t,n,r,i,a){qo(e,t);var o=0!==(64&t.effectTag);if(!r&&!o)return i&&Ei(t,n,!1),Jo(e,t,a);r=t.stateNode,Oo.current=t;var u=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.effectTag|=1,null!==e&&o?(t.child=Ca(t,e.child,null,a),t.child=Ca(t,null,u,a)):Ro(e,t,u,a),t.memoizedState=r.state,i&&Ei(t,n,!0),t.child}function zo(e){var t=e.stateNode;t.pendingContext?ki(0,t.pendingContext,t.pendingContext!==t.context):t.context&&ki(0,t.context,!1),Ra(e,t.containerInfo)}var Ho,Ko,Go,Wo={dehydrated:null,retryTime:0};function Qo(e,t,n){var r,i=t.mode,a=t.pendingProps,o=qa.current,u=!1;if((r=0!==(64&t.effectTag))||(r=0!==(2&o)&&(null===e||null!==e.memoizedState)),r?(u=!0,t.effectTag&=-65):null!==e&&null===e.memoizedState||void 0===a.fallback||!0===a.unstable_avoidThisFallback||(o|=1),di(qa,1&o),null===e){if(void 0!==a.fallback&&Ao(t),u){if(u=a.fallback,(a=js(null,i,0,null)).return=t,0===(2&t.mode))for(e=null!==t.memoizedState?t.child.child:t.child,a.child=e;null!==e;)e.return=a,e=e.sibling;return(n=js(u,i,n,null)).return=t,a.sibling=n,t.memoizedState=Wo,t.child=a,n}return i=a.children,t.memoizedState=null,t.child=Aa(t,null,i,n)}if(null!==e.memoizedState){if(i=(e=e.child).sibling,u){if(a=a.fallback,(n=Ls(e,e.pendingProps)).return=t,0===(2&t.mode)&&(u=null!==t.memoizedState?t.child.child:t.child)!==e.child)for(n.child=u;null!==u;)u.return=n,u=u.sibling;return(i=Ls(i,a)).return=t,n.sibling=i,n.childExpirationTime=0,t.memoizedState=Wo,t.child=n,i}return n=Ca(t,e.child,a.children,n),t.memoizedState=null,t.child=n}if(e=e.child,u){if(u=a.fallback,(a=js(null,i,0,null)).return=t,a.child=e,null!==e&&(e.return=a),0===(2&t.mode))for(e=null!==t.memoizedState?t.child.child:t.child,a.child=e;null!==e;)e.return=a,e=e.sibling;return(n=js(u,i,n,null)).return=t,a.sibling=n,n.effectTag|=2,a.childExpirationTime=0,t.memoizedState=Wo,t.child=a,n}return t.memoizedState=null,t.child=Ca(t,e,a.children,n)}function $o(e,t){e.expirationTime<t&&(e.expirationTime=t);var n=e.alternate;null!==n&&n.expirationTime<t&&(n.expirationTime=t),aa(e.return,t)}function Yo(e,t,n,r,i,a){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailExpiration:0,tailMode:i,lastEffect:a}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailExpiration=0,o.tailMode=i,o.lastEffect=a)}function Xo(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(Ro(e,t,r.children,n),0!==(2&(r=qa.current)))r=1&r|2,t.effectTag|=64;else{if(null!==e&&0!==(64&e.effectTag))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&$o(e,n);else if(19===e.tag)$o(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(di(qa,r),0===(2&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===Va(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Yo(t,!1,i,n,a,t.lastEffect);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===Va(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Yo(t,!0,n,null,a,t.lastEffect);break;case"together":Yo(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function Jo(e,t,n){null!==e&&(t.dependencies=e.dependencies);var r=t.expirationTime;if(0!==r&&ps(r),t.childExpirationTime<n)return null;if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Ls(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Ls(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Zo(e,t){switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function eu(e,t,n){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:case 17:return bi(t.type)&&wi(),null;case 3:return ja(),hi(yi),hi(vi),(n=t.stateNode).pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||!No(t)||(t.effectTag|=4),null;case 5:Fa(t),n=La(Oa.current);var a=t.type;if(null!==e&&null!=t.stateNode)Ko(e,t,a,r,n),e.ref!==t.ref&&(t.effectTag|=128);else{if(!r){if(null===t.stateNode)throw Error(o(166));return null}if(e=La(Na.current),No(t)){r=t.stateNode,a=t.type;var u=t.memoizedProps;switch(r[Cn]=t,r[An]=u,a){case"iframe":case"object":case"embed":Qt("load",r);break;case"video":case"audio":for(e=0;e<Xe.length;e++)Qt(Xe[e],r);break;case"source":Qt("error",r);break;case"img":case"image":case"link":Qt("error",r),Qt("load",r);break;case"form":Qt("reset",r),Qt("submit",r);break;case"details":Qt("toggle",r);break;case"input":xe(r,u),Qt("invalid",r),ln(n,"onChange");break;case"select":r._wrapperState={wasMultiple:!!u.multiple},Qt("invalid",r),ln(n,"onChange");break;case"textarea":Ne(r,u),Qt("invalid",r),ln(n,"onChange")}for(var s in on(a,u),e=null,u)if(u.hasOwnProperty(s)){var l=u[s];"children"===s?"string"===typeof l?r.textContent!==l&&(e=["children",l]):"number"===typeof l&&r.textContent!==""+l&&(e=["children",""+l]):E.hasOwnProperty(s)&&null!=l&&ln(n,s)}switch(a){case"input":we(r),Se(r,u,!0);break;case"textarea":we(r),Oe(r);break;case"select":case"option":break;default:"function"===typeof u.onClick&&(r.onclick=cn)}n=e,t.updateQueue=n,null!==n&&(t.effectTag|=4)}else{switch(s=9===n.nodeType?n:n.ownerDocument,e===sn&&(e=je(a)),e===sn?"script"===a?((e=s.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=s.createElement(a,{is:r.is}):(e=s.createElement(a),"select"===a&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,a),e[Cn]=t,e[An]=r,Ho(e,t),t.stateNode=e,s=un(a,r),a){case"iframe":case"object":case"embed":Qt("load",e),l=r;break;case"video":case"audio":for(l=0;l<Xe.length;l++)Qt(Xe[l],e);l=r;break;case"source":Qt("error",e),l=r;break;case"img":case"image":case"link":Qt("error",e),Qt("load",e),l=r;break;case"form":Qt("reset",e),Qt("submit",e),l=r;break;case"details":Qt("toggle",e),l=r;break;case"input":xe(e,r),l=_e(e,r),Qt("invalid",e),ln(n,"onChange");break;case"option":l=Ce(e,r);break;case"select":e._wrapperState={wasMultiple:!!r.multiple},l=i({},r,{value:void 0}),Qt("invalid",e),ln(n,"onChange");break;case"textarea":Ne(e,r),l=De(e,r),Qt("invalid",e),ln(n,"onChange");break;default:l=r}on(a,l);var c=l;for(u in c)if(c.hasOwnProperty(u)){var f=c[u];"style"===u?rn(e,f):"dangerouslySetInnerHTML"===u?null!=(f=f?f.__html:void 0)&&Ve(e,f):"children"===u?"string"===typeof f?("textarea"!==a||""!==f)&&Ue(e,f):"number"===typeof f&&Ue(e,""+f):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(E.hasOwnProperty(u)?null!=f&&ln(n,u):null!=f&&X(e,u,f,s))}switch(a){case"input":we(e),Se(e,r,!1);break;case"textarea":we(e),Oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+ge(r.value));break;case"select":e.multiple=!!r.multiple,null!=(n=r.value)?Ae(e,!!r.multiple,n,!1):null!=r.defaultValue&&Ae(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof l.onClick&&(e.onclick=cn)}kn(a,r)&&(t.effectTag|=4)}null!==t.ref&&(t.effectTag|=128)}return null;case 6:if(e&&null!=t.stateNode)Go(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));n=La(Oa.current),La(Na.current),No(t)?(n=t.stateNode,r=t.memoizedProps,n[Cn]=t,n.nodeValue!==r&&(t.effectTag|=4)):((n=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[Cn]=t,t.stateNode=n)}return null;case 13:return hi(qa),r=t.memoizedState,0!==(64&t.effectTag)?(t.expirationTime=n,t):(n=null!==r,r=!1,null===e?void 0!==t.memoizedProps.fallback&&No(t):(r=null!==(a=e.memoizedState),n||null===a||null!==(a=e.child.sibling)&&(null!==(u=t.firstEffect)?(t.firstEffect=a,a.nextEffect=u):(t.firstEffect=t.lastEffect=a,a.nextEffect=null),a.effectTag=8)),n&&!r&&0!==(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!==(1&qa.current)?Ru===Cu&&(Ru=Au):(Ru!==Cu&&Ru!==Au||(Ru=Du),0!==Vu&&null!==Pu&&(Us(Pu,Lu),Bs(Pu,Vu)))),(n||r)&&(t.effectTag|=4),null);case 4:return ja(),null;case 10:return ia(t),null;case 19:if(hi(qa),null===(r=t.memoizedState))return null;if(a=0!==(64&t.effectTag),null===(u=r.rendering)){if(a)Zo(r,!1);else if(Ru!==Cu||null!==e&&0!==(64&e.effectTag))for(u=t.child;null!==u;){if(null!==(e=Va(u))){for(t.effectTag|=64,Zo(r,!1),null!==(a=e.updateQueue)&&(t.updateQueue=a,t.effectTag|=4),null===r.lastEffect&&(t.firstEffect=null),t.lastEffect=r.lastEffect,r=t.child;null!==r;)u=n,(a=r).effectTag&=2,a.nextEffect=null,a.firstEffect=null,a.lastEffect=null,null===(e=a.alternate)?(a.childExpirationTime=0,a.expirationTime=u,a.child=null,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null):(a.childExpirationTime=e.childExpirationTime,a.expirationTime=e.expirationTime,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,u=e.dependencies,a.dependencies=null===u?null:{expirationTime:u.expirationTime,firstContext:u.firstContext,responders:u.responders}),r=r.sibling;return di(qa,1&qa.current|2),t.child}u=u.sibling}}else{if(!a)if(null!==(e=Va(u))){if(t.effectTag|=64,a=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.effectTag|=4),Zo(r,!0),null===r.tail&&"hidden"===r.tailMode&&!u.alternate)return null!==(t=t.lastEffect=r.lastEffect)&&(t.nextEffect=null),null}else 2*zi()-r.renderingStartTime>r.tailExpiration&&1<n&&(t.effectTag|=64,a=!0,Zo(r,!1),t.expirationTime=t.childExpirationTime=n-1);r.isBackwards?(u.sibling=t.child,t.child=u):(null!==(n=r.last)?n.sibling=u:t.child=u,r.last=u)}return null!==r.tail?(0===r.tailExpiration&&(r.tailExpiration=zi()+500),n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=t.lastEffect,r.renderingStartTime=zi(),n.sibling=null,t=qa.current,di(qa,a?1&t|2:1&t),n):null}throw Error(o(156,t.tag))}function tu(e){switch(e.tag){case 1:bi(e.type)&&wi();var t=e.effectTag;return 4096&t?(e.effectTag=-4097&t|64,e):null;case 3:if(ja(),hi(yi),hi(vi),0!==(64&(t=e.effectTag)))throw Error(o(285));return e.effectTag=-4097&t|64,e;case 5:return Fa(e),null;case 13:return hi(qa),4096&(t=e.effectTag)?(e.effectTag=-4097&t|64,e):null;case 19:return hi(qa),null;case 4:return ja(),null;case 10:return ia(e),null;default:return null}}function nu(e,t){return{value:e,source:t,stack:me(t)}}Ho=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ko=function(e,t,n,r,a){var o=e.memoizedProps;if(o!==r){var u,s,l=t.stateNode;switch(La(Na.current),e=null,n){case"input":o=_e(l,o),r=_e(l,r),e=[];break;case"option":o=Ce(l,o),r=Ce(l,r),e=[];break;case"select":o=i({},o,{value:void 0}),r=i({},r,{value:void 0}),e=[];break;case"textarea":o=De(l,o),r=De(l,r),e=[];break;default:"function"!==typeof o.onClick&&"function"===typeof r.onClick&&(l.onclick=cn)}for(u in on(n,r),n=null,o)if(!r.hasOwnProperty(u)&&o.hasOwnProperty(u)&&null!=o[u])if("style"===u)for(s in l=o[u])l.hasOwnProperty(s)&&(n||(n={}),n[s]="");else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(E.hasOwnProperty(u)?e||(e=[]):(e=e||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=o?o[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(s in l)!l.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&l[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(e||(e=[]),e.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(e=e||[]).push(u,c)):"children"===u?l===c||"string"!==typeof c&&"number"!==typeof c||(e=e||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(E.hasOwnProperty(u)?(null!=c&&ln(a,u),e||l===c||(e=[])):(e=e||[]).push(u,c))}n&&(e=e||[]).push("style",n),a=e,(t.updateQueue=a)&&(t.effectTag|=4)}},Go=function(e,t,n,r){n!==r&&(t.effectTag|=4)};var ru="function"===typeof WeakSet?WeakSet:Set;function iu(e,t){var n=t.source,r=t.stack;null===r&&null!==n&&(r=me(n)),null!==n&&ye(n.type),t=t.value,null!==e&&1===e.tag&&ye(e.type);try{console.error(t)}catch(i){setTimeout((function(){throw i}))}}function au(e){var t=e.ref;if(null!==t)if("function"===typeof t)try{t(null)}catch(n){Ss(e,n)}else t.current=null}function ou(e,t){switch(t.tag){case 0:case 11:case 15:case 22:case 3:case 5:case 6:case 4:case 17:return;case 1:if(256&t.effectTag&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:Ji(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}return}throw Error(o(163))}function uu(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.destroy;n.destroy=void 0,void 0!==r&&r()}n=n.next}while(n!==t)}}function su(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function lu(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:return void su(3,n);case 1:if(e=n.stateNode,4&n.effectTag)if(null===t)e.componentDidMount();else{var r=n.elementType===n.type?t.memoizedProps:Ji(n.type,t.memoizedProps);e.componentDidUpdate(r,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate)}return void(null!==(t=n.updateQueue)&&va(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:case 1:e=n.child.stateNode}va(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.effectTag&&kn(n.type,n.memoizedProps)&&e.focus());case 6:case 4:case 12:case 19:case 17:case 20:case 21:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&Mt(n)))))}throw Error(o(163))}function cu(e,t,n){switch("function"===typeof Ds&&Ds(t),t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var r=e.next;Gi(97<n?97:n,(function(){var e=r;do{var n=e.destroy;if(void 0!==n){var i=t;try{n()}catch(a){Ss(i,a)}}e=e.next}while(e!==r)}))}break;case 1:au(t),"function"===typeof(n=t.stateNode).componentWillUnmount&&function(e,t){try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(n){Ss(e,n)}}(t,n);break;case 5:au(t);break;case 4:yu(e,t,n)}}function fu(e){var t=e.alternate;e.return=null,e.child=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.alternate=null,e.firstEffect=null,e.lastEffect=null,e.pendingProps=null,e.memoizedProps=null,e.stateNode=null,null!==t&&fu(t)}function hu(e){return 5===e.tag||3===e.tag||4===e.tag}function du(e){e:{for(var t=e.return;null!==t;){if(hu(t)){var n=t;break e}t=t.return}throw Error(o(160))}switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(o(161))}16&n.effectTag&&(Ue(t,""),n.effectTag&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||hu(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.effectTag)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.effectTag)){n=n.stateNode;break e}}r?pu(e,n,t):vu(e,n,t)}function pu(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=cn));else if(4!==r&&null!==(e=e.child))for(pu(e,t,n),e=e.sibling;null!==e;)pu(e,t,n),e=e.sibling}function vu(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(vu(e,t,n),e=e.sibling;null!==e;)vu(e,t,n),e=e.sibling}function yu(e,t,n){for(var r,i,a=t,u=!1;;){if(!u){u=a.return;e:for(;;){if(null===u)throw Error(o(160));switch(r=u.stateNode,u.tag){case 5:i=!1;break e;case 3:case 4:r=r.containerInfo,i=!0;break e}u=u.return}u=!0}if(5===a.tag||6===a.tag){e:for(var s=e,l=a,c=n,f=l;;)if(cu(s,f,c),null!==f.child&&4!==f.tag)f.child.return=f,f=f.child;else{if(f===l)break e;for(;null===f.sibling;){if(null===f.return||f.return===l)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}i?(s=r,l=a.stateNode,8===s.nodeType?s.parentNode.removeChild(l):s.removeChild(l)):r.removeChild(a.stateNode)}else if(4===a.tag){if(null!==a.child){r=a.stateNode.containerInfo,i=!0,a.child.return=a,a=a.child;continue}}else if(cu(e,a,n),null!==a.child){a.child.return=a,a=a.child;continue}if(a===t)break;for(;null===a.sibling;){if(null===a.return||a.return===t)return;4===(a=a.return).tag&&(u=!1)}a.sibling.return=a.return,a=a.sibling}}function mu(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:return void uu(3,t);case 1:case 12:case 17:return;case 5:var n=t.stateNode;if(null!=n){var r=t.memoizedProps,i=null!==e?e.memoizedProps:r;e=t.type;var a=t.updateQueue;if(t.updateQueue=null,null!==a){for(n[An]=r,"input"===e&&"radio"===r.type&&null!=r.name&&Ee(n,r),un(e,i),t=un(e,r),i=0;i<a.length;i+=2){var u=a[i],s=a[i+1];"style"===u?rn(n,s):"dangerouslySetInnerHTML"===u?Ve(n,s):"children"===u?Ue(n,s):X(n,u,s,t)}switch(e){case"input":Te(n,r);break;case"textarea":Pe(n,r);break;case"select":t=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(e=r.value)?Ae(n,!!r.multiple,e,!1):t!==!!r.multiple&&(null!=r.defaultValue?Ae(n,!!r.multiple,r.defaultValue,!0):Ae(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(o(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((t=t.stateNode).hydrate&&(t.hydrate=!1,Mt(t.containerInfo)));case 13:if(n=t,null===t.memoizedState?r=!1:(r=!0,n=t.child,Bu=zi()),null!==n)e:for(e=n;;){if(5===e.tag)a=e.stateNode,r?"function"===typeof(a=a.style).setProperty?a.setProperty("display","none","important"):a.display="none":(a=e.stateNode,i=void 0!==(i=e.memoizedProps.style)&&null!==i&&i.hasOwnProperty("display")?i.display:null,a.style.display=nn("display",i));else if(6===e.tag)e.stateNode.nodeValue=r?"":e.memoizedProps;else{if(13===e.tag&&null!==e.memoizedState&&null===e.memoizedState.dehydrated){(a=e.child.sibling).return=e,e=a;continue}if(null!==e.child){e.child.return=e,e=e.child;continue}}if(e===n)break;for(;null===e.sibling;){if(null===e.return||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}return void gu(t);case 19:return void gu(t)}throw Error(o(163))}function gu(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new ru),t.forEach((function(t){var r=Cs.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}var bu="function"===typeof WeakMap?WeakMap:Map;function wu(e,t,n){(n=fa(n,null)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Hu||(Hu=!0,Ku=r),iu(e,t)},n}function ku(e,t,n){(n=fa(n,null)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return iu(e,t),r(i)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){"function"!==typeof r&&(null===Gu?Gu=new Set([this]):Gu.add(this),iu(e,t));var n=t.stack;this.componentDidCatch(t.value,{componentStack:null!==n?n:""})}),n}var _u,xu=Math.ceil,Eu=Y.ReactCurrentDispatcher,Tu=Y.ReactCurrentOwner,Su=16,Iu=32,Cu=0,Au=3,Du=4,Nu=0,Pu=null,Ou=null,Lu=0,Ru=Cu,ju=null,Mu=1073741823,Fu=1073741823,qu=null,Vu=0,Uu=!1,Bu=0,zu=null,Hu=!1,Ku=null,Gu=null,Wu=!1,Qu=null,$u=90,Yu=null,Xu=0,Ju=null,Zu=0;function es(){return 0!==(48&Nu)?1073741821-(zi()/10|0):0!==Zu?Zu:Zu=1073741821-(zi()/10|0)}function ts(e,t,n){if(0===(2&(t=t.mode)))return 1073741823;var r=Hi();if(0===(4&t))return 99===r?1073741823:1073741822;if(0!==(Nu&Su))return Lu;if(null!==n)e=Xi(e,0|n.timeoutMs||5e3,250);else switch(r){case 99:e=1073741823;break;case 98:e=Xi(e,150,100);break;case 97:case 96:e=Xi(e,5e3,250);break;case 95:e=2;break;default:throw Error(o(326))}return null!==Pu&&e===Lu&&--e,e}function ns(e,t){if(50<Xu)throw Xu=0,Ju=null,Error(o(185));if(null!==(e=rs(e,t))){var n=Hi();1073741823===t?0!==(8&Nu)&&0===(48&Nu)?us(e):(as(e),0===Nu&&$i()):as(e),0===(4&Nu)||98!==n&&99!==n||(null===Yu?Yu=new Map([[e,t]]):(void 0===(n=Yu.get(e))||n>t)&&Yu.set(e,t))}}function rs(e,t){e.expirationTime<t&&(e.expirationTime=t);var n=e.alternate;null!==n&&n.expirationTime<t&&(n.expirationTime=t);var r=e.return,i=null;if(null===r&&3===e.tag)i=e.stateNode;else for(;null!==r;){if(n=r.alternate,r.childExpirationTime<t&&(r.childExpirationTime=t),null!==n&&n.childExpirationTime<t&&(n.childExpirationTime=t),null===r.return&&3===r.tag){i=r.stateNode;break}r=r.return}return null!==i&&(Pu===i&&(ps(t),Ru===Du&&Us(i,Lu)),Bs(i,t)),i}function is(e){var t=e.lastExpiredTime;if(0!==t)return t;if(!Vs(e,t=e.firstPendingTime))return t;var n=e.lastPingedTime;return 2>=(e=n>(e=e.nextKnownPendingLevel)?n:e)&&t!==e?0:e}function as(e){if(0!==e.lastExpiredTime)e.callbackExpirationTime=1073741823,e.callbackPriority=99,e.callbackNode=Qi(us.bind(null,e));else{var t=is(e),n=e.callbackNode;if(0===t)null!==n&&(e.callbackNode=null,e.callbackExpirationTime=0,e.callbackPriority=90);else{var r=es();if(1073741823===t?r=99:1===t||2===t?r=95:r=0>=(r=10*(1073741821-t)-10*(1073741821-r))?99:250>=r?98:5250>=r?97:95,null!==n){var i=e.callbackPriority;if(e.callbackExpirationTime===t&&i>=r)return;n!==ji&&Ii(n)}e.callbackExpirationTime=t,e.callbackPriority=r,t=1073741823===t?Qi(us.bind(null,e)):Wi(r,os.bind(null,e),{timeout:10*(1073741821-t)-zi()}),e.callbackNode=t}}}function os(e,t){if(Zu=0,t)return zs(e,t=es()),as(e),null;var n=is(e);if(0!==n){if(t=e.callbackNode,0!==(48&Nu))throw Error(o(327));if(xs(),e===Pu&&n===Lu||cs(e,n),null!==Ou){var r=Nu;Nu|=Su;for(var i=hs();;)try{ys();break}catch(s){fs(e,s)}if(ra(),Nu=r,Eu.current=i,1===Ru)throw t=ju,cs(e,n),Us(e,n),as(e),t;if(null===Ou)switch(i=e.finishedWork=e.current.alternate,e.finishedExpirationTime=n,r=Ru,Pu=null,r){case Cu:case 1:throw Error(o(345));case 2:zs(e,2<n?2:n);break;case Au:if(Us(e,n),n===(r=e.lastSuspendedTime)&&(e.nextKnownPendingLevel=bs(i)),1073741823===Mu&&10<(i=Bu+500-zi())){if(Uu){var a=e.lastPingedTime;if(0===a||a>=n){e.lastPingedTime=n,cs(e,n);break}}if(0!==(a=is(e))&&a!==n)break;if(0!==r&&r!==n){e.lastPingedTime=r;break}e.timeoutHandle=xn(ws.bind(null,e),i);break}ws(e);break;case Du:if(Us(e,n),n===(r=e.lastSuspendedTime)&&(e.nextKnownPendingLevel=bs(i)),Uu&&(0===(i=e.lastPingedTime)||i>=n)){e.lastPingedTime=n,cs(e,n);break}if(0!==(i=is(e))&&i!==n)break;if(0!==r&&r!==n){e.lastPingedTime=r;break}if(1073741823!==Fu?r=10*(1073741821-Fu)-zi():1073741823===Mu?r=0:(r=10*(1073741821-Mu)-5e3,0>(r=(i=zi())-r)&&(r=0),(n=10*(1073741821-n)-i)<(r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*xu(r/1960))-r)&&(r=n)),10<r){e.timeoutHandle=xn(ws.bind(null,e),r);break}ws(e);break;case 5:if(1073741823!==Mu&&null!==qu){a=Mu;var u=qu;if(0>=(r=0|u.busyMinDurationMs)?r=0:(i=0|u.busyDelayMs,r=(a=zi()-(10*(1073741821-a)-(0|u.timeoutMs||5e3)))<=i?0:i+r-a),10<r){Us(e,n),e.timeoutHandle=xn(ws.bind(null,e),r);break}}ws(e);break;default:throw Error(o(329))}if(as(e),e.callbackNode===t)return os.bind(null,e)}}return null}function us(e){var t=e.lastExpiredTime;if(t=0!==t?t:1073741823,0!==(48&Nu))throw Error(o(327));if(xs(),e===Pu&&t===Lu||cs(e,t),null!==Ou){var n=Nu;Nu|=Su;for(var r=hs();;)try{vs();break}catch(i){fs(e,i)}if(ra(),Nu=n,Eu.current=r,1===Ru)throw n=ju,cs(e,t),Us(e,t),as(e),n;if(null!==Ou)throw Error(o(261));e.finishedWork=e.current.alternate,e.finishedExpirationTime=t,Pu=null,ws(e),as(e)}return null}function ss(e,t){var n=Nu;Nu|=1;try{return e(t)}finally{0===(Nu=n)&&$i()}}function ls(e,t){var n=Nu;Nu&=-2,Nu|=8;try{return e(t)}finally{0===(Nu=n)&&$i()}}function cs(e,t){e.finishedWork=null,e.finishedExpirationTime=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,En(n)),null!==Ou)for(n=Ou.return;null!==n;){var r=n;switch(r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&wi();break;case 3:ja(),hi(yi),hi(vi);break;case 5:Fa(r);break;case 4:ja();break;case 13:case 19:hi(qa);break;case 10:ia(r)}n=n.return}Pu=e,Ou=Ls(e.current,null),Lu=t,Ru=Cu,ju=null,Fu=Mu=1073741823,qu=null,Vu=0,Uu=!1}function fs(e,t){for(;;){try{if(ra(),Ba.current=wo,Qa)for(var n=Ka.memoizedState;null!==n;){var r=n.queue;null!==r&&(r.pending=null),n=n.next}if(Ha=0,Wa=Ga=Ka=null,Qa=!1,null===Ou||null===Ou.return)return Ru=1,ju=t,Ou=null;e:{var i=e,a=Ou.return,o=Ou,u=t;if(t=Lu,o.effectTag|=2048,o.firstEffect=o.lastEffect=null,null!==u&&"object"===typeof u&&"function"===typeof u.then){var s=u;if(0===(2&o.mode)){var l=o.alternate;l?(o.updateQueue=l.updateQueue,o.memoizedState=l.memoizedState,o.expirationTime=l.expirationTime):(o.updateQueue=null,o.memoizedState=null)}var c=0!==(1&qa.current),f=a;do{var h;if(h=13===f.tag){var d=f.memoizedState;if(null!==d)h=null!==d.dehydrated;else{var p=f.memoizedProps;h=void 0!==p.fallback&&(!0!==p.unstable_avoidThisFallback||!c)}}if(h){var v=f.updateQueue;if(null===v){var y=new Set;y.add(s),f.updateQueue=y}else v.add(s);if(0===(2&f.mode)){if(f.effectTag|=64,o.effectTag&=-2981,1===o.tag)if(null===o.alternate)o.tag=17;else{var m=fa(1073741823,null);m.tag=2,ha(o,m)}o.expirationTime=1073741823;break e}u=void 0,o=t;var g=i.pingCache;if(null===g?(g=i.pingCache=new bu,u=new Set,g.set(s,u)):void 0===(u=g.get(s))&&(u=new Set,g.set(s,u)),!u.has(o)){u.add(o);var b=Is.bind(null,i,s,o);s.then(b,b)}f.effectTag|=4096,f.expirationTime=t;break e}f=f.return}while(null!==f);u=Error((ye(o.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+me(o))}5!==Ru&&(Ru=2),u=nu(u,o),f=a;do{switch(f.tag){case 3:s=u,f.effectTag|=4096,f.expirationTime=t,da(f,wu(f,s,t));break e;case 1:s=u;var w=f.type,k=f.stateNode;if(0===(64&f.effectTag)&&("function"===typeof w.getDerivedStateFromError||null!==k&&"function"===typeof k.componentDidCatch&&(null===Gu||!Gu.has(k)))){f.effectTag|=4096,f.expirationTime=t,da(f,ku(f,s,t));break e}}f=f.return}while(null!==f)}Ou=gs(Ou)}catch(_){t=_;continue}break}}function hs(){var e=Eu.current;return Eu.current=wo,null===e?wo:e}function ds(e,t){e<Mu&&2<e&&(Mu=e),null!==t&&e<Fu&&2<e&&(Fu=e,qu=t)}function ps(e){e>Vu&&(Vu=e)}function vs(){for(;null!==Ou;)Ou=ms(Ou)}function ys(){for(;null!==Ou&&!Mi();)Ou=ms(Ou)}function ms(e){var t=_u(e.alternate,e,Lu);return e.memoizedProps=e.pendingProps,null===t&&(t=gs(e)),Tu.current=null,t}function gs(e){Ou=e;do{var t=Ou.alternate;if(e=Ou.return,0===(2048&Ou.effectTag)){if(t=eu(t,Ou,Lu),1===Lu||1!==Ou.childExpirationTime){for(var n=0,r=Ou.child;null!==r;){var i=r.expirationTime,a=r.childExpirationTime;i>n&&(n=i),a>n&&(n=a),r=r.sibling}Ou.childExpirationTime=n}if(null!==t)return t;null!==e&&0===(2048&e.effectTag)&&(null===e.firstEffect&&(e.firstEffect=Ou.firstEffect),null!==Ou.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=Ou.firstEffect),e.lastEffect=Ou.lastEffect),1<Ou.effectTag&&(null!==e.lastEffect?e.lastEffect.nextEffect=Ou:e.firstEffect=Ou,e.lastEffect=Ou))}else{if(null!==(t=tu(Ou)))return t.effectTag&=2047,t;null!==e&&(e.firstEffect=e.lastEffect=null,e.effectTag|=2048)}if(null!==(t=Ou.sibling))return t;Ou=e}while(null!==Ou);return Ru===Cu&&(Ru=5),null}function bs(e){var t=e.expirationTime;return t>(e=e.childExpirationTime)?t:e}function ws(e){var t=Hi();return Gi(99,ks.bind(null,e,t)),null}function ks(e,t){do{xs()}while(null!==Qu);if(0!==(48&Nu))throw Error(o(327));var n=e.finishedWork,r=e.finishedExpirationTime;if(null===n)return null;if(e.finishedWork=null,e.finishedExpirationTime=0,n===e.current)throw Error(o(177));e.callbackNode=null,e.callbackExpirationTime=0,e.callbackPriority=90,e.nextKnownPendingLevel=0;var i=bs(n);if(e.firstPendingTime=i,r<=e.lastSuspendedTime?e.firstSuspendedTime=e.lastSuspendedTime=e.nextKnownPendingLevel=0:r<=e.firstSuspendedTime&&(e.firstSuspendedTime=r-1),r<=e.lastPingedTime&&(e.lastPingedTime=0),r<=e.lastExpiredTime&&(e.lastExpiredTime=0),e===Pu&&(Ou=Pu=null,Lu=0),1<n.effectTag?null!==n.lastEffect?(n.lastEffect.nextEffect=n,i=n.firstEffect):i=n:i=n.firstEffect,null!==i){var a=Nu;Nu|=Iu,Tu.current=null,bn=Wt;var u=vn();if(yn(u)){if("selectionStart"in u)var s={start:u.selectionStart,end:u.selectionEnd};else e:{var l=(s=(s=u.ownerDocument)&&s.defaultView||window).getSelection&&s.getSelection();if(l&&0!==l.rangeCount){s=l.anchorNode;var c=l.anchorOffset,f=l.focusNode;l=l.focusOffset;try{s.nodeType,f.nodeType}catch(S){s=null;break e}var h=0,d=-1,p=-1,v=0,y=0,m=u,g=null;t:for(;;){for(var b;m!==s||0!==c&&3!==m.nodeType||(d=h+c),m!==f||0!==l&&3!==m.nodeType||(p=h+l),3===m.nodeType&&(h+=m.nodeValue.length),null!==(b=m.firstChild);)g=m,m=b;for(;;){if(m===u)break t;if(g===s&&++v===c&&(d=h),g===f&&++y===l&&(p=h),null!==(b=m.nextSibling))break;g=(m=g).parentNode}m=b}s=-1===d||-1===p?null:{start:d,end:p}}else s=null}s=s||{start:0,end:0}}else s=null;wn={activeElementDetached:null,focusedElem:u,selectionRange:s},Wt=!1,zu=i;do{try{_s()}catch(S){if(null===zu)throw Error(o(330));Ss(zu,S),zu=zu.nextEffect}}while(null!==zu);zu=i;do{try{for(u=e,s=t;null!==zu;){var w=zu.effectTag;if(16&w&&Ue(zu.stateNode,""),128&w){var k=zu.alternate;if(null!==k){var _=k.ref;null!==_&&("function"===typeof _?_(null):_.current=null)}}switch(1038&w){case 2:du(zu),zu.effectTag&=-3;break;case 6:du(zu),zu.effectTag&=-3,mu(zu.alternate,zu);break;case 1024:zu.effectTag&=-1025;break;case 1028:zu.effectTag&=-1025,mu(zu.alternate,zu);break;case 4:mu(zu.alternate,zu);break;case 8:yu(u,c=zu,s),fu(c)}zu=zu.nextEffect}}catch(S){if(null===zu)throw Error(o(330));Ss(zu,S),zu=zu.nextEffect}}while(null!==zu);if(_=wn,k=vn(),w=_.focusedElem,s=_.selectionRange,k!==w&&w&&w.ownerDocument&&pn(w.ownerDocument.documentElement,w)){null!==s&&yn(w)&&(k=s.start,void 0===(_=s.end)&&(_=k),"selectionStart"in w?(w.selectionStart=k,w.selectionEnd=Math.min(_,w.value.length)):(_=(k=w.ownerDocument||document)&&k.defaultView||window).getSelection&&(_=_.getSelection(),c=w.textContent.length,u=Math.min(s.start,c),s=void 0===s.end?u:Math.min(s.end,c),!_.extend&&u>s&&(c=s,s=u,u=c),c=dn(w,u),f=dn(w,s),c&&f&&(1!==_.rangeCount||_.anchorNode!==c.node||_.anchorOffset!==c.offset||_.focusNode!==f.node||_.focusOffset!==f.offset)&&((k=k.createRange()).setStart(c.node,c.offset),_.removeAllRanges(),u>s?(_.addRange(k),_.extend(f.node,f.offset)):(k.setEnd(f.node,f.offset),_.addRange(k))))),k=[];for(_=w;_=_.parentNode;)1===_.nodeType&&k.push({element:_,left:_.scrollLeft,top:_.scrollTop});for("function"===typeof w.focus&&w.focus(),w=0;w<k.length;w++)(_=k[w]).element.scrollLeft=_.left,_.element.scrollTop=_.top}Wt=!!bn,wn=bn=null,e.current=n,zu=i;do{try{for(w=e;null!==zu;){var x=zu.effectTag;if(36&x&&lu(w,zu.alternate,zu),128&x){k=void 0;var E=zu.ref;if(null!==E){var T=zu.stateNode;zu.tag,k=T,"function"===typeof E?E(k):E.current=k}}zu=zu.nextEffect}}catch(S){if(null===zu)throw Error(o(330));Ss(zu,S),zu=zu.nextEffect}}while(null!==zu);zu=null,Fi(),Nu=a}else e.current=n;if(Wu)Wu=!1,Qu=e,$u=t;else for(zu=i;null!==zu;)t=zu.nextEffect,zu.nextEffect=null,zu=t;if(0===(t=e.firstPendingTime)&&(Gu=null),1073741823===t?e===Ju?Xu++:(Xu=0,Ju=e):Xu=0,"function"===typeof As&&As(n.stateNode,r),as(e),Hu)throw Hu=!1,e=Ku,Ku=null,e;return 0!==(8&Nu)||$i(),null}function _s(){for(;null!==zu;){var e=zu.effectTag;0!==(256&e)&&ou(zu.alternate,zu),0===(512&e)||Wu||(Wu=!0,Wi(97,(function(){return xs(),null}))),zu=zu.nextEffect}}function xs(){if(90!==$u){var e=97<$u?97:$u;return $u=90,Gi(e,Es)}}function Es(){if(null===Qu)return!1;var e=Qu;if(Qu=null,0!==(48&Nu))throw Error(o(331));var t=Nu;for(Nu|=Iu,e=e.current.firstEffect;null!==e;){try{var n=e;if(0!==(512&n.effectTag))switch(n.tag){case 0:case 11:case 15:case 22:uu(5,n),su(5,n)}}catch(r){if(null===e)throw Error(o(330));Ss(e,r)}n=e.nextEffect,e.nextEffect=null,e=n}return Nu=t,$i(),!0}function Ts(e,t,n){ha(e,t=wu(e,t=nu(n,t),1073741823)),null!==(e=rs(e,1073741823))&&as(e)}function Ss(e,t){if(3===e.tag)Ts(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){Ts(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"===typeof n.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Gu||!Gu.has(r))){ha(n,e=ku(n,e=nu(t,e),1073741823)),null!==(n=rs(n,1073741823))&&as(n);break}}n=n.return}}function Is(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),Pu===e&&Lu===n?Ru===Du||Ru===Au&&1073741823===Mu&&zi()-Bu<500?cs(e,Lu):Uu=!0:Vs(e,n)&&(0!==(t=e.lastPingedTime)&&t<n||(e.lastPingedTime=n,as(e)))}function Cs(e,t){var n=e.stateNode;null!==n&&n.delete(t),0===(t=0)&&(t=ts(t=es(),e,null)),null!==(e=rs(e,t))&&as(e)}_u=function(e,t,n){var r=t.expirationTime;if(null!==e){var i=t.pendingProps;if(e.memoizedProps!==i||yi.current)Lo=!0;else{if(r<n){switch(Lo=!1,t.tag){case 3:zo(t),Po();break;case 5:if(Ma(t),4&t.mode&&1!==n&&i.hidden)return t.expirationTime=t.childExpirationTime=1,null;break;case 1:bi(t.type)&&xi(t);break;case 4:Ra(t,t.stateNode.containerInfo);break;case 10:r=t.memoizedProps.value,i=t.type._context,di(Zi,i._currentValue),i._currentValue=r;break;case 13:if(null!==t.memoizedState)return 0!==(r=t.child.childExpirationTime)&&r>=n?Qo(e,t,n):(di(qa,1&qa.current),null!==(t=Jo(e,t,n))?t.sibling:null);di(qa,1&qa.current);break;case 19:if(r=t.childExpirationTime>=n,0!==(64&e.effectTag)){if(r)return Xo(e,t,n);t.effectTag|=64}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null),di(qa,qa.current),!r)return null}return Jo(e,t,n)}Lo=!1}}else Lo=!1;switch(t.expirationTime=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps,i=gi(t,vi.current),oa(t,n),i=Xa(null,t,r,e,i,n),t.effectTag|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,bi(r)){var a=!0;xi(t)}else a=!1;t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,la(t);var u=r.getDerivedStateFromProps;"function"===typeof u&&ga(t,r,u,e),i.updater=ba,t.stateNode=i,i._reactInternalFiber=t,xa(t,r,e,n),t=Bo(null,t,r,!0,a,n)}else t.tag=0,Ro(null,t,i,n),t=t.child;return t;case 16:e:{if(i=t.elementType,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps,function(e){if(-1===e._status){e._status=0;var t=e._ctor;t=t(),e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}}(i),1!==i._status)throw i._result;switch(i=i._result,t.type=i,a=t.tag=function(e){if("function"===typeof e)return Os(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===se)return 11;if(e===fe)return 14}return 2}(i),e=Ji(i,e),a){case 0:t=Vo(null,t,i,e,n);break e;case 1:t=Uo(null,t,i,e,n);break e;case 11:t=jo(null,t,i,e,n);break e;case 14:t=Mo(null,t,i,Ji(i.type,e),r,n);break e}throw Error(o(306,i,""))}return t;case 0:return r=t.type,i=t.pendingProps,Vo(e,t,r,i=t.elementType===r?i:Ji(r,i),n);case 1:return r=t.type,i=t.pendingProps,Uo(e,t,r,i=t.elementType===r?i:Ji(r,i),n);case 3:if(zo(t),r=t.updateQueue,null===e||null===r)throw Error(o(282));if(r=t.pendingProps,i=null!==(i=t.memoizedState)?i.element:null,ca(e,t),pa(t,r,null,n),(r=t.memoizedState.element)===i)Po(),t=Jo(e,t,n);else{if((i=t.stateNode.hydrate)&&(To=Tn(t.stateNode.containerInfo.firstChild),Eo=t,i=So=!0),i)for(n=Aa(t,null,r,n),t.child=n;n;)n.effectTag=-3&n.effectTag|1024,n=n.sibling;else Ro(e,t,r,n),Po();t=t.child}return t;case 5:return Ma(t),null===e&&Ao(t),r=t.type,i=t.pendingProps,a=null!==e?e.memoizedProps:null,u=i.children,_n(r,i)?u=null:null!==a&&_n(r,a)&&(t.effectTag|=16),qo(e,t),4&t.mode&&1!==n&&i.hidden?(t.expirationTime=t.childExpirationTime=1,t=null):(Ro(e,t,u,n),t=t.child),t;case 6:return null===e&&Ao(t),null;case 13:return Qo(e,t,n);case 4:return Ra(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ca(t,null,r,n):Ro(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,jo(e,t,r,i=t.elementType===r?i:Ji(r,i),n);case 7:return Ro(e,t,t.pendingProps,n),t.child;case 8:case 12:return Ro(e,t,t.pendingProps.children,n),t.child;case 10:e:{r=t.type._context,i=t.pendingProps,u=t.memoizedProps,a=i.value;var s=t.type._context;if(di(Zi,s._currentValue),s._currentValue=a,null!==u)if(s=u.value,0===(a=Ur(s,a)?0:0|("function"===typeof r._calculateChangedBits?r._calculateChangedBits(s,a):1073741823))){if(u.children===i.children&&!yi.current){t=Jo(e,t,n);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){var l=s.dependencies;if(null!==l){u=s.child;for(var c=l.firstContext;null!==c;){if(c.context===r&&0!==(c.observedBits&a)){1===s.tag&&((c=fa(n,null)).tag=2,ha(s,c)),s.expirationTime<n&&(s.expirationTime=n),null!==(c=s.alternate)&&c.expirationTime<n&&(c.expirationTime=n),aa(s.return,n),l.expirationTime<n&&(l.expirationTime=n);break}c=c.next}}else u=10===s.tag&&s.type===t.type?null:s.child;if(null!==u)u.return=s;else for(u=s;null!==u;){if(u===t){u=null;break}if(null!==(s=u.sibling)){s.return=u.return,u=s;break}u=u.return}s=u}Ro(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=(a=t.pendingProps).children,oa(t,n),r=r(i=ua(i,a.unstable_observedBits)),t.effectTag|=1,Ro(e,t,r,n),t.child;case 14:return a=Ji(i=t.type,t.pendingProps),Mo(e,t,i,a=Ji(i.type,a),r,n);case 15:return Fo(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Ji(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),t.tag=1,bi(r)?(e=!0,xi(t)):e=!1,oa(t,n),ka(t,r,i),xa(t,r,i,n),Bo(null,t,r,!0,e,n);case 19:return Xo(e,t,n)}throw Error(o(156,t.tag))};var As=null,Ds=null;function Ns(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function Ps(e,t,n,r){return new Ns(e,t,n,r)}function Os(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ls(e,t){var n=e.alternate;return null===n?((n=Ps(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.effectTag=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childExpirationTime=e.childExpirationTime,n.expirationTime=e.expirationTime,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{expirationTime:t.expirationTime,firstContext:t.firstContext,responders:t.responders},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Rs(e,t,n,r,i,a){var u=2;if(r=e,"function"===typeof e)Os(e)&&(u=1);else if("string"===typeof e)u=5;else e:switch(e){case ne:return js(n.children,i,a,t);case ue:u=8,i|=7;break;case re:u=8,i|=1;break;case ie:return(e=Ps(12,n,t,8|i)).elementType=ie,e.type=ie,e.expirationTime=a,e;case le:return(e=Ps(13,n,t,i)).type=le,e.elementType=le,e.expirationTime=a,e;case ce:return(e=Ps(19,n,t,i)).elementType=ce,e.expirationTime=a,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case ae:u=10;break e;case oe:u=9;break e;case se:u=11;break e;case fe:u=14;break e;case he:u=16,r=null;break e;case de:u=22;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Ps(u,n,t,i)).elementType=e,t.type=r,t.expirationTime=a,t}function js(e,t,n,r){return(e=Ps(7,e,r,t)).expirationTime=n,e}function Ms(e,t,n){return(e=Ps(6,e,null,t)).expirationTime=n,e}function Fs(e,t,n){return(t=Ps(4,null!==e.children?e.children:[],e.key,t)).expirationTime=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function qs(e,t,n){this.tag=t,this.current=null,this.containerInfo=e,this.pingCache=this.pendingChildren=null,this.finishedExpirationTime=0,this.finishedWork=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=90,this.lastExpiredTime=this.lastPingedTime=this.nextKnownPendingLevel=this.lastSuspendedTime=this.firstSuspendedTime=this.firstPendingTime=0}function Vs(e,t){var n=e.firstSuspendedTime;return e=e.lastSuspendedTime,0!==n&&n>=t&&e<=t}function Us(e,t){var n=e.firstSuspendedTime,r=e.lastSuspendedTime;n<t&&(e.firstSuspendedTime=t),(r>t||0===n)&&(e.lastSuspendedTime=t),t<=e.lastPingedTime&&(e.lastPingedTime=0),t<=e.lastExpiredTime&&(e.lastExpiredTime=0)}function Bs(e,t){t>e.firstPendingTime&&(e.firstPendingTime=t);var n=e.firstSuspendedTime;0!==n&&(t>=n?e.firstSuspendedTime=e.lastSuspendedTime=e.nextKnownPendingLevel=0:t>=e.lastSuspendedTime&&(e.lastSuspendedTime=t+1),t>e.nextKnownPendingLevel&&(e.nextKnownPendingLevel=t))}function zs(e,t){var n=e.lastExpiredTime;(0===n||n>t)&&(e.lastExpiredTime=t)}function Hs(e,t,n,r){var i=t.current,a=es(),u=ya.suspense;a=ts(a,i,u);e:if(n){t:{if(et(n=n._reactInternalFiber)!==n||1!==n.tag)throw Error(o(170));var s=n;do{switch(s.tag){case 3:s=s.stateNode.context;break t;case 1:if(bi(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break t}}s=s.return}while(null!==s);throw Error(o(171))}if(1===n.tag){var l=n.type;if(bi(l)){n=_i(n,l,s);break e}}n=s}else n=pi;return null===t.context?t.context=n:t.pendingContext=n,(t=fa(a,u)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),ha(i,t),ns(i,a),a}function Ks(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Gs(e,t){null!==(e=e.memoizedState)&&null!==e.dehydrated&&e.retryTime<t&&(e.retryTime=t)}function Ws(e,t){Gs(e,t),(e=e.alternate)&&Gs(e,t)}function Qs(e,t,n){var r=new qs(e,t,n=null!=n&&!0===n.hydrate),i=Ps(3,null,null,2===t?7:1===t?3:0);r.current=i,i.stateNode=r,la(i),e[Dn]=r.current,n&&0!==t&&function(e,t){var n=Ze(t);It.forEach((function(e){vt(e,t,n)})),Ct.forEach((function(e){vt(e,t,n)}))}(0,9===e.nodeType?e:e.ownerDocument),this._internalRoot=r}function $s(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Ys(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a._internalRoot;if("function"===typeof i){var u=i;i=function(){var e=Ks(o);u.call(e)}}Hs(t,o,e,i)}else{if(a=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new Qs(e,0,t?{hydrate:!0}:void 0)}(n,r),o=a._internalRoot,"function"===typeof i){var s=i;i=function(){var e=Ks(o);s.call(e)}}ls((function(){Hs(t,o,e,i)}))}return Ks(o)}function Xs(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:te,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function Js(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!$s(t))throw Error(o(200));return Xs(e,t,null,n)}Qs.prototype.render=function(e){Hs(e,this._internalRoot,null,null)},Qs.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;Hs(null,e,null,(function(){t[Dn]=null}))},yt=function(e){if(13===e.tag){var t=Xi(es(),150,100);ns(e,t),Ws(e,t)}},mt=function(e){13===e.tag&&(ns(e,3),Ws(e,3))},gt=function(e){if(13===e.tag){var t=es();ns(e,t=ts(t,e,null)),Ws(e,t)}},C=function(e,t,n){switch(t){case"input":if(Te(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=Ln(r);if(!i)throw Error(o(90));ke(r),Te(r,i)}}}break;case"textarea":Pe(e,n);break;case"select":null!=(t=n.value)&&Ae(e,!!n.multiple,t,!1)}},L=ss,R=function(e,t,n,r,i){var a=Nu;Nu|=4;try{return Gi(98,e.bind(null,t,n,r,i))}finally{0===(Nu=a)&&$i()}},j=function(){0===(49&Nu)&&(function(){if(null!==Yu){var e=Yu;Yu=null,e.forEach((function(e,t){zs(t,e),as(t)})),$i()}}(),xs())},M=function(e,t){var n=Nu;Nu|=2;try{return e(t)}finally{0===(Nu=n)&&$i()}};var Zs={Events:[Pn,On,Ln,S,x,Un,function(e){at(e,Vn)},P,O,Jt,st,xs,{current:!1}]};!function(e){var t=e.findFiberByHostInstance;(function(e){if("undefined"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)return!0;try{var n=t.inject(e);As=function(e){try{t.onCommitFiberRoot(n,e,void 0,64===(64&e.current.effectTag))}catch(r){}},Ds=function(e){try{t.onCommitFiberUnmount(n,e)}catch(r){}}}catch(r){}})(i({},e,{overrideHookState:null,overrideProps:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Y.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=rt(e))?null:e.stateNode},findFiberByHostInstance:function(e){return t?t(e):null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null}))}({findFiberByHostInstance:Nn,bundleType:0,version:"16.14.0",rendererPackageName:"react-dom"}),t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Zs,t.createPortal=Js,t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternalFiber;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw Error(o(268,Object.keys(e)))}return e=null===(e=rt(t))?null:e.stateNode},t.flushSync=function(e,t){if(0!==(48&Nu))throw Error(o(187));var n=Nu;Nu|=1;try{return Gi(99,e.bind(null,t))}finally{Nu=n,$i()}},t.hydrate=function(e,t,n){if(!$s(t))throw Error(o(200));return Ys(null,e,t,!0,n)},t.render=function(e,t,n){if(!$s(t))throw Error(o(200));return Ys(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!$s(e))throw Error(o(40));return!!e._reactRootContainer&&(ls((function(){Ys(null,null,e,!1,(function(){e._reactRootContainer=null,e[Dn]=null}))})),!0)},t.unstable_batchedUpdates=ss,t.unstable_createPortal=function(e,t){return Js(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!$s(n))throw Error(o(200));if(null==e||void 0===e._reactInternalFiber)throw Error(o(38));return Ys(e,t,n,!1,r)},t.version="16.14.0"},164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},374:function(e,t,n){"use strict";var r=n(791),i=60103;if(t.Fragment=60107,"function"===typeof Symbol&&Symbol.for){var a=Symbol.for;i=a("react.element"),t.Fragment=a("react.fragment")}var o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u=Object.prototype.hasOwnProperty,s={key:!0,ref:!0,__self:!0,__source:!0};function l(e,t,n){var r,a={},l=null,c=null;for(r in void 0!==n&&(l=""+n),void 0!==t.key&&(l=""+t.key),void 0!==t.ref&&(c=t.ref),t)u.call(t,r)&&!s.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:l,ref:c,props:a,_owner:o.current}}t.jsx=l,t.jsxs=l},117:function(e,t,n){"use strict";var r=n(725),i="function"===typeof Symbol&&Symbol.for,a=i?Symbol.for("react.element"):60103,o=i?Symbol.for("react.portal"):60106,u=i?Symbol.for("react.fragment"):60107,s=i?Symbol.for("react.strict_mode"):60108,l=i?Symbol.for("react.profiler"):60114,c=i?Symbol.for("react.provider"):60109,f=i?Symbol.for("react.context"):60110,h=i?Symbol.for("react.forward_ref"):60112,d=i?Symbol.for("react.suspense"):60113,p=i?Symbol.for("react.memo"):60115,v=i?Symbol.for("react.lazy"):60116,y="function"===typeof Symbol&&Symbol.iterator;function m(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b={};function w(e,t,n){this.props=e,this.context=t,this.refs=b,this.updater=n||g}function k(){}function _(e,t,n){this.props=e,this.context=t,this.refs=b,this.updater=n||g}w.prototype.isReactComponent={},w.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error(m(85));this.updater.enqueueSetState(this,e,t,"setState")},w.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},k.prototype=w.prototype;var x=_.prototype=new k;x.constructor=_,r(x,w.prototype),x.isPureReactComponent=!0;var E={current:null},T=Object.prototype.hasOwnProperty,S={key:!0,ref:!0,__self:!0,__source:!0};function I(e,t,n){var r,i={},o=null,u=null;if(null!=t)for(r in void 0!==t.ref&&(u=t.ref),void 0!==t.key&&(o=""+t.key),t)T.call(t,r)&&!S.hasOwnProperty(r)&&(i[r]=t[r]);var s=arguments.length-2;if(1===s)i.children=n;else if(1<s){for(var l=Array(s),c=0;c<s;c++)l[c]=arguments[c+2];i.children=l}if(e&&e.defaultProps)for(r in s=e.defaultProps)void 0===i[r]&&(i[r]=s[r]);return{$$typeof:a,type:e,key:o,ref:u,props:i,_owner:E.current}}function C(e){return"object"===typeof e&&null!==e&&e.$$typeof===a}var A=/\/+/g,D=[];function N(e,t,n,r){if(D.length){var i=D.pop();return i.result=e,i.keyPrefix=t,i.func=n,i.context=r,i.count=0,i}return{result:e,keyPrefix:t,func:n,context:r,count:0}}function P(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,10>D.length&&D.push(e)}function O(e,t,n,r){var i=typeof e;"undefined"!==i&&"boolean"!==i||(e=null);var u=!1;if(null===e)u=!0;else switch(i){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case a:case o:u=!0}}if(u)return n(r,e,""===t?"."+R(e,0):t),1;if(u=0,t=""===t?".":t+":",Array.isArray(e))for(var s=0;s<e.length;s++){var l=t+R(i=e[s],s);u+=O(i,l,n,r)}else if(null===e||"object"!==typeof e?l=null:l="function"===typeof(l=y&&e[y]||e["@@iterator"])?l:null,"function"===typeof l)for(e=l.call(e),s=0;!(i=e.next()).done;)u+=O(i=i.value,l=t+R(i,s++),n,r);else if("object"===i)throw n=""+e,Error(m(31,"[object Object]"===n?"object with keys {"+Object.keys(e).join(", ")+"}":n,""));return u}function L(e,t,n){return null==e?0:O(e,"",t,n)}function R(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,(function(e){return t[e]}))}(e.key):t.toString(36)}function j(e,t){e.func.call(e.context,t,e.count++)}function M(e,t,n){var r=e.result,i=e.keyPrefix;e=e.func.call(e.context,t,e.count++),Array.isArray(e)?F(e,r,n,(function(e){return e})):null!=e&&(C(e)&&(e=function(e,t){return{$$typeof:a,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(e,i+(!e.key||t&&t.key===e.key?"":(""+e.key).replace(A,"$&/")+"/")+n)),r.push(e))}function F(e,t,n,r,i){var a="";null!=n&&(a=(""+n).replace(A,"$&/")+"/"),L(e,M,t=N(t,a,r,i)),P(t)}var q={current:null};function V(){var e=q.current;if(null===e)throw Error(m(321));return e}var U={ReactCurrentDispatcher:q,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:E,IsSomeRendererActing:{current:!1},assign:r};t.Children={map:function(e,t,n){if(null==e)return e;var r=[];return F(e,r,null,t,n),r},forEach:function(e,t,n){if(null==e)return e;L(e,j,t=N(null,null,t,n)),P(t)},count:function(e){return L(e,(function(){return null}),null)},toArray:function(e){var t=[];return F(e,t,null,(function(e){return e})),t},only:function(e){if(!C(e))throw Error(m(143));return e}},t.Component=w,t.Fragment=u,t.Profiler=l,t.PureComponent=_,t.StrictMode=s,t.Suspense=d,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=U,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error(m(267,e));var i=r({},e.props),o=e.key,u=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(u=t.ref,s=E.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)T.call(t,c)&&!S.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=n;else if(1<c){l=Array(c);for(var f=0;f<c;f++)l[f]=arguments[f+2];i.children=l}return{$$typeof:a,type:e.type,key:o,ref:u,props:i,_owner:s}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:f,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:c,_context:e},e.Consumer=e},t.createElement=I,t.createFactory=function(e){var t=I.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:h,render:e}},t.isValidElement=C,t.lazy=function(e){return{$$typeof:v,_ctor:e,_status:-1,_result:null}},t.memo=function(e,t){return{$$typeof:p,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return V().useCallback(e,t)},t.useContext=function(e,t){return V().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return V().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return V().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return V().useLayoutEffect(e,t)},t.useMemo=function(e,t){return V().useMemo(e,t)},t.useReducer=function(e,t,n){return V().useReducer(e,t,n)},t.useRef=function(e){return V().useRef(e)},t.useState=function(e){return V().useState(e)},t.version="16.14.0"},791:function(e,t,n){"use strict";e.exports=n(117)},184:function(e,t,n){"use strict";e.exports=n(374)},813:function(e,t){"use strict";var n,r,i,a,o;if("undefined"===typeof window||"function"!==typeof MessageChannel){var u=null,s=null,l=function e(){if(null!==u)try{var n=t.unstable_now();u(!0,n),u=null}catch(r){throw setTimeout(e,0),r}},c=Date.now();t.unstable_now=function(){return Date.now()-c},n=function(e){null!==u?setTimeout(n,0,e):(u=e,setTimeout(l,0))},r=function(e,t){s=setTimeout(e,t)},i=function(){clearTimeout(s)},a=function(){return!1},o=t.unstable_forceFrameRate=function(){}}else{var f=window.performance,h=window.Date,d=window.setTimeout,p=window.clearTimeout;if("undefined"!==typeof console){var v=window.cancelAnimationFrame;"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),"function"!==typeof v&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills")}if("object"===typeof f&&"function"===typeof f.now)t.unstable_now=function(){return f.now()};else{var y=h.now();t.unstable_now=function(){return h.now()-y}}var m=!1,g=null,b=-1,w=5,k=0;a=function(){return t.unstable_now()>=k},o=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing framerates higher than 125 fps is not unsupported"):w=0<e?Math.floor(1e3/e):5};var _=new MessageChannel,x=_.port2;_.port1.onmessage=function(){if(null!==g){var e=t.unstable_now();k=e+w;try{g(!0,e)?x.postMessage(null):(m=!1,g=null)}catch(n){throw x.postMessage(null),n}}else m=!1},n=function(e){g=e,m||(m=!0,x.postMessage(null))},r=function(e,n){b=d((function(){e(t.unstable_now())}),n)},i=function(){p(b),b=-1}}function E(e,t){var n=e.length;e.push(t);e:for(;;){var r=n-1>>>1,i=e[r];if(!(void 0!==i&&0<I(i,t)))break e;e[r]=t,e[n]=i,n=r}}function T(e){return void 0===(e=e[0])?null:e}function S(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length;r<i;){var a=2*(r+1)-1,o=e[a],u=a+1,s=e[u];if(void 0!==o&&0>I(o,n))void 0!==s&&0>I(s,o)?(e[r]=s,e[u]=n,r=u):(e[r]=o,e[a]=n,r=a);else{if(!(void 0!==s&&0>I(s,n)))break e;e[r]=s,e[u]=n,r=u}}}return t}return null}function I(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var C=[],A=[],D=1,N=null,P=3,O=!1,L=!1,R=!1;function j(e){for(var t=T(A);null!==t;){if(null===t.callback)S(A);else{if(!(t.startTime<=e))break;S(A),t.sortIndex=t.expirationTime,E(C,t)}t=T(A)}}function M(e){if(R=!1,j(e),!L)if(null!==T(C))L=!0,n(F);else{var t=T(A);null!==t&&r(M,t.startTime-e)}}function F(e,n){L=!1,R&&(R=!1,i()),O=!0;var o=P;try{for(j(n),N=T(C);null!==N&&(!(N.expirationTime>n)||e&&!a());){var u=N.callback;if(null!==u){N.callback=null,P=N.priorityLevel;var s=u(N.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?N.callback=s:N===T(C)&&S(C),j(n)}else S(C);N=T(C)}if(null!==N)var l=!0;else{var c=T(A);null!==c&&r(M,c.startTime-n),l=!1}return l}finally{N=null,P=o,O=!1}}function q(e){switch(e){case 1:return-1;case 2:return 250;case 5:return 1073741823;case 4:return 1e4;default:return 5e3}}var V=o;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){L||O||(L=!0,n(F))},t.unstable_getCurrentPriorityLevel=function(){return P},t.unstable_getFirstCallbackNode=function(){return T(C)},t.unstable_next=function(e){switch(P){case 1:case 2:case 3:var t=3;break;default:t=P}var n=P;P=t;try{return e()}finally{P=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=V,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=P;P=e;try{return t()}finally{P=n}},t.unstable_scheduleCallback=function(e,a,o){var u=t.unstable_now();if("object"===typeof o&&null!==o){var s=o.delay;s="number"===typeof s&&0<s?u+s:u,o="number"===typeof o.timeout?o.timeout:q(e)}else o=q(e),s=u;return e={id:D++,callback:a,priorityLevel:e,startTime:s,expirationTime:o=s+o,sortIndex:-1},s>u?(e.sortIndex=s,E(A,e),null===T(C)&&e===T(A)&&(R?i():R=!0,r(M,s-u))):(e.sortIndex=o,E(C,e),L||O||(L=!0,n(F))),e},t.unstable_shouldYield=function(){var e=t.unstable_now();j(e);var n=T(C);return n!==N&&null!==N&&null!==n&&null!==n.callback&&n.startTime<=e&&n.expirationTime<N.expirationTime||a()},t.unstable_wrapCallback=function(e){var t=P;return function(){var n=P;P=t;try{return e.apply(this,arguments)}finally{P=n}}}},296:function(e,t,n){"use strict";e.exports=n(813)},391:function(e){"use strict";var t=function(){};e.exports=t},837:function(e,t,n){var r={"./blue_payout_correct_10.png":488,"./blue_payout_correct_100.png":503};function i(e){var t=a(e);return n(t)}function a(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}i.keys=function(){return Object.keys(r)},i.resolve=a,e.exports=i,i.id=837},488:function(e,t,n){"use strict";e.exports=n.p+"static/media/blue_payout_correct_10.6f9377016c908dbf7cd6.png"},503:function(e,t,n){"use strict";e.exports=n.p+"static/media/blue_payout_correct_100.3689d598a979c2d047cf.png"},632:function(e){"use strict";e.exports=JSON.parse('{"task":{"name":"Honeycomb Task","end":"This experiment has ended.","recording_end":"Your recording has ended."},"prompt":{"continue":{"press":"Press any key to continue.","button":"Continue"},"focus":"Make sure the photodiode is covering the spot and any external recordings have begun before continuing.","fullscreen":"Press \'cmd + ctrl + F\' to toggle Fullscreen.","zoom":"Zoom in to enlarge the screen.","setting_up":"Setting up task..."},"welcome":{"large_window":"Please make this window as large as possible.","message":"Instructions"},"userid":{"set":"Please enter participant ID."},"eventMarker":{"found":"Note: event marker found.","not_found":"Note: no event marker found."},"countdown":{"message1":"Countdown for the first block","message2":"Countdown for the second block"},"instructions":{"adjust_volume":"Set tablet volume to 50/100.","camera":"Make sure the camera is pointing to you and your face is within the camera area.","check_event_marker":"Make sure the event marker is connected and then continue."},"quiz":{"ask":{"age":"What\'s your age?","demographics_age":"<p>How old are you?</p>","demographics_ethnicity":"<p>What is your ethnicity?</p>","demographics_race":"<p>What is your race?</p>","demographics_english":"<p>Are you fluent in English?</p>","demographics_gender":"<p>What is your gender?</p>","diagnoses":"<p>Have you ever been diagnosed with Parkinson\'s disease, Schizophrenia, Obsessive-Compulsive Disorder, or Depression?</p>"},"prompt":{"ius":{"preamble":"This questionnaire is designed to measure intolerance of uncertainty. <br>Please answer the following questions as honestly as you can. <br>There are no right or wrong answers, and there are no trick questions.","upset":"1. Unforeseen events upset me greatly.","frustration":"2. It frustrates me not having all the information I need.","full_life":"3. Uncertainty keeps me from living a full life.","surprise_avoid":"4. One should always look ahead so as to avoid surprises.","unforeseen_spoil":"5. A small unforeseen event can spoil everything, even with the best of planning.","uncertainty_paralysis":"6. When it\'s time to act, uncertainty paralyzes me.","uncertainty_malfunction":"7. When I am uncertain I can\'t function very well.","future":"8. I always want to know what the future has in store of me.","surprise_intolerance":"9. I can\'t stand being taken by surprise","doubt_paralysis":"10. The smallest doubt can stop me from acting.","organize":"11. I should be able to organize everything in advance.","escape":"12. I must get away from all uncertain situations."},"preamble":{"demo_1":"<h1>Demographics (1/3)</h1>","demo_2":"<h1>Demographics (2/3)</h1>","demo_3":"<h1>Demographics (3/3)</h1>","survey_1":"<h1>Survey (1/1)</h1>"}},"answer":{"age":"Answer 12 no matter what.","abstain":"Prefer not to answer.","ius":{"not":"1 - Not at all characteristic of me","little":"2 - A little characteristic of me","somewhat":"3 - Somewhat characteristic of me","very":"4 - Very characteristic of me","entirely":"5 - Entirely characteristic of me","abstain":"Prefer not to answer"},"debriefing":{"confirm_completion":"Confirm Completion"},"demographics_ethnicity":{"hispanic_latino":"Hispanic or Latino","no_hispanic_latino":"NOT Hispanic or Latino"},"demographics_race":{"asian":"Asian","african_american":"African-American","caucasian":"Caucasian","native_american_alaskan":"Native American/Alaskan","native_hawaiian_pacific_islander":"Native Hawaiian or Pacific Islander","other":"Other"},"demographics_binary":{"yes":"YES","no":"NO"},"demographics_gender":{"female":"Female","male":"Male","other":"Other","abstain":"Prefer to not say"},"demographics_diagnoses":{"no":"NO","parkinsons":"Parkinson\'s Disease","schizophrenia":"Schizophrenia","ocd":"Obsessive Compulsive Disorder","depression":"Depression"}},"direction":{"slider":{"right":"Move the slider to the right.","left":"Move the slider to the left."}}}}')},817:function(e){"use strict";e.exports=JSON.parse('{"welcome":{"message":"Welcome to the NEURO experiment."},"userid":{"set":"Setting up user ID."}}')}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.loaded=!0,a.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e},n.p="./",function(){"use strict";var e={};n.r(e),n.d(e,{FirebaseError:function(){return br},SDK_VERSION:function(){return xi},_DEFAULT_ENTRY_NAME:function(){return ci},_addComponent:function(){return pi},_addOrOverwriteComponent:function(){return vi},_apps:function(){return hi},_clearComponents:function(){return bi},_components:function(){return di},_getProvider:function(){return mi},_registerComponent:function(){return yi},_removeServiceInstance:function(){return gi},deleteApp:function(){return Ii},getApp:function(){return Ti},getApps:function(){return Si},initializeApp:function(){return Ei},onLog:function(){return Di},registerVersion:function(){return Ai},setLogLevel:function(){return Ni}});var t=n(791),r=n(164);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function a(){a=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",u=r.asyncIterator||"@@asyncIterator",s=r.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(C){l=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var i=t&&t.prototype instanceof d?t:d,a=Object.create(i.prototype),o=new T(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return I()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var u=_(o,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=f(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===h)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}(e,n,o),a}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(C){return{type:"throw",arg:C}}}e.wrap=c;var h={};function d(){}function p(){}function v(){}var y={};l(y,o,(function(){return this}));var m=Object.getPrototypeOf,g=m&&m(m(S([])));g&&g!==t&&n.call(g,o)&&(y=g);var b=v.prototype=d.prototype=Object.create(y);function w(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function r(a,o,u,s){var l=f(e[a],e,o);if("throw"!==l.type){var c=l.arg,h=c.value;return h&&"object"==i(h)&&n.call(h,"__await")?t.resolve(h.__await).then((function(e){r("next",e,u,s)}),(function(e){r("throw",e,u,s)})):t.resolve(h).then((function(e){c.value=e,u(c)}),(function(e){return r("throw",e,u,s)}))}s(l.arg)}var a;this._invoke=function(e,n){function i(){return new t((function(t,i){r(e,n,t,i)}))}return a=a?a.then(i,i):i()}}function _(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,_(e,t),"throw"===t.method))return h;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var r=f(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,h;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,h):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,h)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function S(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:I}}function I(){return{value:void 0,done:!0}}return p.prototype=v,l(b,"constructor",v),l(v,"constructor",p),p.displayName=l(v,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,l(e,s,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},w(k.prototype),l(k.prototype,u,(function(){return this})),e.AsyncIterator=k,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new k(c(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},w(b),l(b,s,"Generator"),l(b,o,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=S,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,h):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;E(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:S(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),h}},e}function o(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(l){return void n(l)}u.done?t(s):Promise.resolve(s).then(r,i)}function u(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function u(e){o(a,r,i,u,s,"next",e)}function s(e){o(a,r,i,u,s,"throw",e)}u(void 0)}))}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function l(e,t){if(e){if("string"===typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,u=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(s){u=!0,i=s}finally{try{o||null==n.return||n.return()}finally{if(u)throw i}}return a}}(e,t)||l(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(){return f=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f.apply(this,arguments)}function h(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}var d=n(694),p=n.n(d),v=(n(573),n(7)),y=n.n(v),m=["as","className","type","tooltip"],g={type:y().string,tooltip:y().bool,as:y().elementType},b=t.forwardRef((function(e,n){var r=e.as,i=void 0===r?"div":r,a=e.className,o=e.type,u=void 0===o?"valid":o,s=e.tooltip,l=void 0!==s&&s,c=h(e,m);return t.createElement(i,f({},c,{ref:n,className:p()(a,u+"-"+(l?"tooltip":"feedback"))}))}));b.displayName="Feedback",b.propTypes=g;var w=b,k=t.createContext({controlId:void 0}),x=t.createContext({});x.Consumer,x.Provider;function E(e,n){var r=(0,t.useContext)(x);return e||r[n]||n}var T=["id","bsPrefix","bsCustomPrefix","className","type","isValid","isInvalid","isStatic","as"],S=t.forwardRef((function(e,n){var r=e.id,i=e.bsPrefix,a=e.bsCustomPrefix,o=e.className,u=e.type,s=void 0===u?"checkbox":u,l=e.isValid,c=void 0!==l&&l,d=e.isInvalid,v=void 0!==d&&d,y=e.isStatic,m=e.as,g=void 0===m?"input":m,b=h(e,T),w=(0,t.useContext)(k),_=w.controlId,x=w.custom?[a,"custom-control-input"]:[i,"form-check-input"];return i=E(x[0],x[1]),t.createElement(g,f({},b,{ref:n,type:s,id:r||_,className:p()(o,i,c&&"is-valid",v&&"is-invalid",y&&"position-static")}))}));S.displayName="FormCheckInput";var I=S,C=["bsPrefix","bsCustomPrefix","className","htmlFor"],A=t.forwardRef((function(e,n){var r=e.bsPrefix,i=e.bsCustomPrefix,a=e.className,o=e.htmlFor,u=h(e,C),s=(0,t.useContext)(k),l=s.controlId,c=s.custom?[i,"custom-control-label"]:[r,"form-check-label"];return r=E(c[0],c[1]),t.createElement("label",f({},u,{ref:n,htmlFor:o||l,className:p()(a,r)}))}));A.displayName="FormCheckLabel";var D=A,N=["id","bsPrefix","bsCustomPrefix","inline","disabled","isValid","isInvalid","feedbackTooltip","feedback","className","style","title","type","label","children","custom","as"],P=t.forwardRef((function(e,n){var r=e.id,i=e.bsPrefix,a=e.bsCustomPrefix,o=e.inline,u=void 0!==o&&o,s=e.disabled,l=void 0!==s&&s,c=e.isValid,d=void 0!==c&&c,v=e.isInvalid,y=void 0!==v&&v,m=e.feedbackTooltip,g=void 0!==m&&m,b=e.feedback,_=e.className,x=e.style,T=e.title,S=void 0===T?"":T,C=e.type,A=void 0===C?"checkbox":C,P=e.label,O=e.children,L=e.custom,R=e.as,j=void 0===R?"input":R,M=h(e,N),F="switch"===A||L,q=F?[a,"custom-control"]:[i,"form-check"];i=E(q[0],q[1]);var V=(0,t.useContext)(k).controlId,U=(0,t.useMemo)((function(){return{controlId:r||V,custom:F}}),[V,F,r]),B=F||null!=P&&!1!==P&&!O,z=t.createElement(I,f({},M,{type:"switch"===A?"checkbox":A,ref:n,isValid:d,isInvalid:y,isStatic:!B,disabled:l,as:j}));return t.createElement(k.Provider,{value:U},t.createElement("div",{style:x,className:p()(_,i,F&&"custom-"+A,u&&i+"-inline")},O||t.createElement(t.Fragment,null,z,B&&t.createElement(D,{title:S},P),(d||y)&&t.createElement(w,{type:d?"valid":"invalid",tooltip:g},b))))}));P.displayName="FormCheck",P.Input=I,P.Label=D;var O=P,L=["id","bsPrefix","bsCustomPrefix","className","isValid","isInvalid","lang","as"],R=t.forwardRef((function(e,n){var r=e.id,i=e.bsPrefix,a=e.bsCustomPrefix,o=e.className,u=e.isValid,s=e.isInvalid,l=e.lang,c=e.as,d=void 0===c?"input":c,v=h(e,L),y=(0,t.useContext)(k),m=y.controlId,g=y.custom?[a,"custom-file-input"]:[i,"form-control-file"];return i=E(g[0],g[1]),t.createElement(d,f({},v,{ref:n,id:r||m,type:"file",lang:l,className:p()(o,i,u&&"is-valid",s&&"is-invalid")}))}));R.displayName="FormFileInput";var j=R,M=["bsPrefix","bsCustomPrefix","className","htmlFor"],F=t.forwardRef((function(e,n){var r=e.bsPrefix,i=e.bsCustomPrefix,a=e.className,o=e.htmlFor,u=h(e,M),s=(0,t.useContext)(k),l=s.controlId,c=s.custom?[i,"custom-file-label"]:[r,"form-file-label"];return r=E(c[0],c[1]),t.createElement("label",f({},u,{ref:n,htmlFor:o||l,className:p()(a,r),"data-browse":u["data-browse"]}))}));F.displayName="FormFileLabel";var q=F,V=["id","bsPrefix","bsCustomPrefix","disabled","isValid","isInvalid","feedbackTooltip","feedback","className","style","label","children","custom","lang","data-browse","as","inputAs"],U=t.forwardRef((function(e,n){var r=e.id,i=e.bsPrefix,a=e.bsCustomPrefix,o=e.disabled,u=void 0!==o&&o,s=e.isValid,l=void 0!==s&&s,c=e.isInvalid,d=void 0!==c&&c,v=e.feedbackTooltip,y=void 0!==v&&v,m=e.feedback,g=e.className,b=e.style,_=e.label,x=e.children,T=e.custom,S=e.lang,I=e["data-browse"],C=e.as,A=void 0===C?"div":C,D=e.inputAs,N=void 0===D?"input":D,P=h(e,V),O=T?[a,"custom"]:[i,"form-file"];i=E(O[0],O[1]);var L=(0,t.useContext)(k).controlId,R=(0,t.useMemo)((function(){return{controlId:r||L,custom:T}}),[L,T,r]),M=null!=_&&!1!==_&&!x,F=t.createElement(j,f({},P,{ref:n,isValid:l,isInvalid:d,disabled:u,as:N,lang:S}));return t.createElement(k.Provider,{value:R},t.createElement(A,{style:b,className:p()(g,i,T&&"custom-file")},x||t.createElement(t.Fragment,null,T?t.createElement(t.Fragment,null,F,M&&t.createElement(q,{"data-browse":I},_)):t.createElement(t.Fragment,null,M&&t.createElement(q,null,_),F),(l||d)&&t.createElement(w,{type:l?"valid":"invalid",tooltip:y},m))))}));U.displayName="FormFile",U.Input=j,U.Label=q;var B=U,z=(n(391),["bsPrefix","bsCustomPrefix","type","size","htmlSize","id","className","isValid","isInvalid","plaintext","readOnly","custom","as"]),H=t.forwardRef((function(e,n){var r,i,a=e.bsPrefix,o=e.bsCustomPrefix,u=e.type,s=e.size,l=e.htmlSize,c=e.id,d=e.className,v=e.isValid,y=void 0!==v&&v,m=e.isInvalid,g=void 0!==m&&m,b=e.plaintext,w=e.readOnly,_=e.custom,x=e.as,T=void 0===x?"input":x,S=h(e,z),I=(0,t.useContext)(k).controlId,C=_?[o,"custom"]:[a,"form-control"];if(a=E(C[0],C[1]),b)(i={})[a+"-plaintext"]=!0,r=i;else if("file"===u){var A;(A={})[a+"-file"]=!0,r=A}else if("range"===u){var D;(D={})[a+"-range"]=!0,r=D}else if("select"===T&&_){var N;(N={})[a+"-select"]=!0,N[a+"-select-"+s]=s,r=N}else{var P;(P={})[a]=!0,P[a+"-"+s]=s,r=P}return t.createElement(T,f({},S,{type:u,size:l,ref:n,readOnly:w,id:c||I,className:p()(d,r,y&&"is-valid",g&&"is-invalid")}))}));H.displayName="FormControl";var K=Object.assign(H,{Feedback:w}),G=["bsPrefix","className","children","controlId","as"],W=t.forwardRef((function(e,n){var r=e.bsPrefix,i=e.className,a=e.children,o=e.controlId,u=e.as,s=void 0===u?"div":u,l=h(e,G);r=E(r,"form-group");var c=(0,t.useMemo)((function(){return{controlId:o}}),[o]);return t.createElement(k.Provider,{value:c},t.createElement(s,f({},l,{ref:n,className:p()(i,r)}),a))}));W.displayName="FormGroup";var Q=W,$=["bsPrefix","className","as"],Y=["xl","lg","md","sm","xs"],X=t.forwardRef((function(e,n){var r=e.bsPrefix,i=e.className,a=e.as,o=void 0===a?"div":a,u=h(e,$),s=E(r,"col"),l=[],c=[];return Y.forEach((function(e){var t,n,r,i=u[e];if(delete u[e],"object"===typeof i&&null!=i){var a=i.span;t=void 0===a||a,n=i.offset,r=i.order}else t=i;var o="xs"!==e?"-"+e:"";t&&l.push(!0===t?""+s+o:""+s+o+"-"+t),null!=r&&c.push("order"+o+"-"+r),null!=n&&c.push("offset"+o+"-"+n)})),l.length||l.push(s),t.createElement(o,f({},u,{ref:n,className:p().apply(void 0,[i].concat(l,c))}))}));X.displayName="Col";var J=X,Z=["as","bsPrefix","column","srOnly","className","htmlFor"],ee=t.forwardRef((function(e,n){var r=e.as,i=void 0===r?"label":r,a=e.bsPrefix,o=e.column,u=e.srOnly,s=e.className,l=e.htmlFor,c=h(e,Z),d=(0,t.useContext)(k).controlId;a=E(a,"form-label");var v="col-form-label";"string"===typeof o&&(v=v+" "+v+"-"+o);var y=p()(s,a,u&&"sr-only",o&&v);return l=l||d,o?t.createElement(J,f({ref:n,as:"label",className:y,htmlFor:l},c)):t.createElement(i,f({ref:n,className:y,htmlFor:l},c))}));ee.displayName="FormLabel",ee.defaultProps={column:!1,srOnly:!1};var te=ee,ne=["bsPrefix","className","as","muted"],re=t.forwardRef((function(e,n){var r=e.bsPrefix,i=e.className,a=e.as,o=void 0===a?"small":a,u=e.muted,s=h(e,ne);return r=E(r,"form-text"),t.createElement(o,f({},s,{ref:n,className:p()(i,r,u&&"text-muted")}))}));re.displayName="FormText";var ie=re,ae=t.forwardRef((function(e,n){return t.createElement(O,f({},e,{ref:n,type:"switch"}))}));ae.displayName="Switch",ae.Input=O.Input,ae.Label=O.Label;var oe=ae,ue=/-(.)/g;var se=["className","bsPrefix","as"],le=function(e){return e[0].toUpperCase()+(t=e,t.replace(ue,(function(e,t){return t.toUpperCase()}))).slice(1);var t};var ce=["bsPrefix","inline","className","validated","as"],fe=function(e,n){var r=void 0===n?{}:n,i=r.displayName,a=void 0===i?le(e):i,o=r.Component,u=r.defaultProps,s=t.forwardRef((function(n,r){var i=n.className,a=n.bsPrefix,u=n.as,s=void 0===u?o||"div":u,l=h(n,se),c=E(a,e);return t.createElement(s,f({ref:r,className:p()(i,c)},l))}));return s.defaultProps=u,s.displayName=a,s}("form-row"),he=t.forwardRef((function(e,n){var r=e.bsPrefix,i=e.inline,a=e.className,o=e.validated,u=e.as,s=void 0===u?"form":u,l=h(e,ce);return r=E(r,"form"),t.createElement(s,f({},l,{ref:n,className:p()(a,o&&"was-validated",i&&r+"-inline")}))}));he.displayName="Form",he.defaultProps={inline:!1},he.Row=fe,he.Group=Q,he.Control=K,he.Check=O,he.File=B,he.Switch=oe,he.Label=te,he.Text=ie;var de=he;var pe=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((function(e){return null!=e})).reduce((function(e,t){if("function"!==typeof t)throw new Error("Invalid Argument Type, must only provide functions, undefined, or null.");return null===e?t:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];e.apply(this,r),t.apply(this,r)}}),null)},ve=["as","disabled","onKeyDown"];function ye(e){return!e||"#"===e.trim()}var me=t.forwardRef((function(e,n){var r=e.as,i=void 0===r?"a":r,a=e.disabled,o=e.onKeyDown,u=h(e,ve),s=function(e){var t=u.href,n=u.onClick;(a||ye(t))&&e.preventDefault(),a?e.stopPropagation():n&&n(e)};return ye(u.href)&&(u.role=u.role||"button",u.href=u.href||"#"),a&&(u.tabIndex=-1,u["aria-disabled"]=!0),t.createElement(i,f({ref:n},u,{onClick:s,onKeyDown:pe((function(e){" "===e.key&&(e.preventDefault(),s(e))}),o)}))}));me.displayName="SafeAnchor";var ge=me,be=["bsPrefix","variant","size","active","className","block","type","as"],we=t.forwardRef((function(e,n){var r=e.bsPrefix,i=e.variant,a=e.size,o=e.active,u=e.className,s=e.block,l=e.type,c=e.as,d=h(e,be),v=E(r,"btn"),y=p()(u,v,o&&"active",i&&v+"-"+i,s&&v+"-block",a&&v+"-"+a);if(d.href)return t.createElement(ge,f({},d,{as:c,ref:n,className:p()(y,d.disabled&&"disabled")}));n&&(d.ref=n),l?d.type=l:c||(d.type="button");var m=c||"button";return t.createElement(m,f({},d,{className:y}))}));we.displayName="Button",we.defaultProps={variant:"primary",active:!1,disabled:!1};var ke=we,_e=n(184);var xe=function(e){var n=e.onLogin,r=e.envParticipantId,i=e.envStudyId,a=e.validationFunction,o=c((0,t.useState)(""),2),u=o[0],s=o[1],l=c((0,t.useState)(""),2),f=l[0],h=l[1],d=c((0,t.useState)(!1),2),p=d[0],v=d[1];return(0,t.useEffect)((function(){s(r),h(i)}),[r,i]),(0,_e.jsx)("div",{className:"centered-h-v",children:(0,_e.jsxs)("div",{className:"width-50",children:[p?(0,_e.jsx)("div",{className:"alert alert-danger",role:"alert",children:"The participant ID and study ID do not match"}):null,(0,_e.jsxs)(de,{className:"centered-h-v",onSubmit:function(e){e.preventDefault(),a(u,f).then((function(e){e?n(e,f,u):v(!0)}))},children:[(0,_e.jsxs)(de.Group,{className:"width-100",size:"lg",controlId:"participantId",children:[(0,_e.jsx)(de.Label,{children:"Participant ID"}),(0,_e.jsx)(de.Control,{autoFocus:!0,type:"participantId",value:u,onChange:function(e){return s(e.target.value)}})]}),(0,_e.jsxs)(de.Group,{className:"width-100",size:"lg",controlId:"studyId",children:[(0,_e.jsx)(de.Label,{children:"Study ID"}),(0,_e.jsx)(de.Control,{type:"studyId",value:f,onChange:function(e){return h(e.target.value)}})]}),(0,_e.jsx)(ke,{style:{width:"100%"},block:!0,size:"lg",type:"submit",disabled:!(u.length>0&&f.length>0),children:"Log In"})]})]})})};function Ee(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Te(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||l(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Se(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ie(e,t,n){return t&&Se(e.prototype,t),n&&Se(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ce(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ae(e,t){return Ae=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ae(e,t)}function De(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ae(e,t)}function Ne(e){return Ne=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ne(e)}function Pe(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function Oe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Le(e,t){if(t&&("object"===i(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Oe(e)}function Re(e){var t=Pe();return function(){var n,r=Ne(e);if(t){var i=Ne(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Le(this,n)}}function je(e,t,n){return je=Pe()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&Ae(i,n.prototype),i},je.apply(null,arguments)}function Me(e){var t="function"===typeof Map?new Map:void 0;return Me=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return je(e,arguments,Ne(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Ae(n,e)},Me(e)}function Fe(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=l(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function qe(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{s(r.next(e))}catch(t){a(t)}}function u(e){try{s(r.throw(e))}catch(t){a(t)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,u)}s((r=r.apply(e,t||[])).next())}))}"undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self&&self;var Ve=function(e){var t=new Set;do{var n,r=Fe(Reflect.ownKeys(e));try{for(r.s();!(n=r.n()).done;){var i=n.value;t.add([e,i])}}catch(a){r.e(a)}finally{r.f()}}while((e=Reflect.getPrototypeOf(e))&&e!==Object.prototype);return t},Ue=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.include,i=n.exclude,a=function(e){var t=function(t){return"string"===typeof t?e===t:t.test(e)};return r?r.some(t):!i||!i.some(t)},o=Fe(Ve(e.constructor.prototype));try{for(o.s();!(t=o.n()).done;){var u=c(t.value,2),s=u[0],l=u[1];if("constructor"!==l&&a(l)){var f=Reflect.getOwnPropertyDescriptor(s,l);f&&"function"===typeof f.value&&(e[l]=e[l].bind(e))}}}catch(h){o.e(h)}finally{o.f()}return e},Be=function(e){De(n,e);var t=Re(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"The global `jsPsych` variable is no longer available in jsPsych v7.";return Ce(this,n),(e=t.call(this,"".concat(r," Please follow the migration guide at https://www.jspsych.org/7.0/support/migration-v7/ to update your experiment."))).name="MigrationError",e}return Ie(n)}(Me(Error));function ze(e){return Te(new Set(e))}function He(e){if(!e)return e;var t;if(Array.isArray(e)){t=[];var n,r=Fe(e);try{for(r.s();!(n=r.n()).done;){var i=n.value;t.push(He(i))}}catch(o){r.e(o)}finally{r.f()}return t}if("object"===typeof e&&null!==e){for(var a in t={},e)e.hasOwnProperty(a)&&(t[a]=He(e[a]));return t}return e}window.jsPsych={get init(){throw new Be("`jsPsych.init()` was replaced by `initJsPsych()` in jsPsych v7.")},get data(){throw new Be},get randomization(){throw new Be},get turk(){throw new Be},get pluginAPI(){throw new Be},get ALL_KEYS(){throw new Be('jsPsych.ALL_KEYS was replaced by the "ALL_KEYS" string in jsPsych v7.')},get NO_KEYS(){throw new Be('jsPsych.NO_KEYS was replaced by the "NO_KEYS" string in jsPsych v7.')}};var Ke=Object.freeze({__proto__:null,unique:ze,deepCopy:He}),Ge=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];Ce(this,e),this.values=t}return Ie(e,[{key:"sum",value:function(){var e,t=0,n=Fe(this.values);try{for(n.s();!(e=n.n()).done;){t+=e.value}}catch(r){n.e(r)}finally{n.f()}return t}},{key:"mean",value:function(){return this.sum()/this.count()}},{key:"median",value:function(){if(0!==this.values.length){var e=this.values.slice(0).sort((function(e,t){return e-t})),t=Math.floor(e.length/2);return e.length%2===0?(e[t]+e[t-1])/2:e[t]}}},{key:"min",value:function(){return Math.min.apply(null,this.values)}},{key:"max",value:function(){return Math.max.apply(null,this.values)}},{key:"count",value:function(){return this.values.length}},{key:"variance",value:function(){var e,t=this.mean(),n=0,r=Fe(this.values);try{for(r.s();!(e=r.n()).done;){var i=e.value;n+=Math.pow(i-t,2)}}catch(a){r.e(a)}finally{r.f()}return n/(this.values.length-1)}},{key:"sd",value:function(){var e=this.variance();return Math.sqrt(e)}},{key:"frequencies",value:function(){var e,t={},n=Fe(this.values);try{for(n.s();!(e=n.n()).done;){var r=e.value;"undefined"===typeof t[r]?t[r]=1:t[r]++}}catch(i){n.e(i)}finally{n.f()}return t}},{key:"all",value:function(e){var t,n=Fe(this.values);try{for(n.s();!(t=n.n()).done;){if(!e(t.value))return!1}}catch(r){n.e(r)}finally{n.f()}return!0}},{key:"subset",value:function(t){var n,r=[],i=Fe(this.values);try{for(i.s();!(n=i.n()).done;){var a=n.value;t(a)&&r.push(a)}}catch(o){i.e(o)}finally{i.f()}return new e(r)}}]),e}();var We,Qe=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];Ce(this,e),this.trials=t}return Ie(e,[{key:"push",value:function(e){return this.trials.push(e),this}},{key:"join",value:function(e){return this.trials=this.trials.concat(e.values()),this}},{key:"top",value:function(){return this.trials.length<=1?this:new e([this.trials[this.trials.length-1]])}},{key:"first",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;if(t<1)throw"You must query with a positive nonzero integer. Please use a\n               different value for n.";return 0===this.trials.length?new e:(t>this.trials.length&&(t=this.trials.length),new e(this.trials.slice(0,t)))}},{key:"last",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;if(t<1)throw"You must query with a positive nonzero integer. Please use a\n               different value for n.";return 0===this.trials.length?new e:(t>this.trials.length&&(t=this.trials.length),new e(this.trials.slice(this.trials.length-t,this.trials.length)))}},{key:"values",value:function(){return this.trials}},{key:"count",value:function(){return this.trials.length}},{key:"readOnly",value:function(){return new e(He(this.trials))}},{key:"addToAll",value:function(e){var t,n=Fe(this.trials);try{for(n.s();!(t=n.n()).done;){var r=t.value;Object.assign(r,e)}}catch(i){n.e(i)}finally{n.f()}return this}},{key:"addToLast",value:function(e){return 0!=this.trials.length&&Object.assign(this.trials[this.trials.length-1],e),this}},{key:"filter",value:function(t){var n;n=Array.isArray(t)?He(t):He([t]);var r,i=[],a=Fe(this.trials);try{for(a.s();!(r=a.n()).done;){var o,u=r.value,s=!1,l=Fe(n);try{for(l.s();!(o=l.n()).done;){for(var c=o.value,f=!0,h=0,d=Object.keys(c);h<d.length;h++){var p=d[h];"undefined"!==typeof u[p]&&u[p]===c[p]||(f=!1)}if(f){s=!0;break}}}catch(v){l.e(v)}finally{l.f()}s&&i.push(u)}}catch(v){a.e(v)}finally{a.f()}return new e(i)}},{key:"filterCustom",value:function(t){return new e(this.trials.filter(t))}},{key:"filterColumns",value:function(t){return new e(this.trials.map((function(e){return Object.fromEntries(t.filter((function(t){return t in e})).map((function(t){return[t,e[t]]})))})))}},{key:"select",value:function(e){var t,n=[],r=Fe(this.trials);try{for(r.s();!(t=r.n()).done;){var i=t.value;"undefined"!==typeof i[e]&&n.push(i[e])}}catch(a){r.e(a)}finally{r.f()}return new Ge(n)}},{key:"ignore",value:function(t){Array.isArray(t)||(t=[t]);var n,r=He(this.trials),i=Fe(r);try{for(i.s();!(n=i.n()).done;){var a,o=n.value,u=Fe(t);try{for(u.s();!(a=u.n()).done;){delete o[a.value]}}catch(s){u.e(s)}finally{u.f()}}}catch(s){i.e(s)}finally{i.f()}return new e(r)}},{key:"uniqueNames",value:function(){var e,t=[],n=Fe(this.trials);try{for(n.s();!(e=n.n()).done;)for(var r=e.value,i=0,a=Object.keys(r);i<a.length;i++){var o=a[i];t.includes(o)||t.push(o)}}catch(u){n.e(u)}finally{n.f()}return t}},{key:"csv",value:function(){return function(e){var t,n="object"!=typeof e?JSON.parse(e):e,r="",i="",a=[],o=Fe(n);try{for(o.s();!(t=o.n()).done;){var u=t.value;for(var s in u){var l=s+"";l='"'+l.replace(/"/g,'""')+'",',a.includes(s)||(a.push(s),r+=l)}}}catch(m){o.e(m)}finally{o.f()}i+=(r=r.slice(0,-1))+"\r\n";var c,f=Fe(n);try{for(f.s();!(c=f.n()).done;){var h=c.value;r="";var d,p=Fe(a);try{for(p.s();!(d=p.n()).done;){var v=d.value,y="undefined"===typeof h[v]?"":h[v];"object"==typeof y&&(y=JSON.stringify(y)),r+='"'+(y+"").replace(/"/g,'""')+'",'}}catch(m){p.e(m)}finally{p.f()}i+=(r=r.slice(0,-1))+"\r\n"}}catch(m){f.e(m)}finally{f.f()}return i}(this.trials)}},{key:"json",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e?JSON.stringify(this.trials,null,"\t"):JSON.stringify(this.trials)}},{key:"localSave",value:function(e,t){var n;if("json"===(e=e.toLowerCase()))n=this.json();else{if("csv"!==e)throw new Error('Invalid format specified for localSave. Must be "json" or "csv".');n=this.csv()}!function(e,t){var n=new Blob([e],{type:"text/plain"}),r="";r="undefined"!==typeof window.webkitURL?window.webkitURL.createObjectURL(n):window.URL.createObjectURL(n);var i=document.createElement("a");i.id="jspsych-download-as-text-link",i.style.display="none",i.download=t,i.href=r,i.click()}(n,t)}}]),e}(),$e=function(){function e(t){Ce(this,e),this.jsPsych=t,this.dataProperties={},this.reset()}return Ie(e,[{key:"reset",value:function(){this.allData=new Qe,this.interactionData=new Qe}},{key:"get",value:function(){return this.allData}},{key:"getInteractionData",value:function(){return this.interactionData}},{key:"write",value:function(e){var t=this.jsPsych.getProgress(),n=this.jsPsych.getCurrentTrial(),r={trial_type:n.type.info.name,trial_index:t.current_trial_global,time_elapsed:this.jsPsych.getTotalTime(),internal_node_id:this.jsPsych.getCurrentTimelineNodeID()};this.allData.push(Object.assign(Object.assign(Object.assign(Object.assign({},e),n.data),r),this.dataProperties))}},{key:"addProperties",value:function(e){this.allData.addToAll(e),this.dataProperties=Object.assign({},this.dataProperties,e)}},{key:"addDataToLastTrial",value:function(e){this.allData.addToLast(e)}},{key:"getDataByTimelineNode",value:function(e){return this.allData.filterCustom((function(t){return t.internal_node_id.slice(0,e.length)===e}))}},{key:"getLastTrialData",value:function(){return this.allData.top()}},{key:"getLastTimelineData",value:function(){var e=this.getLastTrialData().select("internal_node_id").values[0];if("undefined"===typeof e)return new Qe;var t=e.substr(0,e.lastIndexOf("-"));return this.getDataByTimelineNode(t)}},{key:"displayData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"json";"json"!=(e=e.toLowerCase())&&"csv"!=e&&(console.log("Invalid format declared for displayData function. Using json as default."),e="json");var t="json"===e?this.allData.json(!0):this.allData.csv(),n=this.jsPsych.getDisplayElement();n.innerHTML='<pre id="jspsych-data-display"></pre>',document.getElementById("jspsych-data-display").textContent=t}},{key:"urlVariables",value:function(){return"undefined"==typeof this.query_string&&(this.query_string=function(){for(var e=window.location.search.substr(1).split("&"),t={},n=0;n<e.length;++n){var r=e[n].split("=",2);1==r.length?t[r[0]]="":t[r[0]]=decodeURIComponent(r[1].replace(/\+/g," "))}return t}()),this.query_string}},{key:"getURLVariable",value:function(e){return this.urlVariables()[e]}},{key:"createInteractionListeners",value:function(){var e=this;window.addEventListener("blur",(function(){var t={event:"blur",trial:e.jsPsych.getProgress().current_trial_global,time:e.jsPsych.getTotalTime()};e.interactionData.push(t),e.jsPsych.getInitSettings().on_interaction_data_update(t)})),window.addEventListener("focus",(function(){var t={event:"focus",trial:e.jsPsych.getProgress().current_trial_global,time:e.jsPsych.getTotalTime()};e.interactionData.push(t),e.jsPsych.getInitSettings().on_interaction_data_update(t)}));var t=function(){var t={event:document.isFullScreen||document.webkitIsFullScreen||document.mozIsFullScreen||document.fullscreenElement?"fullscreenenter":"fullscreenexit",trial:e.jsPsych.getProgress().current_trial_global,time:e.jsPsych.getTotalTime()};e.interactionData.push(t),e.jsPsych.getInitSettings().on_interaction_data_update(t)};document.addEventListener("fullscreenchange",t),document.addEventListener("mozfullscreenchange",t),document.addEventListener("webkitfullscreenchange",t)}},{key:"_customInsert",value:function(e){this.allData=new Qe(e)}},{key:"_fullreset",value:function(){this.reset(),this.dataProperties={}}}]),e}(),Ye=function(){function e(){var t=this;Ce(this,e),this.hardwareConnected=!1,document.addEventListener("jspsych-activate",(function(e){t.hardwareConnected=!0}))}return Ie(e,[{key:"hardware",value:function(e){var t=new CustomEvent("jspsych",{detail:e});document.dispatchEvent(t)}}]),e}(),Xe=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;Ce(this,e),this.getRootElement=t,this.areResponsesCaseSensitive=n,this.minimumValidRt=r,this.listeners=new Set,this.heldKeys=new Set,this.areRootListenersRegistered=!1,Ue(this),this.registerRootListeners()}return Ie(e,[{key:"registerRootListeners",value:function(){if(!this.areRootListenersRegistered){var e=this.getRootElement();e&&(e.addEventListener("keydown",this.rootKeydownListener),e.addEventListener("keyup",this.rootKeyupListener),this.areRootListenersRegistered=!0)}}},{key:"rootKeydownListener",value:function(e){for(var t=0,n=Array.from(this.listeners);t<n.length;t++){(0,n[t])(e)}this.heldKeys.add(this.toLowerCaseIfInsensitive(e.key))}},{key:"toLowerCaseIfInsensitive",value:function(e){return this.areResponsesCaseSensitive?e:e.toLowerCase()}},{key:"rootKeyupListener",value:function(e){this.heldKeys.delete(this.toLowerCaseIfInsensitive(e.key))}},{key:"isResponseValid",value:function(e,t,n){return!(!t&&this.heldKeys.has(n))&&("ALL_KEYS"===e||"NO_KEYS"!==e&&e.includes(n))}},{key:"getKeyboardResponse",value:function(e){var t=this,n=e.callback_function,r=e.valid_responses,i=void 0===r?"ALL_KEYS":r,a=e.rt_method,o=void 0===a?"performance":a,u=e.persist,s=e.audio_context,l=e.audio_context_start_time,c=e.allow_held_key,f=void 0!==c&&c,h=e.minimum_valid_rt,d=void 0===h?this.minimumValidRt:h;"performance"!==o&&"audio"!==o&&(console.log('Invalid RT method specified in getKeyboardResponse. Defaulting to "performance" method.'),o="performance");var p="performance"===o?performance.now():1e3*l;this.registerRootListeners(),this.areResponsesCaseSensitive||"string"===typeof i||(i=i.map((function(e){return e.toLowerCase()})));var v=function e(r){var a=Math.round(("performance"==o?performance.now():1e3*s.currentTime)-p);if(!(a<d)){var l=t.toLowerCaseIfInsensitive(r.key);t.isResponseValid(i,f,l)&&(r.preventDefault(),u||t.cancelKeyboardResponse(e),n({key:l,rt:a}))}};return this.listeners.add(v),v}},{key:"cancelKeyboardResponse",value:function(e){this.listeners.delete(e)}},{key:"cancelAllKeyboardResponses",value:function(){this.listeners.clear()}},{key:"compareKeys",value:function(e,t){if(!("string"!==typeof e&&null!==e||"string"!==typeof t&&null!==t))return"string"===typeof e&&"string"===typeof t?this.areResponsesCaseSensitive?e===t:e.toLowerCase()===t.toLowerCase():null===e&&null===t;console.error("Error in jsPsych.pluginAPI.compareKeys: arguments must be key strings or null.")}}]),e}();!function(e){e[e.BOOL=0]="BOOL",e[e.STRING=1]="STRING",e[e.INT=2]="INT",e[e.FLOAT=3]="FLOAT",e[e.FUNCTION=4]="FUNCTION",e[e.KEY=5]="KEY",e[e.KEYS=6]="KEYS",e[e.SELECT=7]="SELECT",e[e.HTML_STRING=8]="HTML_STRING",e[e.IMAGE=9]="IMAGE",e[e.AUDIO=10]="AUDIO",e[e.VIDEO=11]="VIDEO",e[e.OBJECT=12]="OBJECT",e[e.COMPLEX=13]="COMPLEX",e[e.TIMELINE=14]="TIMELINE"}(We||(We={}));var Je={data:{type:We.OBJECT,pretty_name:"Data",default:{}},on_start:{type:We.FUNCTION,pretty_name:"On start",default:function(){}},on_finish:{type:We.FUNCTION,pretty_name:"On finish",default:function(){}},on_load:{type:We.FUNCTION,pretty_name:"On load",default:function(){}},post_trial_gap:{type:We.INT,pretty_name:"Post trial gap",default:null},css_classes:{type:We.STRING,pretty_name:"Custom CSS classes",default:null},simulation_options:{type:We.COMPLEX,default:null}},Ze=[We.AUDIO,We.IMAGE,We.VIDEO],et=function(){function e(t,n){Ce(this,e),this.useWebaudio=t,this.webaudioContext=n,this.video_buffers={},this.context=null,this.audio_buffers=[],this.preload_requests=[],this.img_cache={},this.preloadMap=new Map,this.microphone_recorder=null}return Ie(e,[{key:"getVideoBuffer",value:function(e){return this.video_buffers[e]}},{key:"initAudio",value:function(){this.context=this.useWebaudio?this.webaudioContext:null}},{key:"audioContext",value:function(){return null!==this.context&&"running"!==this.context.state&&this.context.resume(),this.context}},{key:"getAudioBuffer",value:function(e){var t=this;return new Promise((function(n,r){"undefined"==typeof t.audio_buffers[e]||"tmp"==t.audio_buffers[e]?t.preloadAudio([e],(function(){n(t.audio_buffers[e])}),(function(){}),(function(e){r(e.error)})):n(t.audio_buffers[e])}))}},{key:"preloadAudio",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(e){};e=ze(e.flat());var a=0;if(0!=e.length){var o,u=function(o){var u=new XMLHttpRequest;u.open("GET",o,!0),u.responseType="arraybuffer",u.onload=function(){t.context.decodeAudioData(u.response,(function(i){t.audio_buffers[o]=i,a++,r(o),a==e.length&&n()}),(function(e){i({source:o,error:e})}))},u.onerror=function(e){var t=e;404==this.status&&(t="404"),i({source:o,error:t})},u.onloadend=function(e){404==this.status&&i({source:o,error:"404"})},u.send(),t.preload_requests.push(u)},s=function(o){var u=new Audio,s=function i(){t.audio_buffers[o]=u,a++,r(o),a==e.length&&n(),u.removeEventListener("canplaythrough",i)};u.addEventListener("canplaythrough",s),u.addEventListener("error",(function e(t){i({source:u.src,error:t}),u.removeEventListener("error",e)})),u.addEventListener("abort",(function e(t){i({source:u.src,error:t}),u.removeEventListener("abort",e)})),u.src=o,t.preload_requests.push(u)},l=Fe(e);try{for(l.s();!(o=l.n()).done;){var c=o.value;"undefined"!==typeof this.audio_buffers[c]?(a++,r(c),a==e.length&&n()):(this.audio_buffers[c]="tmp",null!==this.audioContext()?u(c):s(c))}}catch(f){l.e(f)}finally{l.f()}}else n()}},{key:"preloadImages",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(e){};e=ze(e.flat());var i=0;if(0!==e.length)for(var a=0;a<e.length;a++){var o=new Image;o.onload=function(){i++,n(o.src),i===e.length&&t()},o.onerror=function(e){r({source:o.src,error:e})},o.src=e[a],this.img_cache[e[a]]=o,this.preload_requests.push(o)}else t()}},{key:"preloadVideo",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(e){};e=ze(e.flat());var a=0;if(0!==e.length){var o,u=Fe(e);try{var s=function(){var u=o.value,s=t.video_buffers,l=new XMLHttpRequest;l.open("GET",u,!0),l.responseType="blob",l.onload=function(){if(200===this.status||0===this.status){var t=this.response;s[u]=URL.createObjectURL(t),a++,r(u),a===e.length&&n()}},l.onerror=function(e){var t=e;404==this.status&&(t="404"),i({source:u,error:t})},l.onloadend=function(e){404==this.status&&i({source:u,error:"404"})},l.send(),t.preload_requests.push(l)};for(u.s();!(o=u.n()).done;)s()}catch(l){u.e(l)}finally{u.f()}}else n()}},{key:"getAutoPreloadList",value:function(e){var t=this,n=Object.fromEntries(Ze.map((function(e){return[e,new Set]})));return function e(r,i){var a,o,u,s;if("undefined"!==typeof r.timeline){var l,f=Fe(r.timeline);try{for(f.s();!(l=f.n()).done;){e(l.value,null!==(a=r.type)&&void 0!==a?a:i)}}catch(T){f.e(T)}finally{f.f()}}else if(null===(u=null!==(o=r.type)&&void 0!==o?o:i)||void 0===u?void 0:u.info){var h=(null!==(s=r.type)&&void 0!==s?s:i).info,d=h.name,p=h.parameters;t.preloadMap.has(d)||t.preloadMap.set(d,Object.fromEntries(Object.entries(p).filter((function(e){var t=c(e,2),n=(t[0],t[1]),r=n.type,i=n.preload;return Ze.includes(r)&&(null===i||void 0===i||i)})).map((function(e){var t=c(e,2);return[t[0],t[1].type]}))));for(var v=0,y=Object.entries(t.preloadMap.get(d));v<y.length;v++){var m=c(y[v],2),g=m[0],b=m[1],w=r[g],k=n[b];if("string"===typeof w)k.add(w);else if(Array.isArray(w)){var _,x=Fe(w.flat());try{for(x.s();!(_=x.n()).done;){var E=_.value;"string"===typeof E&&k.add(E)}}catch(T){x.e(T)}finally{x.f()}}}}}({timeline:e}),{images:Te(n[We.IMAGE]),audio:Te(n[We.AUDIO]),video:Te(n[We.VIDEO])}}},{key:"cancelPreloads",value:function(){var e,t=Fe(this.preload_requests);try{for(t.s();!(e=t.n()).done;){var n=e.value;n.onload=function(){},n.onerror=function(){},n.oncanplaythrough=function(){},n.onabort=function(){}}}catch(r){t.e(r)}finally{t.f()}this.preload_requests=[]}},{key:"initializeMicrophoneRecorder",value:function(e){var t=new MediaRecorder(e);this.microphone_recorder=t}},{key:"getMicrophoneRecorder",value:function(){return this.microphone_recorder}}]),e}(),tt=function(){function e(){Ce(this,e)}return Ie(e,[{key:"dispatchEvent",value:function(e){document.body.dispatchEvent(e)}},{key:"keyDown",value:function(e){this.dispatchEvent(new KeyboardEvent("keydown",{key:e}))}},{key:"keyUp",value:function(e){this.dispatchEvent(new KeyboardEvent("keyup",{key:e}))}},{key:"pressKey",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;n>0?setTimeout((function(){t.keyDown(e),t.keyUp(e)}),n):(this.keyDown(e),this.keyUp(e))}},{key:"clickTarget",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;t>0?setTimeout((function(){e.dispatchEvent(new MouseEvent("mousedown",{bubbles:!0})),e.dispatchEvent(new MouseEvent("mouseup",{bubbles:!0})),e.dispatchEvent(new MouseEvent("click",{bubbles:!0}))}),t):(e.dispatchEvent(new MouseEvent("mousedown",{bubbles:!0})),e.dispatchEvent(new MouseEvent("mouseup",{bubbles:!0})),e.dispatchEvent(new MouseEvent("click",{bubbles:!0})))}},{key:"fillTextInput",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;n>0?setTimeout((function(){e.value=t}),n):e.value=t}},{key:"getValidKey",value:function(e){var t,n=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9"," "];if("NO_KEYS"==e)t=null;else if("ALL_KEYS"==e)t=n[Math.floor(Math.random()*n.length)];else{var r=e.flat();t=r[Math.floor(Math.random()*r.length)]}return t}},{key:"mergeSimulationData",value:function(e,t){return Object.assign(Object.assign({},e),null===t||void 0===t?void 0:t.data)}},{key:"ensureSimulationDataConsistency",value:function(e,t){if(t.rt&&(t.rt=Math.round(t.rt)),e.trial_duration&&t.rt&&t.rt>e.trial_duration&&(t.rt=null,t.response&&(t.response=null),t.correct&&(t.correct=!1)),e.choices&&"NO_KEYS"==e.choices&&(t.rt&&(t.rt=null),t.response&&(t.response=null)),e.allow_response_before_complete&&e.sequence_reps&&e.frame_time){var n=e.sequence_reps*e.frame_time*e.stimuli.length;t.rt<n&&(t.rt=null,t.response=null)}}}]),e}(),nt=function(){function e(){Ce(this,e),this.timeout_handlers=[]}return Ie(e,[{key:"setTimeout",value:function(e,t){var n=window.setTimeout(e,t);return this.timeout_handlers.push(n),n}},{key:"clearAllTimeouts",value:function(){var e,t=Fe(this.timeout_handlers);try{for(t.s();!(e=t.n()).done;){var n=e.value;clearTimeout(n)}}catch(r){t.e(r)}finally{t.f()}this.timeout_handlers=[]}}]),e}();var rt=["ability","able","aboard","about","above","accept","accident","according","account","accurate","acres","across","act","action","active","activity","actual","actually","add","addition","additional","adjective","adult","adventure","advice","affect","afraid","after","afternoon","again","against","age","ago","agree","ahead","aid","air","airplane","alike","alive","all","allow","almost","alone","along","aloud","alphabet","already","also","although","am","among","amount","ancient","angle","angry","animal","announced","another","answer","ants","any","anybody","anyone","anything","anyway","anywhere","apart","apartment","appearance","apple","applied","appropriate","are","area","arm","army","around","arrange","arrangement","arrive","arrow","art","article","as","aside","ask","asleep","at","ate","atmosphere","atom","atomic","attached","attack","attempt","attention","audience","author","automobile","available","average","avoid","aware","away","baby","back","bad","badly","bag","balance","ball","balloon","band","bank","bar","bare","bark","barn","base","baseball","basic","basis","basket","bat","battle","be","bean","bear","beat","beautiful","beauty","became","because","become","becoming","bee","been","before","began","beginning","begun","behavior","behind","being","believed","bell","belong","below","belt","bend","beneath","bent","beside","best","bet","better","between","beyond","bicycle","bigger","biggest","bill","birds","birth","birthday","bit","bite","black","blank","blanket","blew","blind","block","blood","blow","blue","board","boat","body","bone","book","border","born","both","bottle","bottom","bound","bow","bowl","box","boy","brain","branch","brass","brave","bread","break","breakfast","breath","breathe","breathing","breeze","brick","bridge","brief","bright","bring","broad","broke","broken","brother","brought","brown","brush","buffalo","build","building","built","buried","burn","burst","bus","bush","business","busy","but","butter","buy","by","cabin","cage","cake","call","calm","came","camera","camp","can","canal","cannot","cap","capital","captain","captured","car","carbon","card","care","careful","carefully","carried","carry","case","cast","castle","cat","catch","cattle","caught","cause","cave","cell","cent","center","central","century","certain","certainly","chain","chair","chamber","chance","change","changing","chapter","character","characteristic","charge","chart","check","cheese","chemical","chest","chicken","chief","child","children","choice","choose","chose","chosen","church","circle","circus","citizen","city","class","classroom","claws","clay","clean","clear","clearly","climate","climb","clock","close","closely","closer","cloth","clothes","clothing","cloud","club","coach","coal","coast","coat","coffee","cold","collect","college","colony","color","column","combination","combine","come","comfortable","coming","command","common","community","company","compare","compass","complete","completely","complex","composed","composition","compound","concerned","condition","congress","connected","consider","consist","consonant","constantly","construction","contain","continent","continued","contrast","control","conversation","cook","cookies","cool","copper","copy","corn","corner","correct","correctly","cost","cotton","could","count","country","couple","courage","course","court","cover","cow","cowboy","crack","cream","create","creature","crew","crop","cross","crowd","cry","cup","curious","current","curve","customs","cut","cutting","daily","damage","dance","danger","dangerous","dark","darkness","date","daughter","dawn","day","dead","deal","dear","death","decide","declared","deep","deeply","deer","definition","degree","depend","depth","describe","desert","design","desk","detail","determine","develop","development","diagram","diameter","did","die","differ","difference","different","difficult","difficulty","dig","dinner","direct","direction","directly","dirt","dirty","disappear","discover","discovery","discuss","discussion","disease","dish","distance","distant","divide","division","do","doctor","does","dog","doing","doll","dollar","done","donkey","door","dot","double","doubt","down","dozen","draw","drawn","dream","dress","drew","dried","drink","drive","driven","driver","driving","drop","dropped","drove","dry","duck","due","dug","dull","during","dust","duty","each","eager","ear","earlier","early","earn","earth","easier","easily","east","easy","eat","eaten","edge","education","effect","effort","egg","eight","either","electric","electricity","element","elephant","eleven","else","empty","end","enemy","energy","engine","engineer","enjoy","enough","enter","entire","entirely","environment","equal","equally","equator","equipment","escape","especially","essential","establish","even","evening","event","eventually","ever","every","everybody","everyone","everything","everywhere","evidence","exact","exactly","examine","example","excellent","except","exchange","excited","excitement","exciting","exclaimed","exercise","exist","expect","experience","experiment","explain","explanation","explore","express","expression","extra","eye","face","facing","fact","factor","factory","failed","fair","fairly","fall","fallen","familiar","family","famous","far","farm","farmer","farther","fast","fastened","faster","fat","father","favorite","fear","feathers","feature","fed","feed","feel","feet","fell","fellow","felt","fence","few","fewer","field","fierce","fifteen","fifth","fifty","fight","fighting","figure","fill","film","final","finally","find","fine","finest","finger","finish","fire","fireplace","firm","first","fish","five","fix","flag","flame","flat","flew","flies","flight","floating","floor","flow","flower","fly","fog","folks","follow","food","foot","football","for","force","foreign","forest","forget","forgot","forgotten","form","former","fort","forth","forty","forward","fought","found","four","fourth","fox","frame","free","freedom","frequently","fresh","friend","friendly","frighten","frog","from","front","frozen","fruit","fuel","full","fully","fun","function","funny","fur","furniture","further","future","gain","game","garage","garden","gas","gasoline","gate","gather","gave","general","generally","gentle","gently","get","getting","giant","gift","girl","give","given","giving","glad","glass","globe","go","goes","gold","golden","gone","good","goose","got","government","grabbed","grade","gradually","grain","grandfather","grandmother","graph","grass","gravity","gray","great","greater","greatest","greatly","green","grew","ground","group","grow","grown","growth","guard","guess","guide","gulf","gun","habit","had","hair","half","halfway","hall","hand","handle","handsome","hang","happen","happened","happily","happy","harbor","hard","harder","hardly","has","hat","have","having","hay","he","headed","heading","health","heard","hearing","heart","heat","heavy","height","held","hello","help","helpful","her","herd","here","herself","hidden","hide","high","higher","highest","highway","hill","him","himself","his","history","hit","hold","hole","hollow","home","honor","hope","horn","horse","hospital","hot","hour","house","how","however","huge","human","hundred","hung","hungry","hunt","hunter","hurried","hurry","hurt","husband","ice","idea","identity","if","ill","image","imagine","immediately","importance","important","impossible","improve","in","inch","include","including","income","increase","indeed","independent","indicate","individual","industrial","industry","influence","information","inside","instance","instant","instead","instrument","interest","interior","into","introduced","invented","involved","iron","is","island","it","its","itself","jack","jar","jet","job","join","joined","journey","joy","judge","jump","jungle","just","keep","kept","key","kids","kill","kind","kitchen","knew","knife","know","knowledge","known","label","labor","lack","lady","laid","lake","lamp","land","language","large","larger","largest","last","late","later","laugh","law","lay","layers","lead","leader","leaf","learn","least","leather","leave","leaving","led","left","leg","length","lesson","let","letter","level","library","lie","life","lift","light","like","likely","limited","line","lion","lips","liquid","list","listen","little","live","living","load","local","locate","location","log","lonely","long","longer","look","loose","lose","loss","lost","lot","loud","love","lovely","low","lower","luck","lucky","lunch","lungs","lying","machine","machinery","mad","made","magic","magnet","mail","main","mainly","major","make","making","man","managed","manner","manufacturing","many","map","mark","market","married","mass","massage","master","material","mathematics","matter","may","maybe","me","meal","mean","means","meant","measure","meat","medicine","meet","melted","member","memory","men","mental","merely","met","metal","method","mice","middle","might","mighty","mile","military","milk","mill","mind","mine","minerals","minute","mirror","missing","mission","mistake","mix","mixture","model","modern","molecular","moment","money","monkey","month","mood","moon","more","morning","most","mostly","mother","motion","motor","mountain","mouse","mouth","move","movement","movie","moving","mud","muscle","music","musical","must","my","myself","mysterious","nails","name","nation","national","native","natural","naturally","nature","near","nearby","nearer","nearest","nearly","necessary","neck","needed","needle","needs","negative","neighbor","neighborhood","nervous","nest","never","new","news","newspaper","next","nice","night","nine","no","nobody","nodded","noise","none","noon","nor","north","nose","not","note","noted","nothing","notice","noun","now","number","numeral","nuts","object","observe","obtain","occasionally","occur","ocean","of","off","offer","office","officer","official","oil","old","older","oldest","on","once","one","only","onto","open","operation","opinion","opportunity","opposite","or","orange","orbit","order","ordinary","organization","organized","origin","original","other","ought","our","ourselves","out","outer","outline","outside","over","own","owner","oxygen","pack","package","page","paid","pain","paint","pair","palace","pale","pan","paper","paragraph","parallel","parent","park","part","particles","particular","particularly","partly","parts","party","pass","passage","past","path","pattern","pay","peace","pen","pencil","people","per","percent","perfect","perfectly","perhaps","period","person","personal","pet","phrase","physical","piano","pick","picture","pictured","pie","piece","pig","pile","pilot","pine","pink","pipe","pitch","place","plain","plan","plane","planet","planned","planning","plant","plastic","plate","plates","play","pleasant","please","pleasure","plenty","plural","plus","pocket","poem","poet","poetry","point","pole","police","policeman","political","pond","pony","pool","poor","popular","population","porch","port","position","positive","possible","possibly","post","pot","potatoes","pound","pour","powder","power","powerful","practical","practice","prepare","present","president","press","pressure","pretty","prevent","previous","price","pride","primitive","principal","principle","printed","private","prize","probably","problem","process","produce","product","production","program","progress","promised","proper","properly","property","protection","proud","prove","provide","public","pull","pupil","pure","purple","purpose","push","put","putting","quarter","queen","question","quick","quickly","quiet","quietly","quite","rabbit","race","radio","railroad","rain","raise","ran","ranch","range","rapidly","rate","rather","raw","rays","reach","read","reader","ready","real","realize","rear","reason","recall","receive","recent","recently","recognize","record","red","refer","refused","region","regular","related","relationship","religious","remain","remarkable","remember","remove","repeat","replace","replied","report","represent","require","research","respect","rest","result","return","review","rhyme","rhythm","rice","rich","ride","riding","right","ring","rise","rising","river","road","roar","rock","rocket","rocky","rod","roll","roof","room","root","rope","rose","rough","round","route","row","rubbed","rubber","rule","ruler","run","running","rush","sad","saddle","safe","safety","said","sail","sale","salmon","salt","same","sand","sang","sat","satellites","satisfied","save","saved","saw","say","scale","scared","scene","school","science","scientific","scientist","score","screen","sea","search","season","seat","second","secret","section","see","seed","seeing","seems","seen","seldom","select","selection","sell","send","sense","sent","sentence","separate","series","serious","serve","service","sets","setting","settle","settlers","seven","several","shade","shadow","shake","shaking","shall","shallow","shape","share","sharp","she","sheep","sheet","shelf","shells","shelter","shine","shinning","ship","shirt","shoe","shoot","shop","shore","short","shorter","shot","should","shoulder","shout","show","shown","shut","sick","sides","sight","sign","signal","silence","silent","silk","silly","silver","similar","simple","simplest","simply","since","sing","single","sink","sister","sit","sitting","situation","six","size","skill","skin","sky","slabs","slave","sleep","slept","slide","slight","slightly","slip","slipped","slope","slow","slowly","small","smaller","smallest","smell","smile","smoke","smooth","snake","snow","so","soap","social","society","soft","softly","soil","solar","sold","soldier","solid","solution","solve","some","somebody","somehow","someone","something","sometime","somewhere","son","song","soon","sort","sound","source","south","southern","space","speak","special","species","specific","speech","speed","spell","spend","spent","spider","spin","spirit","spite","split","spoken","sport","spread","spring","square","stage","stairs","stand","standard","star","stared","start","state","statement","station","stay","steady","steam","steel","steep","stems","step","stepped","stick","stiff","still","stock","stomach","stone","stood","stop","stopped","store","storm","story","stove","straight","strange","stranger","straw","stream","street","strength","stretch","strike","string","strip","strong","stronger","struck","structure","struggle","stuck","student","studied","studying","subject","substance","success","successful","such","sudden","suddenly","sugar","suggest","suit","sum","summer","sun","sunlight","supper","supply","support","suppose","sure","surface","surprise","surrounded","swam","sweet","swept","swim","swimming","swing","swung","syllable","symbol","system","table","tail","take","taken","tales","talk","tall","tank","tape","task","taste","taught","tax","tea","teach","teacher","team","tears","teeth","telephone","television","tell","temperature","ten","tent","term","terrible","test","than","thank","that","thee","them","themselves","then","theory","there","therefore","these","they","thick","thin","thing","think","third","thirty","this","those","thou","though","thought","thousand","thread","three","threw","throat","through","throughout","throw","thrown","thumb","thus","thy","tide","tie","tight","tightly","till","time","tin","tiny","tip","tired","title","to","tobacco","today","together","told","tomorrow","tone","tongue","tonight","too","took","tool","top","topic","torn","total","touch","toward","tower","town","toy","trace","track","trade","traffic","trail","train","transportation","trap","travel","treated","tree","triangle","tribe","trick","tried","trip","troops","tropical","trouble","truck","trunk","truth","try","tube","tune","turn","twelve","twenty","twice","two","type","typical","uncle","under","underline","understanding","unhappy","union","unit","universe","unknown","unless","until","unusual","up","upon","upper","upward","us","use","useful","using","usual","usually","valley","valuable","value","vapor","variety","various","vast","vegetable","verb","vertical","very","vessels","victory","view","village","visit","visitor","voice","volume","vote","vowel","voyage","wagon","wait","walk","wall","want","war","warm","warn","was","wash","waste","watch","water","wave","way","we","weak","wealth","wear","weather","week","weigh","weight","welcome","well","went","were","west","western","wet","whale","what","whatever","wheat","wheel","when","whenever","where","wherever","whether","which","while","whispered","whistle","white","who","whole","whom","whose","why","wide","widely","wife","wild","will","willing","win","wind","window","wing","winter","wire","wise","wish","with","within","without","wolf","women","won","wonder","wonderful","wood","wooden","wool","word","wore","work","worker","world","worried","worry","worse","worth","would","wrapped","write","writer","writing","written","wrong","wrote","yard","year","yellow","yes","yesterday","yet","you","young","younger","your","yourself","youth","zero","zebra","zipper","zoo","zulu"];function it(e){function t(){return e&&e.maxLength>1?function(){var t,r=!1;for(;!r;)(t=n()).length<=e.maxLength&&(r=!0);return t}():n()}function n(){return rt[r(rt.length)]}function r(e){return Math.floor(Math.random()*e)}if("undefined"===typeof e)return t();"number"===typeof e&&(e={exactly:e}),e.exactly&&(e.min=e.exactly,e.max=e.exactly),"number"!==typeof e.wordsPerString&&(e.wordsPerString=1),"function"!==typeof e.formatter&&(e.formatter=function(e){return e}),"string"!==typeof e.separator&&(e.separator=" ");for(var i=e.min+r(e.max+1-e.min),a=[],o="",u=0,s=0;s<i*e.wordsPerString;s++)u===e.wordsPerString-1?o+=e.formatter(t(),u):o+=e.formatter(t(),u)+e.separator,u++,(s+1)%e.wordsPerString===0&&(a.push(o),o="",u=0);return"string"===typeof e.join&&(a=a.join(e.join)),a}var at=it;it.wordList=rt;var ot={exports:{}};(function(e,t,n){function r(e){var t=this,n=function(){var e=4022871197;return function(t){t=String(t);for(var n=0;n<t.length;n++){var r=.02519603282416938*(e+=t.charCodeAt(n));r-=e=r>>>0,e=(r*=e)>>>0,e+=4294967296*(r-=e)}return 2.3283064365386963e-10*(e>>>0)}}();t.next=function(){var e=2091639*t.s0+2.3283064365386963e-10*t.c;return t.s0=t.s1,t.s1=t.s2,t.s2=e-(t.c=0|e)},t.c=1,t.s0=n(" "),t.s1=n(" "),t.s2=n(" "),t.s0-=n(e),t.s0<0&&(t.s0+=1),t.s1-=n(e),t.s1<0&&(t.s1+=1),t.s2-=n(e),t.s2<0&&(t.s2+=1),n=null}function i(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function a(e,t){var n=new r(e),a=t&&t.state,o=n.next;return o.int32=function(){return 4294967296*n.next()|0},o.double=function(){return o()+11102230246251565e-32*(2097152*o()|0)},o.quick=o,a&&("object"==typeof a&&i(a,n),o.state=function(){return i(n,{})}),o}t&&t.exports?t.exports=a:n&&n.amd?n((function(){return a})):this.alea=a})(0,ot,!1);var ut=ot.exports;function st(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=Array.isArray(e),i=Array.isArray(t);if(r)if(i){if(e.length!=t.length)if(console.warn("Unclear parameters given to randomization.repeat. Items and repetitions are unequal lengths. Behavior may not be as expected."),t.length<e.length){for(var a=[],o=0;o<e.length;o++)a.push(t);t=a}else t=t.slice(0,e.length)}else{for(var u=[],s=0;s<e.length;s++)u.push(t);t=u}else i?(t=[t[0]],console.log("Unclear parameters given to randomization.repeat. Multiple set sizes specified, but only one item exists to sample. Proceeding using the first set size.")):(e=[e],t=[t]);for(var l=[],c=0;c<e.length;c++)for(var f=0;f<t[c];f++)null==e[c]||"object"!=typeof e[c]?l.push(e[c]):l.push(Object.assign({},e[c]));var h=lt(l);return n&&(h=vt(h)),h}function lt(e){Array.isArray(e)||console.error("Argument to shuffle() must be an array.");for(var t,n,r=e.slice(0),i=r.length;i;)n=Math.floor(Math.random()*i--),t=r[i],r[i]=r[n],r[n]=t;return r}function ct(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.length;if(1==n)return console.warn("shuffleAlternateGroups() was called with only one group. Defaulting to simple shuffle."),lt(e[0]);for(var r=[],i=0;i<n;i++)r.push(i);t&&(r=lt(r));for(var a=[],o=null,u=0;u<n;u++)o=null===o?e[u].length:Math.min(o,e[u].length),a.push(lt(e[u]));for(var s=[],l=0;l<o;l++)for(var c=0;c<r.length;c++)s.push(a[r[c]][l]);return s}function ft(e,t){return Array.isArray(e)||console.error("First argument to sampleWithoutReplacement() must be an array"),t>e.length&&console.error("Cannot take a sample larger than the size of the set of items to sample."),lt(e).slice(0,t)}function ht(e,t,n){Array.isArray(e)||console.error("First argument to sampleWithReplacement() must be an array");var r=[];if("undefined"!==typeof n){n.length!==e.length&&console.error("The length of the weights array must equal the length of the array to be sampled from.");var i,a=0,o=Fe(n);try{for(o.s();!(i=o.n()).done;){a+=i.value}}catch(m){o.e(m)}finally{o.f()}var u,s=Fe(n);try{for(s.s();!(u=s.n()).done;){var l=u.value;r.push(l/a)}}catch(m){s.e(m)}finally{s.f()}}else for(var c=0;c<e.length;c++)r.push(1/e.length);for(var f=[r[0]],h=1;h<r.length;h++)f.push(r[h]+f[h-1]);for(var d=[],p=0;p<t;p++){for(var v=Math.random(),y=0;v>f[y];)y++;d.push(e[y])}return d}function dt(e,t){return function(){var e=0,t=0;for(;0===e;)e=Math.random();for(;0===t;)t=Math.random();return Math.sqrt(-2*Math.log(e))*Math.cos(2*Math.PI*t)}()*t+e}function pt(e){return-Math.log(Math.random())/e}function vt(e){var t,n={},r=Fe(e);try{for(r.s();!(t=r.n()).done;)for(var i=t.value,a=0,o=Object.keys(i);a<o.length;a++){var u=o[a];"undefined"===typeof n[u]&&(n[u]=[]),n[u].push(i[u])}}catch(s){r.e(s)}finally{r.f()}return n}var yt=Object.freeze({__proto__:null,setSeed:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Math.random().toString();return Math.random=ut(e),e},repeat:st,shuffle:lt,shuffleNoRepeats:function(e,t){Array.isArray(e)||console.error("First argument to shuffleNoRepeats() must be an array."),"undefined"!==typeof t&&"function"!==typeof t&&console.error("Second argument to shuffleNoRepeats() must be a function."),"undefined"==typeof t&&(t=function(e,t){return e===t});for(var n=lt(e),r=0;r<n.length-1;r++)if(t(n[r],n[r+1])){for(var i=Math.floor(Math.random()*(n.length-2))+1;t(n[r+1],n[i])||t(n[r+1],n[i+1])||t(n[r+1],n[i-1]);)i=Math.floor(Math.random()*(n.length-2))+1;var a=n[i];n[i]=n[r+1],n[r+1]=a}return n},shuffleAlternateGroups:ct,sampleWithoutReplacement:ft,sampleWithReplacement:ht,factorial:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=[{}],i=0,a=Object.entries(e);i<a.length;i++){var o,u=c(a[i],2),s=u[0],l=u[1],f=[],h=Fe(l);try{for(h.s();!(o=h.n()).done;){var d,p=o.value,v=Fe(r);try{for(v.s();!(d=v.n()).done;){var y=d.value;f.push(Object.assign(Object.assign({},y),Ee({},s,p)))}}catch(m){v.e(m)}finally{v.f()}}}catch(m){h.e(m)}finally{h.f()}r=f}return st(r,t,n)},randomID:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32,t="",n="0123456789abcdefghjklmnopqrstuvwxyz",r=0;r<e;r++)t+=n[Math.floor(Math.random()*n.length)];return t},randomInt:function(e,t){if(t<e)throw new Error("Upper boundary must be less than or equal to lower boundary");return e+Math.floor(Math.random()*(t-e+1))},sampleBernoulli:function(e){return Math.random()<=e?1:0},sampleNormal:dt,sampleExponential:pt,sampleExGaussian:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=dt(e,t)+pt(n);if(r)for(;i<=0;)i=dt(e,t)+pt(n);return i},randomWords:function(e){return at(e)}});function mt(){var e={previewMode:!1,outsideTurk:!1,hitId:"INVALID_URL_PARAMETER",assignmentId:"INVALID_URL_PARAMETER",workerId:"INVALID_URL_PARAMETER",turkSubmitTo:"INVALID_URL_PARAMETER"},t=function(e,t){t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var n=new RegExp("[\\?&]"+t+"=([^&#]*)").exec(e);return null==n?"":n[1]},n=t(window.location.href,"assignmentId")?window.location.href:document.referrer;return["assignmentId","hitId","workerId","turkSubmitTo"].map((function(r){e[r]=unescape(t(n,r))})),e.previewMode="ASSIGNMENT_ID_NOT_AVAILABLE"==e.assignmentId,e.outsideTurk=!e.previewMode&&""===e.hitId&&""==e.assignmentId&&""==e.workerId,e}var gt=Object.freeze({__proto__:null,turkInfo:mt,submitToTurk:function(e){var t=mt(),n=t.assignmentId,r=t.turkSubmitTo;if(n&&r){var i=document.createElement("form");for(var a in i.method="POST",i.action=r+"/mturk/externalSubmit?assignmentId="+n,e)if(e.hasOwnProperty(a)){var o=document.createElement("input");o.type="hidden",o.name=a,o.id=a,o.value=e[a],i.appendChild(o)}document.body.appendChild(i),i.submit()}}}),bt=function(){function e(t,n,r,i){if(Ce(this,e),this.jsPsych=t,this.progress={current_location:-1,current_variable_set:0,current_repetition:0,current_iteration:0,done:!1},this.parent_node=r,this.relative_id="undefined"===typeof r?0:i,"undefined"!==typeof n.timeline){this.timeline_parameters={timeline:[],loop_function:n.loop_function,conditional_function:n.conditional_function,sample:n.sample,randomize_order:"undefined"!=typeof n.randomize_order&&n.randomize_order,repetitions:"undefined"==typeof n.repetitions?1:n.repetitions,timeline_variables:"undefined"==typeof n.timeline_variables?[{}]:n.timeline_variables,on_timeline_finish:n.on_timeline_finish,on_timeline_start:n.on_timeline_start},this.setTimelineVariablesOrder();var a=Object.assign({},n);delete a.timeline,delete a.conditional_function,delete a.loop_function,delete a.randomize_order,delete a.repetitions,delete a.timeline_variables,delete a.sample,delete a.on_timeline_start,delete a.on_timeline_finish,this.node_trial_data=a;for(var o=0;o<n.timeline.length;o++){var u=Object.assign({},a,n.timeline[o]);if("object"==typeof a.data&&"object"==typeof n.timeline[o].data){var s=Object.assign({},a.data,n.timeline[o].data);u.data=s}this.timeline_parameters.timeline.push(new e(this.jsPsych,u,this,o))}}else"undefined"===typeof n.type&&console.error('Trial level node is missing the "type" parameter. The parameters for the node are: '+JSON.stringify(n)),this.trial_parameters=Object.assign({},n)}return Ie(e,[{key:"trial",value:function(){return"undefined"==typeof this.timeline_parameters?He(this.trial_parameters):this.progress.current_location>=this.timeline_parameters.timeline.length?null:this.timeline_parameters.timeline[this.progress.current_location].trial()}},{key:"markCurrentTrialComplete",value:function(){"undefined"===typeof this.timeline_parameters?this.progress.done=!0:this.timeline_parameters.timeline[this.progress.current_location].markCurrentTrialComplete()}},{key:"nextRepetiton",value:function(){this.setTimelineVariablesOrder(),this.progress.current_location=-1,this.progress.current_variable_set=0,this.progress.current_repetition++;for(var e=0;e<this.timeline_parameters.timeline.length;e++)this.timeline_parameters.timeline[e].reset()}},{key:"setTimelineVariablesOrder",value:function(){var e=this.timeline_parameters;if("undefined"!==typeof e&&"undefined"!==typeof e.timeline_variables){for(var t=[],n=0;n<e.timeline_variables.length;n++)t.push(n);"undefined"!==typeof e.sample&&("custom"==e.sample.type?t=e.sample.fn(t):"with-replacement"==e.sample.type?t=ht(t,e.sample.size,e.sample.weights):"without-replacement"==e.sample.type?t=ft(t,e.sample.size):"fixed-repetitions"==e.sample.type?t=st(t,e.sample.size,!1):"alternate-groups"==e.sample.type?t=ct(e.sample.groups,e.sample.randomize_group_order):console.error('Invalid type in timeline sample parameters. Valid options for type are "custom", "with-replacement", "without-replacement", "fixed-repetitions", and "alternate-groups"')),e.randomize_order&&(t=lt(t)),this.progress.order=t}}},{key:"nextSet",value:function(){this.progress.current_location=-1,this.progress.current_variable_set++;for(var e=0;e<this.timeline_parameters.timeline.length;e++)this.timeline_parameters.timeline[e].reset()}},{key:"advance",value:function(){var e=this.progress,t=this.timeline_parameters,n=this.jsPsych.internal;if(e.done)return!0;if(-1==e.current_location){if("undefined"!==typeof t){if("undefined"!==typeof t.conditional_function&&0==e.current_repetition&&0==e.current_variable_set){n.call_immediate=!0;var r=t.conditional_function();if(n.call_immediate=!1,0==r)return e.done=!0,!0}"undefined"!==typeof t.on_timeline_start&&0==e.current_variable_set&&t.on_timeline_start()}return e.current_location=0,this.advance()}if("undefined"!==typeof t){for(var i=!1;e.current_location<t.timeline.length&&0==i;){if(!t.timeline[e.current_location].advance())return i=!0,!1;e.current_location++}return e.current_variable_set<e.order.length-1?(this.nextSet(),this.advance()):e.current_repetition<t.repetitions-1?(this.nextRepetiton(),"undefined"!==typeof t.on_timeline_finish&&t.on_timeline_finish(),this.advance()):("undefined"!==typeof t.on_timeline_finish&&t.on_timeline_finish(),"undefined"!==typeof t.loop_function?(n.call_immediate=!0,t.loop_function(this.generatedData())?(this.reset(),n.call_immediate=!1,this.parent_node.advance()):(e.done=!0,n.call_immediate=!1,!0)):(e.done=!0,!0))}}},{key:"isComplete",value:function(){return this.progress.done}},{key:"getTimelineVariableValue",value:function(e){if("undefined"!=typeof this.timeline_parameters)return this.timeline_parameters.timeline_variables[this.progress.order[this.progress.current_variable_set]][e]}},{key:"findTimelineVariable",value:function(e){var t=this.getTimelineVariableValue(e);return"undefined"==typeof t?"undefined"!==typeof this.parent_node?this.parent_node.findTimelineVariable(e):void 0:t}},{key:"timelineVariable",value:function(e){if("undefined"==typeof this.timeline_parameters)return this.findTimelineVariable(e);var t=Math.max(0,this.progress.current_location);return t==this.timeline_parameters.timeline.length&&(t-=1),this.timeline_parameters.timeline[t].timelineVariable(e)}},{key:"allTimelineVariables",value:function(){for(var e=this.allTimelineVariablesNames(),t={},n=0;n<e.length;n++)t[e[n]]=this.timelineVariable(e[n]);return t}},{key:"allTimelineVariablesNames",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if("undefined"!==typeof this.timeline_parameters){e=e.concat(Object.keys(this.timeline_parameters.timeline_variables[this.progress.order[this.progress.current_variable_set]]));var t=Math.max(0,this.progress.current_location);return t==this.timeline_parameters.timeline.length&&(t-=1),this.timeline_parameters.timeline[t].allTimelineVariablesNames(e)}if("undefined"==typeof this.timeline_parameters)return e}},{key:"length",value:function(){var e=0;if("undefined"===typeof this.timeline_parameters)return 1;for(var t=0;t<this.timeline_parameters.timeline.length;t++)e+=this.timeline_parameters.timeline[t].length();return e}},{key:"percentComplete",value:function(){for(var e=this.length(),t=0,n=0;n<this.timeline_parameters.timeline.length;n++)this.timeline_parameters.timeline[n].isComplete()&&(t+=this.timeline_parameters.timeline[n].length());return t/e*100}},{key:"reset",value:function(){if(this.progress.current_location=-1,this.progress.current_repetition=0,this.progress.current_variable_set=0,this.progress.current_iteration++,this.progress.done=!1,this.setTimelineVariablesOrder(),"undefined"!=typeof this.timeline_parameters)for(var e=0;e<this.timeline_parameters.timeline.length;e++)this.timeline_parameters.timeline[e].reset()}},{key:"end",value:function(){this.progress.done=!0}},{key:"endActiveNode",value:function(){"undefined"==typeof this.timeline_parameters?(this.end(),this.parent_node.end()):this.timeline_parameters.timeline[this.progress.current_location].endActiveNode()}},{key:"ID",value:function(){var e="";return"undefined"==typeof this.parent_node?"0."+this.progress.current_iteration:(e+=this.parent_node.ID()+"-",e+=this.relative_id+"."+this.progress.current_iteration)}},{key:"activeID",value:function(){return"undefined"==typeof this.timeline_parameters?this.ID():this.timeline_parameters.timeline[this.progress.current_location].activeID()}},{key:"generatedData",value:function(){return this.jsPsych.data.getDataByTimelineNode(this.ID())}},{key:"trialsOfType",value:function(e){if("undefined"==typeof this.timeline_parameters)return this.trial_parameters.type==e?this.trial_parameters:[];for(var t=[],n=0;n<this.timeline_parameters.timeline.length;n++){var r=this.timeline_parameters.timeline[n].trialsOfType(e);t=t.concat(r)}return t}},{key:"insert",value:function(t){"undefined"===typeof this.timeline_parameters?console.error("Cannot add new trials to a trial-level node."):this.timeline_parameters.timeline.push(new e(this.jsPsych,Object.assign(Object.assign({},this.node_trial_data),t),this,this.timeline_parameters.timeline.length))}}]),e}();function wt(e){return new Promise((function(t){return setTimeout(t,e)}))}var kt=function(){function e(t){Ce(this,e),this.extensions={},this.turk=gt,this.randomization=yt,this.utils=Ke,this.opts={},this.global_trial_index=0,this.current_trial={},this.current_trial_finished=!1,this.paused=!1,this.waiting=!1,this.file_protocol=!1,this.simulation_mode=null,this.webaudio_context=null,this.internal={call_immediate:!1},this.progress_bar_amount=0,t=Object.assign({display_element:void 0,on_finish:function(){},on_trial_start:function(){},on_trial_finish:function(){},on_data_update:function(){},on_interaction_data_update:function(){},on_close:function(){},use_webaudio:!0,exclusions:{},show_progress_bar:!1,message_progress_bar:"Completion Progress",auto_update_progress_bar:!0,default_iti:0,minimum_valid_rt:0,experiment_width:null,override_safe_mode:!1,case_sensitive_responses:!1,extensions:[]},t),this.opts=t,Ue(this),this.webaudio_context="undefined"!==typeof window&&"undefined"!==typeof window.AudioContext?new AudioContext:null,"file:"!=window.location.protocol||!1!==t.override_safe_mode&&"undefined"!==typeof t.override_safe_mode||(t.use_webaudio=!1,this.file_protocol=!0,console.warn("jsPsych detected that it is running via the file:// protocol and not on a web server. To prevent issues with cross-origin requests, Web Audio and video preloading have been disabled. If you would like to override this setting, you can set 'override_safe_mode' to 'true' in initJsPsych. For more information, see: https://www.jspsych.org/overview/running-experiments")),this.data=new $e(this),this.pluginAPI=function(e){var t=e.getInitSettings();return Object.assign.apply(Object,[{}].concat(Te([new Xe(e.getDisplayContainerElement,t.case_sensitive_responses,t.minimum_valid_rt),new nt,new et(t.use_webaudio,e.webaudio_context),new Ye,new tt].map((function(e){return Ue(e)})))))}(this);var n,r=Fe(t.extensions);try{for(r.s();!(n=r.n()).done;){var i=n.value;this.extensions[i.type.info.name]=new i.type(this)}}catch(a){r.e(a)}finally{r.f()}this.pluginAPI.initAudio()}return Ie(e,[{key:"version",value:function(){return"7.2.3"}},{key:"run",value:function(e){return qe(this,void 0,void 0,a().mark((function t(){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return"undefined"===typeof e&&console.error("No timeline declared in jsPsych.run. Cannot start experiment."),0===e.length&&console.error("No trials have been added to the timeline (the timeline is an empty array). Cannot start experiment."),this.timelineDescription=e,this.timeline=new bt(this,{timeline:e}),t.next=6,this.prepareDom();case 6:return t.next=8,this.checkExclusions(this.opts.exclusions);case 8:return t.next=10,this.loadExtensions(this.opts.extensions);case 10:return document.documentElement.setAttribute("jspsych","present"),this.startExperiment(),t.next=14,this.finished;case 14:case"end":return t.stop()}}),t,this)})))}},{key:"simulate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"data-only",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return qe(this,void 0,void 0,a().mark((function r(){return a().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return this.simulation_mode=t,this.simulation_options=n,r.next=4,this.run(e);case 4:case"end":return r.stop()}}),r,this)})))}},{key:"getProgress",value:function(){return{total_trials:"undefined"===typeof this.timeline?void 0:this.timeline.length(),current_trial_global:this.global_trial_index,percent_complete:"undefined"===typeof this.timeline?0:this.timeline.percentComplete()}}},{key:"getStartTime",value:function(){return this.exp_start_time}},{key:"getTotalTime",value:function(){return"undefined"===typeof this.exp_start_time?0:(new Date).getTime()-this.exp_start_time.getTime()}},{key:"getDisplayElement",value:function(){return this.DOM_target}},{key:"getDisplayContainerElement",value:function(){return this.DOM_container}},{key:"finishTrial",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this.current_trial_finished){var t;if(this.current_trial_finished=!0,"undefined"!==typeof this.current_trial.css_classes&&Array.isArray(this.current_trial.css_classes))(t=this.DOM_target.classList).remove.apply(t,Te(this.current_trial.css_classes));this.data.write(e);var n=this.data.getLastTrialData(),r=n.values()[0],i=this.current_trial;if("object"===typeof i.save_trial_parameters)for(var a=0,o=Object.keys(i.save_trial_parameters);a<o.length;a++){var u=o[a],s=i.save_trial_parameters[u];!0===s&&("undefined"===typeof i[u]?console.warn('Invalid parameter specified in save_trial_parameters. Trial has no property called "'.concat(u,'".')):"function"===typeof i[u]?r[u]=i[u].toString():r[u]=i[u]),!1===s&&"internal_node_id"!==u&&"trial_index"!==u&&delete r[u]}if(Array.isArray(i.extensions)){var l,c=Fe(i.extensions);try{for(c.s();!(l=c.n()).done;){var f=l.value,h=this.extensions[f.type.info.name].on_finish(f.params);Object.assign(r,h)}}catch(d){c.e(d)}finally{c.f()}}this.internal.call_immediate=!0,"function"===typeof i.on_finish&&i.on_finish(r),this.opts.on_trial_finish(r),this.opts.on_data_update(r),this.internal.call_immediate=!1,"data-only"===this.simulation_mode?this.nextTrial():null===typeof i.post_trial_gap||"undefined"===typeof i.post_trial_gap?this.opts.default_iti>0?setTimeout(this.nextTrial,this.opts.default_iti):this.nextTrial():i.post_trial_gap>0?setTimeout(this.nextTrial,i.post_trial_gap):this.nextTrial()}}},{key:"endExperiment",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.timeline.end_message=e,this.timeline.end(),this.pluginAPI.cancelAllKeyboardResponses(),this.pluginAPI.clearAllTimeouts(),this.finishTrial(t)}},{key:"endCurrentTimeline",value:function(){this.timeline.endActiveNode()}},{key:"getCurrentTrial",value:function(){return this.current_trial}},{key:"getInitSettings",value:function(){return this.opts}},{key:"getCurrentTimelineNodeID",value:function(){return this.timeline.activeID()}},{key:"timelineVariable",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.internal.call_immediate||!0===n?this.timeline.timelineVariable(e):{timelineVariablePlaceholder:!0,timelineVariableFunction:function(){return t.timeline.timelineVariable(e)}}}},{key:"getAllTimelineVariables",value:function(){return this.timeline.allTimelineVariables()}},{key:"addNodeToEndOfTimeline",value:function(e,t){this.timeline.insert(e)}},{key:"pauseExperiment",value:function(){this.paused=!0}},{key:"resumeExperiment",value:function(){this.paused=!1,this.waiting&&(this.waiting=!1,this.nextTrial())}},{key:"loadFail",value:function(e){e=e||"<p>The experiment failed to load.</p>",this.DOM_target.innerHTML=e}},{key:"getSafeModeStatus",value:function(){return this.file_protocol}},{key:"getTimeline",value:function(){return this.timelineDescription}},{key:"prepareDom",value:function(){return qe(this,void 0,void 0,a().mark((function e(){var t,n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("complete"===document.readyState){e.next=3;break}return e.next=3,new Promise((function(e){window.addEventListener("load",e)}));case 3:"undefined"===typeof(t=this.opts).display_element?(null===document.querySelector("body")&&document.documentElement.appendChild(document.createElement("body")),document.querySelector("html").style.height="100%",document.querySelector("body").style.margin="0px",document.querySelector("body").style.height="100%",document.querySelector("body").style.width="100%",t.display_element=document.querySelector("body")):null===(n=t.display_element instanceof Element?t.display_element:document.querySelector("#"+t.display_element))?console.error("The display_element specified in initJsPsych() does not exist in the DOM."):t.display_element=n,t.display_element.innerHTML='<div class="jspsych-content-wrapper"><div id="jspsych-content"></div></div>',this.DOM_container=t.display_element,this.DOM_target=document.querySelector("#jspsych-content"),null!==t.experiment_width&&(this.DOM_target.style.width=t.experiment_width+"px"),t.display_element.tabIndex=0,-1===t.display_element.className.indexOf("jspsych-display-element")&&(t.display_element.className+=" jspsych-display-element"),this.DOM_target.className+="jspsych-content",this.data.createInteractionListeners(),window.addEventListener("beforeunload",t.on_close);case 14:case"end":return e.stop()}}),e,this)})))}},{key:"loadExtensions",value:function(e){return qe(this,void 0,void 0,a().mark((function t(){var n=this;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Promise.all(e.map((function(e){return n.extensions[e.type.info.name].initialize(e.params||{})})));case 3:t.next=9;break;case 5:throw t.prev=5,t.t0=t.catch(0),console.error(t.t0),new Error(t.t0);case 9:case"end":return t.stop()}}),t,null,[[0,5]])})))}},{key:"startExperiment",value:function(){var e=this;this.finished=new Promise((function(t){e.resolveFinishedPromise=t})),!0===this.opts.show_progress_bar&&this.drawProgressBar(this.opts.message_progress_bar),this.exp_start_time=new Date,this.timeline.advance(),this.doTrial(this.timeline.trial())}},{key:"finishExperiment",value:function(){var e=this,t=this.opts.on_finish(this.data.get()),n=function(){"undefined"!==typeof e.timeline.end_message&&(e.DOM_target.innerHTML=e.timeline.end_message),e.resolveFinishedPromise()};t?Promise.resolve(t).then(n):n()}},{key:"nextTrial",value:function(){if(this.paused)this.waiting=!0;else{this.global_trial_index++,this.timeline.markCurrentTrialComplete();var e=this.timeline.advance();!0===this.opts.show_progress_bar&&!0===this.opts.auto_update_progress_bar&&this.updateProgressBar(),e?this.finishExperiment():this.doTrial(this.timeline.trial())}}},{key:"doTrial",value:function(e){var t,n=this;if(this.current_trial=e,this.current_trial_finished=!1,this.evaluateTimelineVariables(e),"string"===typeof e.type)throw new Be("A string was provided as the trial's `type` parameter. Since jsPsych v7, the `type` parameter needs to be a plugin object.");if(e.type=Object.assign(Object.assign({},Ue(new e.type(this))),{info:e.type.info}),this.evaluateFunctionParameters(e),this.setDefaultValues(e),this.internal.call_immediate=!0,this.opts.on_trial_start(e),"function"===typeof e.on_start&&e.on_start(e),Array.isArray(e.extensions)){var r,i=Fe(e.extensions);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.extensions[a.type.info.name].on_start(a.params)}}catch(l){i.e(l)}finally{i.f()}}(this.DOM_container.focus(),this.DOM_target.scrollTop=0,"undefined"!==typeof e.css_classes)&&(Array.isArray(e.css_classes)||"string"!==typeof e.css_classes||(e.css_classes=[e.css_classes]),Array.isArray(e.css_classes)&&(t=this.DOM_target.classList).add.apply(t,Te(e.css_classes)));var o,u,s=function(){if("function"===typeof e.on_load&&e.on_load(),Array.isArray(e.extensions)){var t,r=Fe(e.extensions);try{for(r.s();!(t=r.n()).done;){var i=t.value;n.extensions[i.type.info.name].on_load(i.params)}}catch(l){r.e(l)}finally{r.f()}}};(this.simulation_mode||(o=e.type.trial(this.DOM_target,e,s)),this.simulation_mode)&&(e.type.simulate?(e.simulation_options||(u=this.simulation_options.default),e.simulation_options&&("string"==typeof e.simulation_options?this.simulation_options[e.simulation_options]?u=this.simulation_options[e.simulation_options]:this.simulation_options.default?(console.log('No matching simulation options found for "'.concat(e.simulation_options,'". Using "default" options.')),u=this.simulation_options.default):(console.log('No matching simulation options found for "'.concat(e.simulation_options,'" and no "default" options provided. Using the default values provided by the plugin.')),u={}):u=e.simulation_options),u=this.utils.deepCopy(u),o=!1===(null===(u=this.replaceFunctionsWithValues(u,null))||void 0===u?void 0:u.simulate)?e.type.trial(this.DOM_target,e,s):e.type.simulate(e,(null===u||void 0===u?void 0:u.mode)||this.simulation_mode,u,s)):o=e.type.trial(this.DOM_target,e,s));o&&"function"==typeof o.then||this.simulation_mode||s(),this.internal.call_immediate=!1}},{key:"evaluateTimelineVariables",value:function(e){for(var t=0,n=Object.keys(e);t<n.length;t++){var r=n[t];"object"===typeof e[r]&&null!==e[r]&&"undefined"!==typeof e[r].timelineVariablePlaceholder&&(e[r]=e[r].timelineVariableFunction()),"object"===typeof e[r]&&null!==e[r]&&this.evaluateTimelineVariables(e[r])}}},{key:"evaluateFunctionParameters",value:function(e){this.internal.call_immediate=!0;for(var t=0,n=Object.keys(e);t<n.length;t++){var r=n[t];"type"!==r&&("undefined"!==typeof Je[r]&&Je[r].type!==We.FUNCTION&&(e[r]=this.replaceFunctionsWithValues(e[r],null)),"undefined"!==typeof e.type.info.parameters[r]&&e.type.info.parameters[r].type!==We.FUNCTION&&(e[r]=this.replaceFunctionsWithValues(e[r],e.type.info.parameters[r])))}this.internal.call_immediate=!1}},{key:"replaceFunctionsWithValues",value:function(e,t){if(null===e)return e;if(Array.isArray(e))for(var n=0;n<e.length;n++)e[n]=this.replaceFunctionsWithValues(e[n],t);else if("object"===typeof e)if(null!==t&&t.nested)for(var r=0,i=Object.keys(e);r<i.length;r++){var a=i[r];"object"===typeof t.nested[a]&&t.nested[a].type!==We.FUNCTION&&(e[a]=this.replaceFunctionsWithValues(e[a],t.nested[a]))}else for(var o=0,u=Object.keys(e);o<u.length;o++){var s=u[o];"type"!==s&&(e[s]=this.replaceFunctionsWithValues(e[s],null))}else if("function"===typeof e)return e();return e}},{key:"setDefaultValues",value:function(e){var t=function(t){e.type.info.parameters[t].type===We.COMPLEX?!0===e.type.info.parameters[t].array&&e[t].forEach((function(n,r){for(var i in e.type.info.parameters[t].nested)"undefined"!==typeof e[t][r][i]&&null!==e[t][r][i]||("undefined"===typeof e.type.info.parameters[t].nested[i].default?console.error("You must specify a value for the "+i+" parameter (nested in the "+t+" parameter) in the "+e.type+" plugin."):e[t][r][i]=e.type.info.parameters[t].nested[i].default)})):"undefined"!==typeof e[t]&&null!==e[t]||("undefined"===typeof e.type.info.parameters[t].default?console.error("You must specify a value for the "+t+" parameter in the "+e.type.info.name+" plugin."):e[t]=e.type.info.parameters[t].default)};for(var n in e.type.info.parameters)t(n)}},{key:"checkExclusions",value:function(e){return qe(this,void 0,void 0,a().mark((function t(){var n,r;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((e.min_width||e.min_height||e.audio)&&console.warn("The exclusions option in `initJsPsych()` is deprecated and will be removed in a future version. We recommend using the browser-check plugin instead. See https://www.jspsych.org/latest/plugins/browser-check/."),!e.min_width&&!e.min_height){t.next=12;break}if(n=e.min_width||0,r=e.min_height||0,!(window.innerWidth<n||window.innerHeight<r)){t.next=12;break}this.getDisplayElement().innerHTML="<p>Your browser window is too small to complete this experiment. Please maximize the size of your browser window. If your browser window is already maximized, you will not be able to complete this experiment.</p><p>The minimum width is "+n+"px. Your current width is "+window.innerWidth+"px.</p><p>The minimum height is "+r+"px. Your current height is "+window.innerHeight+"px.</p>";case 6:if(!(window.innerWidth<n||window.innerHeight<r)){t.next=11;break}return t.next=9,wt(100);case 9:t.next=6;break;case 11:this.getDisplayElement().innerHTML="";case 12:if("undefined"===typeof e.audio||!e.audio){t.next=16;break}if(window.hasOwnProperty("AudioContext")||window.hasOwnProperty("webkitAudioContext")){t.next=16;break}throw this.getDisplayElement().innerHTML="<p>Your browser does not support the WebAudio API, which means that you will not be able to complete the experiment.</p><p>Browsers that support the WebAudio API include Chrome, Firefox, Safari, and Edge.</p>",new Error;case 16:case"end":return t.stop()}}),t,this)})))}},{key:"drawProgressBar",value:function(e){document.querySelector(".jspsych-display-element").insertAdjacentHTML("afterbegin",'<div id="jspsych-progressbar-container"><span>'+e+'</span><div id="jspsych-progressbar-outer"><div id="jspsych-progressbar-inner"></div></div></div>')}},{key:"updateProgressBar",value:function(){this.setProgressBar(this.getProgress().percent_complete/100)}},{key:"setProgressBar",value:function(e){e=Math.max(Math.min(1,e),0),document.querySelector("#jspsych-progressbar-inner").style.width=100*e+"%",this.progress_bar_amount=e}},{key:"getProgressBarCompleted",value:function(){return this.progress_bar_amount}}]),e}();function _t(e){var t=new kt(e);return Object.defineProperties(t,Object.fromEntries(Object.entries({init:"`jsPsych.init()` was replaced by `initJsPsych()` in jsPsych v7.",ALL_KEYS:'jsPsych.ALL_KEYS was replaced by the "ALL_KEYS" string in jsPsych v7.',NO_KEYS:'jsPsych.NO_KEYS was replaced by the "NO_KEYS" string in jsPsych v7.',currentTimelineNodeID:"`currentTimelineNodeID()` was renamed to `getCurrentTimelineNodeID()` in jsPsych v7.",progress:"`progress()` was renamed to `getProgress()` in jsPsych v7.",startTime:"`startTime()` was renamed to `getStartTime()` in jsPsych v7.",totalTime:"`totalTime()` was renamed to `getTotalTime()` in jsPsych v7.",currentTrial:"`currentTrial()` was renamed to `getCurrentTrial()` in jsPsych v7.",initSettings:"`initSettings()` was renamed to `getInitSettings()` in jsPsych v7.",allTimelineVariables:"`allTimelineVariables()` was renamed to `getAllTimelineVariables()` in jsPsych v7."}).map((function(e){var t=c(e,2),n=t[0],r=t[1];return[n,{get:function(){throw new Be(r)}}]})))),t}"undefined"!==typeof window&&window.hasOwnProperty("webkitAudioContext")&&!window.hasOwnProperty("AudioContext")&&(window.AudioContext=webkitAudioContext);var xt=n(763),Et=n.n(xt),Tt=n(141);function St(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function It(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?St(Object(n),!0).forEach((function(t){Ee(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):St(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ct={name:"html-keyboard-response",parameters:{stimulus:{type:We.HTML_STRING,pretty_name:"Stimulus",default:void 0},choices:{type:We.KEYS,pretty_name:"Choices",default:"ALL_KEYS"},prompt:{type:We.HTML_STRING,pretty_name:"Prompt",default:null},stimulus_duration:{type:We.INT,pretty_name:"Stimulus duration",default:null},trial_duration:{type:We.INT,pretty_name:"Trial duration",default:null},response_ends_trial:{type:We.BOOL,pretty_name:"Response ends trial",default:!0}}},At=function(){function e(t){Ce(this,e),this.jsPsych=t}return Ie(e,[{key:"trial",value:function(e,t){var n=this,r='<div id="jspsych-html-keyboard-response-stimulus">'+t.stimulus+"</div>";null!==t.prompt&&(r+=t.prompt),e.innerHTML=r;var i={rt:null,key:null},a=function(){n.jsPsych.pluginAPI.clearAllTimeouts(),"undefined"!==typeof o&&n.jsPsych.pluginAPI.cancelKeyboardResponse(o);var r={rt:i.rt,stimulus:t.stimulus,response:i.key};e.innerHTML="",n.jsPsych.finishTrial(r)};if("NO_KEYS"!=t.choices)var o=this.jsPsych.pluginAPI.getKeyboardResponse({callback_function:function(n){e.querySelector("#jspsych-html-keyboard-response-stimulus").className+=" responded",null==i.key&&(i=n),t.response_ends_trial&&a()},valid_responses:t.choices,rt_method:"performance",persist:!1,allow_held_key:!1});null!==t.stimulus_duration&&this.jsPsych.pluginAPI.setTimeout((function(){e.querySelector("#jspsych-html-keyboard-response-stimulus").style.visibility="hidden"}),t.stimulus_duration),null!==t.trial_duration&&this.jsPsych.pluginAPI.setTimeout(a,t.trial_duration)}},{key:"simulate",value:function(e,t,n,r){"data-only"==t&&(r(),this.simulate_data_only(e,n)),"visual"==t&&this.simulate_visual(e,n,r)}},{key:"create_simulation_data",value:function(e,t){var n={stimulus:e.stimulus,rt:this.jsPsych.randomization.sampleExGaussian(500,50,1/150,!0),response:this.jsPsych.pluginAPI.getValidKey(e.choices)},r=this.jsPsych.pluginAPI.mergeSimulationData(n,t);return this.jsPsych.pluginAPI.ensureSimulationDataConsistency(e,r),r}},{key:"simulate_data_only",value:function(e,t){var n=this.create_simulation_data(e,t);this.jsPsych.finishTrial(n)}},{key:"simulate_visual",value:function(e,t,n){var r=this.create_simulation_data(e,t),i=this.jsPsych.getDisplayElement();this.trial(i,e),n(),null!==r.rt&&this.jsPsych.pluginAPI.pressKey(r.response,r.rt)}}]),e}();function Dt(e){var t=It(It({},{duration:1e3,stimulus:"",message:"",time:3}),e),n=t.duration,r=t.message,i=t.stimulus,a=t.time,o=""!==r?"<h3>".concat(r,"</h3>"):i,u=(0,xt.range)(a,0,-1).map((function(e){return{prompt:"<h1>".concat(e,"</h1>")}}));return{type:At,stimulus:o,trial_duration:n,response_ends_trial:!1,timeline:u}}At.info=Ct;var Nt={name:"html-button-response",parameters:{stimulus:{type:We.HTML_STRING,pretty_name:"Stimulus",default:void 0},choices:{type:We.STRING,pretty_name:"Choices",default:void 0,array:!0},button_html:{type:We.HTML_STRING,pretty_name:"Button HTML",default:'<button class="jspsych-btn">%choice%</button>',array:!0},prompt:{type:We.HTML_STRING,pretty_name:"Prompt",default:null},stimulus_duration:{type:We.INT,pretty_name:"Stimulus duration",default:null},trial_duration:{type:We.INT,pretty_name:"Trial duration",default:null},margin_vertical:{type:We.STRING,pretty_name:"Margin vertical",default:"0px"},margin_horizontal:{type:We.STRING,pretty_name:"Margin horizontal",default:"8px"},response_ends_trial:{type:We.BOOL,pretty_name:"Response ends trial",default:!0}}},Pt=function(){function e(t){Ce(this,e),this.jsPsych=t}return Ie(e,[{key:"trial",value:function(e,t){var n=this,r='<div id="jspsych-html-button-response-stimulus">'+t.stimulus+"</div>",i=[];if(Array.isArray(t.button_html))t.button_html.length==t.choices.length?i=t.button_html:console.error("Error in html-button-response plugin. The length of the button_html array does not equal the length of the choices array");else for(var a=0;a<t.choices.length;a++)i.push(t.button_html);r+='<div id="jspsych-html-button-response-btngroup">';for(a=0;a<t.choices.length;a++){var o=i[a].replace(/%choice%/g,t.choices[a]);r+='<div class="jspsych-html-button-response-button" style="display: inline-block; margin:'+t.margin_vertical+" "+t.margin_horizontal+'" id="jspsych-html-button-response-button-'+a+'" data-choice="'+a+'">'+o+"</div>"}r+="</div>",null!==t.prompt&&(r+=t.prompt),e.innerHTML=r;var u=performance.now();for(a=0;a<t.choices.length;a++)e.querySelector("#jspsych-html-button-response-button-"+a).addEventListener("click",(function(e){c(e.currentTarget.getAttribute("data-choice"))}));var s={rt:null,button:null},l=function(){n.jsPsych.pluginAPI.clearAllTimeouts();var r={rt:s.rt,stimulus:t.stimulus,response:s.button};e.innerHTML="",n.jsPsych.finishTrial(r)};function c(n){var r=performance.now(),i=Math.round(r-u);s.button=parseInt(n),s.rt=i,e.querySelector("#jspsych-html-button-response-stimulus").className+=" responded";for(var a=document.querySelectorAll(".jspsych-html-button-response-button button"),o=0;o<a.length;o++)a[o].setAttribute("disabled","disabled");t.response_ends_trial&&l()}null!==t.stimulus_duration&&this.jsPsych.pluginAPI.setTimeout((function(){e.querySelector("#jspsych-html-button-response-stimulus").style.visibility="hidden"}),t.stimulus_duration),null!==t.trial_duration&&this.jsPsych.pluginAPI.setTimeout(l,t.trial_duration)}},{key:"simulate",value:function(e,t,n,r){"data-only"==t&&(r(),this.simulate_data_only(e,n)),"visual"==t&&this.simulate_visual(e,n,r)}},{key:"create_simulation_data",value:function(e,t){var n={stimulus:e.stimulus,rt:this.jsPsych.randomization.sampleExGaussian(500,50,1/150,!0),response:this.jsPsych.randomization.randomInt(0,e.choices.length-1)},r=this.jsPsych.pluginAPI.mergeSimulationData(n,t);return this.jsPsych.pluginAPI.ensureSimulationDataConsistency(e,r),r}},{key:"simulate_data_only",value:function(e,t){var n=this.create_simulation_data(e,t);this.jsPsych.finishTrial(n)}},{key:"simulate_visual",value:function(e,t,n){var r=this.create_simulation_data(e,t),i=this.jsPsych.getDisplayElement();this.trial(i,e),n(),null!==r.rt&&this.jsPsych.pluginAPI.clickTarget(i.querySelector('div[data-choice="'.concat(r.response,'"] button')),r.rt)}}]),e}();Pt.info=Nt;var Ot=n(485),Lt=n(661);function Rt(e,t){var n=It(It({},{responseType:At,duration:t.responseType&&t.responseType.name==Pt.name?null:1e3,stimulus:"",message:"",onstart:!1,responseEndsTrial:!1,taskCode:1,numBlinks:1,buttons:t.responseType&&t.responseType.name==At.name?null:["OK"]}),t),r=n.responseType,i=n.duration,a=n.message,o=n.stimulus,u=n.onstart,s=n.responseEndsTrial,l=n.taskCode,c=n.numBlinks,f=n.buttons,h=""!==a?u?(0,Lt.baseStimulus)("<h1>".concat(a,"</h1>"),!0,!0):(0,Lt.baseStimulus)("<h1>".concat(a,"</h1>"),!0):o;return e.USE_PHOTODIODE&&(h+=(0,Ot.photodiodeGhostBox)()),{type:r,stimulus:u?"":h,trial_duration:i,response_ends_trial:s,choices:f,on_start:function(e){u&&(e.stimulus=h)},on_load:function(){return(0,Ot.pdSpotEncode)(l,c,e)},on_finish:function(e){return e.code=l}}}function jt(e,t){var n,r,i=It(It({},{duration:1e3,jitter:50,taskCode:1,numBlinks:1}),t),a=i.duration,o=i.jitter,u=i.taskCode,s=i.numBlinks,l='<div class="center_container"><div id="fixation-dot"> </div></div>';return e.USE_PHOTODIODE&&(l+=(0,Ot.photodiodeGhostBox)()),{type:At,stimulus:l,response_ends_trial:!1,trial_duration:(n=a,r=o,n+Math.floor(Math.random()*Math.floor(r))),on_load:function(){return(0,Ot.pdSpotEncode)(u,s,e)},on_finish:function(e){return e.code=u}}}var Mt={name:"survey-text",parameters:{questions:{type:We.COMPLEX,array:!0,pretty_name:"Questions",default:void 0,nested:{prompt:{type:We.HTML_STRING,pretty_name:"Prompt",default:void 0},placeholder:{type:We.STRING,pretty_name:"Placeholder",default:""},rows:{type:We.INT,pretty_name:"Rows",default:1},columns:{type:We.INT,pretty_name:"Columns",default:40},required:{type:We.BOOL,pretty_name:"Required",default:!1},name:{type:We.STRING,pretty_name:"Question Name",default:""}}},randomize_question_order:{type:We.BOOL,pretty_name:"Randomize Question Order",default:!1},preamble:{type:We.HTML_STRING,pretty_name:"Preamble",default:null},button_label:{type:We.STRING,pretty_name:"Button label",default:"Continue"},autocomplete:{type:We.BOOL,pretty_name:"Allow autocomplete",default:!1}}},Ft=function(){function e(t){Ce(this,e),this.jsPsych=t}return Ie(e,[{key:"trial",value:function(e,t){for(var n=this,r=0;r<t.questions.length;r++)"undefined"==typeof t.questions[r].rows&&(t.questions[r].rows=1);for(r=0;r<t.questions.length;r++)"undefined"==typeof t.questions[r].columns&&(t.questions[r].columns=40);for(r=0;r<t.questions.length;r++)"undefined"==typeof t.questions[r].value&&(t.questions[r].value="");var i="";null!==t.preamble&&(i+='<div id="jspsych-survey-text-preamble" class="jspsych-survey-text-preamble">'+t.preamble+"</div>"),t.autocomplete?i+='<form id="jspsych-survey-text-form">':i+='<form id="jspsych-survey-text-form" autocomplete="off">';var a=[];for(r=0;r<t.questions.length;r++)a.push(r);t.randomize_question_order&&(a=this.jsPsych.randomization.shuffle(a));for(r=0;r<t.questions.length;r++){var o=t.questions[a[r]],u=a[r];i+='<div id="jspsych-survey-text-'+u+'" class="jspsych-survey-text-question" style="margin: 2em 0em;">',i+='<p class="jspsych-survey-text">'+o.prompt+"</p>";var s=0==r?"autofocus":"",l=o.required?"required":"";1==o.rows?i+='<input type="text" id="input-'+u+'"  name="#jspsych-survey-text-response-'+u+'" data-name="'+o.name+'" size="'+o.columns+'" '+s+" "+l+' placeholder="'+o.placeholder+'"></input>':i+='<textarea id="input-'+u+'" name="#jspsych-survey-text-response-'+u+'" data-name="'+o.name+'" cols="'+o.columns+'" rows="'+o.rows+'" '+s+" "+l+' placeholder="'+o.placeholder+'"></textarea>',i+="</div>"}i+='<input type="submit" id="jspsych-survey-text-next" class="jspsych-btn jspsych-survey-text" value="'+t.button_label+'"></input>',i+="</form>",e.innerHTML=i,e.querySelector("#input-"+a[0]).focus(),e.querySelector("#jspsych-survey-text-form").addEventListener("submit",(function(r){r.preventDefault();for(var i=performance.now(),a=Math.round(i-c),o={},u=0;u<t.questions.length;u++){var s="Q"+u,l=document.querySelector("#jspsych-survey-text-"+u).querySelector("textarea, input"),f=l.value,h=l.attributes["data-name"].value;""==h&&(h=s);var d={};d[h]=f,Object.assign(o,d)}var p={rt:a,response:o};e.innerHTML="",n.jsPsych.finishTrial(p)}));var c=performance.now()}},{key:"simulate",value:function(e,t,n,r){"data-only"==t&&(r(),this.simulate_data_only(e,n)),"visual"==t&&this.simulate_visual(e,n,r)}},{key:"create_simulation_data",value:function(e,t){var n,r={},i=1e3,a=Fe(e.questions);try{for(a.s();!(n=a.n()).done;){var o=n.value,u=o.name?o.name:"Q".concat(e.questions.indexOf(o)),s=1==o.rows?this.jsPsych.randomization.sampleExponential(.25):this.jsPsych.randomization.randomInt(1,10)*o.rows;r[u]=this.jsPsych.randomization.randomWords({exactly:s,join:" "}),i+=this.jsPsych.randomization.sampleExGaussian(2e3,400,.004,!0)}}catch(f){a.e(f)}finally{a.f()}var l={response:r,rt:i},c=this.jsPsych.pluginAPI.mergeSimulationData(l,t);return this.jsPsych.pluginAPI.ensureSimulationDataConsistency(e,c),c}},{key:"simulate_data_only",value:function(e,t){var n=this.create_simulation_data(e,t);this.jsPsych.finishTrial(n)}},{key:"simulate_visual",value:function(e,t,n){var r=this.create_simulation_data(e,t),i=this.jsPsych.getDisplayElement();this.trial(i,e),n();for(var a=Object.entries(r.response).map((function(e){return e[1]})),o=0;o<a.length;o++)this.jsPsych.pluginAPI.fillTextInput(i.querySelector("#input-".concat(o)),a[o],(r.rt-1e3)/a.length*(o+1));this.jsPsych.pluginAPI.clickTarget(i.querySelector("#jspsych-survey-text-next"),r.rt)}}]),e}();Ft.info=Mt;var qt={name:"image-keyboard-response",parameters:{stimulus:{type:We.IMAGE,pretty_name:"Stimulus",default:void 0},stimulus_height:{type:We.INT,pretty_name:"Image height",default:null},stimulus_width:{type:We.INT,pretty_name:"Image width",default:null},maintain_aspect_ratio:{type:We.BOOL,pretty_name:"Maintain aspect ratio",default:!0},choices:{type:We.KEYS,pretty_name:"Choices",default:"ALL_KEYS"},prompt:{type:We.HTML_STRING,pretty_name:"Prompt",default:null},stimulus_duration:{type:We.INT,pretty_name:"Stimulus duration",default:null},trial_duration:{type:We.INT,pretty_name:"Trial duration",default:null},response_ends_trial:{type:We.BOOL,pretty_name:"Response ends trial",default:!0},render_on_canvas:{type:We.BOOL,pretty_name:"Render on canvas",default:!0}}},Vt=function(){function e(t){Ce(this,e),this.jsPsych=t}return Ie(e,[{key:"trial",value:function(e,t){var n,r,i=this;if(t.render_on_canvas){var a=!1;if(e.hasChildNodes())for(;e.firstChild;)e.removeChild(e.firstChild);var o=document.createElement("canvas");o.id="jspsych-image-keyboard-response-stimulus",o.style.margin="0",o.style.padding="0";var u=o.getContext("2d");(c=new Image).onload=function(){a||(s(),u.drawImage(c,0,0,r,n))},c.src=t.stimulus;var s=function(){null!==t.stimulus_height?(n=t.stimulus_height,null==t.stimulus_width&&t.maintain_aspect_ratio&&(r=c.naturalWidth*(t.stimulus_height/c.naturalHeight))):n=c.naturalHeight,null!==t.stimulus_width?(r=t.stimulus_width,null==t.stimulus_height&&t.maintain_aspect_ratio&&(n=c.naturalHeight*(t.stimulus_width/c.naturalWidth))):null!==t.stimulus_height&&t.maintain_aspect_ratio||(r=c.naturalWidth),o.height=n,o.width=r};s(),e.insertBefore(o,null),c.complete&&Number.isFinite(r)&&Number.isFinite(n)&&(u.drawImage(c,0,0,r,n),a=!0),null!==t.prompt&&e.insertAdjacentHTML("beforeend",t.prompt)}else{var l='<img src="'+t.stimulus+'" id="jspsych-image-keyboard-response-stimulus">';null!==t.prompt&&(l+=t.prompt),e.innerHTML=l;var c=e.querySelector("#jspsych-image-keyboard-response-stimulus");null!==t.stimulus_height?(n=t.stimulus_height,null==t.stimulus_width&&t.maintain_aspect_ratio&&(r=c.naturalWidth*(t.stimulus_height/c.naturalHeight))):n=c.naturalHeight,null!==t.stimulus_width?(r=t.stimulus_width,null==t.stimulus_height&&t.maintain_aspect_ratio&&(n=c.naturalHeight*(t.stimulus_width/c.naturalWidth))):null!==t.stimulus_height&&t.maintain_aspect_ratio||(r=c.naturalWidth),c.style.height=n.toString()+"px",c.style.width=r.toString()+"px"}var f={rt:null,key:null},h=function(){i.jsPsych.pluginAPI.clearAllTimeouts(),"undefined"!==typeof d&&i.jsPsych.pluginAPI.cancelKeyboardResponse(d);var n={rt:f.rt,stimulus:t.stimulus,response:f.key};e.innerHTML="",i.jsPsych.finishTrial(n)};if("NO_KEYS"!=t.choices)var d=this.jsPsych.pluginAPI.getKeyboardResponse({callback_function:function(n){e.querySelector("#jspsych-image-keyboard-response-stimulus").className+=" responded",null==f.key&&(f=n),t.response_ends_trial&&h()},valid_responses:t.choices,rt_method:"performance",persist:!1,allow_held_key:!1});null!==t.stimulus_duration&&this.jsPsych.pluginAPI.setTimeout((function(){e.querySelector("#jspsych-image-keyboard-response-stimulus").style.visibility="hidden"}),t.stimulus_duration),null!==t.trial_duration?this.jsPsych.pluginAPI.setTimeout((function(){h()}),t.trial_duration):!1===t.response_ends_trial&&console.warn("The experiment may be deadlocked. Try setting a trial duration or set response_ends_trial to true.")}},{key:"simulate",value:function(e,t,n,r){"data-only"==t&&(r(),this.simulate_data_only(e,n)),"visual"==t&&this.simulate_visual(e,n,r)}},{key:"simulate_data_only",value:function(e,t){var n=this.create_simulation_data(e,t);this.jsPsych.finishTrial(n)}},{key:"simulate_visual",value:function(e,t,n){var r=this.create_simulation_data(e,t),i=this.jsPsych.getDisplayElement();this.trial(i,e),n(),null!==r.rt&&this.jsPsych.pluginAPI.pressKey(r.response,r.rt)}},{key:"create_simulation_data",value:function(e,t){var n={stimulus:e.stimulus,rt:this.jsPsych.randomization.sampleExGaussian(500,50,1/150,!0),response:this.jsPsych.pluginAPI.getValidKey(e.choices)},r=this.jsPsych.pluginAPI.mergeSimulationData(n,t);return this.jsPsych.pluginAPI.ensureSimulationDataConsistency(e,r),r}}]),e}();Vt.info=qt;var Ut=n(890),Bt=n.n(Ut);var zt={name:"html-slider-response",parameters:{stimulus:{type:We.HTML_STRING,pretty_name:"Stimulus",default:void 0},min:{type:We.INT,pretty_name:"Min slider",default:0},max:{type:We.INT,pretty_name:"Max slider",default:100},slider_start:{type:We.INT,pretty_name:"Slider starting value",default:50},step:{type:We.INT,pretty_name:"Step",default:1},labels:{type:We.HTML_STRING,pretty_name:"Labels",default:[],array:!0},slider_width:{type:We.INT,pretty_name:"Slider width",default:null},button_label:{type:We.STRING,pretty_name:"Button label",default:"Continue",array:!1},require_movement:{type:We.BOOL,pretty_name:"Require movement",default:!1},prompt:{type:We.HTML_STRING,pretty_name:"Prompt",default:null},stimulus_duration:{type:We.INT,pretty_name:"Stimulus duration",default:null},trial_duration:{type:We.INT,pretty_name:"Trial duration",default:null},response_ends_trial:{type:We.BOOL,pretty_name:"Response ends trial",default:!0}}},Ht=function(){function e(t){Ce(this,e),this.jsPsych=t}return Ie(e,[{key:"trial",value:function(e,t){var n=this,r='<div id="jspsych-html-slider-response-wrapper" style="margin: 100px 0px;">';r+='<div id="jspsych-html-slider-response-stimulus">'+t.stimulus+"</div>",r+='<div class="jspsych-html-slider-response-container" style="position:relative; margin: 0 auto 3em auto; ',null!==t.slider_width?r+="width:"+t.slider_width+"px;":r+="width:auto;",r+='">',r+='<input type="range" class="jspsych-slider" value="'+t.slider_start+'" min="'+t.min+'" max="'+t.max+'" step="'+t.step+'" id="jspsych-html-slider-response-response"></input>',r+="<div>";for(var i=0;i<t.labels.length;i++){var a=100/(t.labels.length-1),o=i*(100/(t.labels.length-1));r+='<div style="border: 1px solid transparent; display: inline-block; position: absolute; left:calc('+o+"% - ("+a+"% / 2) - "+7.5*((o-50)/50*100)/100+"px); text-align: center; width: "+a+'%;">',r+='<span style="text-align: center; font-size: 80%;">'+t.labels[i]+"</span>",r+="</div>"}r+="</div>",r+="</div>",r+="</div>",null!==t.prompt&&(r+=t.prompt),r+='<button id="jspsych-html-slider-response-next" class="jspsych-btn" '+(t.require_movement?"disabled":"")+">"+t.button_label+"</button>",e.innerHTML=r;var u={rt:null,response:null};if(t.require_movement){var s=function(){e.querySelector("#jspsych-html-slider-response-next").disabled=!1};e.querySelector("#jspsych-html-slider-response-response").addEventListener("mousedown",s),e.querySelector("#jspsych-html-slider-response-response").addEventListener("touchstart",s),e.querySelector("#jspsych-html-slider-response-response").addEventListener("change",s)}var l=function(){n.jsPsych.pluginAPI.clearAllTimeouts();var r={rt:u.rt,stimulus:t.stimulus,slider_start:t.slider_start,response:u.response};e.innerHTML="",n.jsPsych.finishTrial(r)};e.querySelector("#jspsych-html-slider-response-next").addEventListener("click",(function(){var n=performance.now();u.rt=Math.round(n-c),u.response=e.querySelector("#jspsych-html-slider-response-response").valueAsNumber,t.response_ends_trial?l():e.querySelector("#jspsych-html-slider-response-next").disabled=!0})),null!==t.stimulus_duration&&this.jsPsych.pluginAPI.setTimeout((function(){e.querySelector("#jspsych-html-slider-response-stimulus").style.visibility="hidden"}),t.stimulus_duration),null!==t.trial_duration&&this.jsPsych.pluginAPI.setTimeout(l,t.trial_duration);var c=performance.now()}},{key:"simulate",value:function(e,t,n,r){"data-only"==t&&(r(),this.simulate_data_only(e,n)),"visual"==t&&this.simulate_visual(e,n,r)}},{key:"create_simulation_data",value:function(e,t){var n={stimulus:e.stimulus,slider_start:e.slider_start,response:this.jsPsych.randomization.randomInt(e.min,e.max),rt:this.jsPsych.randomization.sampleExGaussian(500,50,1/150,!0)},r=this.jsPsych.pluginAPI.mergeSimulationData(n,t);return this.jsPsych.pluginAPI.ensureSimulationDataConsistency(e,r),r}},{key:"simulate_data_only",value:function(e,t){var n=this.create_simulation_data(e,t);this.jsPsych.finishTrial(n)}},{key:"simulate_visual",value:function(e,t,n){var r=this,i=this.create_simulation_data(e,t),a=this.jsPsych.getDisplayElement();if(this.trial(a,e),n(),null!==i.rt){var o=a.querySelector("input[type='range']");setTimeout((function(){r.jsPsych.pluginAPI.clickTarget(o),o.valueAsNumber=i.response}),i.rt/2),this.jsPsych.pluginAPI.clickTarget(a.querySelector("button"),i.rt)}}}]),e}();function Kt(e){var t=It(It({},{preamble:"",stimulus:"",message:""}),e),n=t.preamble,r=t.stimulus,i=t.message,a=""!==i?(0,Lt.baseStimulus)("<h1>".concat(i,"</h1>"),!0):r;return{type:Ft,preamble:n,questions:[{prompt:a,required:!0}],on_finish:function(e){window.scrollTo(0,0),e.prompt=[a],e.answer=e.response.Q0}}}Ht.info=zt;var Gt={name:"survey-multi-choice",parameters:{questions:{type:We.COMPLEX,array:!0,pretty_name:"Questions",nested:{prompt:{type:We.HTML_STRING,pretty_name:"Prompt",default:void 0},options:{type:We.STRING,pretty_name:"Options",array:!0,default:void 0},required:{type:We.BOOL,pretty_name:"Required",default:!1},horizontal:{type:We.BOOL,pretty_name:"Horizontal",default:!1},name:{type:We.STRING,pretty_name:"Question Name",default:""}}},randomize_question_order:{type:We.BOOL,pretty_name:"Randomize Question Order",default:!1},preamble:{type:We.HTML_STRING,pretty_name:"Preamble",default:null},button_label:{type:We.STRING,pretty_name:"Button label",default:"Continue"},autocomplete:{type:We.BOOL,pretty_name:"Allow autocomplete",default:!1}}},Wt=function(){function e(t){Ce(this,e),this.jsPsych=t}return Ie(e,[{key:"trial",value:function(e,t){var n=this,r="jspsych-survey-multi-choice",i="";i+='<style id="jspsych-survey-multi-choice-css">',i+=".jspsych-survey-multi-choice-question { margin-top: 2em; margin-bottom: 2em; text-align: left; }.jspsych-survey-multi-choice-text span.required {color: darkred;}.jspsych-survey-multi-choice-horizontal .jspsych-survey-multi-choice-text {  text-align: center;}.jspsych-survey-multi-choice-option { line-height: 2; }.jspsych-survey-multi-choice-horizontal .jspsych-survey-multi-choice-option {  display: inline-block;  margin-left: 1em;  margin-right: 1em;  vertical-align: top;}label.jspsych-survey-multi-choice-text input[type='radio'] {margin-right: 1em;}",i+="</style>",null!==t.preamble&&(i+='<div id="jspsych-survey-multi-choice-preamble" class="jspsych-survey-multi-choice-preamble">'+t.preamble+"</div>"),t.autocomplete?i+='<form id="jspsych-survey-multi-choice-form">':i+='<form id="jspsych-survey-multi-choice-form" autocomplete="off">';for(var a=[],o=0;o<t.questions.length;o++)a.push(o);t.randomize_question_order&&(a=this.jsPsych.randomization.shuffle(a));for(o=0;o<t.questions.length;o++){var u=t.questions[a[o]],s=a[o],l=["jspsych-survey-multi-choice-question"];u.horizontal&&l.push("jspsych-survey-multi-choice-horizontal"),i+='<div id="jspsych-survey-multi-choice-'+s+'" class="'+l.join(" ")+'"  data-name="'+u.name+'">',i+='<p class="jspsych-survey-multi-choice-text survey-multi-choice">'+u.prompt,u.required&&(i+="<span class='required'>*</span>"),i+="</p>";for(var c=0;c<u.options.length;c++){var f="jspsych-survey-multi-choice-option-"+s+"-"+c,h="jspsych-survey-multi-choice-response-"+s,d="jspsych-survey-multi-choice-response-"+s+"-"+c,p=u.required?"required":"";i+='<div id="'+f+'" class="jspsych-survey-multi-choice-option">',i+='<label class="jspsych-survey-multi-choice-text" for="'+d+'">',i+='<input type="radio" name="'+h+'" id="'+d+'" value="'+u.options[c]+'" '+p+"></input>",i+=u.options[c]+"</label>",i+="</div>"}i+="</div>"}i+='<input type="submit" id="'+r+'-next" class="'+r+' jspsych-btn"'+(t.button_label?' value="'+t.button_label+'"':"")+"></input>",i+="</form>",e.innerHTML=i,document.querySelector("form").addEventListener("submit",(function(r){r.preventDefault();for(var i=performance.now(),o=Math.round(i-v),u={},s=0;s<t.questions.length;s++){var l,c=e.querySelector("#jspsych-survey-multi-choice-"+s),f="Q"+s;l=null!==c.querySelector("input[type=radio]:checked")?c.querySelector("input[type=radio]:checked").value:"";var h={},d=f;""!==c.attributes["data-name"].value&&(d=c.attributes["data-name"].value),h[d]=l,Object.assign(u,h)}var p={rt:o,response:u,question_order:a};e.innerHTML="",n.jsPsych.finishTrial(p)}));var v=performance.now()}},{key:"simulate",value:function(e,t,n,r){"data-only"==t&&(r(),this.simulate_data_only(e,n)),"visual"==t&&this.simulate_visual(e,n,r)}},{key:"create_simulation_data",value:function(e,t){var n,r={},i=1e3,a=Fe(e.questions);try{for(a.s();!(n=a.n()).done;){var o=n.value;r[o.name?o.name:"Q".concat(e.questions.indexOf(o))]=this.jsPsych.randomization.sampleWithoutReplacement(o.options,1)[0],i+=this.jsPsych.randomization.sampleExGaussian(1500,400,.005,!0)}}catch(l){a.e(l)}finally{a.f()}var u={response:r,rt:i,question_order:e.randomize_question_order?this.jsPsych.randomization.shuffle(Te(Array(e.questions.length).keys())):Te(Array(e.questions.length).keys())},s=this.jsPsych.pluginAPI.mergeSimulationData(u,t);return this.jsPsych.pluginAPI.ensureSimulationDataConsistency(e,s),s}},{key:"simulate_data_only",value:function(e,t){var n=this.create_simulation_data(e,t);this.jsPsych.finishTrial(n)}},{key:"simulate_visual",value:function(e,t,n){var r=this.create_simulation_data(e,t),i=this.jsPsych.getDisplayElement();this.trial(i,e),n();for(var a=Object.entries(r.response),o=0;o<a.length;o++)this.jsPsych.pluginAPI.clickTarget(i.querySelector("#jspsych-survey-multi-choice-response-".concat(o,"-").concat(e.questions[o].options.indexOf(a[o][1]))),(r.rt-1e3)/a.length*(o+1));this.jsPsych.pluginAPI.clickTarget(i.querySelector("#jspsych-survey-multi-choice-next"),r.rt)}}]),e}();function Qt(e){var t=It(It({},{responseType:Wt,preamble:"",prompts:[],ansChoices:{}}),e),n=t.responseType,r=t.preamble,i=t.prompts,a=t.ansChoices,o=[],u=Object.values(a);return i.forEach((function(e,t){var n=1===u.length?u[0]:u[t];o.push({prompt:e,options:n,required:!0})})),{type:n,preamble:r,questions:o,on_finish:function(e){window.scrollTo(0,0),e.prompt=i,e.ans_choices=[a],e.answer=[{answer:e.response}]}}}Wt.info=Gt;var $t={USE_PHOTODIODE:!1,USE_EEG:!1,USE_ELECTRON:!0,USE_MTURK:!1};var Yt,Xt=function(e){return new Promise((function(t){return setTimeout(t,e)}))},Jt=function(e){return JSON.parse(JSON.stringify(e))},Zt=((Yt=n(837)).keys().map(Yt),function(){return function(e){for(var t=window.location.search.substring(1).split("&"),n=0;n<t.length;n++){var r=t[n].split("=");if(decodeURIComponent(r[0])===e)return decodeURIComponent(r[1])}}("PROLIFIC_PID")}),en=JSON.parse('{"u2":"hello-honeycomb","i8":"2.3.1"}'),tn=en.u2,nn=en.i8,rn=_t(),an={frequency:100*(Tt.eventCodes.open_task-9),type:"sine"},on=rn.turk.turkInfo(),un="".concat(on.workerId,":").concat(on.assignmentId),sn=!on.outsideTurk,ln=Zt()&&!sn,cn=!0,fn="true"==={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_USE_PHOTODIODE:"true",REACT_APP_USE_EEG:"true",REACT_APP_VOLUME:"true"}.REACT_APP_FIREBASE;try{window.require("electron")}catch($k){cn=!1}var hn="true"==={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_USE_PHOTODIODE:"true",REACT_APP_USE_EEG:"true",REACT_APP_VOLUME:"true"}.REACT_APP_VIDEO&&cn,dn=cn,pn=cn,vn=n(632);if(!cn){var yn=n(817);Et().merge(vn,yn)}var mn,gn={conditions:["a","b","c"],repeats_per_condition:1,is_practice:!1,is_tutorial:!1,photodiode_active:!1},bn=(mn={USE_PHOTODIODE:pn,USE_EEG:dn,USE_ELECTRON:cn,USE_MTURK:sn,USE_VOLUME:!0,USE_CAMERA:hn,USE_PROLIFIC:ln,USE_FIREBASE:fn},(0,xt.extend)($t,mn)),wn=!1;if(bn.USE_ELECTRON){var kn=window.require("electron");wn=kn.ipcRenderer}var _n=function(){var e=bn.USE_PHOTODIODE?"visible":"invisible";return'<div class="photodiode-box '.concat(e,'" id="photodiode-box">\n\t\t\t\t\t\t\t\t\t<span id="photodiode-spot" class="photodiode-spot"></span>\n  \t\t\t\t\t\t\t\t</div>')},xn=function(e){if(bn.USE_PHOTODIODE){var t=e;e<Tt.eventCodes.open_task&&(t=1),function e(t,n){n>0&&function(e,t){Bt()(".photodiode-spot").css({"background-color":"black"}),setTimeout((function(){Bt()(".photodiode-spot").css({"background-color":"white"}),t()}),e)}(t,(function(){setTimeout((function(){e(t,n-1)}),t)}))}(40,t),wn&&wn.send("trigger",e)}},En=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=n?"center_container":t?"main-prompt":"main";return"<div class=".concat(r,">").concat(e,"</div>")},Tn=function(){var e=u(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",'<span style="color: green;">'.concat(vn.eventMarker.found,"</span>"));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Sn=Tn,In=function(){var e=En("<div><h2 id='usb-alert'></h2></div>",!0)+_n();return{type:Pt,stimulus:e,prompt:["<br><h3>".concat(vn.prompt.focus,"</h3>")],choices:[vn.prompt.continue.button],on_load:function(){return Sn().then((function(e){return document.getElementById("usb-alert").innerHTML=e}))}}},Cn=function(){var e=En("<h1>".concat(vn.prompt.setting_up,"</h1>"),!0)+_n();return{type:At,stimulus:e,trial_duration:2e3,on_load:function(){xn(Tt.eventCodes.open_task),function(e){var t=new AudioContext,n=t.createOscillator(),r=t.createGain();n.type=e.type,n.connect(r),n.frequency.setValueAtTime(e.frequency,0),console.log(t.currentTime),r.connect(t.destination),n.start(),n.stop(t.currentTime+.4)}(an)}}},An=[Rt(bn,{responseType:Pt,message:vn.task.name,responseEndsTrial:!0,buttons:[vn.prompt.continue.button]})];bn.USE_PHOTODIODE&&(An.push(In()),An.push(Cn()));var Dn={type:At,stimulus:"",timeline:An},Nn=function(e){return"<div class='center_container'>\n    <h1 class='text-".concat(e>=0?"success":"danger","'>").concat("$"+parseFloat(e).toFixed(2),"</h1>\n    </div>")},Pn=function(e,t,n){var r=[jt(bn,{duration:650}),Rt(bn,{message:n,onstart:!0,taskCode:Tt.eventCodes.evidence}),jt(bn,{duration:650}),Rt(bn,{stimulus:Nn(Math.random()),taskCode:Tt.eventCodes.show_earnings})];return{type:At,timeline:r}},On=function(e){var t=function(e){var t=e.conditions.map((function(t){return Et().range(e.repeats_per_condition).map((function(){return t}))}));return Et().shuffle(Et().flatten(t))}(e),n={block_earnings:0,optimal_earnings:0,continue_block:!0},r=t.map((function(t){return Pn(e,n,t)})),i={type:At,stimulus:"",trial_duration:1,on_finish:function(t){return t.block_settings=e}};return r.unshift(i),{type:At,timeline:r}},Ln=!1;if(bn.USE_ELECTRON){var Rn=window.require("electron");Ln=Rn.ipcRenderer}var jn=function(e){document.title=tn;var t='\n  <div class="d-flex flex-column align-items-center">\n  <p>'.concat(vn.instructions.camera,'</p>\n  <video id="camera" width="640" height="480" autoplay></video>\n  </div>\n  '),n=En(t,!0)+_n();return{type:Pt,stimulus:n,choices:[vn.prompt.continue.button],response_ends_trial:!0,on_load:function(){var t=e.data.get().values()[0].participant_id,n=document.getElementById("camera"),r=function(e,r){console.log(e),"cameraCapture"===r&&(n.srcObject=e);var i=[];window[r]=new MediaRecorder(e,{mimeType:"video/webm"}),window[r].addEventListener("dataavailable",(function(e){e.data.size>0&&i.push(e.data)})),window[r].addEventListener("stop",(function(){!function(e,t,n){var r=new FileReader,i="pid_".concat(n,"_").concat(t,"_").concat(Date.now(),".webm");r.onload=function(){if(2===r.readyState){var t=new Buffer(r.result);Ln.send("save_video",i,t),console.log("Saving ".concat(JSON.stringify({fileName:i,size:e.size})))}},r.readAsArrayBuffer(e)}(new Blob(i),r,t)}))};navigator.mediaDevices.getUserMedia({video:!0}).then((function(e){return r(e,"cameraCapture")})),window.require("electron").desktopCapturer.getSources({types:["window"]}).then(function(){var e=u(a().mark((function e(t){var n,i,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Fe(t);try{for(n.s();!(i=n.n()).done;)(o=i.value).name===tn&&navigator.mediaDevices.getUserMedia({video:{mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:o.id}}}).then((function(e){r(e,"screenCapture")})).catch((function(e){return console.log(e)}))}catch(a){n.e(a)}finally{n.f()}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},on_finish:function(){if(bn.USE_CAMERA)try{window.cameraCapture.start(),window.screenCapture.start()}catch(e){window.alert("Camera permissions were not given, if you choose to proceed, your recording will not be saved. Please restart the experiment after you have given permission.")}}}},Mn=Jt(gn);Mn.conditions=["m","n"],Mn.repeats_per_condition=1,Mn.is_practice=!0;var Fn=Jt(gn);Fn.is_tutorial=!0,Fn.photodiode_active=!1;var qn=Jt(gn);qn.repeats_per_condition=2;var Vn=Jt(gn);Vn.conditions=["e","f"],Vn.repeats_per_condition=2;var Un={name:"survey-multi-select",parameters:{questions:{type:We.COMPLEX,array:!0,pretty_name:"Questions",nested:{prompt:{type:We.HTML_STRING,pretty_name:"Prompt",default:void 0},options:{type:We.STRING,pretty_name:"Options",array:!0,default:void 0},horizontal:{type:We.BOOL,pretty_name:"Horizontal",default:!1},required:{type:We.BOOL,pretty_name:"Required",default:!1},name:{type:We.STRING,pretty_name:"Question Name",default:""}}},randomize_question_order:{type:We.BOOL,pretty_name:"Randomize Question Order",default:!1},preamble:{type:We.HTML_STRING,pretty_name:"Preamble",default:null},button_label:{type:We.STRING,pretty_name:"Button label",default:"Continue"},required_message:{type:We.STRING,pretty_name:"Required message",default:"You must choose at least one response for this question"},autocomplete:{type:We.BOOL,pretty_name:"Allow autocomplete",default:!1}}},Bn=function(){function e(t){Ce(this,e),this.jsPsych=t}return Ie(e,[{key:"trial",value:function(e,t){var n=this,r="jspsych-survey-multi-select",i=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.join("-")};e.innerHTML="<style id=\"jspsych-survey-multi-select-css\">.jspsych-survey-multi-select-question { margin-top: 2em; margin-bottom: 2em; text-align: left; }.jspsych-survey-multi-select-text span.required {color: darkred;}.jspsych-survey-multi-select-horizontal .jspsych-survey-multi-select-text {  text-align: center;}.jspsych-survey-multi-select-option { line-height: 2; }.jspsych-survey-multi-select-horizontal .jspsych-survey-multi-select-option {  display: inline-block;  margin-left: 1em;  margin-right: 1em;  vertical-align: top;}label.jspsych-survey-multi-select-text input[type='checkbox'] {margin-right: 1em;}</style>";var a=i(r,"form");e.innerHTML+='<form id="'+a+'"></form>';var o=e.querySelector("#"+a);t.autocomplete||o.setAttribute("autocomplete","off");var u=i(r,"preamble");null!==t.preamble&&(o.innerHTML+='<div id="'+u+'" class="'+u+'">'+t.preamble+"</div>");for(var s=[],l=0;l<t.questions.length;l++)s.push(l);t.randomize_question_order&&(s=this.jsPsych.randomization.shuffle(s));for(l=0;l<t.questions.length;l++){var c=t.questions[s[l]],f=s[l],h=[i(r,"question")];c.horizontal&&h.push(i(r,"horizontal")),o.innerHTML+='<div id="'+i(r,f)+'" data-name="'+c.name+'" class="'+h.join(" ")+'"></div>';var d=i("#jspsych-survey-multi-select",f);e.querySelector(d).innerHTML+='<p id="survey-question" class="'+r+'-text survey-multi-select">'+c.prompt+"</p>";for(var p=0;p<c.options.length;p++){var v=i(r,"option",f,p);e.querySelector(d).innerHTML+='<div id="'+v+'" class="'+i(r,"option")+'"></div>';var y=document.getElementById(v),m=i(r,"response",f),g=i(r,"response",f,p),b=document.createElement("label");b.setAttribute("class",r+"-text"),b.innerHTML=c.options[p],b.setAttribute("for",g);var w=document.createElement("input");w.setAttribute("type","checkbox"),w.setAttribute("name",m),w.setAttribute("id",g),w.setAttribute("value",c.options[p]),y.appendChild(b),b.insertBefore(w,b.firstChild)}}o.innerHTML+='<div class="fail-message"></div>',o.innerHTML+='<button id="'+r+'-next" class="'+r+' jspsych-btn">'+t.button_label+"</button>",e.querySelector("#jspsych-survey-multi-select-next").addEventListener("click",(function(){for(var n=0;n<t.questions.length;n++)t.questions[n].required&&(null==e.querySelector("#jspsych-survey-multi-select-"+n+" input:checked")?e.querySelector("#jspsych-survey-multi-select-"+n+" input").setCustomValidity(t.required_message):e.querySelector("#jspsych-survey-multi-select-"+n+" input").setCustomValidity(""));o.reportValidity()})),o.addEventListener("submit",(function(r){r.preventDefault();for(var i=performance.now(),a=Math.round(i-k),o={},u=0;u<t.questions.length;u++){for(var l=e.querySelector("#jspsych-survey-multi-select-"+u),c=[],f=l.querySelectorAll("input[type=checkbox]:checked"),h=0;h<f.length;h++){var d=f[h];c.push(d.value)}var p={},v="Q"+u;""!==l.attributes["data-name"].value&&(v=l.attributes["data-name"].value),p[v]=c,Object.assign(o,p),c.length}var y={rt:a,response:o,question_order:s};e.innerHTML="",n.jsPsych.finishTrial(y)}));var k=performance.now()}},{key:"simulate",value:function(e,t,n,r){"data-only"==t&&(r(),this.simulate_data_only(e,n)),"visual"==t&&this.simulate_visual(e,n,r)}},{key:"create_simulation_data",value:function(e,t){var n,r={},i=1e3,a=Fe(e.questions);try{for(a.s();!(n=a.n()).done;){var o=n.value,u=void 0;u=o.required?this.jsPsych.randomization.randomInt(1,o.options.length):this.jsPsych.randomization.randomInt(0,o.options.length);var s=o.name?o.name:"Q".concat(e.questions.indexOf(o)),l=this.jsPsych.randomization.sampleWithoutReplacement(o.options,u);r[s]=l,i+=this.jsPsych.randomization.sampleExGaussian(1500,400,.005,!0)}}catch(h){a.e(h)}finally{a.f()}var c={response:r,rt:i,question_order:e.randomize_question_order?this.jsPsych.randomization.shuffle(Te(Array(e.questions.length).keys())):Te(Array(e.questions.length).keys())},f=this.jsPsych.pluginAPI.mergeSimulationData(c,t);return this.jsPsych.pluginAPI.ensureSimulationDataConsistency(e,f),f}},{key:"simulate_data_only",value:function(e,t){var n=this.create_simulation_data(e,t);this.jsPsych.finishTrial(n)}},{key:"simulate_visual",value:function(e,t,n){var r=this.create_simulation_data(e,t),i=this.jsPsych.getDisplayElement();this.trial(i,e),n();for(var a=Object.entries(r.response),o=0;o<a.length;o++){var u,s=Fe(a[o][1]);try{for(s.s();!(u=s.n()).done;){var l=u.value;this.jsPsych.pluginAPI.clickTarget(i.querySelector("#jspsych-survey-multi-select-response-".concat(o,"-").concat(e.questions[o].options.indexOf(l))),(r.rt-1e3)/a.length*(o+1))}}catch(c){s.e(c)}finally{s.f()}}this.jsPsych.pluginAPI.clickTarget(i.querySelector("#jspsych-survey-multi-select-next"),r.rt)}}]),e}();Bn.info=Un;var zn=vn.quiz.ask.age,Hn=vn.quiz.answer.age,Kn=Kt({stimulus:"<div class='instructions'><h1>".concat(zn,"<br><b>").concat(Hn,"</b></div>")}),Gn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return{type:Ht,require_movement:!0,stimulus:e,on_finish:function(t){t.prompt=[e],t.answer=[t.response]}}}(vn.quiz.direction.slider.right),Wn="".concat(vn.quiz.answer.abstain),Qn=vn.quiz.prompt.preamble.survey_1,$n=vn.quiz.prompt.ius.preamble,Yn={options:["".concat(vn.quiz.answer.ius.not),"".concat(vn.quiz.answer.ius.little),"".concat(vn.quiz.answer.ius.somewhat),"".concat(vn.quiz.answer.ius.very),"".concat(vn.quiz.answer.ius.entirely),Wn]},Xn=Qt({preamble:[Qn+$n],prompts:["".concat(vn.quiz.prompt.ius.upset),"".concat(vn.quiz.prompt.ius.frustration),"".concat(vn.quiz.prompt.ius.full_life),"".concat(vn.quiz.prompt.ius.surprise_avoid),"".concat(vn.quiz.prompt.ius.unforeseen_spoil),"".concat(vn.quiz.prompt.ius.uncertainty_paralysis),"".concat(vn.quiz.prompt.ius.uncertainty_malfunction),"".concat(vn.quiz.prompt.ius.future),"".concat(vn.quiz.prompt.ius.surprise_intolerance),"".concat(vn.quiz.prompt.ius.doubt_paralysis),"".concat(vn.quiz.prompt.ius.organize),"".concat(vn.quiz.prompt.ius.escape)],ansChoices:Yn}),Jn=vn.quiz.answer.debriefing.confirm_completion,Zn=Rt(bn,{responseType:Pt,responseEndsTrial:!0,buttons:[Jn]}),er=vn.quiz.ask.demographics_age,tr=vn.quiz.prompt.preamble.demo_1,nr=vn.quiz.prompt.preamble.demo_2,rr=vn.quiz.prompt.preamble.demo_3,ir=Kt({preamble:tr,stimulus:er}),ar={ethnicity:[vn.quiz.answer.demographics_ethnicity.hispanic_latino,vn.quiz.answer.demographics_ethnicity.no_hispanic_latino],race:["".concat(vn.quiz.answer.demographics_race.asian),"".concat(vn.quiz.answer.demographics_race.african_american),"".concat(vn.quiz.answer.demographics_race.caucasian),"".concat(vn.quiz.answer.demographics_race.native_american_alaskan),"".concat(vn.quiz.answer.demographics_race.native_hawaiian_pacific_islander),"".concat(vn.quiz.answer.demographics_race.other)],yesNo:[vn.quiz.answer.demographics_binary.yes,vn.quiz.answer.demographics_binary.no],gender:[vn.quiz.answer.demographics_gender.female,vn.quiz.answer.demographics_gender.male,vn.quiz.answer.demographics_gender.other]},or={timeline:[ir,Qt({preamble:nr,prompts:["".concat(vn.quiz.ask.demographics_ethnicity),"".concat(vn.quiz.ask.demographics_race),"".concat(vn.quiz.ask.demographics_english),"".concat(vn.quiz.ask.demographics_gender)],ansChoices:ar}),Qt({responseType:Bn,preamble:rr,prompts:[vn.quiz.ask.diagnoses],ansChoices:{diagnoses:[vn.quiz.answer.demographics_diagnoses.no,vn.quiz.answer.demographics_diagnoses.parkinsons,vn.quiz.answer.demographics_diagnoses.schizophrenia,vn.quiz.answer.demographics_diagnoses.ocd,vn.quiz.answer.demographics_diagnoses.depression]}})]},ur=function(e){var t=[Dn,Kn,Gn,Dt({message:vn.countdown.message1}),On(Mn),Dt({message:vn.countdown.message2}),On(qn),or,Xn,Zn];return bn.USE_CAMERA&&(t.splice(1,0,jn(e)),t.push(function(e){var t=En("<h1>".concat(vn.task.recording_end,"</h1>"),!0)+_n();return{type:At,stimulus:t,trial_duration:e,on_load:function(){if(bn.USE_CAMERA){console.log("finished");try{window.cameraCapture.stop(),window.screenCapture.stop()}catch(e){window.alert("Your video recording was not saved")}}}}}(5e3))),t.push(Rt(bn,{duration:5e3,message:vn.task.end})),t},sr=[Dn,Dt({message:vn.countdown.message1}),On(Fn),Dt({message:vn.countdown.message2}),On(Vn),Rt(bn,{duration:5e3,message:vn.task.end})];var lr=function(e){var n=e.participantId,r=e.studyId,i=e.startDate,a=e.taskVersion,o=e.dataUpdateFunction,u=e.dataFinishFunction,s=e.height,l=void 0===s?"100%":s,c=e.width,f=void 0===c?"100%":c,h="experimentWindow",d=(0,t.useRef)(null),p={display_element:h,on_data_update:function(e){return o(e)},on_finish:function(e){return u(e)}},v=(0,t.useMemo)((function(){var e=_t(p);return e.data.addProperties({participant_id:n,study_id:r,start_date:i,task_version:a}),e}),[n,r,i,a]),y=function(e){return bn.USE_MTURK?sr:ur(e)}(v),m=function(e){if(!e.redispatched){var t=new e.constructor(e.type,e);t.redispatched=!0,d.current.dispatchEvent(t)}};return(0,t.useEffect)((function(){return window.addEventListener("keyup",m,!0),window.addEventListener("keydown",m,!0),v.run(y),function(){window.removeEventListener("keyup",m,!0),window.removeEventListener("keydown",m,!0);try{v.endExperiment("Ended Experiment")}catch(e){console.error("Experiment closed before unmount")}}})),(0,_e.jsx)("div",{className:"App",children:(0,_e.jsx)("div",{id:h,style:{height:l,width:f},ref:d})})},cr=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},fr={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,u=o?e[i+1]:0,s=i+2<e.length,l=s?e[i+2]:0,c=a>>2,f=(3&a)<<4|u>>4,h=(15&u)<<2|l>>6,d=63&l;s||(d=64,o||(h=64)),r.push(n[c],n[f],n[h],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(cr(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var u=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&u)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,u=++i<e.length?n[e.charAt(i)]:64,s=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==u||null==s)throw Error();var l=a<<2|o>>4;if(r.push(l),64!==u){var c=o<<4&240|u>>2;if(r.push(c),64!==s){var f=u<<6&192|s;r.push(f)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},hr=function(e){return function(e){var t=cr(e);return fr.encodeByteArray(t,!0)}(e).replace(/\./g,"")};function dr(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=dr(e[n],t[n]));return e}var pr=function(){function e(){var t=this;Ce(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return Ie(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function vr(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[hr(JSON.stringify({alg:"none",type:"JWT"})),hr(JSON.stringify(a)),""].join(".")}function yr(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function mr(){return!function(){try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(e){return!1}}()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function gr(){return"object"===typeof indexedDB}var br=function(e){De(n,e);var t=Re(n);function n(e,r,i){var a;return Ce(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(Oe(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(Oe(a),wr.prototype.create),a}return Ie(n)}(Me(Error)),wr=function(){function e(t,n,r){Ce(this,e),this.service=t,this.serviceName=n,this.errors=r}return Ie(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?kr(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,")."),o=new br(n,a,t);return o}}]),e}();function kr(e,t){return e.replace(_r,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}var _r=/\{\$([^}]+)}/g;function xr(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Er(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var u=e[o],s=t[o];if(Tr(u)&&Tr(s)){if(!Er(u,s))return!1}else if(u!==s)return!1}for(var l=0,c=r;l<c.length;l++){var f=c[l];if(!n.includes(f))return!1}return!0}function Tr(e){return null!==e&&"object"===typeof e}function Sr(e,t){var n=new Ir(e,t);return n.subscribe.bind(n)}var Ir=function(){function e(t,n){var r=this;Ce(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return Ie(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=Fe(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=Cr),void 0===r.error&&(r.error=Cr),void 0===r.complete&&(r.complete=Cr);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function Cr(){}function Ar(e){return e&&e._delegate?e._delegate:e}var Dr=function(){function e(t,n,r){Ce(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return Ie(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),Nr="[DEFAULT]",Pr=function(){function e(t,n){Ce(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return Ie(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new pr;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Nr})}catch(s){}var t,n=Fe(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=c(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var u=this.getOrInitializeService({instanceIdentifier:o});a.resolve(u)}catch(s){}}}catch(l){n.e(l)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nr;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=u(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(Te(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),Te(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nr;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nr;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=Fe(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var u=c(i.value,2),s=u[0],l=u[1],f=this.normalizeInstanceIdentifier(s);r===f&&l.resolve(a)}}catch(h){o.e(h)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=Fe(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(xb){}}}catch(o){i.e(o)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===Nr?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(xb){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nr;return this.component?this.component.multipleInstances?e:Nr:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var Or,Lr,Rr=function(){function e(t){Ce(this,e),this.name=t,this.providers=new Map}return Ie(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new Pr(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),jr=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Lr||(Lr={}));var Mr={debug:Lr.DEBUG,verbose:Lr.VERBOSE,info:Lr.INFO,warn:Lr.WARN,error:Lr.ERROR,silent:Lr.SILENT},Fr=Lr.INFO,qr=(Ee(Or={},Lr.DEBUG,"log"),Ee(Or,Lr.VERBOSE,"log"),Ee(Or,Lr.INFO,"info"),Ee(Or,Lr.WARN,"warn"),Ee(Or,Lr.ERROR,"error"),Or),Vr=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=qr[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),u=2;u<a;u++)o[u-2]=arguments[u];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},Ur=function(){function e(t){Ce(this,e),this.name=t,this._logLevel=Fr,this._logHandler=Vr,this._userLogHandler=null,jr.push(this)}return Ie(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in Lr))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?Mr[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Lr.DEBUG].concat(t)),this._logHandler.apply(this,[this,Lr.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Lr.VERBOSE].concat(t)),this._logHandler.apply(this,[this,Lr.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Lr.INFO].concat(t)),this._logHandler.apply(this,[this,Lr.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Lr.WARN].concat(t)),this._logHandler.apply(this,[this,Lr.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Lr.ERROR].concat(t)),this._logHandler.apply(this,[this,Lr.ERROR].concat(t))}}]),e}();var Br,zr;var Hr=new WeakMap,Kr=new WeakMap,Gr=new WeakMap,Wr=new WeakMap,Qr=new WeakMap;var $r={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Kr.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Gr.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Jr(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function Yr(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(zr||(zr=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Zr(this),n),Jr(Hr.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Jr(e.apply(Zr(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=e.call.apply(e,[Zr(this),t].concat(r));return Gr.set(a,t.sort?t.sort():[t]),Jr(a)}}function Xr(e){return"function"===typeof e?Yr(e):(e instanceof IDBTransaction&&function(e){if(!Kr.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=function(){t(),r()},a=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));Kr.set(e,t)}}(e),t=e,(Br||(Br=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((function(e){return t instanceof e}))?new Proxy(e,$r):e);var t}function Jr(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("success",i),e.removeEventListener("error",a)},i=function(){t(Jr(e.result)),r()},a=function(){n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)}));return t.then((function(t){t instanceof IDBCursor&&Hr.set(t,e)})).catch((function(){})),Qr.set(t,e),t}(e);if(Wr.has(e))return Wr.get(e);var t=Xr(e);return t!==e&&(Wr.set(e,t),Qr.set(t,e)),t}var Zr=function(e){return Qr.get(e)};var ei,ti,ni=["get","getKey","getAll","getAllKeys","count"],ri=["put","add","delete","clear"],ii=new Map;function ai(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if(ii.get(t))return ii.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,i=ri.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(i||ni.includes(n))){var o=function(){var e=u(a().mark((function e(t){var o,u,s,l,c,f,h=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(u=this.transaction(t,i?"readwrite":"readonly"),s=u.store,l=h.length,c=new Array(l>1?l-1:0),f=1;f<l;f++)c[f-1]=h[f];return r&&(s=s.index(c.shift())),e.next=6,Promise.all([(o=s)[n].apply(o,c),i&&u.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return ii.set(t,o),o}}}$r=function(e){return It(It({},e),{},{get:function(t,n,r){return ai(t,n)||e.get(t,n,r)},has:function(t,n){return!!ai(t,n)||e.has(t,n)}})}($r);var oi=function(){function e(t){Ce(this,e),this.container=t}return Ie(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var ui="@firebase/app",si="0.7.28",li=new Ur("@firebase/app"),ci="[DEFAULT]",fi=(Ee(ei={},ui,"fire-core"),Ee(ei,"@firebase/app-compat","fire-core-compat"),Ee(ei,"@firebase/analytics","fire-analytics"),Ee(ei,"@firebase/analytics-compat","fire-analytics-compat"),Ee(ei,"@firebase/app-check","fire-app-check"),Ee(ei,"@firebase/app-check-compat","fire-app-check-compat"),Ee(ei,"@firebase/auth","fire-auth"),Ee(ei,"@firebase/auth-compat","fire-auth-compat"),Ee(ei,"@firebase/database","fire-rtdb"),Ee(ei,"@firebase/database-compat","fire-rtdb-compat"),Ee(ei,"@firebase/functions","fire-fn"),Ee(ei,"@firebase/functions-compat","fire-fn-compat"),Ee(ei,"@firebase/installations","fire-iid"),Ee(ei,"@firebase/installations-compat","fire-iid-compat"),Ee(ei,"@firebase/messaging","fire-fcm"),Ee(ei,"@firebase/messaging-compat","fire-fcm-compat"),Ee(ei,"@firebase/performance","fire-perf"),Ee(ei,"@firebase/performance-compat","fire-perf-compat"),Ee(ei,"@firebase/remote-config","fire-rc"),Ee(ei,"@firebase/remote-config-compat","fire-rc-compat"),Ee(ei,"@firebase/storage","fire-gcs"),Ee(ei,"@firebase/storage-compat","fire-gcs-compat"),Ee(ei,"@firebase/firestore","fire-fst"),Ee(ei,"@firebase/firestore-compat","fire-fst-compat"),Ee(ei,"fire-js","fire-js"),Ee(ei,"firebase","fire-js-all"),ei),hi=new Map,di=new Map;function pi(e,t){try{e.container.addComponent(t)}catch(n){li.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function vi(e,t){e.container.addOrOverwriteComponent(t)}function yi(e){var t=e.name;if(di.has(t))return li.debug("There were multiple attempts to register component ".concat(t,".")),!1;di.set(t,e);var n,r=Fe(hi.values());try{for(r.s();!(n=r.n()).done;){pi(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function mi(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function gi(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ci;mi(e,t).clearInstance(n)}function bi(){di.clear()}var wi=(Ee(ti={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),Ee(ti,"bad-app-name","Illegal App name: '{$appName}"),Ee(ti,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),Ee(ti,"app-deleted","Firebase App named '{$appName}' already deleted"),Ee(ti,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),Ee(ti,"invalid-log-argument","First argument to `onLog` must be null or a function."),Ee(ti,"storage-open","Error thrown when opening storage. Original error: {$originalErrorMessage}."),Ee(ti,"storage-get","Error thrown when reading from storage. Original error: {$originalErrorMessage}."),Ee(ti,"storage-set","Error thrown when writing to storage. Original error: {$originalErrorMessage}."),Ee(ti,"storage-delete","Error thrown when deleting from storage. Original error: {$originalErrorMessage}."),ti),ki=new wr("app","Firebase",wi),_i=function(){function e(t,n,r){var i=this;Ce(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Dr("app",(function(){return i}),"PUBLIC"))}return Ie(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw ki.create("app-deleted",{appName:this._name})}}]),e}(),xi="9.9.0";function Ei(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"!==typeof t){var n=t;t={name:n}}var r=Object.assign({name:ci,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw ki.create("bad-app-name",{appName:String(i)});var a=hi.get(i);if(a){if(Er(e,a.options)&&Er(r,a.config))return a;throw ki.create("duplicate-app",{appName:i})}var o,u=new Rr(i),s=Fe(di.values());try{for(s.s();!(o=s.n()).done;){var l=o.value;u.addComponent(l)}}catch(f){s.e(f)}finally{s.f()}var c=new _i(e,r,u);return hi.set(i,c),c}function Ti(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ci,t=hi.get(e);if(!t)throw ki.create("no-app",{appName:e});return t}function Si(){return Array.from(hi.values())}function Ii(e){return Ci.apply(this,arguments)}function Ci(){return(Ci=u(a().mark((function e(t){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!hi.has(n)){e.next=6;break}return hi.delete(n),e.next=5,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 5:t.isDeleted=!0;case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ai(e,t,n){var r,i=null!==(r=fi[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var u=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&u.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&u.push("and"),o&&u.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void li.warn(u.join(" "))}yi(new Dr("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}function Di(e,t){if(null!==e&&"function"!==typeof e)throw ki.create("invalid-log-argument");!function(e,t){var n,r=Fe(jr);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=Mr[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var u=a.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==i&&void 0!==i?i:t.logLevel)&&e({level:Lr[n].toLowerCase(),message:u,args:a,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}}(e,t)}function Ni(e){var t;t=e,jr.forEach((function(e){e.setLogLevel(t)}))}var Pi="firebase-heartbeat-store",Oi=null;function Li(){return Oi||(Oi=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,a=n.blocking,o=n.terminated,u=indexedDB.open(e,t),s=Jr(u);return i&&u.addEventListener("upgradeneeded",(function(e){i(Jr(u.result),e.oldVersion,e.newVersion,Jr(u.transaction))})),r&&u.addEventListener("blocked",(function(){return r()})),s.then((function(e){o&&e.addEventListener("close",(function(){return o()})),a&&e.addEventListener("versionchange",(function(){return a()}))})).catch((function(){})),s}("firebase-heartbeat-database",1,{upgrade:function(e,t){if(0===t)e.createObjectStore(Pi)}}).catch((function(e){throw ki.create("storage-open",{originalErrorMessage:e.message})}))),Oi}function Ri(e){return ji.apply(this,arguments)}function ji(){return ji=u(a().mark((function e(t){var n,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Li();case 3:return r=e.sent,e.abrupt("return",r.transaction(Pi).objectStore(Pi).get(qi(t)));case 7:throw e.prev=7,e.t0=e.catch(0),ki.create("storage-get",{originalErrorMessage:null===(n=e.t0)||void 0===n?void 0:n.message});case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),ji.apply(this,arguments)}function Mi(e,t){return Fi.apply(this,arguments)}function Fi(){return Fi=u(a().mark((function e(t,n){var r,i,o,u;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Li();case 3:return i=e.sent,o=i.transaction(Pi,"readwrite"),u=o.objectStore(Pi),e.next=8,u.put(n,qi(t));case 8:return e.abrupt("return",o.done);case 11:throw e.prev=11,e.t0=e.catch(0),ki.create("storage-set",{originalErrorMessage:null===(r=e.t0)||void 0===r?void 0:r.message});case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),Fi.apply(this,arguments)}function qi(e){return"".concat(e.name,"!").concat(e.options.appId)}var Vi=function(){function e(t){var n=this;Ce(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new Ki(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return Ie(e,[{key:"triggerHeartbeat",value:function(){var e=u(a().mark((function e(){var t,n,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=Ui(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=u(a().mark((function e(){var t,n,r,i,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=Ui(),n=Bi(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,o=hr(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(i.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=i,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",o);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Ui(){return(new Date).toISOString().substring(0,10)}function Bi(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],i=e.slice(),a=Fe(e);try{var o=function(){var e=t.value,a=r.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),Gi(r)>n)return a.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),Gi(r)>n)return r.pop(),"break";i=i.slice(1)};for(a.s();!(t=a.n()).done;){var u=o();if("break"===u)break}}catch(s){a.e(s)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var zi,Hi,Ki=function(){function e(t){Ce(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return Ie(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=u(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(gr()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(a){t(a)}})).then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=u(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,Ri(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=u(a().mark((function e(t){var n,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",Mi(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=u(a().mark((function e(t){var n,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",Mi(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat(Te(r.heartbeats),Te(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function Gi(e){return hr(JSON.stringify({version:2,heartbeats:e})).length}zi="",yi(new Dr("platform-logger",(function(e){return new oi(e)}),"PRIVATE")),yi(new Dr("heartbeat",(function(e){return new Vi(e)}),"PRIVATE")),Ai(ui,si,zi),Ai(ui,si,"esm2017"),Ai("fire-js","");var Wi=function(){function e(t,n){var r=this;Ce(this,e),this._delegate=t,this.firebase=n,pi(t,new Dr("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}return Ie(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),Ii(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ci;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ci;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){pi(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){vi(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),Qi=(Ee(Hi={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),Ee(Hi,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),Hi),$i=new wr("app-compat","Firebase",Qi);var Yi=function t(){var n=function(t){var n={},r={__esModule:!0,initializeApp:function(e){var i=Ei(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(xr(n,i.name))return n[i.name];var a=new t(i,r);return n[i.name]=a,a},app:i,registerVersion:Ai,setLogLevel:Ni,onLog:Di,apps:null,SDK_VERSION:xi,INTERNAL:{registerComponent:function(e){var n=e.name,a=n.replace("-compat","");if(yi(e)&&"PUBLIC"===e.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[a])throw $i.create("invalid-app-argument",{appName:n});return e[a]()};void 0!==e.serviceProps&&dr(o,e.serviceProps),r[a]=o,t.prototype[a]=function(){for(var t=this._getService.bind(this,n),r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[a]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!xr(n,e=e||ci))throw $i.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((function(e){return n[e]}))}}),i.App=t,r}(Wi);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){dr(n,e)},createSubscribe:Sr,ErrorFactory:wr,deepExtend:dr}),n}(),Xi=new Ur("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){Xi.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var Ji=self.firebase.SDK_VERSION;Ji&&Ji.indexOf("LITE")>=0&&Xi.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var Zi=Yi;!function(e){Ai("@firebase/app-compat","0.1.29",e)}();function ea(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ne(e)););return e}function ta(){return ta="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=ea(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},ta.apply(this,arguments)}Zi.registerVersion("firebase","9.9.0","app-compat");var na,ra="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},ia={},aa=aa||{},oa=ra||self;function ua(){}function sa(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function la(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var ca="closure_uid_"+(1e9*Math.random()>>>0),fa=0;function ha(e,t,n){return e.call.apply(e.bind,arguments)}function da(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function pa(e,t,n){return(pa=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ha:da).apply(null,arguments)}function va(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function ya(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Vb=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function ma(){this.s=this.s,this.o=this.o}var ga={};ma.prototype.s=!1,ma.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var e=function(e){return Object.prototype.hasOwnProperty.call(e,ca)&&e[ca]||(e[ca]=++fa)}(this);delete ga[e]}},ma.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var ba=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},wa=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i="string"===typeof e?e.split(""):e,a=0;a<r;a++)a in i&&t.call(n,i[a],a,e)};function ka(e){return Array.prototype.concat.apply([],arguments)}function _a(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function xa(e){return/^[\s\xa0]*$/.test(e)}var Ea,Ta=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function Sa(e,t){return-1!=e.indexOf(t)}function Ia(e,t){return e<t?-1:e>t?1:0}e:{var Ca=oa.navigator;if(Ca){var Aa=Ca.userAgent;if(Aa){Ea=Aa;break e}}Ea=""}function Da(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function Na(e){var t={};for(var n in e)t[n]=e[n];return t}var Pa="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Oa(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<Pa.length;a++)n=Pa[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function La(e){return La[" "](e),e}La[" "]=ua;var Ra,ja=Sa(Ea,"Opera"),Ma=Sa(Ea,"Trident")||Sa(Ea,"MSIE"),Fa=Sa(Ea,"Edge"),qa=Fa||Ma,Va=Sa(Ea,"Gecko")&&!(Sa(Ea.toLowerCase(),"webkit")&&!Sa(Ea,"Edge"))&&!(Sa(Ea,"Trident")||Sa(Ea,"MSIE"))&&!Sa(Ea,"Edge"),Ua=Sa(Ea.toLowerCase(),"webkit")&&!Sa(Ea,"Edge");function Ba(){var e=oa.document;return e?e.documentMode:void 0}e:{var za="",Ha=function(){var e=Ea;return Va?/rv:([^\);]+)(\)|;)/.exec(e):Fa?/Edge\/([\d\.]+)/.exec(e):Ma?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):Ua?/WebKit\/(\S+)/.exec(e):ja?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(Ha&&(za=Ha?Ha[1]:""),Ma){var Ka=Ba();if(null!=Ka&&Ka>parseFloat(za)){Ra=String(Ka);break e}}Ra=za}var Ga,Wa={};function Qa(){return function(e){var t=Wa;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}((function(){for(var e=0,t=Ta(String(Ra)).split("."),n=Ta("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var a=t[i]||"",o=n[i]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==a[0].length&&0==o[0].length)break;e=Ia(0==a[1].length?0:parseInt(a[1],10),0==o[1].length?0:parseInt(o[1],10))||Ia(0==a[2].length,0==o[2].length)||Ia(a[2],o[2]),a=a[3],o=o[3]}while(0==e)}return 0<=e}))}if(oa.document&&Ma){var $a=Ba();Ga=$a||(parseInt(Ra,10)||void 0)}else Ga=void 0;var Ya=Ga,Xa=function(){if(!oa.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{oa.addEventListener("test",ua,t),oa.removeEventListener("test",ua,t)}catch(n){}return e}();function Ja(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}function Za(e,t){if(Ja.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Va){e:{try{La(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:eo[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Za.Z.h.call(this)}}Ja.prototype.h=function(){this.defaultPrevented=!0},ya(Za,Ja);var eo={2:"touch",3:"pen",4:"mouse"};Za.prototype.h=function(){Za.Z.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var to="closure_listenable_"+(1e6*Math.random()|0),no=0;function ro(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ia=i,this.key=++no,this.ca=this.fa=!1}function io(e){e.ca=!0,e.listener=null,e.proxy=null,e.src=null,e.ia=null}function ao(e){this.src=e,this.g={},this.h=0}function oo(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=ba(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(io(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function uo(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.ca&&a.listener==t&&a.capture==!!n&&a.ia==r)return i}return-1}ao.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=uo(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new ro(t,this.src,a,!!r,i)).fa=n,e.push(t)),t};var so="closure_lm_"+(1e6*Math.random()|0),lo={};function co(e,t,n,r,i){if(r&&r.once)return ho(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)co(e,t[a],n,r,i);return null}return n=wo(n),e&&e[to]?e.N(t,n,la(r)?!!r.capture:!!r,i):fo(e,t,n,!1,r,i)}function fo(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=la(i)?!!i.capture:!!i,u=go(e);if(u||(e[so]=u=new ao(e)),(n=u.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=mo;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Xa||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(yo(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function ho(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)ho(e,t[a],n,r,i);return null}return n=wo(n),e&&e[to]?e.O(t,n,la(r)?!!r.capture:!!r,i):fo(e,t,n,!0,r,i)}function po(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)po(e,t[a],n,r,i);else r=la(r)?!!r.capture:!!r,n=wo(n),e&&e[to]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=uo(a=e.g[t],n,r,i))&&(io(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=go(e))&&(t=e.g[t.toString()],e=-1,t&&(e=uo(t,n,r,i)),(n=-1<e?t[e]:null)&&vo(n))}function vo(e){if("number"!==typeof e&&e&&!e.ca){var t=e.src;if(t&&t[to])oo(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(yo(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=go(t))?(oo(n,e),0==n.h&&(n.src=null,t[so]=null)):io(e)}}}function yo(e){return e in lo?lo[e]:lo[e]="on"+e}function mo(e,t){if(e.ca)e=!0;else{t=new Za(t,this);var n=e.listener,r=e.ia||e.src;e.fa&&vo(e),e=n.call(r,t)}return e}function go(e){return(e=e[so])instanceof ao?e:null}var bo="__closure_events_fn_"+(1e9*Math.random()>>>0);function wo(e){return"function"===typeof e?e:(e[bo]||(e[bo]=function(t){return e.handleEvent(t)}),e[bo])}function ko(){ma.call(this),this.i=new ao(this),this.P=this,this.I=null}function _o(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"===typeof t)t=new Ja(t,e);else if(t instanceof Ja)t.target=t.target||e;else{var i=t;Oa(t=new Ja(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=xo(o,r,!0,t)&&i}if(i=xo(o=t.g=e,r,!0,t)&&i,i=xo(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=xo(o=t.g=n[a],r,!1,t)&&i}function xo(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.ca&&o.capture==n){var u=o.listener,s=o.ia||o.src;o.fa&&oo(e.i,o),i=!1!==u.call(s,r)&&i}}return i&&!r.defaultPrevented}ya(ko,ma),ko.prototype[to]=!0,ko.prototype.removeEventListener=function(e,t,n,r){po(this,e,t,n,r)},ko.prototype.M=function(){if(ko.Z.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)io(n[r]);delete t.g[e],t.h--}}this.I=null},ko.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},ko.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var Eo=oa.JSON.stringify;function To(){var e=Oo,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var So,Io=function(){function e(){Ce(this,e),this.h=this.g=null}return Ie(e,[{key:"add",value:function(e,t){var n=Co.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),Co=new(function(){function e(t,n){Ce(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return Ie(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}())((function(){return new Ao}),(function(e){return e.reset()})),Ao=function(){function e(){Ce(this,e),this.next=this.g=this.h=null}return Ie(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function Do(e){oa.setTimeout((function(){throw e}),0)}function No(e,t){So||function(){var e=oa.Promise.resolve(void 0);So=function(){e.then(Lo)}}(),Po||(So(),Po=!0),Oo.add(e,t)}var Po=!1,Oo=new Io;function Lo(){for(var e;e=To();){try{e.h.call(e.g)}catch(n){Do(n)}var t=Co;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Po=!1}function Ro(e,t){ko.call(this),this.h=e||1,this.g=t||oa,this.j=pa(this.kb,this),this.l=Date.now()}function jo(e){e.da=!1,e.S&&(e.g.clearTimeout(e.S),e.S=null)}function Mo(e,t,n){if("function"===typeof e)n&&(e=pa(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=pa(e.handleEvent,e)}return 2147483647<Number(t)?-1:oa.setTimeout(e,t||0)}function Fo(e){e.g=Mo((function(){e.g=null,e.i&&(e.i=!1,Fo(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}ya(Ro,ko),(na=Ro.prototype).da=!1,na.S=null,na.kb=function(){if(this.da){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-e):(this.S&&(this.g.clearTimeout(this.S),this.S=null),_o(this,"tick"),this.da&&(jo(this),this.start()))}},na.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},na.M=function(){Ro.Z.M.call(this),jo(this),delete this.g};var qo=function(e){De(n,e);var t=Re(n);function n(e,r){var i;return Ce(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return Ie(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:Fo(this)}},{key:"M",value:function(){ta(Ne(n.prototype),"M",this).call(this),this.g&&(oa.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(ma);function Vo(e){ma.call(this),this.h=e,this.g={}}ya(Vo,ma);var Uo=[];function Bo(e,t,n,r){Array.isArray(n)||(n&&(Uo[0]=n.toString()),n=Uo);for(var i=0;i<n.length;i++){var a=co(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function zo(e){Da(e.g,(function(e,t){this.g.hasOwnProperty(t)&&vo(e)}),e),e.g={}}function Ho(){this.g=!0}function Ko(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return Eo(n)}catch(u){return t}}(e,n)+(r?" "+r:"")}))}Vo.prototype.M=function(){Vo.Z.M.call(this),zo(this)},Vo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Ho.prototype.Aa=function(){this.g=!1},Ho.prototype.info=function(){};var Go={},Wo=null;function Qo(){return Wo=Wo||new ko}function $o(e){Ja.call(this,Go.Ma,e)}function Yo(e){var t=Qo();_o(t,new $o(t,e))}function Xo(e,t){Ja.call(this,Go.STAT_EVENT,e),this.stat=t}function Jo(e){var t=Qo();_o(t,new Xo(t,e))}function Zo(e,t){Ja.call(this,Go.Na,e),this.size=t}function eu(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return oa.setTimeout((function(){e()}),t)}Go.Ma="serverreachability",ya($o,Ja),Go.STAT_EVENT="statevent",ya(Xo,Ja),Go.Na="timingevent",ya(Zo,Ja);var tu={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},nu={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function ru(){}function iu(e){return e.h||(e.h=e.i())}function au(){}ru.prototype.h=null;var ou,uu={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function su(){Ja.call(this,"d")}function lu(){Ja.call(this,"c")}function cu(){}function fu(e,t,n,r){this.l=e,this.j=t,this.m=n,this.X=r||1,this.V=new Vo(this),this.P=du,e=qa?125:void 0,this.W=new Ro(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new hu}function hu(){this.i=null,this.g="",this.h=!1}ya(su,Ja),ya(lu,Ja),ya(cu,ru),cu.prototype.g=function(){return new XMLHttpRequest},cu.prototype.i=function(){return{}},ou=new cu;var du=45e3,pu={},vu={};function yu(e,t,n){e.K=1,e.v=qu(Ou(t)),e.s=n,e.U=!0,mu(e,null)}function mu(e,t){e.F=Date.now(),ku(e),e.A=Ou(e.v);var n=e.A,r=e.X;Array.isArray(r)||(r=[String(r)]),Ju(n.h,"t",r),e.C=0,n=e.l.H,e.h=new hu,e.g=el(e.l,n?t:null,!e.s),0<e.O&&(e.L=new qo(pa(e.Ia,e,e.g),e.O)),Bo(e.V,e.g,"readystatechange",e.gb),t=e.H?Na(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.s,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Yo(1),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",u=a.split("&"),s=0;s<u.length;s++){var l=u[s].split("=");if(1<l.length){var c=l[0];l=l[1];var f=c.split("_");o=2<=f.length&&"type"==f[1]?o+(c+"=")+l+"&":o+(c+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.X,e.s)}function gu(e){return!!e.g&&("GET"==e.u&&2!=e.K&&e.l.Ba)}function bu(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;){if((r=wu(e,n))==vu){4==t&&(e.o=4,Jo(14),i=!1),Ko(e.j,e.m,null,"[Incomplete Response]");break}if(r==pu){e.o=4,Jo(15),Ko(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}Ko(e.j,e.m,r,null),Su(e,r)}gu(e)&&r!=vu&&r!=pu&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,Jo(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.aa&&(e.aa=!0,(t=e.l).g==e&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),Gs(t),t.L=!0,Jo(11))):(Ko(e.j,e.m,n,"[Invalid Chunked Response]"),Tu(e),Eu(e))}function wu(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?vu:(n=Number(t.substring(n,r)),isNaN(n)?pu:(r+=1)+n>t.length?vu:(t=t.substr(r,n),e.C=r+n,t))}function ku(e){e.Y=Date.now()+e.P,_u(e,e.P)}function _u(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=eu(pa(e.eb,e),t)}function xu(e){e.B&&(oa.clearTimeout(e.B),e.B=null)}function Eu(e){0==e.l.G||e.I||$s(e.l,e)}function Tu(e){xu(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,jo(e.W),zo(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function Su(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||os(n.i,e)))if(n.I=e.N,!e.J&&os(n.i,e)&&3==n.G){try{var r=n.Ca.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;Qs(n),Ms(n)}Ks(n),Jo(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=eu(pa(n.ab,n),6e3));if(1>=as(n.i)&&n.ka){try{n.ka()}catch(a){}n.ka=void 0}}else Xs(n,11)}else if((e.J||n.g==e)&&Qs(n),!xa(t))for(i=n.Ca.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.U=a[0],a=a[1],2==n.G)if("c"==a[0]){n.J=a[1],n.la=a[2];var o=a[3];null!=o&&(n.ma=o,n.h.info("VER="+n.ma));var u=a[4];null!=u&&(n.za=u,n.h.info("SVER="+n.za));var s=a[5];null!=s&&"number"===typeof s&&0<s&&(r=1.5*s,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var l=e.g;if(l){var c=l.g?l.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(c){var f=r.i;!f.g&&(Sa(c,"spdy")||Sa(c,"quic")||Sa(c,"h2"))&&(f.j=f.l,f.g=new Set,f.h&&(us(f,f.h),f.h=null))}if(r.D){var h=l.g?l.g.getResponseHeader("X-HTTP-Session-Id"):null;h&&(r.sa=h,Fu(r.F,r.D,h))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-e.F,n.h.info("Handshake RTT: "+n.O+"ms"));var d=e;if((r=n).oa=Zs(r,r.H?r.la:null,r.W),d.J){ss(r.i,d);var p=d,v=r.K;v&&p.setTimeout(v),p.B&&(xu(p),ku(p)),r.g=d}else Hs(r);0<n.l.length&&Vs(n)}else"stop"!=a[0]&&"close"!=a[0]||Xs(n,7);else 3==n.G&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?Xs(n,7):js(n):"noop"!=a[0]&&n.j&&n.j.wa(a),n.A=0)}Yo(4)}catch(a){}}function Iu(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(sa(e)||"string"===typeof e)wa(e,t,void 0);else{if(e.T&&"function"==typeof e.T)var n=e.T();else if(e.R&&"function"==typeof e.R)n=void 0;else if(sa(e)||"string"===typeof e){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;r=function(e){if(e.R&&"function"==typeof e.R)return e.R();if("string"===typeof e)return e.split("");if(sa(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length;for(var a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}}function Cu(e,t){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof Cu)for(n=e.T(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function Au(e){if(e.i!=e.g.length){for(var t=0,n=0;t<e.g.length;){var r=e.g[t];Du(e.h,r)&&(e.g[n++]=r),t++}e.g.length=n}if(e.i!=e.g.length){var i={};for(n=t=0;t<e.g.length;)Du(i,r=e.g[t])||(e.g[n++]=r,i[r]=1),t++;e.g.length=n}}function Du(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(na=fu.prototype).setTimeout=function(e){this.P=e},na.gb=function(e){e=e.target;var t=this.L;t&&3==Ns(e)?t.l():this.Ia(e)},na.Ia=function(e){try{if(e==this.g)e:{var t=Ns(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>t)&&(3!=t||qa||this.g&&(this.h.h||this.g.ga()||Ps(this.g)))){this.I||4!=t||7==n||Yo(8==n||0>=r?3:2),xu(this);var i=this.g.ba();this.N=i;t:if(gu(this)){var a=Ps(this.g);e="";var o=a.length,u=4==Ns(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Tu(this),Eu(this);var s="";break t}this.h.i=new oa.TextDecoder}for(n=0;n<o;n++)this.h.h=!0,e+=this.h.i.decode(a[n],{stream:u&&n==o-1});a.splice(0,o),this.h.g+=e,this.C=0,s=this.h.g}else s=this.g.ga();if(this.i=200==i,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.X,t,i),this.i){if(this.$&&!this.J){t:{if(this.g){var l,c=this.g;if((l=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!xa(l)){var f=l;break t}}f=null}if(!(i=f)){this.i=!1,this.o=3,Jo(12),Tu(this),Eu(this);break e}Ko(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Su(this,i)}this.U?(bu(this,t,s),qa&&this.i&&3==t&&(Bo(this.V,this.W,"tick",this.fb),this.W.start())):(Ko(this.j,this.m,s,null),Su(this,s)),4==t&&Tu(this),this.i&&!this.I&&(4==t?$s(this.l,this):(this.i=!1,ku(this)))}else 400==i&&0<s.indexOf("Unknown SID")?(this.o=3,Jo(12)):(this.o=0,Jo(13)),Tu(this),Eu(this)}}}catch(t){}},na.fb=function(){if(this.g){var e=Ns(this.g),t=this.g.ga();this.C<t.length&&(xu(this),bu(this,e,t),this.i&&4!=e&&ku(this))}},na.cancel=function(){this.I=!0,Tu(this)},na.eb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(Yo(3),Jo(17)),Tu(this),this.o=2,Eu(this)):_u(this,this.Y-e)},(na=Cu.prototype).R=function(){Au(this);for(var e=[],t=0;t<this.g.length;t++)e.push(this.h[this.g[t]]);return e},na.T=function(){return Au(this),this.g.concat()},na.get=function(e,t){return Du(this.h,e)?this.h[e]:t},na.set=function(e,t){Du(this.h,e)||(this.i++,this.g.push(e)),this.h[e]=t},na.forEach=function(e,t){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],a=this.get(i);e.call(t,a,i,this)}};var Nu=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Pu(e,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,e instanceof Pu){this.g=void 0!==t?t:e.g,Lu(this,e.j),this.s=e.s,Ru(this,e.i),ju(this,e.m),this.l=e.l,t=e.h;var n=new Qu;n.i=t.i,t.g&&(n.g=new Cu(t.g),n.h=t.h),Mu(this,n),this.o=e.o}else e&&(n=String(e).match(Nu))?(this.g=!!t,Lu(this,n[1]||"",!0),this.s=Vu(n[2]||""),Ru(this,n[3]||"",!0),ju(this,n[4]),this.l=Vu(n[5]||"",!0),Mu(this,n[6]||"",!0),this.o=Vu(n[7]||"")):(this.g=!!t,this.h=new Qu(null,this.g))}function Ou(e){return new Pu(e)}function Lu(e,t,n){e.j=n?Vu(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Ru(e,t,n){e.i=n?Vu(t,!0):t}function ju(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Mu(e,t,n){t instanceof Qu?(e.h=t,function(e,t){t&&!e.j&&($u(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Yu(this,t),Ju(this,n,e))}),e)),e.j=t}(e.h,e.g)):(n||(t=Uu(t,Gu)),e.h=new Qu(t,e.g))}function Fu(e,t,n){e.h.set(t,n)}function qu(e){return Fu(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Vu(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Uu(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Bu),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Bu(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Pu.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Uu(t,zu,!0),":");var n=this.i;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Uu(t,zu,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&e.push("/"),e.push(Uu(n,"/"==n.charAt(0)?Ku:Hu,!0))),(n=this.h.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Uu(n,Wu)),e.join("")};var zu=/[#\/\?@]/g,Hu=/[#\?:]/g,Ku=/[#\?]/g,Gu=/[#\?@]/g,Wu=/#/g;function Qu(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function $u(e){e.g||(e.g=new Cu,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Yu(e,t){$u(e),t=Zu(e,t),Du(e.g.h,t)&&(e.i=null,e.h-=e.g.get(t).length,Du((e=e.g).h,t)&&(delete e.h[t],e.i--,e.g.length>2*e.i&&Au(e)))}function Xu(e,t){return $u(e),t=Zu(e,t),Du(e.g.h,t)}function Ju(e,t,n){Yu(e,t),0<n.length&&(e.i=null,e.g.set(Zu(e,t),_a(n)),e.h+=n.length)}function Zu(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(na=Qu.prototype).add=function(e,t){$u(this),this.i=null,e=Zu(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},na.forEach=function(e,t){$u(this),this.g.forEach((function(n,r){wa(n,(function(n){e.call(t,n,r,this)}),this)}),this)},na.T=function(){$u(this);for(var e=this.g.R(),t=this.g.T(),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},na.R=function(e){$u(this);var t=[];if("string"===typeof e)Xu(this,e)&&(t=ka(t,this.g.get(Zu(this,e))));else{e=this.g.R();for(var n=0;n<e.length;n++)t=ka(t,e[n])}return t},na.set=function(e,t){return $u(this),this.i=null,Xu(this,e=Zu(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},na.get=function(e,t){return e&&0<(e=this.R(e)).length?String(e[0]):t},na.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=this.g.T(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.R(r);for(var a=0;a<r.length;a++){var o=i;""!==r[a]&&(o+="="+encodeURIComponent(String(r[a]))),e.push(o)}}return this.i=e.join("&")};var es=Ie((function e(t,n){Ce(this,e),this.h=t,this.g=n}));function ts(e){this.l=e||rs,oa.PerformanceNavigationTiming?e=0<(e=oa.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(oa.g&&oa.g.Ea&&oa.g.Ea()&&oa.g.Ea().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var ns,rs=10;function is(e){return!!e.h||!!e.g&&e.g.size>=e.j}function as(e){return e.h?1:e.g?e.g.size:0}function os(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function us(e,t){e.g?e.g.add(t):e.h=t}function ss(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function ls(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=Fe(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.D)}}catch(a){r.e(a)}finally{r.f()}return n}return _a(e.i)}function cs(){}function fs(){this.g=new cs}function hs(e,t,n){var r=n||"";try{Iu(e,(function(e,n){var i=e;la(e)&&(i=Eo(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function ds(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(a){}}function ps(e){this.l=e.$b||null,this.j=e.ib||!1}function vs(e,t){ko.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=ys,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}ts.prototype.cancel=function(){if(this.i=ls(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=Fe(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}},cs.prototype.stringify=function(e){return oa.JSON.stringify(e,void 0)},cs.prototype.parse=function(e){return oa.JSON.parse(e,void 0)},ya(ps,ru),ps.prototype.g=function(){return new vs(this.l,this.j)},ps.prototype.i=(ns={},function(){return ns}),ya(vs,ko);var ys=0;function ms(e){e.j.read().then(e.Sa.bind(e)).catch(e.ha.bind(e))}function gs(e){e.readyState=4,e.l=null,e.j=null,e.A=null,bs(e)}function bs(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(na=vs.prototype).open=function(e,t){if(this.readyState!=ys)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,bs(this)},na.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||oa).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},na.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,gs(this)),this.readyState=ys},na.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,bs(this)),this.g&&(this.readyState=3,bs(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if("undefined"!==typeof oa.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;ms(this)}else e.text().then(this.Ua.bind(this),this.ha.bind(this))},na.Sa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?gs(this):bs(this),3==this.readyState&&ms(this)}},na.Ua=function(e){this.g&&(this.response=this.responseText=e,gs(this))},na.Ta=function(e){this.g&&(this.response=e,gs(this))},na.ha=function(){this.g&&gs(this)},na.setRequestHeader=function(e,t){this.v.append(e,t)},na.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},na.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(vs.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var ws=oa.JSON.parse;function ks(e){ko.call(this),this.headers=new Cu,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=_s,this.K=this.L=!1}ya(ks,ko);var _s="",xs=/^https?$/i,Es=["POST","PUT"];function Ts(e){return"content-type"==e.toLowerCase()}function Ss(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,Is(e),As(e)}function Is(e){e.D||(e.D=!0,_o(e,"complete"),_o(e,"error"))}function Cs(e){if(e.h&&"undefined"!=typeof aa&&(!e.C[1]||4!=Ns(e)||2!=e.ba()))if(e.v&&4==Ns(e))Mo(e.Fa,0,e);else if(_o(e,"readystatechange"),4==Ns(e)){e.h=!1;try{var t,n=e.ba();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.H).match(Nu)[1]||null;if(!a&&oa.self&&oa.self.location){var o=oa.self.location.protocol;a=o.substr(0,o.length-1)}i=!xs.test(a?a.toLowerCase():"")}t=i}if(t)_o(e,"complete"),_o(e,"success");else{e.m=6;try{var u=2<Ns(e)?e.g.statusText:""}catch(s){u=""}e.j=u+" ["+e.ba()+"]",Is(e)}}finally{As(e)}}}function As(e,t){if(e.g){Ds(e);var n=e.g,r=e.C[0]?ua:null;e.g=null,e.C=null,t||_o(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function Ds(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(oa.clearTimeout(e.A),e.A=null)}function Ns(e){return e.g?e.g.readyState:0}function Ps(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case _s:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Os(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=function(e){var t="";return Da(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):Fu(e,t,n))}function Ls(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Rs(e){this.za=0,this.l=[],this.h=new Ho,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Ls("failFast",!1,e),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Ls("baseRetryDelayMs",5e3,e),this.$a=Ls("retryDelaySeedMs",1e4,e),this.Ya=Ls("forwardChannelMaxRetries",2,e),this.ra=Ls("forwardChannelRequestTimeoutMs",2e4,e),this.qa=e&&e.xmlHttpFactory||void 0,this.Ba=e&&e.Yb||!1,this.K=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.J="",this.i=new ts(e&&e.concurrentRequestLimit),this.Ca=new fs,this.ja=e&&e.fastHandshake||!1,this.Ra=e&&e.Wb||!1,e&&e.Aa&&this.h.Aa(),e&&e.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&e&&e.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!e||!1!==e.Xb}function js(e){if(Fs(e),3==e.G){var t=e.V++,n=Ou(e.F);Fu(n,"SID",e.J),Fu(n,"RID",t),Fu(n,"TYPE","terminate"),Bs(e,n),(t=new fu(e,e.h,t,void 0)).K=2,t.v=qu(Ou(n)),n=!1,oa.navigator&&oa.navigator.sendBeacon&&(n=oa.navigator.sendBeacon(t.v.toString(),"")),!n&&oa.Image&&((new Image).src=t.v,n=!0),n||(t.g=el(t.l,null),t.g.ea(t.v)),t.F=Date.now(),ku(t)}Js(e)}function Ms(e){e.g&&(Gs(e),e.g.cancel(),e.g=null)}function Fs(e){Ms(e),e.u&&(oa.clearTimeout(e.u),e.u=null),Qs(e),e.i.cancel(),e.m&&("number"===typeof e.m&&oa.clearTimeout(e.m),e.m=null)}function qs(e,t){e.l.push(new es(e.Za++,t)),3==e.G&&Vs(e)}function Vs(e){is(e.i)||e.m||(e.m=!0,No(e.Ha,e),e.C=0)}function Us(e,t){var n;n=t?t.m:e.V++;var r=Ou(e.F);Fu(r,"SID",e.J),Fu(r,"RID",n),Fu(r,"AID",e.U),Bs(e,r),e.o&&e.s&&Os(r,e.o,e.s),n=new fu(e,e.h,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.l=t.D.concat(e.l)),t=zs(e,n,1e3),n.setTimeout(Math.round(.5*e.ra)+Math.round(.5*e.ra*Math.random())),us(e.i,n),yu(n,r,t)}function Bs(e,t){e.j&&Iu({},(function(e,n){Fu(t,n,e)}))}function zs(e,t,n){n=Math.min(e.l.length,n);var r=e.j?pa(e.j.Oa,e.j,e):null;e:for(var i=e.l,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].h,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var u=!0,s=0;s<n;s++){var l=i[s].h,c=i[s].g;if(0>(l-=a))a=Math.max(0,i[s].h-100),u=!1;else try{hs(c,o,"req"+l+"_")}catch(Cl){r&&r(c)}}if(u){r=o.join("&");break e}}return e=e.l.splice(0,n),t.D=e,r}function Hs(e){e.g||e.u||(e.Y=1,No(e.Ga,e),e.A=0)}function Ks(e){return!(e.g||e.u||3<=e.A)&&(e.Y++,e.u=eu(pa(e.Ga,e),Ys(e,e.A)),e.A++,!0)}function Gs(e){null!=e.B&&(oa.clearTimeout(e.B),e.B=null)}function Ws(e){e.g=new fu(e,e.h,"rpc",e.Y),null===e.o&&(e.g.H=e.s),e.g.O=0;var t=Ou(e.oa);Fu(t,"RID","rpc"),Fu(t,"SID",e.J),Fu(t,"CI",e.N?"0":"1"),Fu(t,"AID",e.U),Bs(e,t),Fu(t,"TYPE","xmlhttp"),e.o&&e.s&&Os(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.la,n.K=1,n.v=qu(Ou(t)),n.s=null,n.U=!0,mu(n,e)}function Qs(e){null!=e.v&&(oa.clearTimeout(e.v),e.v=null)}function $s(e,t){var n=null;if(e.g==t){Qs(e),Gs(e),e.g=null;var r=2}else{if(!os(e.i,t))return;n=t.D,ss(e.i,t),r=1}if(e.I=t.N,0!=e.G)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;_o(r=Qo(),new Zo(r,n,t,i)),Vs(e)}else Hs(e);else if(3==(i=t.o)||0==i&&0<e.I||!(1==r&&function(e,t){return!(as(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.l=t.D.concat(e.l),!0):!(1==e.G||2==e.G||e.C>=(e.Xa?0:e.Ya))&&(e.m=eu(pa(e.Ha,e,t),Ys(e,e.C)),e.C++,!0))}(e,t)||2==r&&Ks(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:Xs(e,5);break;case 4:Xs(e,10);break;case 3:Xs(e,6);break;default:Xs(e,2)}}function Ys(e,t){var n=e.Pa+Math.floor(Math.random()*e.$a);return e.j||(n*=2),n*t}function Xs(e,t){if(e.h.info("Error code "+t),2==t){var n=null;e.j&&(n=null);var r=pa(e.jb,e);n||(n=new Pu("//www.google.com/images/cleardot.gif"),oa.location&&"http"==oa.location.protocol||Lu(n,"https"),qu(n)),function(e,t){var n=new Ho;if(oa.Image){var r=new Image;r.onload=va(ds,n,r,"TestLoadImage: loaded",!0,t),r.onerror=va(ds,n,r,"TestLoadImage: error",!1,t),r.onabort=va(ds,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=va(ds,n,r,"TestLoadImage: timeout",!1,t),oa.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else Jo(2);e.G=0,e.j&&e.j.va(t),Js(e),Fs(e)}function Js(e){e.G=0,e.I=-1,e.j&&(0==ls(e.i).length&&0==e.l.length||(e.i.i.length=0,_a(e.l),e.l.length=0),e.j.ua())}function Zs(e,t,n){var r=function(e){return e instanceof Pu?Ou(e):new Pu(e,void 0)}(n);if(""!=r.i)t&&Ru(r,t+"."+r.i),ju(r,r.m);else{var i=oa.location;r=function(e,t,n,r){var i=new Pu(null,void 0);return e&&Lu(i,e),t&&Ru(i,t),n&&ju(i,n),r&&(i.l=r),i}(i.protocol,t?t+"."+i.hostname:i.hostname,+i.port,n)}return e.aa&&Da(e.aa,(function(e,t){Fu(r,t,e)})),t=e.D,n=e.sa,t&&n&&Fu(r,t,n),Fu(r,"VER",e.ma),Bs(e,r),r}function el(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ba&&!e.qa?new ks(new ps({ib:!0})):new ks(e.qa)).L=e.H,t}function tl(){}function nl(){if(Ma&&!(10<=Number(Ya)))throw Error("Environmental error: no available transport.")}function rl(e,t){ko.call(this),this.g=new Rs(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.P=e,(e=t&&t.httpHeadersOverwriteParam)&&!xa(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!xa(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new ol(this)}function il(e){su.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function al(){lu.call(this),this.status=1}function ol(e){this.g=e}(na=ks.prototype).ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():ou.g(),this.C=this.u?iu(this.u):iu(ou),this.g.onreadystatechange=pa(this.Fa,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(a){return void Ss(this,a)}e=n||"";var i=new Cu(this.headers);r&&Iu(r,(function(e,t){i.set(t,e)})),r=function(e){e:{for(var t=Ts,n=e.length,r="string"===typeof e?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:"string"===typeof e?e.charAt(t):e[t]}(i.T()),n=oa.FormData&&e instanceof oa.FormData,!(0<=ba(Es,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(e,t){this.g.setRequestHeader(t,e)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Ds(this),0<this.B&&((this.K=function(e){return Ma&&Qa()&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=pa(this.pa,this)):this.A=Mo(this.pa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(a){Ss(this,a)}},na.pa=function(){"undefined"!=typeof aa&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,_o(this,"timeout"),this.abort(8))},na.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,_o(this,"complete"),_o(this,"abort"),As(this))},na.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),As(this,!0)),ks.Z.M.call(this)},na.Fa=function(){this.s||(this.F||this.v||this.l?Cs(this):this.cb())},na.cb=function(){Cs(this)},na.ba=function(){try{return 2<Ns(this)?this.g.status:-1}catch(ns){return-1}},na.ga=function(){try{return this.g?this.g.responseText:""}catch(ns){return""}},na.Qa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),ws(t)}},na.Da=function(){return this.m},na.La=function(){return"string"===typeof this.j?this.j:String(this.j)},(na=Rs.prototype).ma=8,na.G=1,na.hb=function(e){try{this.h.info("Origin Trials invoked: "+e)}catch(t){}},na.Ha=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;var t=new fu(this,this.h,e,void 0),n=this.s;if(this.P&&(n?Oa(n=Na(n),this.P):n=this.P),null===this.o&&(t.H=n),this.ja)e:{for(var r=0,i=0;i<this.l.length;i++){var a=this.l[i];if(void 0===(a="__data__"in a.g&&"string"===typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.l.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=zs(this,t,r),Fu(i=Ou(this.F),"RID",e),Fu(i,"CVER",22),this.D&&Fu(i,"X-HTTP-Session-Id",this.D),Bs(this,i),this.o&&n&&Os(i,this.o,n),us(this.i,t),this.Ra&&Fu(i,"TYPE","init"),this.ja?(Fu(i,"$req",r),Fu(i,"SID","null"),t.$=!0,yu(t,i,null)):yu(t,i,r),this.G=2}}else 3==this.G&&(e?Us(this,e):0==this.l.length||is(this.i)||Us(this))},na.Ga=function(){if(this.u=null,Ws(this),this.$&&!(this.L||null==this.g||0>=this.O)){var e=2*this.O;this.h.info("BP detection timer enabled: "+e),this.B=eu(pa(this.bb,this),e)}},na.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Jo(10),Ms(this),Ws(this))},na.ab=function(){null!=this.v&&(this.v=null,Ms(this),Ks(this),Jo(19))},na.jb=function(e){e?(this.h.info("Successfully pinged google.com"),Jo(2)):(this.h.info("Failed to ping google.com"),Jo(1))},(na=tl.prototype).xa=function(){},na.wa=function(){},na.va=function(){},na.ua=function(){},na.Oa=function(){},nl.prototype.g=function(e,t){return new rl(e,t)},ya(rl,ko),rl.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;e.Wa&&(e.h.info("Origin Trials enabled."),No(pa(e.hb,e,t))),Jo(0),e.W=t,e.aa=n||{},e.N=e.X,e.F=Zs(e,null,e.W),Vs(e)},rl.prototype.close=function(){js(this.g)},rl.prototype.u=function(e){if("string"===typeof e){var t={};t.__data__=e,qs(this.g,t)}else this.v?((t={}).__data__=Eo(e),qs(this.g,t)):qs(this.g,e)},rl.prototype.M=function(){this.g.j=null,delete this.j,js(this.g),delete this.g,rl.Z.M.call(this)},ya(il,su),ya(al,lu),ya(ol,tl),ol.prototype.xa=function(){_o(this.g,"a")},ol.prototype.wa=function(e){_o(this.g,new il(e))},ol.prototype.va=function(e){_o(this.g,new al(e))},ol.prototype.ua=function(){_o(this.g,"b")},nl.prototype.createWebChannel=nl.prototype.g,rl.prototype.send=rl.prototype.u,rl.prototype.open=rl.prototype.m,rl.prototype.close=rl.prototype.close,tu.NO_ERROR=0,tu.TIMEOUT=8,tu.HTTP_ERROR=6,nu.COMPLETE="complete",au.EventType=uu,uu.OPEN="a",uu.CLOSE="b",uu.ERROR="c",uu.MESSAGE="d",ko.prototype.listen=ko.prototype.N,ks.prototype.listenOnce=ks.prototype.O,ks.prototype.getLastError=ks.prototype.La,ks.prototype.getLastErrorCode=ks.prototype.Da,ks.prototype.getStatus=ks.prototype.ba,ks.prototype.getResponseJson=ks.prototype.Qa,ks.prototype.getResponseText=ks.prototype.ga,ks.prototype.send=ks.prototype.ea;var ul=ia.createWebChannelTransport=function(){return new nl},sl=ia.getStatEventTarget=function(){return Qo()},ll=ia.ErrorCode=tu,cl=ia.EventType=nu,fl=ia.Event=Go,hl=ia.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},dl=ia.FetchXmlHttpFactory=ps,pl=ia.WebChannel=au,vl=ia.XhrIo=ks,yl="@firebase/firestore",ml=function(){function e(t){Ce(this,e),this.uid=t}return Ie(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();ml.UNAUTHENTICATED=new ml(null),ml.GOOGLE_CREDENTIALS=new ml("google-credentials-uid"),ml.FIRST_PARTY=new ml("first-party-uid"),ml.MOCK_USER=new ml("mock-user");var gl="9.9.0",bl=new Ur("@firebase/firestore");function wl(){return bl.logLevel}function kl(e){if(bl.logLevel<=Lr.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(El);bl.debug.apply(bl,["Firestore (".concat(gl,"): ").concat(e)].concat(Te(i)))}}function _l(e){if(bl.logLevel<=Lr.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(El);bl.error.apply(bl,["Firestore (".concat(gl,"): ").concat(e)].concat(Te(i)))}}function xl(e){if(bl.logLevel<=Lr.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(El);bl.warn.apply(bl,["Firestore (".concat(gl,"): ").concat(e)].concat(Te(i)))}}function El(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function Tl(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(gl,") INTERNAL ASSERTION FAILED: ")+e;throw _l(t),new Error(t)}function Sl(e,t){e||Tl()}function Il(e,t){return e}var Cl={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Al=function(e){De(n,e);var t=Re(n);function n(e,r){var i;return Ce(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return Ie(n)}(br),Dl=Ie((function e(){var t=this;Ce(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),Nl=Ie((function e(t,n){Ce(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),Pl=function(){function e(){Ce(this,e)}return Ie(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(ml.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),Ol=function(){function e(t){Ce(this,e),this.token=t,this.changeListener=null}return Ie(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),Ll=function(){function e(t){Ce(this,e),this.t=t,this.currentUser=ml.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return Ie(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},o=new Dl;this.o=function(){n.i++,n.currentUser=n.u(),o.resolve(),o=new Dl,e.enqueueRetryable((function(){return i(n.currentUser)}))};var s=function(){var t=o;e.enqueueRetryable(u(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},l=function(e){kl("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),s()};this.t.onInit((function(e){return l(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?l(e):(kl("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Dl)}}),0),s()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(kl("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(Sl("string"==typeof n.accessToken),new Nl(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return Sl(null===e||"string"==typeof e),new ml(e)}}]),e}(),Rl=Ie((function e(t,n,r){Ce(this,e),this.type="FirstParty",this.user=ml.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",n);var i=t.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)})),jl=function(){function e(t,n,r){Ce(this,e),this.h=t,this.l=n,this.m=r}return Ie(e,[{key:"getToken",value:function(){return Promise.resolve(new Rl(this.h,this.l,this.m))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(ml.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),Ml=Ie((function e(t){Ce(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),Fl=function(){function e(t){Ce(this,e),this.g=t,this.forceRefresh=!1,this.appCheck=null,this.p=null}return Ie(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&kl("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.p;return n.p=e.token,kl("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){kl("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.g.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.g.getImmediate({optional:!0});e?i(e):kl("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(Sl("string"==typeof t.token),e.p=t.token,new Ml(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}();function ql(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}var Vl=function(){function e(){Ce(this,e)}return Ie(e,null,[{key:"I",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=ql(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n}}]),e}();function Ul(e,t){return e<t?-1:e>t?1:0}function Bl(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function zl(e){return e+"\0"}var Hl=function(){function e(t,n){if(Ce(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new Al(Cl.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Al(Cl.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new Al(Cl.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Al(Cl.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return Ie(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?Ul(this.nanoseconds,e.nanoseconds):Ul(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),Kl=function(){function e(t){Ce(this,e),this.timestamp=t}return Ie(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new Hl(0,0))}},{key:"max",value:function(){return new e(new Hl(253402300799,999999999))}}]),e}(),Gl=function(){function e(t,n,r){Ce(this,e),void 0===n?n=0:n>t.length&&Tl(),void 0===r?r=t.length-n:r>t.length-n&&Tl(),this.segments=t,this.offset=n,this.len=r}return Ie(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),Wl=function(e){De(n,e);var t=Re(n);function n(){return Ce(this,n),t.apply(this,arguments)}return Ie(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var u=o[a];if(u.indexOf("//")>=0)throw new Al(Cl.INVALID_ARGUMENT,"Invalid segment (".concat(u,"). Paths must not contain // in them."));e.push.apply(e,Te(u.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Gl),Ql=/^[_a-zA-Z][_a-zA-Z0-9]*$/,$l=function(e){De(n,e);var t=Re(n);function n(){return Ce(this,n),t.apply(this,arguments)}return Ie(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return Ql.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new Al(Cl.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var u=e[i];if("\\"===u){if(i+1===e.length)throw new Al(Cl.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var s=e[i+1];if("\\"!==s&&"."!==s&&"`"!==s)throw new Al(Cl.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=s,i+=2}else"`"===u?(o=!o,i++):"."!==u||o?(r+=u,i++):(a(),i++)}if(a(),o)throw new Al(Cl.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Gl),Yl=function(){function e(t){Ce(this,e),this.path=t}return Ie(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===Wl.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(Wl.fromString(t))}},{key:"fromName",value:function(t){return new e(Wl.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(Wl.emptyPath())}},{key:"comparator",value:function(e,t){return Wl.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new Wl(t.slice()))}}]),e}(),Xl=Ie((function e(t,n,r,i){Ce(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));function Jl(e){return e.fields.find((function(e){return 2===e.kind}))}function Zl(e){return e.fields.filter((function(e){return 2!==e.kind}))}Xl.UNKNOWN_ID=-1;var ec=Ie((function e(t,n){Ce(this,e),this.fieldPath=t,this.kind=n})),tc=function(){function e(t,n){Ce(this,e),this.sequenceNumber=t,this.offset=n}return Ie(e,null,[{key:"empty",value:function(){return new e(0,ic.min())}}]),e}();function nc(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Kl.fromTimestamp(1e9===r?new Hl(n+1,0):new Hl(n,r));return new ic(i,Yl.empty(),t)}function rc(e){return new ic(e.readTime,e.key,-1)}var ic=function(){function e(t,n,r){Ce(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return Ie(e,null,[{key:"min",value:function(){return new e(Kl.min(),Yl.empty(),-1)}},{key:"max",value:function(){return new e(Kl.max(),Yl.empty(),-1)}}]),e}();function ac(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=Yl.comparator(e.documentKey,t.documentKey))?n:Ul(e.largestBatchId,t.largestBatchId)}var oc="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",uc=function(){function e(){Ce(this,e),this.onCommittedListeners=[]}return Ie(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}();function sc(e){return lc.apply(this,arguments)}function lc(){return lc=u(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===Cl.FAILED_PRECONDITION&&t.message===oc){e.next=2;break}throw t;case 2:kl("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)}))),lc.apply(this,arguments)}var cc=function(){function e(t){var n=this;Ce(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return Ie(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&Tl(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=Fe(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}},{key:"mapArray",value:function(t,n){return new e((function(e,r){for(var i=t.length,a=new Array(i),o=0,u=function(u){var s=u;n(t[s]).next((function(t){a[s]=t,++o===i&&e(a)}),(function(e){return r(e)}))},s=0;s<i;s++)u(s)}))}},{key:"doWhile",value:function(t,n){return new e((function(e,r){!function i(){!0===t()?n().next((function(){i()}),r):e()}()}))}}]),e}(),fc=function(){function e(t,n){var r=this;Ce(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.T=new Dl,this.transaction.oncomplete=function(){r.T.resolve()},this.transaction.onabort=function(){n.error?r.T.reject(new pc(t,n.error)):r.T.resolve()},this.transaction.onerror=function(e){var n=bc(e.target.error);r.T.reject(new pc(t,n))}}return Ie(e,[{key:"A",get:function(){return this.T.promise}},{key:"abort",value:function(e){e&&this.T.reject(e),this.aborted||(kl("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"R",value:function(){var e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new yc(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new pc(n,t)}}}]),e}(),hc=function(){function e(t,n,r){Ce(this,e),this.name=t,this.version=n,this.P=r,12.2===e.v(yr())&&_l("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return Ie(e,[{key:"k",value:function(){var e=u(a().mark((function e(t){var n=this;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return kl("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new pc(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new Al(Cl.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new Al(Cl.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new pc(t,n))},i.onupgradeneeded=function(e){kl("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.P.O(t,i.transaction,e.oldVersion,n.version).next((function(){kl("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.M&&(this.db.onversionchange=function(e){return n.M(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"F",value:function(e){this.M=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=u(a().mark((function e(t,n,r,i){var o,u,s,l,c,f=this;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o="readonly"===n,u=0;case 2:return++u,e.prev=3,e.delegateYield(a().mark((function e(){var n,u;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.k(t);case 2:return f.db=e.sent,n=fc.open(f.db,t,o?"readonly":"readwrite",r),u=i(n).next((function(e){return n.R(),e})).catch((function(e){return n.abort(e),cc.reject(e)})).toPromise(),u.catch((function(){})),e.next=7,n.A;case 7:return e.t0=u,e.abrupt("return",{v:e.t0});case 9:case"end":return e.stop()}}),e)}))(),"t0",5);case 5:if("object"!==typeof(s=e.t0)){e.next=8;break}return e.abrupt("return",s.v);case 8:e.next=15;break;case 10:if(e.prev=10,e.t1=e.catch(3),l=e.t1,c="FirebaseError"!==l.name&&u<3,kl("SimpleDb","Transaction failed with error:",l.message,"Retrying:",c),this.close(),c){e.next=15;break}return e.abrupt("return",Promise.reject(l));case 15:e.next=2;break;case 17:case"end":return e.stop()}}),e,this,[[3,10]])})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return kl("SimpleDb","Removing database:",e),mc(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"V",value:function(){if(!gr())return!1;if(e.S())return!0;var t=yr(),n=e.v(t),r=0<n&&n<10,i=e.D(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}},{key:"S",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_USE_PHOTODIODE:"true",REACT_APP_USE_EEG:"true",REACT_APP_VOLUME:"true"})||void 0===e?void 0:e.C)}},{key:"N",value:function(e,t){return e.store(t)}},{key:"v",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"D",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),dc=function(){function e(t){Ce(this,e),this.$=t,this.B=!1,this.L=null}return Ie(e,[{key:"isDone",get:function(){return this.B}},{key:"U",get:function(){return this.L}},{key:"cursor",set:function(e){this.$=e}},{key:"done",value:function(){this.B=!0}},{key:"q",value:function(e){this.L=e}},{key:"delete",value:function(){return mc(this.$.delete())}}]),e}(),pc=function(e){De(n,e);var t=Re(n);function n(e,r){var i;return Ce(this,n),(i=t.call(this,Cl.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return Ie(n)}(Al);function vc(e){return"IndexedDbTransactionError"===e.name}var yc=function(){function e(t){Ce(this,e),this.store=t}return Ie(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(kl("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(kl("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),mc(n)}},{key:"add",value:function(e){return kl("SimpleDb","ADD",this.store.name,e,e),mc(this.store.add(e))}},{key:"get",value:function(e){var t=this;return mc(this.store.get(e)).next((function(n){return void 0===n&&(n=null),kl("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return kl("SimpleDb","DELETE",this.store.name,e),mc(this.store.delete(e))}},{key:"count",value:function(){return kl("SimpleDb","COUNT",this.store.name),mc(this.store.count())}},{key:"K",value:function(e,t){var n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){var r=this.cursor(n),i=[];return this.G(r,(function(e,t){i.push(t)})).next((function(){return i}))}var a=this.store.getAll(n.range);return new cc((function(e,t){a.onerror=function(e){t(e.target.error)},a.onsuccess=function(t){e(t.target.result)}}))}},{key:"j",value:function(e,t){var n=this.store.getAll(e,null===t?void 0:t);return new cc((function(e,t){n.onerror=function(e){t(e.target.error)},n.onsuccess=function(t){e(t.target.result)}}))}},{key:"W",value:function(e,t){kl("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.H=!1;var r=this.cursor(n);return this.G(r,(function(e,t,n){return n.delete()}))}},{key:"J",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.G(r,t)}},{key:"Y",value:function(e){var t=this.cursor({});return new cc((function(n,r){t.onerror=function(e){var t=bc(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"G",value:function(e,t){var n=[];return new cc((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new dc(i),o=t(i.primaryKey,i.value,a);if(o instanceof cc){var u=o.catch((function(e){return a.done(),cc.reject(e)}));n.push(u)}a.isDone?r():null===a.U?i.continue():i.continue(a.U)}else r()}})).next((function(){return cc.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.H?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function mc(e){return new cc((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=bc(e.target.error);n(t)}}))}var gc=!1;function bc(e){var t=hc.v(yr());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new Al("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return gc||(gc=!0,setTimeout((function(){throw r}),0)),r}}return e}var wc=function(){function e(t,n){Ce(this,e),this.asyncQueue=t,this.X=n,this.task=null}return Ie(e,[{key:"start",value:function(){}},{key:"stop",value:function(){this.task&&(this.task.cancel(),this.task=null)}},{key:"started",get:function(){return null!==this.task}},{key:"Z",value:function(e){var t=this;kl("IndexBackiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,u(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.task=null,e.prev=1,e.t0=kl,e.t1="Documents written: ",e.next=6,t.X.tt();case 6:e.t2=e.sent,e.t3=e.t1.concat.call(e.t1,e.t2),(0,e.t0)("IndexBackiller",e.t3),e.next=19;break;case 11:if(e.prev=11,e.t4=e.catch(1),!vc(e.t4)){e.next=17;break}kl("IndexBackiller","Ignoring IndexedDB error during index backfill: ",e.t4),e.next=19;break;case 17:return e.next=19,sc(e.t4);case 19:return e.next=21,t.Z(1);case 21:case"end":return e.stop()}}),e,null,[[1,11]])}))))}}]),e}(),kc=function(){function e(t,n){Ce(this,e),this.localStore=t,this.persistence=n}return Ie(e,[{key:"tt",value:function(){var e=u(a().mark((function e(){var t,n=this,r=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:50,e.abrupt("return",this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(function(e){return n.et(e,t)})));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"et",value:function(e,t){var n=this,r=new Set,i=t,a=!0;return cc.doWhile((function(){return!0===a&&i>0}),(function(){return n.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((function(t){if(null!==t&&!r.has(t))return kl("IndexBackiller","Processing collection: ".concat(t)),n.nt(e,t,i).next((function(e){i-=e,r.add(t)}));a=!1}))})).next((function(){return t-i}))}},{key:"nt",value:function(e,t,n){var r=this;return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((function(i){return r.localStore.localDocuments.getNextDocuments(e,t,i,n).next((function(n){var a=n.changes;return r.localStore.indexManager.updateIndexEntries(e,a).next((function(){return r.st(i,n)})).next((function(n){return kl("IndexBackiller","Updating offset: ".concat(n)),r.localStore.indexManager.updateCollectionGroup(e,t,n)})).next((function(){return a.size}))}))}))}},{key:"st",value:function(e,t){var n=e;return t.changes.forEach((function(e,t){var r=rc(t);ac(r,n)>0&&(n=r)})),new ic(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}]),e}(),_c=function(){function e(t,n){var r=this;Ce(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.it(e)},this.rt=function(e){return n.writeSequenceNumber(e)})}return Ie(e,[{key:"it",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.rt&&this.rt(e),e}}]),e}();function xc(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Ec(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Tc(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}_c.ot=-1;var Sc=function(){function e(t,n){Ce(this,e),this.comparator=t,this.root=n||Cc.EMPTY}return Ie(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Cc.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Cc.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new Ic(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new Ic(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new Ic(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new Ic(this.root,e,this.comparator,!0)}}]),e}(),Ic=function(){function e(t,n,r,i){Ce(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return Ie(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),Cc=function(){function e(t,n,r,i,a){Ce(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return Ie(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw Tl();if(this.right.isRed())throw Tl();var e=this.left.check();if(e!==this.right.check())throw Tl();return e+(this.isRed()?0:1)}}]),e}();Cc.EMPTY=null,Cc.RED=!0,Cc.BLACK=!1,Cc.EMPTY=new(function(){function e(){Ce(this,e),this.size=0}return Ie(e,[{key:"key",get:function(){throw Tl()}},{key:"value",get:function(){throw Tl()}},{key:"color",get:function(){throw Tl()}},{key:"left",get:function(){throw Tl()}},{key:"right",get:function(){throw Tl()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new Cc(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var Ac=function(){function e(t){Ce(this,e),this.comparator=t,this.data=new Sc(this.comparator)}return Ie(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new Dc(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new Dc(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),Dc=function(){function e(t){Ce(this,e),this.iter=t}return Ie(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();function Nc(e){return e.hasNext()?e.getNext():void 0}var Pc=function(){function e(t){Ce(this,e),this.fields=t,t.sort($l.comparator)}return Ie(e,[{key:"unionWith",value:function(t){var n,r=new Ac($l.comparator),i=Fe(this.fields);try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r.add(a)}}catch(l){i.e(l)}finally{i.f()}var o,u=Fe(t);try{for(u.s();!(o=u.n()).done;){var s=o.value;r=r.add(s)}}catch(l){u.e(l)}finally{u.f()}return new e(r.toArray())}},{key:"covers",value:function(e){var t,n=Fe(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return Bl(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}],[{key:"empty",value:function(){return new e([])}}]),e}();var Oc=function(e){function t(e){Ce(this,t),this.binaryString=e}return Ie(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return Ul(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){return new t(atob(e))}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();Oc.EMPTY_BYTE_STRING=new Oc("");var Lc=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Rc(e){if(Sl(!!e),"string"==typeof e){var t=0,n=Lc.exec(e);if(Sl(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:jc(e.seconds),nanos:jc(e.nanos)}}function jc(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Mc(e){return"string"==typeof e?Oc.fromBase64String(e):Oc.fromUint8Array(e)}function Fc(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function qc(e){var t=e.mapValue.fields.__previous_value__;return Fc(t)?qc(t):t}function Vc(e){var t=Rc(e.mapValue.fields.__local_write_time__.timestampValue);return new Hl(t.seconds,t.nanos)}var Uc=Ie((function e(t,n,r,i,a,o,u,s){Ce(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.useFetchStreams=s})),Bc=function(){function e(t,n){Ce(this,e),this.projectId=t,this.database=n||"(default)"}return Ie(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}();function zc(e){return null==e}function Hc(e){return 0===e&&1/e==-1/0}function Kc(e){return"number"==typeof e&&Number.isInteger(e)&&!Hc(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}var Gc={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Wc={nullValue:"NULL_VALUE"};function Qc(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Fc(e)?4:lf(e)?9007199254740991:10:Tl()}function $c(e,t){if(e===t)return!0;var n=Qc(e);if(n!==Qc(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Vc(e).isEqual(Vc(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=Rc(e.timestampValue),r=Rc(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Mc(e.bytesValue).isEqual(Mc(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return jc(e.geoPointValue.latitude)===jc(t.geoPointValue.latitude)&&jc(e.geoPointValue.longitude)===jc(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return jc(e.integerValue)===jc(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=jc(e.doubleValue),r=jc(t.doubleValue);return n===r?Hc(n)===Hc(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Bl(e.arrayValue.values||[],t.arrayValue.values||[],$c);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(xc(n)!==xc(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!$c(n[i],r[i])))return!1;return!0}(e,t);default:return Tl()}}function Yc(e,t){return void 0!==(e.values||[]).find((function(e){return $c(e,t)}))}function Xc(e,t){if(e===t)return 0;var n=Qc(e),r=Qc(t);if(n!==r)return Ul(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ul(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=jc(e.integerValue||e.doubleValue),r=jc(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Jc(e.timestampValue,t.timestampValue);case 4:return Jc(Vc(e),Vc(t));case 5:return Ul(e.stringValue,t.stringValue);case 6:return function(e,t){var n=Mc(e),r=Mc(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=Ul(n[i],r[i]);if(0!==a)return a}return Ul(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=Ul(jc(e.latitude),jc(t.latitude));return 0!==n?n:Ul(jc(e.longitude),jc(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=Xc(n[i],r[i]);if(a)return a}return Ul(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===Gc.mapValue&&t===Gc.mapValue)return 0;if(e===Gc.mapValue)return 1;if(t===Gc.mapValue)return-1;var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var u=Ul(r[o],a[o]);if(0!==u)return u;var s=Xc(n[r[o]],i[a[o]]);if(0!==s)return s}return Ul(r.length,a.length)}(e.mapValue,t.mapValue);default:throw Tl()}}function Jc(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Ul(e,t);var n=Rc(e),r=Rc(t),i=Ul(n.seconds,r.seconds);return 0!==i?i:Ul(n.nanos,r.nanos)}function Zc(e){return ef(e)}function ef(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=Rc(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?Mc(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,Yl.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=Fe(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=ef(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=Fe(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(ef(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):Tl();var t,n}function tf(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function nf(e){return!!e&&"integerValue"in e}function rf(e){return!!e&&"arrayValue"in e}function af(e){return!!e&&"nullValue"in e}function of(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function uf(e){return!!e&&"mapValue"in e}function sf(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return Ec(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=sf(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=sf(e.arrayValue.values[r]);return n}return Object.assign({},e)}function lf(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function cf(e){return"nullValue"in e?Wc:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?tf(Bc.empty(),Yl.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:Tl()}function ff(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?tf(Bc.empty(),Yl.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?Gc:Tl()}function hf(e,t){var n=Xc(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function df(e,t){var n=Xc(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}var pf=function(){function e(t){Ce(this,e),this.value=t}return Ie(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!uf(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=sf(t)}},{key:"setAll",value:function(e){var t=this,n=$l.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=sf(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());uf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return $c(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];uf(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){Ec(t,(function(t,n){return e[t]=n}));var r,i=Fe(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(sf(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function vf(e){var t=[];return Ec(e.fields,(function(e,n){var r=new $l([e]);if(uf(n)){var i=vf(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=Fe(i);try{for(o.s();!(a=o.n()).done;){var u=a.value;t.push(r.child(u))}}catch(s){o.e(s)}finally{o.f()}}}else t.push(r)})),new Pc(t)}var yf=function(){function e(t,n,r,i,a,o){Ce(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.data=a,this.documentState=o}return Ie(e,[{key:"convertToFoundDocument",value:function(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=pf.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=pf.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this.version=Kl.min(),this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,Kl.min(),Kl.min(),pf.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r){return new e(t,1,n,Kl.min(),r,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,Kl.min(),pf.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,Kl.min(),pf.empty(),2)}}]),e}(),mf=Ie((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;Ce(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=u,this.ut=null}));function gf(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return new mf(e,t,n,r,i,a,o)}function bf(e){var t=Il(e);if(null===t.ut){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return(t=e).field.canonicalString()+t.op.toString()+Zc(t.value);var t})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),zc(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return Zc(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return Zc(e)})).join(",")),t.ut=n}return t.ut}function wf(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!jf(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(i=e.filters[r],a=t.filters[r],i.op!==a.op||!i.field.isEqual(a.field)||!$c(i.value,a.value))return!1;var i,a;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Ff(e.startAt,t.startAt)&&Ff(e.endAt,t.endAt)}function kf(e){return Yl.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function _f(e,t){return e.filters.filter((function(e){return e instanceof Tf&&e.field.isEqual(t)}))}function xf(e,t,n){var r,i=Wc,a=!0,o=Fe(_f(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=Wc,l=!0;switch(u.op){case"<":case"<=":s=cf(u.value);break;case"==":case"in":case">=":s=u.value;break;case">":s=u.value,l=!1;break;case"!=":case"not-in":s=Wc}hf({value:i,inclusive:a},{value:s,inclusive:l})<0&&(i=s,a=l)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var c=0;c<e.orderBy.length;++c)if(e.orderBy[c].field.isEqual(t)){var f=n.position[c];hf({value:i,inclusive:a},{value:f,inclusive:n.inclusive})<0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}function Ef(e,t,n){var r,i=Gc,a=!0,o=Fe(_f(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=Gc,l=!0;switch(u.op){case">=":case">":s=ff(u.value),l=!1;break;case"==":case"in":case"<=":s=u.value;break;case"<":s=u.value,l=!1;break;case"!=":case"not-in":s=Gc}df({value:i,inclusive:a},{value:s,inclusive:l})>0&&(i=s,a=l)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var c=0;c<e.orderBy.length;++c)if(e.orderBy[c].field.isEqual(t)){var f=n.position[c];df({value:i,inclusive:a},{value:f,inclusive:n.inclusive})>0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}var Tf=function(e){De(n,e);var t=Re(n);function n(e,r,i){var a;return Ce(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return Ie(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.at(Xc(t,this.value)):null!==t&&Qc(this.value)===Qc(t)&&this.at(Xc(t,this.value))}},{key:"at",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Tl()}}},{key:"ht",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.ct(e,t,r):new Sf(e,t,r):"array-contains"===t?new Df(e,r):"in"===t?new Nf(e,r):"not-in"===t?new Pf(e,r):"array-contains-any"===t?new Of(e,r):new n(e,t,r)}},{key:"ct",value:function(e,t,n){return"in"===t?new If(e,n):new Cf(e,n)}}]),n}(function(){return Ie((function e(){Ce(this,e)}))}()),Sf=function(e){De(n,e);var t=Re(n);function n(e,r,i){var a;return Ce(this,n),(a=t.call(this,e,r,i)).key=Yl.fromName(i.referenceValue),a}return Ie(n,[{key:"matches",value:function(e){var t=Yl.comparator(e.key,this.key);return this.at(t)}}]),n}(Tf),If=function(e){De(n,e);var t=Re(n);function n(e,r){var i;return Ce(this,n),(i=t.call(this,e,"in",r)).keys=Af("in",r),i}return Ie(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Tf),Cf=function(e){De(n,e);var t=Re(n);function n(e,r){var i;return Ce(this,n),(i=t.call(this,e,"not-in",r)).keys=Af("not-in",r),i}return Ie(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Tf);function Af(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return Yl.fromName(e.referenceValue)}))}var Df=function(e){De(n,e);var t=Re(n);function n(e,r){return Ce(this,n),t.call(this,e,"array-contains",r)}return Ie(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return rf(t)&&Yc(t.arrayValue,this.value)}}]),n}(Tf),Nf=function(e){De(n,e);var t=Re(n);function n(e,r){return Ce(this,n),t.call(this,e,"in",r)}return Ie(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&Yc(this.value.arrayValue,t)}}]),n}(Tf),Pf=function(e){De(n,e);var t=Re(n);function n(e,r){return Ce(this,n),t.call(this,e,"not-in",r)}return Ie(n,[{key:"matches",value:function(e){if(Yc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!Yc(this.value.arrayValue,t)}}]),n}(Tf),Of=function(e){De(n,e);var t=Re(n);function n(e,r){return Ce(this,n),t.call(this,e,"array-contains-any",r)}return Ie(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!rf(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return Yc(t.value.arrayValue,e)}))}}]),n}(Tf),Lf=Ie((function e(t,n){Ce(this,e),this.position=t,this.inclusive=n})),Rf=Ie((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";Ce(this,e),this.field=t,this.dir=n}));function jf(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function Mf(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?Yl.comparator(Yl.fromName(o.referenceValue),n.key):Xc(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function Ff(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!$c(e.position[n],t.position[n]))return!1;return!0}var qf=Ie((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;Ce(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=u,this.endAt=s,this.lt=null,this.ft=null,this.startAt,this.endAt}));function Vf(e,t,n,r,i,a,o,u){return new qf(e,t,n,r,i,a,o,u)}function Uf(e){return new qf(e)}function Bf(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function zf(e){var t,n=Fe(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.ht())return r.field}}catch(i){n.e(i)}finally{n.f()}return null}function Hf(e){return null!==e.collectionGroup}function Kf(e){var t=Il(e);if(null===t.lt){t.lt=[];var n=zf(t),r=Bf(t);if(null!==n&&null===r)n.isKeyField()||t.lt.push(new Rf(n)),t.lt.push(new Rf($l.keyField(),"asc"));else{var i,a=!1,o=Fe(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var u=i.value;t.lt.push(u),u.field.isKeyField()&&(a=!0)}}catch(l){o.e(l)}finally{o.f()}if(!a){var s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.lt.push(new Rf($l.keyField(),s))}}}return t.lt}function Gf(e){var t=Il(e);if(!t.ft)if("F"===t.limitType)t.ft=gf(t.path,t.collectionGroup,Kf(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=Fe(Kf(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new Rf(a.field,o))}}catch(l){i.e(l)}finally{i.f()}var u=t.endAt?new Lf(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new Lf(t.startAt.position,t.startAt.inclusive):null;t.ft=gf(t.path,t.collectionGroup,r,t.filters,t.limit,u,s)}return t.ft}function Wf(e,t,n){return new qf(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Qf(e,t){return wf(Gf(e),Gf(t))&&e.limitType===t.limitType}function $f(e){return"".concat(bf(Gf(e)),"|lt:").concat(e.limitType)}function Yf(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return"".concat((t=e).field.canonicalString()," ").concat(t.op," ").concat(Zc(t.value));var t})).join(", "),"]")),zc(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return Zc(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return Zc(e)})).join(",")),"Target(".concat(t,")")}(Gf(e)),"; limitType=").concat(e.limitType,")")}function Xf(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Yl.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=Fe(e.explicitOrderBy);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=Fe(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=Mf(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Kf(e),t))&&!(e.endAt&&!function(e,t,n){var r=Mf(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Kf(e),t))}(e,t)}function Jf(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Zf(e){return function(t,n){var r,i=!1,a=Fe(Kf(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,u=eh(o,t,n);if(0!==u)return u;i=i||o.field.isKeyField()}}catch(s){a.e(s)}finally{a.f()}return 0}}function eh(e,t,n){var r=e.field.isKeyField()?Yl.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Xc(r,i):Tl()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Tl()}}function th(e,t){if(e.dt){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Hc(t)?"-0":t}}function nh(e){return{integerValue:""+e}}function rh(e,t){return Kc(t)?nh(t):th(e,t)}var ih=Ie((function e(){Ce(this,e),this._=void 0}));function ah(e,t,n){return e instanceof sh?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof lh?ch(e,t):e instanceof fh?hh(e,t):function(e,t){var n=uh(e,t),r=ph(n)+ph(e._t);return nf(n)&&nf(e._t)?nh(r):th(e.wt,r)}(e,t)}function oh(e,t,n){return e instanceof lh?ch(e,t):e instanceof fh?hh(e,t):n}function uh(e,t){return e instanceof dh?nf(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var sh=function(e){De(n,e);var t=Re(n);function n(){return Ce(this,n),t.apply(this,arguments)}return Ie(n)}(ih),lh=function(e){De(n,e);var t=Re(n);function n(e){var r;return Ce(this,n),(r=t.call(this)).elements=e,r}return Ie(n)}(ih);function ch(e,t){var n,r=vh(t),i=Fe(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return $c(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var fh=function(e){De(n,e);var t=Re(n);function n(e){var r;return Ce(this,n),(r=t.call(this)).elements=e,r}return Ie(n)}(ih);function hh(e,t){var n,r=vh(t),i=Fe(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!$c(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var dh=function(e){De(n,e);var t=Re(n);function n(e,r){var i;return Ce(this,n),(i=t.call(this)).wt=e,i._t=r,i}return Ie(n)}(ih);function ph(e){return jc(e.integerValue||e.doubleValue)}function vh(e){return rf(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var yh=Ie((function e(t,n){Ce(this,e),this.field=t,this.transform=n}));var mh=Ie((function e(t,n){Ce(this,e),this.version=t,this.transformResults=n})),gh=function(){function e(t,n){Ce(this,e),this.updateTime=t,this.exists=n}return Ie(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function bh(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var wh=Ie((function e(){Ce(this,e)}));function kh(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Oh(e.key,gh.none()):new Sh(e.key,e.data,gh.none());var n,r=e.data,i=pf.empty(),a=new Ac($l.comparator),o=Fe(t.fields);try{for(o.s();!(n=o.n()).done;){var u=n.value;if(!a.has(u)){var s=r.field(u);null===s&&u.length>1&&(u=u.popLast(),s=r.field(u)),null===s?i.delete(u):i.set(u,s),a=a.add(u)}}}catch(l){o.e(l)}finally{o.f()}return new Ih(e.key,i,new Pc(a.toArray()),gh.none())}function _h(e,t,n){e instanceof Sh?function(e,t,n){var r=e.value.clone(),i=Ah(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Ih?function(e,t,n){if(bh(e.precondition,t)){var r=Ah(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Ch(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function xh(e,t,n,r){return e instanceof Sh?function(e,t,n,r){if(!bh(e.precondition,t))return n;var i=e.value.clone(),a=Dh(e.fieldTransforms,r,t);return i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Ih?function(e,t,n,r){if(!bh(e.precondition,t))return n;var i=Dh(e.fieldTransforms,r,t),a=t.data;return a.setAll(Ch(e)),a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((function(e){return e.field})))}(e,t,n,r):function(e,t,n){return bh(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Eh(e,t){var n,r=null,i=Fe(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),u=uh(a.transform,o||null);null!=u&&(null===r&&(r=pf.empty()),r.set(a.field,u))}}catch(s){i.e(s)}finally{i.f()}return r||null}function Th(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Bl(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof lh&&t instanceof lh||e instanceof fh&&t instanceof fh?Bl(e.elements,t.elements,$c):e instanceof dh&&t instanceof dh?$c(e._t,t._t):e instanceof sh&&t instanceof sh}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var Sh=function(e){De(n,e);var t=Re(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return Ce(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return Ie(n,[{key:"getFieldMask",value:function(){return null}}]),n}(wh),Ih=function(e){De(n,e);var t=Re(n);function n(e,r,i,a){var o,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return Ce(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=u,o.type=1,o}return Ie(n,[{key:"getFieldMask",value:function(){return this.fieldMask}}]),n}(wh);function Ch(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function Ah(e,t,n){var r=new Map;Sl(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,u=t.data.field(a.field);r.set(a.field,oh(o,u,n[i]))}return r}function Dh(e,t,n){var r,i=new Map,a=Fe(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,u=o.transform,s=n.data.field(o.field);i.set(o.field,ah(u,s,t))}}catch(l){a.e(l)}finally{a.f()}return i}var Nh,Ph,Oh=function(e){De(n,e);var t=Re(n);function n(e,r){var i;return Ce(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return Ie(n,[{key:"getFieldMask",value:function(){return null}}]),n}(wh),Lh=function(e){De(n,e);var t=Re(n);function n(e,r){var i;return Ce(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return Ie(n,[{key:"getFieldMask",value:function(){return null}}]),n}(wh),Rh=Ie((function e(t){Ce(this,e),this.count=t}));function jh(e){switch(e){default:return Tl();case Cl.CANCELLED:case Cl.UNKNOWN:case Cl.DEADLINE_EXCEEDED:case Cl.RESOURCE_EXHAUSTED:case Cl.INTERNAL:case Cl.UNAVAILABLE:case Cl.UNAUTHENTICATED:return!1;case Cl.INVALID_ARGUMENT:case Cl.NOT_FOUND:case Cl.ALREADY_EXISTS:case Cl.PERMISSION_DENIED:case Cl.FAILED_PRECONDITION:case Cl.ABORTED:case Cl.OUT_OF_RANGE:case Cl.UNIMPLEMENTED:case Cl.DATA_LOSS:return!0}}function Mh(e){if(void 0===e)return _l("GRPC error has no .code"),Cl.UNKNOWN;switch(e){case Nh.OK:return Cl.OK;case Nh.CANCELLED:return Cl.CANCELLED;case Nh.UNKNOWN:return Cl.UNKNOWN;case Nh.DEADLINE_EXCEEDED:return Cl.DEADLINE_EXCEEDED;case Nh.RESOURCE_EXHAUSTED:return Cl.RESOURCE_EXHAUSTED;case Nh.INTERNAL:return Cl.INTERNAL;case Nh.UNAVAILABLE:return Cl.UNAVAILABLE;case Nh.UNAUTHENTICATED:return Cl.UNAUTHENTICATED;case Nh.INVALID_ARGUMENT:return Cl.INVALID_ARGUMENT;case Nh.NOT_FOUND:return Cl.NOT_FOUND;case Nh.ALREADY_EXISTS:return Cl.ALREADY_EXISTS;case Nh.PERMISSION_DENIED:return Cl.PERMISSION_DENIED;case Nh.FAILED_PRECONDITION:return Cl.FAILED_PRECONDITION;case Nh.ABORTED:return Cl.ABORTED;case Nh.OUT_OF_RANGE:return Cl.OUT_OF_RANGE;case Nh.UNIMPLEMENTED:return Cl.UNIMPLEMENTED;case Nh.DATA_LOSS:return Cl.DATA_LOSS;default:return Tl()}}(Ph=Nh||(Nh={}))[Ph.OK=0]="OK",Ph[Ph.CANCELLED=1]="CANCELLED",Ph[Ph.UNKNOWN=2]="UNKNOWN",Ph[Ph.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ph[Ph.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ph[Ph.NOT_FOUND=5]="NOT_FOUND",Ph[Ph.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ph[Ph.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ph[Ph.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ph[Ph.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ph[Ph.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ph[Ph.ABORTED=10]="ABORTED",Ph[Ph.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ph[Ph.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ph[Ph.INTERNAL=13]="INTERNAL",Ph[Ph.UNAVAILABLE=14]="UNAVAILABLE",Ph[Ph.DATA_LOSS=15]="DATA_LOSS";var Fh=function(){function e(t,n){Ce(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return Ie(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=Fe(n);try{for(i.s();!(r=i.n()).done;){var a=c(r.value,2),o=a[0],u=a[1];if(this.equalsFn(o,e))return u}}catch(s){i.e(s)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){Ec(this.inner,(function(t,n){var r,i=Fe(n);try{for(i.s();!(r=i.n()).done;){var a=c(r.value,2),o=a[0],u=a[1];e(o,u)}}catch(s){i.e(s)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return Tc(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),qh=new Sc(Yl.comparator);function Vh(){return qh}var Uh=new Sc(Yl.comparator);function Bh(){for(var e=Uh,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.insert(o.key,o)}return e}function zh(e){var t=Uh;return e.forEach((function(e,n){return t=t.insert(e,n.overlayedDocument)})),t}function Hh(){return Gh()}function Kh(){return Gh()}function Gh(){return new Fh((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var Wh=new Sc(Yl.comparator),Qh=new Ac(Yl.comparator);function $h(){for(var e=Qh,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var Yh=new Ac(Ul);function Xh(){return Yh}var Jh=function(){function e(t,n,r,i,a){Ce(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return Ie(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n){var r=new Map;return r.set(t,Zh.createSynthesizedTargetChangeForCurrentChange(t,n)),new e(Kl.min(),r,Xh(),Vh(),$h())}}]),e}(),Zh=function(){function e(t,n,r,i,a){Ce(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return Ie(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n){return new e(Oc.EMPTY_BYTE_STRING,n,$h(),$h(),$h())}}]),e}(),ed=Ie((function e(t,n,r,i){Ce(this,e),this.gt=t,this.removedTargetIds=n,this.key=r,this.yt=i})),td=Ie((function e(t,n){Ce(this,e),this.targetId=t,this.It=n})),nd=Ie((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Oc.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;Ce(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),rd=function(){function e(){Ce(this,e),this.Tt=0,this.Et=od(),this.At=Oc.EMPTY_BYTE_STRING,this.Rt=!1,this.bt=!0}return Ie(e,[{key:"current",get:function(){return this.Rt}},{key:"resumeToken",get:function(){return this.At}},{key:"Pt",get:function(){return 0!==this.Tt}},{key:"vt",get:function(){return this.bt}},{key:"Vt",value:function(e){e.approximateByteSize()>0&&(this.bt=!0,this.At=e)}},{key:"St",value:function(){var e=$h(),t=$h(),n=$h();return this.Et.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Tl()}})),new Zh(this.At,this.Rt,e,t,n)}},{key:"Dt",value:function(){this.bt=!1,this.Et=od()}},{key:"Ct",value:function(e,t){this.bt=!0,this.Et=this.Et.insert(e,t)}},{key:"xt",value:function(e){this.bt=!0,this.Et=this.Et.remove(e)}},{key:"Nt",value:function(){this.Tt+=1}},{key:"kt",value:function(){this.Tt-=1}},{key:"Ot",value:function(){this.bt=!0,this.Rt=!0}}]),e}(),id=function(){function e(t){Ce(this,e),this.Mt=t,this.Ft=new Map,this.$t=Vh(),this.Bt=ad(),this.Lt=new Ac(Ul)}return Ie(e,[{key:"Ut",value:function(e){var t,n=Fe(e.gt);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.yt&&e.yt.isFoundDocument()?this.qt(r,e.yt):this.Kt(r,e.key,e.yt)}}catch(u){n.e(u)}finally{n.f()}var i,a=Fe(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.Kt(o,e.key,e.yt)}}catch(u){a.e(u)}finally{a.f()}}},{key:"Gt",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.Qt(n);switch(e.state){case 0:t.jt(n)&&r.Vt(e.resumeToken);break;case 1:r.kt(),r.Pt||r.Dt(),r.Vt(e.resumeToken);break;case 2:r.kt(),r.Pt||t.removeTarget(n);break;case 3:t.jt(n)&&(r.Ot(),r.Vt(e.resumeToken));break;case 4:t.jt(n)&&(t.Wt(n),r.Vt(e.resumeToken));break;default:Tl()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.Ft.forEach((function(e,r){n.jt(r)&&t(r)}))}},{key:"zt",value:function(e){var t=e.targetId,n=e.It.count,r=this.Ht(t);if(r){var i=r.target;if(kf(i))if(0===n){var a=new Yl(i.path);this.Kt(t,a,yf.newNoDocument(a,Kl.min()))}else Sl(1===n);else this.Jt(t)!==n&&(this.Wt(t),this.Lt=this.Lt.add(t))}}},{key:"Yt",value:function(e){var t=this,n=new Map;this.Ft.forEach((function(r,i){var a=t.Ht(i);if(a){if(r.current&&kf(a.target)){var o=new Yl(a.target.path);null!==t.$t.get(o)||t.Xt(i,o)||t.Kt(i,o,yf.newNoDocument(o,e))}r.vt&&(n.set(i,r.St()),r.Dt())}}));var r=$h();this.Bt.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.Ht(e);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.$t.forEach((function(t,n){return n.setReadTime(e)}));var i=new Jh(e,n,this.Lt,this.$t,r);return this.$t=Vh(),this.Bt=ad(),this.Lt=new Ac(Ul),i}},{key:"qt",value:function(e,t){if(this.jt(e)){var n=this.Xt(e,t.key)?2:0;this.Qt(e).Ct(t.key,n),this.$t=this.$t.insert(t.key,t),this.Bt=this.Bt.insert(t.key,this.Zt(t.key).add(e))}}},{key:"Kt",value:function(e,t,n){if(this.jt(e)){var r=this.Qt(e);this.Xt(e,t)?r.Ct(t,1):r.xt(t),this.Bt=this.Bt.insert(t,this.Zt(t).delete(e)),n&&(this.$t=this.$t.insert(t,n))}}},{key:"removeTarget",value:function(e){this.Ft.delete(e)}},{key:"Jt",value:function(e){var t=this.Qt(e).St();return this.Mt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Nt",value:function(e){this.Qt(e).Nt()}},{key:"Qt",value:function(e){var t=this.Ft.get(e);return t||(t=new rd,this.Ft.set(e,t)),t}},{key:"Zt",value:function(e){var t=this.Bt.get(e);return t||(t=new Ac(Ul),this.Bt=this.Bt.insert(e,t)),t}},{key:"jt",value:function(e){var t=null!==this.Ht(e);return t||kl("WatchChangeAggregator","Detected inactive target",e),t}},{key:"Ht",value:function(e){var t=this.Ft.get(e);return t&&t.Pt?null:this.Mt.te(e)}},{key:"Wt",value:function(e){var t=this;this.Ft.set(e,new rd),this.Mt.getRemoteKeysForTarget(e).forEach((function(n){t.Kt(e,n,null)}))}},{key:"Xt",value:function(e,t){return this.Mt.getRemoteKeysForTarget(e).has(t)}}]),e}();function ad(){return new Sc(Yl.comparator)}function od(){return new Sc(Yl.comparator)}var ud={asc:"ASCENDING",desc:"DESCENDING"},sd={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},ld=Ie((function e(t,n){Ce(this,e),this.databaseId=t,this.dt=n}));function cd(e,t){return e.dt?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function fd(e,t){return e.dt?t.toBase64():t.toUint8Array()}function hd(e,t){return cd(e,t.toTimestamp())}function dd(e){return Sl(!!e),Kl.fromTimestamp(function(e){var t=Rc(e);return new Hl(t.seconds,t.nanos)}(e))}function pd(e,t){return function(e){return new Wl(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function vd(e){var t=Wl.fromString(e);return Sl(Fd(t)),t}function yd(e,t){return pd(e.databaseId,t.path)}function md(e,t){var n=vd(t);if(n.get(1)!==e.databaseId.projectId)throw new Al(Cl.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Al(Cl.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Yl(kd(n))}function gd(e,t){return pd(e.databaseId,t)}function bd(e){var t=vd(e);return 4===t.length?Wl.emptyPath():kd(t)}function wd(e){return new Wl(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function kd(e){return Sl(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function _d(e,t,n){return{name:yd(e,t),fields:n.value.mapValue.fields}}function xd(e,t,n){var r=md(e,t.name),i=dd(t.updateTime),a=new pf({mapValue:{fields:t.fields}}),o=yf.newFoundDocument(r,i,a);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function Ed(e,t){return"found"in t?function(e,t){Sl(!!t.found),t.found.name,t.found.updateTime;var n=md(e,t.found.name),r=dd(t.found.updateTime),i=new pf({mapValue:{fields:t.found.fields}});return yf.newFoundDocument(n,r,i)}(e,t):"missing"in t?function(e,t){Sl(!!t.missing),Sl(!!t.readTime);var n=md(e,t.missing),r=dd(t.readTime);return yf.newNoDocument(n,r)}(e,t):Tl()}function Td(e,t){var n;if(t instanceof Sh)n={update:_d(e,t.key,t.value)};else if(t instanceof Oh)n={delete:yd(e,t.key)};else if(t instanceof Ih)n={update:_d(e,t.key,t.data),updateMask:Md(t.fieldMask)};else{if(!(t instanceof Lh))return Tl();n={verify:yd(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof sh)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof lh)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof fh)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof dh)return{fieldPath:t.field.canonicalString(),increment:n._t};throw Tl()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:hd(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Tl()}(e,t.precondition)),n}function Sd(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?gh.updateTime(dd(e.updateTime)):void 0!==e.exists?gh.exists(e.exists):gh.none()}(t.currentDocument):gh.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)Sl("REQUEST_TIME"===t.setToServerValue),n=new sh;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new lh(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new fh(i)}else"increment"in t?n=new dh(e,t.increment):Tl();var a=$l.fromServerFormat(t.fieldPath);return new yh(a,n)}(e,t)})):[];if(t.update){t.update.name;var i=md(e,t.update.name),a=new pf({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new Pc(t.map((function(e){return $l.fromServerFormat(e)})))}(t.updateMask);return new Ih(i,a,o,n,r)}return new Sh(i,a,n,r)}if(t.delete){var u=md(e,t.delete);return new Oh(u,n)}if(t.verify){var s=md(e,t.verify);return new Lh(s,n)}return Tl()}function Id(e,t){return{documents:[gd(e,t.path)]}}function Cd(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=gd(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=gd(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length){var t=e.map((function(e){return function(e){if("=="===e.op){if(of(e.value))return{unaryFilter:{field:Od(e.field),op:"IS_NAN"}};if(af(e.value))return{unaryFilter:{field:Od(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(of(e.value))return{unaryFilter:{field:Od(e.field),op:"IS_NOT_NAN"}};if(af(e.value))return{unaryFilter:{field:Od(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Od(e.field),op:Pd(e.op),value:e.value}}}(e)}));return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:Od(e.field),direction:Nd(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o,u=function(e,t){return e.dt||zc(t)?t:{value:t}}(e,t.limit);return null!==u&&(n.structuredQuery.limit=u),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function Ad(e){var t=bd(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Sl(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=Dd(n.where));var u=[];n.orderBy&&(u=n.orderBy.map((function(e){return function(e){return new Rf(Ld(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var s=null;n.limit&&(s=function(e){var t;return zc(t="object"==typeof e?e.value:e)?null:t}(n.limit));var l=null;n.startAt&&(l=function(e){var t=!!e.before,n=e.values||[];return new Lf(n,t)}(n.startAt));var c=null;return n.endAt&&(c=function(e){var t=!e.before,n=e.values||[];return new Lf(n,t)}(n.endAt)),Vf(t,i,u,o,s,"F",l,c)}function Dd(e){return e?void 0!==e.unaryFilter?[jd(e)]:void 0!==e.fieldFilter?[Rd(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return Dd(e)})).reduce((function(e,t){return e.concat(t)})):Tl():[]}function Nd(e){return ud[e]}function Pd(e){return sd[e]}function Od(e){return{fieldPath:e.canonicalString()}}function Ld(e){return $l.fromServerFormat(e.fieldPath)}function Rd(e){return Tf.create(Ld(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Tl()}}(e.fieldFilter.op),e.fieldFilter.value)}function jd(e){switch(e.unaryFilter.op){case"IS_NAN":var t=Ld(e.unaryFilter.field);return Tf.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=Ld(e.unaryFilter.field);return Tf.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Ld(e.unaryFilter.field);return Tf.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Ld(e.unaryFilter.field);return Tf.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Tl()}}function Md(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function Fd(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function qd(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=Ud(t)),t=Vd(e.get(n),t);return Ud(t)}function Vd(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function Ud(e){return e+"\x01\x01"}function Bd(e){var t=e.length;if(Sl(t>=2),2===t)return Sl("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),Wl.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&Tl(),e.charAt(o+1)){case"\x01":var u=e.substring(a,o),s=void 0;0===i.length?s=u:(s=i+=u,i=""),r.push(s);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:Tl()}a=o+2}return new Wl(r)}var zd=["userId","batchId"];function Hd(e,t){return[e,qd(t)]}function Kd(e,t,n){return[e,qd(t),n]}var Gd={},Wd=["prefixPath","collectionGroup","readTime","documentId"],Qd=["prefixPath","collectionGroup","documentId"],$d=["collectionGroup","readTime","prefixPath","documentId"],Yd=["canonicalId","targetId"],Xd=["targetId","path"],Jd=["path","targetId"],Zd=["collectionId","parent"],ep=["indexId","uid"],tp=["uid","sequenceNumber"],np=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],rp=["indexId","uid","orderedDocumentKey"],ip=["userId","collectionPath","documentId"],ap=["userId","collectionPath","largestBatchId"],op=["userId","collectionGroup","largestBatchId"],up=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),sp=[].concat(Te(up),["documentOverlays"]),lp=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],cp=lp,fp=[].concat(cp,["indexConfiguration","indexState","indexEntries"]),hp=function(e){De(n,e);var t=Re(n);function n(e,r){var i;return Ce(this,n),(i=t.call(this)).ee=e,i.currentSequenceNumber=r,i}return Ie(n)}(uc);function dp(e,t){var n=Il(e);return hc.N(n.ee,t)}var pp=function(){function e(t,n,r,i){Ce(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return Ie(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&_h(i,e,n[r])}}},{key:"applyToLocalView",value:function(e,t){var n,r=Fe(this.baseMutations);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.key.isEqual(e.key)&&(t=xh(i,e,t,this.localWriteTime))}}catch(s){r.e(s)}finally{r.f()}var a,o=Fe(this.mutations);try{for(o.s();!(a=o.n()).done;){var u=a.value;u.key.isEqual(e.key)&&(t=xh(u,e,t,this.localWriteTime))}}catch(s){o.e(s)}finally{o.f()}return t}},{key:"applyToLocalDocumentSet",value:function(e,t){var n=this,r=Kh();return this.mutations.forEach((function(i){var a=e.get(i.key),o=a.overlayedDocument,u=n.applyToLocalView(o,a.mutatedFields),s=kh(o,u=t.has(i.key)?null:u);null!==s&&r.set(i.key,s),o.isValidDocument()||o.convertToNoDocument(Kl.min())})),r}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),$h())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&Bl(this.mutations,e.mutations,(function(e,t){return Th(e,t)}))&&Bl(this.baseMutations,e.baseMutations,(function(e,t){return Th(e,t)}))}}]),e}(),vp=function(){function e(t,n,r,i){Ce(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return Ie(e,null,[{key:"from",value:function(t,n,r){Sl(t.mutations.length===r.length);for(var i=Wh,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),yp=function(){function e(t,n){Ce(this,e),this.largestBatchId=t,this.mutation=n}return Ie(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),mp=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Kl.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Kl.min(),u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Oc.EMPTY_BYTE_STRING;Ce(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u}return Ie(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}]),e}(),gp=Ie((function e(t){Ce(this,e),this.ne=t}));function bp(e,t){var n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:wp(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:yd(e,t.key),fields:t.data.value.mapValue.fields,updateTime:cd(e,t.version.toTimestamp())}}(e.ne,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:kp(t.version)};else{if(!t.isUnknownDocument())return Tl();r.unknownDocument={path:n.path.toArray(),version:kp(t.version)}}return r}function wp(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function kp(e){var t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function _p(e){var t=new Hl(e.seconds,e.nanoseconds);return Kl.fromTimestamp(t)}function xp(e,t){for(var n=(t.baseMutations||[]).map((function(t){return Sd(e.ne,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var a=t.mutations[r+1];i.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map((function(t){return Sd(e.ne,t)})),u=Hl.fromMillis(t.localWriteTimeMs);return new pp(t.batchId,u,n,o)}function Ep(e){var t,n,r=_p(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?_p(e.lastLimboFreeSnapshotVersion):Kl.min();return void 0!==e.query.documents?(Sl(1===(n=e.query).documents.length),t=Gf(Uf(bd(n.documents[0])))):t=function(e){return Gf(Ad(e))}(e.query),new mp(t,e.targetId,0,e.lastListenSequenceNumber,r,i,Oc.fromBase64String(e.resumeToken))}function Tp(e,t){var n,r=kp(t.snapshotVersion),i=kp(t.lastLimboFreeSnapshotVersion);n=kf(t.target)?Id(e.ne,t.target):Cd(e.ne,t.target);var a=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:bf(t.target),readTime:r,resumeToken:a,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:n}}function Sp(e){var t=Ad({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Wf(t,t.limit,"L"):t}function Ip(e,t){return new yp(t.largestBatchId,Sd(e.ne,t.overlayMutation))}function Cp(e,t){var n=t.path.lastSegment();return[e,qd(t.path.popLast()),n]}function Ap(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:kp(r.readTime),documentKey:qd(r.documentKey.path),largestBatchId:r.largestBatchId}}var Dp=function(){function e(){Ce(this,e)}return Ie(e,[{key:"getBundleMetadata",value:function(e,t){return Np(e).get(t).next((function(e){if(e)return{id:(t=e).bundleId,createTime:_p(t.createTime),version:t.version};var t}))}},{key:"saveBundleMetadata",value:function(e,t){return Np(e).put({bundleId:(n=t).id,createTime:kp(dd(n.createTime)),version:n.version});var n}},{key:"getNamedQuery",value:function(e,t){return Pp(e).get(t).next((function(e){if(e)return{name:(t=e).name,query:Sp(t.bundledQuery),readTime:_p(t.readTime)};var t}))}},{key:"saveNamedQuery",value:function(e,t){return Pp(e).put(function(e){return{name:e.name,readTime:kp(dd(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function Np(e){return dp(e,"bundles")}function Pp(e){return dp(e,"namedQueries")}var Op=function(){function e(t,n){Ce(this,e),this.wt=t,this.userId=n}return Ie(e,[{key:"getOverlay",value:function(e,t){var n=this;return Lp(e).get(Cp(this.userId,t)).next((function(e){return e?Ip(n.wt,e):null}))}},{key:"getOverlays",value:function(e,t){var n=this,r=Hh();return cc.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this,i=[];return n.forEach((function(n,a){var o=new yp(t,a);i.push(r.ie(e,o))})),cc.waitFor(i)}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=new Set;t.forEach((function(e){return i.add(qd(e.getCollectionPath()))}));var a=[];return i.forEach((function(t){var i=IDBKeyRange.bound([r.userId,t,n],[r.userId,t,n+1],!1,!0);a.push(Lp(e).W("collectionPathOverlayIndex",i))})),cc.waitFor(a)}},{key:"getOverlaysForCollection",value:function(e,t,n){var r=this,i=Hh(),a=qd(t),o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return Lp(e).K("collectionPathOverlayIndex",o).next((function(e){var t,n=Fe(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,o=Ip(r.wt,a);i.set(o.getKey(),o)}}catch(u){n.e(u)}finally{n.f()}return i}))}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){var i,a=this,o=Hh(),u=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Lp(e).J({index:"collectionGroupOverlayIndex",range:u},(function(e,t,n){var u=Ip(a.wt,t);o.size()<r||u.largestBatchId===i?(o.set(u.getKey(),u),i=u.largestBatchId):n.done()})).next((function(){return o}))}},{key:"ie",value:function(e,t){return Lp(e).put(function(e,t,n){var r=c(Cp(t,n.mutation.key),3);r[0];return{userId:t,collectionPath:r[1],documentId:r[2],collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:Td(e.ne,n.mutation)}}(this.wt,this.userId,t))}}],[{key:"se",value:function(t,n){return new e(t,n.uid||"")}}]),e}();function Lp(e){return dp(e,"documentOverlays")}var Rp=function(){function e(){Ce(this,e)}return Ie(e,[{key:"re",value:function(e,t){this.oe(e,t),t.ue()}},{key:"oe",value:function(e,t){if("nullValue"in e)this.ce(t,5);else if("booleanValue"in e)this.ce(t,10),t.ae(e.booleanValue?1:0);else if("integerValue"in e)this.ce(t,15),t.ae(jc(e.integerValue));else if("doubleValue"in e){var n=jc(e.doubleValue);isNaN(n)?this.ce(t,13):(this.ce(t,15),Hc(n)?t.ae(0):t.ae(n))}else if("timestampValue"in e){var r=e.timestampValue;this.ce(t,20),"string"==typeof r?t.he(r):(t.he("".concat(r.seconds||"")),t.ae(r.nanos||0))}else if("stringValue"in e)this.le(e.stringValue,t),this.fe(t);else if("bytesValue"in e)this.ce(t,30),t.de(Mc(e.bytesValue)),this.fe(t);else if("referenceValue"in e)this._e(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.ce(t,45),t.ae(i.latitude||0),t.ae(i.longitude||0)}else"mapValue"in e?lf(e)?this.ce(t,Number.MAX_SAFE_INTEGER):(this.we(e.mapValue,t),this.fe(t)):"arrayValue"in e?(this.me(e.arrayValue,t),this.fe(t)):Tl()}},{key:"le",value:function(e,t){this.ce(t,25),this.ge(e,t)}},{key:"ge",value:function(e,t){t.he(e)}},{key:"we",value:function(e,t){var n=e.fields||{};this.ce(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this.le(a,t),this.oe(n[a],t)}}},{key:"me",value:function(e,t){var n=e.values||[];this.ce(t,50);var r,i=Fe(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.oe(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"_e",value:function(e,t){var n=this;this.ce(t,37),Yl.fromName(e).path.forEach((function(e){n.ce(t,60),n.ge(e,t)}))}},{key:"ce",value:function(e,t){e.ae(t)}},{key:"fe",value:function(e){e.ae(2)}}]),e}();function jp(e){if(0===e)return 8;var t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function Mp(e){var t=64-function(e){for(var t=0,n=0;n<8;++n){var r=jp(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}Rp.ye=new Rp;var Fp=function(){function e(){Ce(this,e),this.buffer=new Uint8Array(1024),this.position=0}return Ie(e,[{key:"pe",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Ie(n.value),n=t.next();this.Te()}},{key:"Ee",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Ae(n.value),n=t.next();this.Re()}},{key:"be",value:function(e){var t,n=Fe(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.Ie(i);else if(i<2048)this.Ie(960|i>>>6),this.Ie(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.Ie(480|i>>>12),this.Ie(128|63&i>>>6),this.Ie(128|63&i);else{var a=r.codePointAt(0);this.Ie(240|a>>>18),this.Ie(128|63&a>>>12),this.Ie(128|63&a>>>6),this.Ie(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.Te()}},{key:"Pe",value:function(e){var t,n=Fe(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.Ae(i);else if(i<2048)this.Ae(960|i>>>6),this.Ae(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.Ae(480|i>>>12),this.Ae(128|63&i>>>6),this.Ae(128|63&i);else{var a=r.codePointAt(0);this.Ae(240|a>>>18),this.Ae(128|63&a>>>12),this.Ae(128|63&a>>>6),this.Ae(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.Re()}},{key:"ve",value:function(e){var t=this.Ve(e),n=Mp(t);this.Se(1+n),this.buffer[this.position++]=255&n;for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}},{key:"De",value:function(e){var t=this.Ve(e),n=Mp(t);this.Se(1+n),this.buffer[this.position++]=~(255&n);for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}},{key:"Ce",value:function(){this.xe(255),this.xe(255)}},{key:"Ne",value:function(){this.ke(255),this.ke(255)}},{key:"reset",value:function(){this.position=0}},{key:"seed",value:function(e){this.Se(e.length),this.buffer.set(e,this.position),this.position+=e.length}},{key:"Oe",value:function(){return this.buffer.slice(0,this.position)}},{key:"Ve",value:function(e){var t=function(e){var t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(var r=1;r<t.length;++r)t[r]^=n?255:0;return t}},{key:"Ie",value:function(e){var t=255&e;0===t?(this.xe(0),this.xe(255)):255===t?(this.xe(255),this.xe(0)):this.xe(t)}},{key:"Ae",value:function(e){var t=255&e;0===t?(this.ke(0),this.ke(255)):255===t?(this.ke(255),this.ke(0)):this.ke(e)}},{key:"Te",value:function(){this.xe(0),this.xe(1)}},{key:"Re",value:function(){this.ke(0),this.ke(1)}},{key:"xe",value:function(e){this.Se(1),this.buffer[this.position++]=e}},{key:"ke",value:function(e){this.Se(1),this.buffer[this.position++]=~e}},{key:"Se",value:function(e){var t=e+this.position;if(!(t<=this.buffer.length)){var n=2*this.buffer.length;n<t&&(n=t);var r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}}]),e}(),qp=function(){function e(t){Ce(this,e),this.Me=t}return Ie(e,[{key:"de",value:function(e){this.Me.pe(e)}},{key:"he",value:function(e){this.Me.be(e)}},{key:"ae",value:function(e){this.Me.ve(e)}},{key:"ue",value:function(){this.Me.Ce()}}]),e}(),Vp=function(){function e(t){Ce(this,e),this.Me=t}return Ie(e,[{key:"de",value:function(e){this.Me.Ee(e)}},{key:"he",value:function(e){this.Me.Pe(e)}},{key:"ae",value:function(e){this.Me.De(e)}},{key:"ue",value:function(){this.Me.Ne()}}]),e}(),Up=function(){function e(){Ce(this,e),this.Me=new Fp,this.Fe=new qp(this.Me),this.$e=new Vp(this.Me)}return Ie(e,[{key:"seed",value:function(e){this.Me.seed(e)}},{key:"Be",value:function(e){return 0===e?this.Fe:this.$e}},{key:"Oe",value:function(){return this.Me.Oe()}},{key:"reset",value:function(){this.Me.reset()}}]),e}(),Bp=function(){function e(t,n,r,i){Ce(this,e),this.indexId=t,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}return Ie(e,[{key:"Le",value:function(){var t=this.directionalValue.length,n=0===t||255===this.directionalValue[t-1]?t+1:t,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new e(this.indexId,this.documentKey,this.arrayValue,r)}}]),e}();function zp(e,t){var n=e.indexId-t.indexId;return 0!==n?n:0!==(n=Hp(e.arrayValue,t.arrayValue))?n:0!==(n=Hp(e.directionalValue,t.directionalValue))?n:Yl.comparator(e.documentKey,t.documentKey)}function Hp(e,t){for(var n=0;n<e.length&&n<t.length;++n){var r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}var Kp=function(){function e(t){Ce(this,e),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Ue=t.orderBy,this.qe=[];var n,r=Fe(t.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.ht()?this.Ke=i:this.qe.push(i)}}catch(a){r.e(a)}finally{r.f()}}return Ie(e,[{key:"Ge",value:function(e){var t=Jl(e);if(void 0!==t&&!this.Qe(t))return!1;for(var n=Zl(e),r=0,i=0;r<n.length&&this.Qe(n[r]);++r);if(r===n.length)return!0;if(void 0!==this.Ke){var a=n[r];if(!this.je(this.Ke,a)||!this.We(this.Ue[i++],a))return!1;++r}for(;r<n.length;++r){var o=n[r];if(i>=this.Ue.length||!this.We(this.Ue[i++],o))return!1}return!0}},{key:"Qe",value:function(e){var t,n=Fe(this.qe);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this.je(r,e))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"je",value:function(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;var n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}},{key:"We",value:function(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}]),e}(),Gp=function(){function e(){Ce(this,e),this.ze=new Wp}return Ie(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.ze.add(t),cc.resolve()}},{key:"getCollectionParents",value:function(e,t){return cc.resolve(this.ze.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return cc.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return cc.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return cc.resolve(null)}},{key:"getIndexType",value:function(e,t){return cc.resolve(0)}},{key:"getFieldIndexes",value:function(e,t){return cc.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return cc.resolve(null)}},{key:"getMinOffset",value:function(e,t){return cc.resolve(ic.min())}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return cc.resolve(ic.min())}},{key:"updateCollectionGroup",value:function(e,t,n){return cc.resolve()}},{key:"updateIndexEntries",value:function(e,t){return cc.resolve()}}]),e}(),Wp=function(){function e(){Ce(this,e),this.index={}}return Ie(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Ac(Wl.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new Ac(Wl.comparator)).toArray()}}]),e}(),Qp=new Uint8Array(0),$p=function(){function e(t,n){Ce(this,e),this.user=t,this.databaseId=n,this.He=new Wp,this.Je=new Fh((function(e){return bf(e)}),(function(e,t){return wf(e,t)})),this.uid=t.uid||""}return Ie(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.He.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.He.add(t)}));var a={collectionId:r,parent:qd(i)};return Yp(e).put(a)}return cc.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[zl(t),""],!1,!0);return Yp(e).K(r).next((function(e){var r,i=Fe(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push(Bd(a.parent))}}catch(o){i.e(o)}finally{i.f()}return n}))}},{key:"addFieldIndex",value:function(e,t){var n=this,r=Jp(e),i=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((function(e){return[e.fieldPath.canonicalString(),e.kind]}))}}(t);delete i.indexId;var a=r.add(i);if(t.indexState){var o=Zp(e);return a.next((function(e){o.put(Ap(e,n.user,t.indexState.sequenceNumber,t.indexState.offset))}))}return a.next()}},{key:"deleteFieldIndex",value:function(e,t){var n=Jp(e),r=Zp(e),i=Xp(e);return n.delete(t.indexId).next((function(){return r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))})).next((function(){return i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))}))}},{key:"getDocumentsMatchingTarget",value:function(e,t){var n=this,r=Xp(e),i=!0,a=new Map;return cc.forEach(this.Ye(t),(function(t){return n.Xe(e,t).next((function(e){i&&(i=!!e),a.set(t,e)}))})).next((function(){if(i){var e=$h(),o=[];return cc.forEach(a,(function(i,a){var u;kl("IndexedDbIndexManager","Using index ".concat((u=i,"id=".concat(u.indexId,"|cg=").concat(u.collectionGroup,"|f=").concat(u.fields.map((function(e){return"".concat(e.fieldPath,":").concat(e.kind)})).join(",")))," to execute ").concat(bf(t)));var s=function(e,t){var n=Jl(t);if(void 0===n)return null;var r,i=Fe(_f(e,n.fieldPath));try{for(i.s();!(r=i.n()).done;){var a=r.value;switch(a.op){case"array-contains-any":return a.value.arrayValue.values||[];case"array-contains":return[a.value]}}}catch(o){i.e(o)}finally{i.f()}return null}(a,i),l=function(e,t){var n,r=new Map,i=Fe(Zl(t));try{for(i.s();!(n=i.n()).done;){var a,o=n.value,u=Fe(_f(e,o.fieldPath));try{for(u.s();!(a=u.n()).done;){var s=a.value;switch(s.op){case"==":case"in":r.set(o.fieldPath.canonicalString(),s.value);break;case"not-in":case"!=":return r.set(o.fieldPath.canonicalString(),s.value),Array.from(r.values())}}}catch(l){u.e(l)}finally{u.f()}}}catch(l){i.e(l)}finally{i.f()}return null}(a,i),c=function(e,t){var n,r=[],i=!0,a=Fe(Zl(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?xf(e,o.fieldPath,e.startAt):Ef(e,o.fieldPath,e.startAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new Lf(r,i)}(a,i),f=function(e,t){var n,r=[],i=!0,a=Fe(Zl(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?Ef(e,o.fieldPath,e.endAt):xf(e,o.fieldPath,e.endAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new Lf(r,i)}(a,i),h=n.Ze(i,a,c),d=n.Ze(i,a,f),p=n.tn(i,a,l),v=n.en(i.indexId,s,h,c.inclusive,d,f.inclusive,p);return cc.forEach(v,(function(n){return r.j(n,t.limit).next((function(t){t.forEach((function(t){var n=Yl.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),o.push(n))}))}))}))})).next((function(){return o}))}return cc.resolve(null)}))}},{key:"Ye",value:function(e){var t=this.Je.get(e);return t||(t=[e],this.Je.set(e,t),t)}},{key:"en",value:function(e,t,n,r,i,a,o){for(var u=this,s=(null!=t?t.length:1)*Math.max(n.length,i.length),l=s/(null!=t?t.length:1),c=[],f=function(s){var f=t?u.nn(t[s/l]):Qp,h=u.sn(e,f,n[s%l],r),d=u.rn(e,f,i[s%l],a),p=o.map((function(t){return u.sn(e,f,t,!0)}));c.push.apply(c,Te(u.createRange(h,d,p)))},h=0;h<s;++h)f(h);return c}},{key:"sn",value:function(e,t,n,r){var i=new Bp(e,Yl.empty(),t,n);return r?i:i.Le()}},{key:"rn",value:function(e,t,n,r){var i=new Bp(e,Yl.empty(),t,n);return r?i.Le():i}},{key:"Xe",value:function(e,t){var n=new Kp(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((function(e){var t,r=null,i=Fe(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;n.Ge(a)&&(!r||a.fields.length>r.fields.length)&&(r=a)}}catch(o){i.e(o)}finally{i.f()}return r}))}},{key:"getIndexType",value:function(e,t){var n=this,r=2;return cc.forEach(this.Ye(t),(function(t){return n.Xe(e,t).next((function(e){e?0!==r&&e.fields.length<function(e){var t,n=new Ac($l.comparator),r=!1,i=Fe(e.filters);try{for(i.s();!(t=i.n()).done;){var a=t.value;a.field.isKeyField()||("array-contains"===a.op||"array-contains-any"===a.op?r=!0:n=n.add(a.field))}}catch(l){i.e(l)}finally{i.f()}var o,u=Fe(e.orderBy);try{for(u.s();!(o=u.n()).done;){var s=o.value;s.field.isKeyField()||(n=n.add(s.field))}}catch(l){u.e(l)}finally{u.f()}return n.size+(r?1:0)}(t)&&(r=1):r=0}))})).next((function(){return r}))}},{key:"on",value:function(e,t){var n,r=new Up,i=Fe(Zl(e));try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.fieldPath);if(null==o)return null;var u=r.Be(a.kind);Rp.ye.re(o,u)}}catch(s){i.e(s)}finally{i.f()}return r.Oe()}},{key:"nn",value:function(e){var t=new Up;return Rp.ye.re(e,t.Be(0)),t.Oe()}},{key:"un",value:function(e,t){var n=new Up;return Rp.ye.re(tf(this.databaseId,t),n.Be(function(e){var t=Zl(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Oe()}},{key:"tn",value:function(e,t,n){if(null===n)return[];var r=[];r.push(new Up);var i,a=0,o=Fe(Zl(e));try{for(o.s();!(i=o.n()).done;){var u,s=i.value,l=n[a++],c=Fe(r);try{for(c.s();!(u=c.n()).done;){var f=u.value;if(this.cn(t,s.fieldPath)&&rf(l))r=this.an(r,s,l);else{var h=f.Be(s.kind);Rp.ye.re(l,h)}}}catch(d){c.e(d)}finally{c.f()}}}catch(d){o.e(d)}finally{o.f()}return this.hn(r)}},{key:"Ze",value:function(e,t,n){return this.tn(e,t,n.position)}},{key:"hn",value:function(e){for(var t=[],n=0;n<e.length;++n)t[n]=e[n].Oe();return t}},{key:"an",value:function(e,t,n){var r,i=Te(e),a=[],o=Fe(n.arrayValue.values||[]);try{for(o.s();!(r=o.n()).done;){var u,s=r.value,l=Fe(i);try{for(l.s();!(u=l.n()).done;){var c=u.value,f=new Up;f.seed(c.Oe()),Rp.ye.re(s,f.Be(t.kind)),a.push(f)}}catch(h){l.e(h)}finally{l.f()}}}catch(h){o.e(h)}finally{o.f()}return a}},{key:"cn",value:function(e,t){return!!e.filters.find((function(e){return e instanceof Tf&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)}))}},{key:"getFieldIndexes",value:function(e,t){var n=this,r=Jp(e),i=Zp(e);return(t?r.K("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.K()).next((function(e){var t=[];return cc.forEach(e,(function(e){return i.get([e.indexId,n.uid]).next((function(n){t.push(function(e,t){var n=t?new tc(t.sequenceNumber,new ic(_p(t.readTime),new Yl(Bd(t.documentKey)),t.largestBatchId)):tc.empty(),r=e.fields.map((function(e){var t=c(e,2),n=t[0],r=t[1];return new ec($l.fromServerFormat(n),r)}));return new Xl(e.indexId,e.collectionGroup,r,n)}(e,n))}))})).next((function(){return t}))}))}},{key:"getNextCollectionGroupToUpdate",value:function(e){return this.getFieldIndexes(e).next((function(e){return 0===e.length?null:(e.sort((function(e,t){var n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:Ul(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)}))}},{key:"updateCollectionGroup",value:function(e,t,n){var r=this,i=Jp(e),a=Zp(e);return this.ln(e).next((function(e){return i.K("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((function(t){return cc.forEach(t,(function(t){return a.put(Ap(t.indexId,r.user,e,n))}))}))}))}},{key:"updateIndexEntries",value:function(e,t){var n=this,r=new Map;return cc.forEach(t,(function(t,i){var a=r.get(t.collectionGroup);return(a?cc.resolve(a):n.getFieldIndexes(e,t.collectionGroup)).next((function(a){return r.set(t.collectionGroup,a),cc.forEach(a,(function(r){return n.fn(e,t,r).next((function(t){var a=n.dn(i,r);return t.isEqual(a)?cc.resolve():n._n(e,i,r,t,a)}))}))}))}))}},{key:"wn",value:function(e,t,n,r){return Xp(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.un(n,t.key),documentKey:t.key.path.toArray()})}},{key:"mn",value:function(e,t,n,r){return Xp(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.un(n,t.key),t.key.path.toArray()])}},{key:"fn",value:function(e,t,n){var r=Xp(e),i=new Ac(zp);return r.J({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.un(n,t)])},(function(e,r){i=i.add(new Bp(n.indexId,t,r.arrayValue,r.directionalValue))})).next((function(){return i}))}},{key:"dn",value:function(e,t){var n=new Ac(zp),r=this.on(t,e);if(null==r)return n;var i=Jl(t);if(null!=i){var a=e.data.field(i.fieldPath);if(rf(a)){var o,u=Fe(a.arrayValue.values||[]);try{for(u.s();!(o=u.n()).done;){var s=o.value;n=n.add(new Bp(t.indexId,e.key,this.nn(s),r))}}catch(l){u.e(l)}finally{u.f()}}}else n=n.add(new Bp(t.indexId,e.key,Qp,r));return n}},{key:"_n",value:function(e,t,n,r,i){var a=this;kl("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);var o=[];return function(e,t,n,r,i){for(var a=e.getIterator(),o=t.getIterator(),u=Nc(a),s=Nc(o);u||s;){var l=!1,c=!1;if(u&&s){var f=n(u,s);f<0?c=!0:f>0&&(l=!0)}else null!=u?c=!0:l=!0;l?(r(s),s=Nc(o)):c?(i(u),u=Nc(a)):(u=Nc(a),s=Nc(o))}}(r,i,zp,(function(r){o.push(a.wn(e,t,n,r))}),(function(r){o.push(a.mn(e,t,n,r))})),cc.waitFor(o)}},{key:"ln",value:function(e){var t=1;return Zp(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(function(e,n,r){r.done(),t=n.sequenceNumber+1})).next((function(){return t}))}},{key:"createRange",value:function(e,t,n){n=n.sort((function(e,t){return zp(e,t)})).filter((function(e,t,n){return!t||0!==zp(e,n[t-1])}));var r=[];r.push(e);var i,a=Fe(n);try{for(a.s();!(i=a.n()).done;){var o=i.value,u=zp(o,e),s=zp(o,t);if(0===u)r[0]=e.Le();else if(u>0&&s<0)r.push(o),r.push(o.Le());else if(s>0)break}}catch(f){a.e(f)}finally{a.f()}r.push(t);for(var l=[],c=0;c<r.length;c+=2)l.push(IDBKeyRange.bound([r[c].indexId,this.uid,r[c].arrayValue,r[c].directionalValue,Qp,[]],[r[c+1].indexId,this.uid,r[c+1].arrayValue,r[c+1].directionalValue,Qp,[]]));return l}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return this.getFieldIndexes(e,t).next(ev)}},{key:"getMinOffset",value:function(e,t){var n=this;return cc.mapArray(this.Ye(t),(function(t){return n.Xe(e,t).next((function(e){return e||Tl()}))})).next(ev)}}]),e}();function Yp(e){return dp(e,"collectionParents")}function Xp(e){return dp(e,"indexEntries")}function Jp(e){return dp(e,"indexConfiguration")}function Zp(e){return dp(e,"indexState")}function ev(e){Sl(0!==e.length);for(var t=e[0].indexState.offset,n=t.largestBatchId,r=1;r<e.length;r++){var i=e[r].indexState.offset;ac(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new ic(t.readTime,t.documentKey,n)}var tv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},nv=function(){function e(t,n,r){Ce(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return Ie(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function rv(e,t,n){var r=e.store("mutations"),i=e.store("documentMutations"),a=[],o=IDBKeyRange.only(n.batchId),u=0,s=r.J({range:o},(function(e,t,n){return u++,n.delete()}));a.push(s.next((function(){Sl(1===u)})));var l,c=[],f=Fe(n.mutations);try{for(f.s();!(l=f.n()).done;){var h=l.value,d=Kd(t,h.key.path,n.batchId);a.push(i.delete(d)),c.push(h.key)}}catch(p){f.e(p)}finally{f.f()}return cc.waitFor(a).next((function(){return c}))}function iv(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw Tl();t=e.noDocument}return JSON.stringify(t).length}nv.DEFAULT_COLLECTION_PERCENTILE=10,nv.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,nv.DEFAULT=new nv(41943040,nv.DEFAULT_COLLECTION_PERCENTILE,nv.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),nv.DISABLED=new nv(-1,0,0);var av=function(){function e(t,n,r,i){Ce(this,e),this.userId=t,this.wt=n,this.indexManager=r,this.referenceDelegate=i,this.gn={}}return Ie(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return uv(e).J({index:"userMutationsIndex",range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=sv(e),o=uv(e);return o.add({}).next((function(u){Sl("number"==typeof u);var s,l=new pp(u,t,n,r),c=function(e,t,n){var r=n.baseMutations.map((function(t){return Td(e.ne,t)})),i=n.mutations.map((function(t){return Td(e.ne,t)}));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(i.wt,i.userId,l),f=[],h=new Ac((function(e,t){return Ul(e.canonicalString(),t.canonicalString())})),d=Fe(r);try{for(d.s();!(s=d.n()).done;){var p=s.value,v=Kd(i.userId,p.key.path,u);h=h.add(p.key.path.popLast()),f.push(o.put(c)),f.push(a.put(v,Gd))}}catch(y){d.e(y)}finally{d.f()}return h.forEach((function(t){f.push(i.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.gn[u]=l.keys()})),cc.waitFor(f).next((function(){return l}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return uv(e).get(t).next((function(e){return e?(Sl(e.userId===n.userId),xp(n.wt,e)):null}))}},{key:"yn",value:function(e,t){var n=this;return this.gn[t]?cc.resolve(this.gn[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.gn[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return uv(e).J({index:"userMutationsIndex",range:i},(function(e,t,i){t.userId===n.userId&&(Sl(t.batchId>=r),a=xp(n.wt,t)),i.done()})).next((function(){return a}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return uv(e).J({index:"userMutationsIndex",range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return uv(e).K("userMutationsIndex",n).next((function(e){return e.map((function(e){return xp(t.wt,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=Hd(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return sv(e).J({range:i},(function(r,i,o){var u=c(r,3),s=u[0],l=u[1],f=u[2],h=Bd(l);if(s===n.userId&&t.path.isEqual(h))return uv(e).get(f).next((function(e){if(!e)throw Tl();Sl(e.userId===n.userId),a.push(xp(n.wt,e))}));o.done()})).next((function(){return a}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Ac(Ul),i=[];return t.forEach((function(t){var a=Hd(n.userId,t.path),o=IDBKeyRange.lowerBound(a),u=sv(e).J({range:o},(function(e,i,a){var o=c(e,3),u=o[0],s=o[1],l=o[2],f=Bd(s);u===n.userId&&t.path.isEqual(f)?r=r.add(l):a.done()}));i.push(u)})),cc.waitFor(i).next((function(){return n.pn(e,r)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,i=r.length+1,a=Hd(this.userId,r),o=IDBKeyRange.lowerBound(a),u=new Ac(Ul);return sv(e).J({range:o},(function(e,t,a){var o=c(e,3),s=o[0],l=o[1],f=o[2],h=Bd(l);s===n.userId&&r.isPrefixOf(h)?h.length===i&&(u=u.add(f)):a.done()})).next((function(){return n.pn(e,u)}))}},{key:"pn",value:function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(uv(e).get(t).next((function(e){if(null===e)throw Tl();Sl(e.userId===n.userId),r.push(xp(n.wt,e))})))})),cc.waitFor(i).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return rv(e.ee,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.In(t.batchId)})),cc.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"In",value:function(e){delete this.gn[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return cc.resolve();var r=IDBKeyRange.lowerBound([t.userId]),i=[];return sv(e).J({range:r},(function(e,n,r){if(e[0]===t.userId){var a=Bd(e[1]);i.push(a)}else r.done()})).next((function(){Sl(0===i.length)}))}))}},{key:"containsKey",value:function(e,t){return ov(e,this.userId,t)}},{key:"Tn",value:function(e){var t=this;return lv(e).get(this.userId).next((function(e){return e||{userId:t.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}}))}}],[{key:"se",value:function(t,n,r,i){return Sl(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function ov(e,t,n){var r=Hd(t,n.path),i=r[1],a=IDBKeyRange.lowerBound(r),o=!1;return sv(e).J({range:a,H:!0},(function(e,n,r){var a=c(e,3),u=a[0],s=a[1];a[2];u===t&&s===i&&(o=!0),r.done()})).next((function(){return o}))}function uv(e){return dp(e,"mutations")}function sv(e){return dp(e,"documentMutations")}function lv(e){return dp(e,"mutationQueues")}var cv=function(){function e(t){Ce(this,e),this.En=t}return Ie(e,[{key:"next",value:function(){return this.En+=2,this.En}}],[{key:"An",value:function(){return new e(0)}},{key:"Rn",value:function(){return new e(-1)}}]),e}(),fv=function(){function e(t,n){Ce(this,e),this.referenceDelegate=t,this.wt=n}return Ie(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.bn(e).next((function(n){var r=new cv(n.highestTargetId);return n.highestTargetId=r.next(),t.Pn(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.bn(e).next((function(e){return Kl.fromTimestamp(new Hl(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.bn(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.bn(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.Pn(e,i)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.vn(e,t).next((function(){return n.bn(e).next((function(r){return r.targetCount+=1,n.Vn(t,r),n.Pn(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.vn(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return hv(e).delete(t.targetId)})).next((function(){return n.bn(e)})).next((function(t){return Sl(t.targetCount>0),t.targetCount-=1,n.Pn(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return hv(e).J((function(o,u){var s=Ep(u);s.sequenceNumber<=t&&null===n.get(s.targetId)&&(i++,a.push(r.removeTargetData(e,s)))})).next((function(){return cc.waitFor(a)})).next((function(){return i}))}},{key:"forEachTarget",value:function(e,t){return hv(e).J((function(e,n){var r=Ep(n);t(r)}))}},{key:"bn",value:function(e){return dv(e).get("targetGlobalKey").next((function(e){return Sl(null!==e),e}))}},{key:"Pn",value:function(e,t){return dv(e).put("targetGlobalKey",t)}},{key:"vn",value:function(e,t){return hv(e).put(Tp(this.wt,t))}},{key:"Vn",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.bn(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=bf(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return hv(e).J({range:r,index:"queryTargetsIndex"},(function(e,n,r){var a=Ep(n);wf(t,a.target)&&(i=a,r.done())})).next((function(){return i}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=pv(e);return t.forEach((function(t){var o=qd(t.path);i.push(a.put({targetId:n,path:o})),i.push(r.referenceDelegate.addReference(e,n,t))})),cc.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=pv(e);return cc.forEach(t,(function(t){var a=qd(t.path);return cc.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=pv(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=pv(e),i=$h();return r.J({range:n,H:!0},(function(e,t,n){var r=Bd(e[1]),a=new Yl(r);i=i.add(a)})).next((function(){return i}))}},{key:"containsKey",value:function(e,t){var n=qd(t.path),r=IDBKeyRange.bound([n],[zl(n)],!1,!0),i=0;return pv(e).J({index:"documentTargetsIndex",H:!0,range:r},(function(e,t,n){var r=c(e,2),a=r[0];r[1];0!==a&&(i++,n.done())})).next((function(){return i>0}))}},{key:"te",value:function(e,t){return hv(e).get(t).next((function(e){return e?Ep(e):null}))}}]),e}();function hv(e){return dp(e,"targets")}function dv(e){return dp(e,"targetGlobal")}function pv(e){return dp(e,"targetDocuments")}function vv(e,t){var n=c(e,2),r=n[0],i=n[1],a=c(t,2),o=a[0],u=a[1],s=Ul(r,o);return 0===s?Ul(i,u):s}var yv=function(){function e(t){Ce(this,e),this.Sn=t,this.buffer=new Ac(vv),this.Dn=0}return Ie(e,[{key:"Cn",value:function(){return++this.Dn}},{key:"xn",value:function(e){var t=[e,this.Cn()];if(this.buffer.size<this.Sn)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();vv(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),mv=function(){function e(t,n,r){Ce(this,e),this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.Nn=null}return Ie(e,[{key:"start",value:function(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.kn(6e4)}},{key:"stop",value:function(){this.Nn&&(this.Nn.cancel(),this.Nn=null)}},{key:"started",get:function(){return null!==this.Nn}},{key:"kn",value:function(e){var t=this;kl("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.Nn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,u(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.Nn=null,e.prev=1,e.next=4,t.localStore.collectGarbage(t.garbageCollector);case 4:e.next=14;break;case 6:if(e.prev=6,e.t0=e.catch(1),!vc(e.t0)){e.next=12;break}kl("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e.t0),e.next=14;break;case 12:return e.next=14,sc(e.t0);case 14:return e.next=16,t.kn(3e5);case 16:case"end":return e.stop()}}),e,null,[[1,6]])}))))}}]),e}(),gv=function(){function e(t,n){Ce(this,e),this.On=t,this.params=n}return Ie(e,[{key:"calculateTargetCount",value:function(e,t){return this.On.Mn(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return cc.resolve(_c.ot);var r=new yv(t);return this.On.forEachTarget(e,(function(e){return r.xn(e.sequenceNumber)})).next((function(){return n.On.Fn(e,(function(e){return r.xn(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.On.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.On.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(kl("LruGarbageCollector","Garbage collection skipped; disabled"),cc.resolve(tv)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(kl("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),tv):n.$n(e,t)}))}},{key:"getCacheSize",value:function(e){return this.On.getCacheSize(e)}},{key:"$n",value:function(e,t){var n,r,i,a,o,u,s,l=this,c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>l.params.maximumSequenceNumbersToCollect?(kl("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(l.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=l.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),l.nthSequenceNumber(e,r)})).next((function(r){return n=r,o=Date.now(),l.removeTargets(e,n,t)})).next((function(t){return i=t,u=Date.now(),l.removeOrphanedDocuments(e,n)})).next((function(e){return s=Date.now(),wl()<=Lr.DEBUG&&kl("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-c,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(u-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(s-u)+"ms\n"+"Total Duration: ".concat(s-c,"ms")),cc.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))}}]),e}(),bv=function(){function e(t,n){Ce(this,e),this.db=t,this.garbageCollector=function(e,t){return new gv(e,t)}(this,n)}return Ie(e,[{key:"Mn",value:function(e){var t=this.Bn(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"Bn",value:function(e){var t=0;return this.Fn(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"Fn",value:function(e,t){return this.Ln(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return wv(e,n)}},{key:"removeReference",value:function(e,t,n){return wv(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return wv(e,t)}},{key:"Un",value:function(e,t){return function(e,t){var n=!1;return lv(e).Y((function(r){return ov(e,r,t).next((function(e){return e&&(n=!0),cc.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this.Ln(e,(function(o,u){if(u<=t){var s=n.Un(e,o).next((function(t){if(!t)return a++,r.getEntry(e,o).next((function(){return r.removeEntry(o,Kl.min()),pv(e).delete([0,qd(o.path)])}))}));i.push(s)}})).next((function(){return cc.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return a}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return wv(e,t)}},{key:"Ln",value:function(e,t){var n,r=pv(e),i=_c.ot;return r.J({index:"documentTargetsIndex"},(function(e,r){var a=c(e,2),o=a[0],u=(a[1],r.path),s=r.sequenceNumber;0===o?(i!==_c.ot&&t(new Yl(Bd(n)),i),i=s,n=u):i=_c.ot})).next((function(){i!==_c.ot&&t(new Yl(Bd(n)),i)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function wv(e,t){return pv(e).put(function(e,t){return{targetId:0,path:qd(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}var kv=function(){function e(){Ce(this,e),this.changes=new Fh((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return Ie(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,yf.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?cc.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),_v=function(){function e(t){Ce(this,e),this.wt=t}return Ie(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t,n){return Sv(e).put(n)}},{key:"removeEntry",value:function(e,t,n){return Sv(e).delete(function(e,t){var n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],wp(t),n[n.length-1]]}(t,n))}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.qn(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this,r=yf.newInvalidDocument(t);return Sv(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Iv(t))},(function(e,i){r=n.Kn(t,i)})).next((function(){return r}))}},{key:"Gn",value:function(e,t){var n=this,r={size:0,document:yf.newInvalidDocument(t)};return Sv(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Iv(t))},(function(e,i){r={document:n.Kn(t,i),size:iv(i)}})).next((function(){return r}))}},{key:"getEntries",value:function(e,t){var n=this,r=Vh();return this.Qn(e,t,(function(e,t){var i=n.Kn(e,t);r=r.insert(e,i)})).next((function(){return r}))}},{key:"jn",value:function(e,t){var n=this,r=Vh(),i=new Sc(Yl.comparator);return this.Qn(e,t,(function(e,t){var a=n.Kn(e,t);r=r.insert(e,a),i=i.insert(e,iv(t))})).next((function(){return{documents:r,Wn:i}}))}},{key:"Qn",value:function(e,t,n){if(t.isEmpty())return cc.resolve();var r=new Ac(Av);t.forEach((function(e){return r=r.add(e)}));var i=IDBKeyRange.bound(Iv(r.first()),Iv(r.last())),a=r.getIterator(),o=a.getNext();return Sv(e).J({index:"documentKeyIndex",range:i},(function(e,t,r){for(var i=Yl.fromSegments([].concat(Te(t.prefixPath),[t.collectionGroup,t.documentId]));o&&Av(o,i)<0;)n(o,null),o=a.getNext();o&&o.isEqual(i)&&(n(o,t),o=a.hasNext()?a.getNext():null),o?r.q(Iv(o)):r.done()})).next((function(){for(;o;)n(o,null),o=a.hasNext()?a.getNext():null}))}},{key:"getAllFromCollection",value:function(e,t,n){var r=this,i=[t.popLast().toArray(),t.lastSegment(),wp(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],a=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Sv(e).K(IDBKeyRange.bound(i,a,!0)).next((function(e){var t,n=Vh(),i=Fe(e);try{for(i.s();!(t=i.n()).done;){var a=t.value,o=r.Kn(Yl.fromSegments(a.prefixPath.concat(a.collectionGroup,a.documentId)),a);n=n.insert(o.key,o)}}catch(u){i.e(u)}finally{i.f()}return n}))}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){var i=this,a=Vh(),o=Cv(t,n),u=Cv(t,ic.max());return Sv(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,u,!0)},(function(e,t,n){var o=i.Kn(Yl.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);(a=a.insert(o.key,o)).size===r&&n.done()})).next((function(){return a}))}},{key:"newChangeBuffer",value:function(e){return new Ev(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return Tv(e).get("remoteDocumentGlobalKey").next((function(e){return Sl(!!e),e}))}},{key:"qn",value:function(e,t){return Tv(e).put("remoteDocumentGlobalKey",t)}},{key:"Kn",value:function(e,t){if(t){var n=function(e,t){var n;if(t.document)n=xd(e.ne,t.document,!!t.hasCommittedMutations);else if(t.noDocument){var r=Yl.fromSegments(t.noDocument.path),i=_p(t.noDocument.readTime);n=yf.newNoDocument(r,i),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return Tl();var a=Yl.fromSegments(t.unknownDocument.path),o=_p(t.unknownDocument.version);n=yf.newUnknownDocument(a,o)}return t.readTime&&n.setReadTime(function(e){var t=new Hl(e[0],e[1]);return Kl.fromTimestamp(t)}(t.readTime)),n}(this.wt,t);if(!n.isNoDocument()||!n.version.isEqual(Kl.min()))return n}return yf.newInvalidDocument(e)}}]),e}();function xv(e){return new _v(e)}var Ev=function(e){De(n,e);var t=Re(n);function n(e,r){var i;return Ce(this,n),(i=t.call(this)).zn=e,i.trackRemovals=r,i.Hn=new Fh((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),i}return Ie(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new Ac((function(e,t){return Ul(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(a,o){var u=t.Hn.get(a);if(n.push(t.zn.removeEntry(e,a,u.readTime)),o.isValidDocument()){var s=bp(t.zn.wt,o);i=i.add(a.path.popLast());var l=iv(s);r+=l-u.size,n.push(t.zn.addEntry(e,a,s))}else if(r-=u.size,t.trackRemovals){var c=bp(t.zn.wt,o.convertToNoDocument(Kl.min()));n.push(t.zn.addEntry(e,a,c))}})),i.forEach((function(r){n.push(t.zn.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.zn.updateMetadata(e,r)),cc.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.zn.Gn(e,t).next((function(e){return n.Hn.set(t,{size:e.size,readTime:e.document.readTime}),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.zn.jn(e,t).next((function(e){var t=e.documents;return e.Wn.forEach((function(e,r){n.Hn.set(e,{size:r,readTime:t.get(e).readTime})})),t}))}}]),n}(kv);function Tv(e){return dp(e,"remoteDocumentGlobal")}function Sv(e){return dp(e,"remoteDocumentsV14")}function Iv(e){var t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function Cv(e,t){var n=t.documentKey.path.toArray();return[e,wp(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function Av(e,t){for(var n=e.path.toArray(),r=t.path.toArray(),i=0,a=0;a<n.length-2&&a<r.length-2;++a)if(i=Ul(n[a],r[a]))return i;return(i=Ul(n.length,r.length))||((i=Ul(n[n.length-2],r[r.length-2]))||Ul(n[n.length-1],r[r.length-1]))}var Dv=Ie((function e(t,n){Ce(this,e),this.overlayedDocument=t,this.mutatedFields=n})),Nv=function(){function e(t,n,r,i){Ce(this,e),this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}return Ie(e,[{key:"getDocument",value:function(e,t){var n=this,r=null;return this.documentOverlayCache.getOverlay(e,t).next((function(i){return r=i,n.getBaseDocument(e,t,r)})).next((function(e){return null!==r&&xh(r.mutation,e,Pc.empty(),Hl.now()),e}))}},{key:"getDocuments",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.getLocalViewOfDocuments(e,t,$h()).next((function(){return t}))}))}},{key:"getLocalViewOfDocuments",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:$h(),i=Hh();return this.populateOverlays(e,i,t).next((function(){return n.computeViews(e,t,i,r).next((function(e){var t=Bh();return e.forEach((function(e,n){t=t.insert(e,n.overlayedDocument)})),t}))}))}},{key:"getOverlayedDocuments",value:function(e,t){var n=this,r=Hh();return this.populateOverlays(e,r,t).next((function(){return n.computeViews(e,t,r,$h())}))}},{key:"populateOverlays",value:function(e,t,n){var r=[];return n.forEach((function(e){t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((function(e){e.forEach((function(e,n){t.set(e,n)}))}))}},{key:"computeViews",value:function(e,t,n,r){var i=Vh(),a=Gh(),o=Gh();return t.forEach((function(e,t){var o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof Ih)?i=i.insert(t.key,t):void 0!==o&&(a.set(t.key,o.mutation.getFieldMask()),xh(o.mutation,t,o.mutation.getFieldMask(),Hl.now()))})),this.recalculateAndSaveOverlays(e,i).next((function(e){return e.forEach((function(e,t){return a.set(e,t)})),t.forEach((function(e,t){var n;return o.set(e,new Dv(t,null!==(n=a.get(e))&&void 0!==n?n:null))})),o}))}},{key:"recalculateAndSaveOverlays",value:function(e,t){var n=this,r=Gh(),i=new Sc((function(e,t){return e-t})),a=$h();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){var n,a=Fe(e);try{var o=function(){var e=n.value;e.keys().forEach((function(n){var a=t.get(n);if(null!==a){var o=r.get(n)||Pc.empty();o=e.applyToLocalView(a,o),r.set(n,o);var u=(i.get(e.batchId)||$h()).add(n);i=i.insert(e.batchId,u)}}))};for(a.s();!(n=a.n()).done;)o()}catch(u){a.e(u)}finally{a.f()}})).next((function(){for(var o=[],u=i.getReverseIterator(),s=function(){var i=u.getNext(),s=i.key,l=i.value,c=Kh();l.forEach((function(e){if(!a.has(e)){var n=kh(t.get(e),r.get(e));null!==n&&c.set(e,n),a=a.add(e)}})),o.push(n.documentOverlayCache.saveOverlays(e,s,c))};u.hasNext();)s();return cc.waitFor(o)})).next((function(){return r}))}},{key:"recalculateAndSaveOverlaysForDocumentKeys",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.recalculateAndSaveOverlays(e,t)}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){return function(e){return Yl.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Hf(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}},{key:"getNextDocuments",value:function(e,t,n,r){var i=this;return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((function(a){var o=r-a.size>0?i.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-a.size):cc.resolve(Hh()),u=-1,s=a;return o.next((function(t){return cc.forEach(t,(function(t,n){return u<n.largestBatchId&&(u=n.largestBatchId),a.get(t)?cc.resolve():i.getBaseDocument(e,t,n).next((function(e){s=s.insert(t,e)}))})).next((function(){return i.populateOverlays(e,t,a)})).next((function(){return i.computeViews(e,s,t,$h())})).next((function(e){return{batchId:u,changes:zh(e)}}))}))}))}},{key:"getDocumentsMatchingDocumentQuery",value:function(e,t){return this.getDocument(e,new Yl(t)).next((function(e){var t=Bh();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"getDocumentsMatchingCollectionGroupQuery",value:function(e,t,n){var r=this,i=t.collectionGroup,a=Bh();return this.indexManager.getCollectionParents(e,i).next((function(o){return cc.forEach(o,(function(o){var u=function(e,t){return new qf(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.getDocumentsMatchingCollectionQuery(e,u,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"getDocumentsMatchingCollectionQuery",value:function(e,t,n){var r,i=this;return this.remoteDocumentCache.getAllFromCollection(e,t.path,n).next((function(a){return r=a,i.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId)})).next((function(e){e.forEach((function(e,t){var n=t.getKey();null===r.get(n)&&(r=r.insert(n,yf.newInvalidDocument(n)))}));var n=Bh();return r.forEach((function(r,i){var a=e.get(r);void 0!==a&&xh(a.mutation,i,Pc.empty(),Hl.now()),Xf(t,i)&&(n=n.insert(r,i))})),n}))}},{key:"getBaseDocument",value:function(e,t,n){return null===n||1===n.mutation.type?this.remoteDocumentCache.getEntry(e,t):cc.resolve(yf.newInvalidDocument(t))}}]),e}(),Pv=function(){function e(t){Ce(this,e),this.wt=t,this.Jn=new Map,this.Yn=new Map}return Ie(e,[{key:"getBundleMetadata",value:function(e,t){return cc.resolve(this.Jn.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.Jn.set(t.id,{id:(n=t).id,version:n.version,createTime:dd(n.createTime)}),cc.resolve()}},{key:"getNamedQuery",value:function(e,t){return cc.resolve(this.Yn.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.Yn.set(t.name,function(e){return{name:e.name,query:Sp(e.bundledQuery),readTime:dd(e.readTime)}}(t)),cc.resolve()}}]),e}(),Ov=function(){function e(){Ce(this,e),this.overlays=new Sc(Yl.comparator),this.Xn=new Map}return Ie(e,[{key:"getOverlay",value:function(e,t){return cc.resolve(this.overlays.get(t))}},{key:"getOverlays",value:function(e,t){var n=this,r=Hh();return cc.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.ie(e,t,i)})),cc.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.Xn.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.Xn.delete(n)),cc.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=Hh(),i=t.length+1,a=new Yl(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var u=o.getNext().value,s=u.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&u.largestBatchId>n&&r.set(u.getKey(),u)}return cc.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new Sc((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var u=i.get(o.largestBatchId);null===u&&(u=Hh(),i=i.insert(o.largestBatchId,u)),u.set(o.getKey(),o)}}for(var s=Hh(),l=i.getIterator();l.hasNext()&&(l.getNext().value.forEach((function(e,t){return s.set(e,t)})),!(s.size()>=r)););return cc.resolve(s)}},{key:"ie",value:function(e,t,n){var r=this.overlays.get(n.key);if(null!==r){var i=this.Xn.get(r.largestBatchId).delete(n.key);this.Xn.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new yp(t,n));var a=this.Xn.get(t);void 0===a&&(a=$h(),this.Xn.set(t,a)),this.Xn.set(t,a.add(n.key))}}]),e}(),Lv=function(){function e(){Ce(this,e),this.Zn=new Ac(Rv.ts),this.es=new Ac(Rv.ns)}return Ie(e,[{key:"isEmpty",value:function(){return this.Zn.isEmpty()}},{key:"addReference",value:function(e,t){var n=new Rv(e,t);this.Zn=this.Zn.add(n),this.es=this.es.add(n)}},{key:"ss",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.rs(new Rv(e,t))}},{key:"os",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"us",value:function(e){var t=this,n=new Yl(new Wl([])),r=new Rv(n,e),i=new Rv(n,e+1),a=[];return this.es.forEachInRange([r,i],(function(e){t.rs(e),a.push(e.key)})),a}},{key:"cs",value:function(){var e=this;this.Zn.forEach((function(t){return e.rs(t)}))}},{key:"rs",value:function(e){this.Zn=this.Zn.delete(e),this.es=this.es.delete(e)}},{key:"hs",value:function(e){var t=new Yl(new Wl([])),n=new Rv(t,e),r=new Rv(t,e+1),i=$h();return this.es.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new Rv(e,0),n=this.Zn.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),Rv=function(){function e(t,n){Ce(this,e),this.key=t,this.ls=n}return Ie(e,null,[{key:"ts",value:function(e,t){return Yl.comparator(e.key,t.key)||Ul(e.ls,t.ls)}},{key:"ns",value:function(e,t){return Ul(e.ls,t.ls)||Yl.comparator(e.key,t.key)}}]),e}(),jv=function(){function e(t,n){Ce(this,e),this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.fs=1,this.ds=new Ac(Rv.ts)}return Ie(e,[{key:"checkEmpty",value:function(e){return cc.resolve(0===this.mutationQueue.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.fs;this.fs++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];var a=new pp(i,t,n,r);this.mutationQueue.push(a);var o,u=Fe(r);try{for(u.s();!(o=u.n()).done;){var s=o.value;this.ds=this.ds.add(new Rv(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast())}}catch(l){u.e(l)}finally{u.f()}return cc.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return cc.resolve(this._s(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.ws(n),i=r<0?0:r;return cc.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return cc.resolve(0===this.mutationQueue.length?-1:this.fs-1)}},{key:"getAllMutationBatches",value:function(e){return cc.resolve(this.mutationQueue.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new Rv(t,0),i=new Rv(t,Number.POSITIVE_INFINITY),a=[];return this.ds.forEachInRange([r,i],(function(e){var t=n._s(e.ls);a.push(t)})),cc.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Ac(Ul);return t.forEach((function(e){var t=new Rv(e,0),i=new Rv(e,Number.POSITIVE_INFINITY);n.ds.forEachInRange([t,i],(function(e){r=r.add(e.ls)}))})),cc.resolve(this.gs(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;Yl.isDocumentKey(i)||(i=i.child(""));var a=new Rv(new Yl(i),0),o=new Ac(Ul);return this.ds.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.ls)),!0)}),a),cc.resolve(this.gs(o))}},{key:"gs",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t._s(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;Sl(0===this.ys(t.batchId,"removed")),this.mutationQueue.shift();var r=this.ds;return cc.forEach(t.mutations,(function(i){var a=new Rv(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.ds=r}))}},{key:"In",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new Rv(t,0),r=this.ds.firstAfterOrEqual(n);return cc.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.mutationQueue.length,cc.resolve()}},{key:"ys",value:function(e,t){return this.ws(e)}},{key:"ws",value:function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}},{key:"_s",value:function(e){var t=this.ws(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}]),e}(),Mv=function(){function e(t){Ce(this,e),this.ps=t,this.docs=new Sc(Yl.comparator),this.size=0}return Ie(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.ps(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return cc.resolve(n?n.document.mutableCopy():yf.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=Vh();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():yf.newInvalidDocument(e))})),cc.resolve(r)}},{key:"getAllFromCollection",value:function(e,t,n){for(var r=Vh(),i=new Yl(t.child("")),a=this.docs.getIteratorFrom(i);a.hasNext();){var o=a.getNext(),u=o.key,s=o.value.document;if(!t.isPrefixOf(u.path))break;u.path.length>t.length+1||ac(rc(s),n)<=0||(r=r.insert(s.key,s.mutableCopy()))}return cc.resolve(r)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){Tl()}},{key:"Is",value:function(e,t){return cc.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new Fv(this)}},{key:"getSize",value:function(e){return cc.resolve(this.size)}}]),e}(),Fv=function(e){De(n,e);var t=Re(n);function n(e){var r;return Ce(this,n),(r=t.call(this)).zn=e,r}return Ie(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.zn.addEntry(e,i)):t.zn.removeEntry(r)})),cc.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.zn.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.zn.getEntries(e,t)}}]),n}(kv),qv=function(){function e(t){Ce(this,e),this.persistence=t,this.Ts=new Fh((function(e){return bf(e)}),wf),this.lastRemoteSnapshotVersion=Kl.min(),this.highestTargetId=0,this.Es=0,this.As=new Lv,this.targetCount=0,this.Rs=cv.An()}return Ie(e,[{key:"forEachTarget",value:function(e,t){return this.Ts.forEach((function(e,n){return t(n)})),cc.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return cc.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return cc.resolve(this.Es)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.Rs.next(),cc.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Es&&(this.Es=t),cc.resolve()}},{key:"vn",value:function(e){this.Ts.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.Rs=new cv(t),this.highestTargetId=t),e.sequenceNumber>this.Es&&(this.Es=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.vn(t),this.targetCount+=1,cc.resolve()}},{key:"updateTargetData",value:function(e,t){return this.vn(t),cc.resolve()}},{key:"removeTargetData",value:function(e,t){return this.Ts.delete(t.target),this.As.us(t.targetId),this.targetCount-=1,cc.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.Ts.forEach((function(o,u){u.sequenceNumber<=t&&null===n.get(u.targetId)&&(r.Ts.delete(o),a.push(r.removeMatchingKeysForTargetId(e,u.targetId)),i++)})),cc.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return cc.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.Ts.get(t)||null;return cc.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.As.ss(t,n),cc.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.As.os(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),cc.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.As.us(t),cc.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.As.hs(t);return cc.resolve(n)}},{key:"containsKey",value:function(e,t){return cc.resolve(this.As.containsKey(t))}}]),e}(),Vv=function(){function e(t,n){var r=this;Ce(this,e),this.bs={},this.overlays={},this.Ps=new _c(0),this.vs=!1,this.vs=!0,this.referenceDelegate=t(this),this.Vs=new qv(this),this.indexManager=new Gp,this.remoteDocumentCache=new Mv((function(e){return r.referenceDelegate.Ss(e)})),this.wt=new gp(n),this.Ds=new Pv(this.wt)}return Ie(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.vs=!1,Promise.resolve()}},{key:"started",get:function(){return this.vs}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new Ov,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.bs[e.toKey()];return n||(n=new jv(t,this.referenceDelegate),this.bs[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.Vs}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getBundleCache",value:function(){return this.Ds}},{key:"runTransaction",value:function(e,t,n){var r=this;kl("MemoryPersistence","Starting transaction:",e);var i=new Uv(this.Ps.next());return this.referenceDelegate.Cs(),n(i).next((function(e){return r.referenceDelegate.xs(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Ns",value:function(e,t){return cc.or(Object.values(this.bs).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),Uv=function(e){De(n,e);var t=Re(n);function n(e){var r;return Ce(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return Ie(n)}(uc),Bv=function(){function e(t){Ce(this,e),this.persistence=t,this.ks=new Lv,this.Os=null}return Ie(e,[{key:"Fs",get:function(){if(this.Os)return this.Os;throw Tl()}},{key:"addReference",value:function(e,t,n){return this.ks.addReference(n,t),this.Fs.delete(n.toString()),cc.resolve()}},{key:"removeReference",value:function(e,t,n){return this.ks.removeReference(n,t),this.Fs.add(n.toString()),cc.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.Fs.add(t.toString()),cc.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.ks.us(t.targetId).forEach((function(e){return n.Fs.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.Fs.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"Cs",value:function(){this.Os=new Set}},{key:"xs",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return cc.forEach(this.Fs,(function(r){var i=Yl.fromPath(r);return t.$s(e,i).next((function(e){e||n.removeEntry(i,Kl.min())}))})).next((function(){return t.Os=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.$s(e,t).next((function(e){e?n.Fs.delete(t.toString()):n.Fs.add(t.toString())}))}},{key:"Ss",value:function(e){return 0}},{key:"$s",value:function(e,t){var n=this;return cc.or([function(){return cc.resolve(n.ks.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Ns(e,t)}])}}],[{key:"Ms",value:function(t){return new e(t)}}]),e}(),zv=function(){function e(t){Ce(this,e),this.wt=t}return Ie(e,[{key:"O",value:function(e,t,n,r){var i=this,a=new fc("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",zd,{unique:!0}),e.createObjectStore("documentMutations")}(e),Hv(e),function(e){e.createObjectStore("remoteDocuments")}(e));var o=cc.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),Hv(e)),o=o.next((function(){return function(e){var t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Kl.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(a)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(e,t){return t.store("mutations").K().next((function(n){e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",zd,{unique:!0});var r=t.store("mutations"),i=n.map((function(e){return r.put(e)}));return cc.waitFor(i)}))}(e,a)}))),o=o.next((function(){!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(o=o.next((function(){return i.Bs(a)}))),n<6&&r>=6&&(o=o.next((function(){return function(e){e.createObjectStore("remoteDocumentGlobal")}(e),i.Ls(a)}))),n<7&&r>=7&&(o=o.next((function(){return i.Us(a)}))),n<8&&r>=8&&(o=o.next((function(){return i.qs(e,a)}))),n<9&&r>=9&&(o=o.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(o=o.next((function(){return i.Ks(a)}))),n<11&&r>=11&&(o=o.next((function(){!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(o=o.next((function(){!function(e){var t=e.createObjectStore("documentOverlays",{keyPath:ip});t.createIndex("collectionPathOverlayIndex",ap,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",op,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((function(){return function(e){var t=e.createObjectStore("remoteDocumentsV14",{keyPath:Wd});t.createIndex("documentKeyIndex",Qd),t.createIndex("collectionGroupIndex",$d)}(e)})).next((function(){return i.Gs(e,a)})).next((function(){return e.deleteObjectStore("remoteDocuments")}))),n<14&&r>=14&&(o=o.next((function(){return i.Qs(e,a)}))),n<15&&r>=15&&(o=o.next((function(){return function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:ep}).createIndex("sequenceNumberIndex",tp,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:np}).createIndex("documentKeyIndex",rp,{unique:!1})}(e)}))),o}},{key:"Ls",value:function(e){var t=0;return e.store("remoteDocuments").J((function(e,n){t+=iv(n)})).next((function(){var n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}},{key:"Bs",value:function(e){var t=this,n=e.store("mutationQueues"),r=e.store("mutations");return n.K().next((function(n){return cc.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.K("userMutationsIndex",i).next((function(r){return cc.forEach(r,(function(r){Sl(r.userId===n.userId);var i=xp(t.wt,r);return rv(e,n.userId,i).next((function(){}))}))}))}))}))}},{key:"Us",value:function(e){var t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((function(e){var r=[];return n.J((function(n,i){var a=new Wl(n),o=function(e){return[0,qd(e)]}(a);r.push(t.get(o).next((function(n){return n?cc.resolve():function(n){return t.put({targetId:0,path:qd(n),sequenceNumber:e.highestListenSequenceNumber})}(a)})))})).next((function(){return cc.waitFor(r)}))}))}},{key:"qs",value:function(e,t){e.createObjectStore("collectionParents",{keyPath:Zd});var n=t.store("collectionParents"),r=new Wp,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:qd(i)})}};return t.store("remoteDocuments").J({H:!0},(function(e,t){var n=new Wl(e);return i(n.popLast())})).next((function(){return t.store("documentMutations").J({H:!0},(function(e,t){var n=c(e,3),r=(n[0],n[1]),a=(n[2],Bd(r));return i(a.popLast())}))}))}},{key:"Ks",value:function(e){var t=this,n=e.store("targets");return n.J((function(e,r){var i=Ep(r),a=Tp(t.wt,i);return n.put(a)}))}},{key:"Gs",value:function(e,t){var n=t.store("remoteDocuments"),r=[];return n.J((function(e,n){var i,a=t.store("remoteDocumentsV14"),o=(i=n,i.document?new Yl(Wl.fromString(i.document.name).popFirst(5)):i.noDocument?Yl.fromSegments(i.noDocument.path):i.unknownDocument?Yl.fromSegments(i.unknownDocument.path):Tl()).path.toArray(),u={prefixPath:o.slice(0,o.length-2),collectionGroup:o[o.length-2],documentId:o[o.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(a.put(u))})).next((function(){return cc.waitFor(r)}))}},{key:"Qs",value:function(e,t){var n=this,r=t.store("mutations"),i=xv(this.wt),a=new Vv(Bv.Ms,this.wt.ne);return r.K().next((function(e){var r=new Map;return e.forEach((function(e){var t,i=null!==(t=r.get(e.userId))&&void 0!==t?t:$h();xp(n.wt,e).keys().forEach((function(e){return i=i.add(e)})),r.set(e.userId,i)})),cc.forEach(r,(function(e,r){var o=new ml(r),u=Op.se(n.wt,o),s=a.getIndexManager(o),l=av.se(o,n.wt,s,a.referenceDelegate);return new Nv(i,l,u,s).recalculateAndSaveOverlaysForDocumentKeys(new hp(t,_c.ot),e).next()}))}))}}]),e}();function Hv(e){e.createObjectStore("targetDocuments",{keyPath:Xd}).createIndex("documentTargetsIndex",Jd,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Yd,{unique:!0}),e.createObjectStore("targetGlobal")}var Kv="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Gv=function(){function e(t,n,r,i,a,o,u,s,l,c){var f=arguments.length>10&&void 0!==arguments[10]?arguments[10]:14;if(Ce(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.js=a,this.window=o,this.document=u,this.Ws=l,this.zs=c,this.Hs=f,this.Ps=null,this.vs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Js=null,this.inForeground=!1,this.Ys=null,this.Xs=null,this.Zs=Number.NEGATIVE_INFINITY,this.ti=function(e){return Promise.resolve()},!e.V())throw new Al(Cl.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new bv(this,i),this.ei=n+"main",this.wt=new gp(s),this.ni=new hc(this.ei,this.Hs,new zv(this.wt)),this.Vs=new fv(this.referenceDelegate,this.wt),this.remoteDocumentCache=xv(this.wt),this.Ds=new Dp,this.window&&this.window.localStorage?this.si=this.window.localStorage:(this.si=null,!1===c&&_l("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return Ie(e,[{key:"start",value:function(){var e=this;return this.ii().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new Al(Cl.FAILED_PRECONDITION,Kv);return e.ri(),e.oi(),e.ui(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.Vs.getHighestSequenceNumber(t)}))})).then((function(t){e.Ps=new _c(t,e.Ws)})).then((function(){e.vs=!0})).catch((function(t){return e.ni&&e.ni.close(),Promise.reject(t)}))}},{key:"ci",value:function(e){var t=this;return this.ti=function(){var n=u(a().mark((function n(r){return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.ni.F(function(){var t=u(a().mark((function t(n){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.js.enqueueAndForget(u(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.ii();case 4:case"end":return e.stop()}}),e)})))))}},{key:"ii",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return Qv(t).put({clientId:e.clientId,updateTimeMs:Date.now(),networkEnabled:e.networkEnabled,inForeground:e.inForeground}).next((function(){if(e.isPrimary)return e.ai(t).next((function(t){t||(e.isPrimary=!1,e.js.enqueueRetryable((function(){return e.ti(!1)})))}))})).next((function(){return e.hi(t)})).next((function(n){return e.isPrimary&&!n?e.li(t).next((function(){return!1})):!!n&&e.fi(t).next((function(){return!0}))}))})).catch((function(t){if(vc(t))return kl("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return kl("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.js.enqueueRetryable((function(){return e.ti(t)})),e.isPrimary=t}))}},{key:"ai",value:function(e){var t=this;return Wv(e).get("owner").next((function(e){return cc.resolve(t.di(e))}))}},{key:"_i",value:function(e){return Qv(e).delete(this.clientId)}},{key:"wi",value:function(){var e=u(a().mark((function e(){var t,n,r,i,o=this;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.mi(this.Zs,18e5)){e.next=6;break}return this.Zs=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=dp(e,"clientMetadata");return t.K().next((function(e){var n=o.gi(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return cc.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this.si){n=Fe(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this.si.removeItem(this.yi(i.clientId))}catch(a){n.e(a)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ui",value:function(){var e=this;this.Xs=this.js.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.ii().then((function(){return e.wi()})).then((function(){return e.ui()}))}))}},{key:"di",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"hi",value:function(e){var t=this;return this.zs?cc.resolve(!0):Wv(e).get("owner").next((function(n){if(null!==n&&t.mi(n.leaseTimestampMs,5e3)&&!t.pi(n.ownerId)){if(t.di(n)&&t.networkEnabled)return!0;if(!t.di(n)){if(!n.allowTabSynchronization)throw new Al(Cl.FAILED_PRECONDITION,Kv);return!1}}return!(!t.networkEnabled||!t.inForeground)||Qv(e).K().next((function(e){return void 0===t.gi(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&kl("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:function(){var e=u(a().mark((function e(){var t=this;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.vs=!1,this.Ii(),this.Xs&&(this.Xs.cancel(),this.Xs=null),this.Ti(),this.Ei(),e.next=7,this.ni.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(function(e){var n=new hp(e,_c.ot);return t.li(n).next((function(){return t._i(n)}))}));case 7:this.ni.close(),this.Ai();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"gi",value:function(e,t){var n=this;return e.filter((function(e){return n.mi(e.updateTimeMs,t)&&!n.pi(e.clientId)}))}},{key:"Ri",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return Qv(t).K().next((function(t){return e.gi(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.vs}},{key:"getMutationQueue",value:function(e,t){return av.se(e,this.wt,t,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.Vs}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getIndexManager",value:function(e){return new $p(e,this.wt.ne.databaseId)}},{key:"getDocumentOverlayCache",value:function(e){return Op.se(this.wt,e)}},{key:"getBundleCache",value:function(){return this.Ds}},{key:"runTransaction",value:function(e,t,n){var r=this;kl("IndexedDbPersistence","Starting transaction:",e);var i,a,o="readonly"===t?"readonly":"readwrite",u=15===(i=this.Hs)?fp:14===i?cp:13===i?lp:12===i?sp:11===i?up:void Tl();return this.ni.runTransaction(e,o,u,(function(i){return a=new hp(i,r.Ps?r.Ps.next():_c.ot),"readwrite-primary"===t?r.ai(a).next((function(e){return!!e||r.hi(a)})).next((function(t){if(!t)throw _l("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.js.enqueueRetryable((function(){return r.ti(!1)})),new Al(Cl.FAILED_PRECONDITION,oc);return n(a)})).next((function(e){return r.fi(a).next((function(){return e}))})):r.bi(a).next((function(){return n(a)}))})).then((function(e){return a.raiseOnCommittedEvent(),e}))}},{key:"bi",value:function(e){var t=this;return Wv(e).get("owner").next((function(e){if(null!==e&&t.mi(e.leaseTimestampMs,5e3)&&!t.pi(e.ownerId)&&!t.di(e)&&!(t.zs||t.allowTabSynchronization&&e.allowTabSynchronization))throw new Al(Cl.FAILED_PRECONDITION,Kv)}))}},{key:"fi",value:function(e){var t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Wv(e).put("owner",t)}},{key:"li",value:function(e){var t=this,n=Wv(e);return n.get("owner").next((function(e){return t.di(e)?(kl("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):cc.resolve()}))}},{key:"mi",value:function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(_l("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}},{key:"ri",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ys=function(){e.js.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.ii()}))},this.document.addEventListener("visibilitychange",this.Ys),this.inForeground="visible"===this.document.visibilityState)}},{key:"Ti",value:function(){this.Ys&&(this.document.removeEventListener("visibilitychange",this.Ys),this.Ys=null)}},{key:"oi",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Js=function(){t.Ii(),mr()&&navigator.appVersion.match(/Version\/1[45]/)&&t.js.enterRestrictedMode(!0),t.js.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.Js))}},{key:"Ei",value:function(){this.Js&&(this.window.removeEventListener("pagehide",this.Js),this.Js=null)}},{key:"pi",value:function(e){var t;try{var n=null!==(null===(t=this.si)||void 0===t?void 0:t.getItem(this.yi(e)));return kl("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return _l("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"Ii",value:function(){if(this.si)try{this.si.setItem(this.yi(this.clientId),String(Date.now()))}catch(ya){_l("Failed to set zombie client id.",ya)}}},{key:"Ai",value:function(){if(this.si)try{this.si.removeItem(this.yi(this.clientId))}catch(ya){}}},{key:"yi",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"V",value:function(){return hc.V()}}]),e}();function Wv(e){return dp(e,"owner")}function Qv(e){return dp(e,"clientMetadata")}function $v(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var Yv=function(){function e(t,n,r,i){Ce(this,e),this.targetId=t,this.fromCache=n,this.Pi=r,this.vi=i}return Ie(e,null,[{key:"Vi",value:function(t,n){var r,i=$h(),a=$h(),o=Fe(n.docChanges);try{for(o.s();!(r=o.n()).done;){var u=r.value;switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:a=a.add(u.doc.key)}}}catch(s){o.e(s)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),Xv=function(){function e(){Ce(this,e),this.Si=!1}return Ie(e,[{key:"initialize",value:function(e,t){this.Di=e,this.indexManager=t,this.Si=!0}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this;return this.Ci(e,t).next((function(a){return a||i.xi(e,t,r,n)})).next((function(n){return n||i.Ni(e,t)}))}},{key:"Ci",value:function(e,t){return cc.resolve(null)}},{key:"xi",value:function(e,t,n,r){var i=this;return function(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}(t)||r.isEqual(Kl.min())?this.Ni(e,t):this.Di.getDocuments(e,n).next((function(a){var o=i.ki(t,a);return i.Oi(t,o,n,r)?i.Ni(e,t):(wl()<=Lr.DEBUG&&kl("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Yf(t)),i.Mi(e,o,t,nc(r,-1)))}))}},{key:"ki",value:function(e,t){var n=new Ac(Zf(e));return t.forEach((function(t,r){Xf(e,r)&&(n=n.add(r))})),n}},{key:"Oi",value:function(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;var i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Ni",value:function(e,t){return wl()<=Lr.DEBUG&&kl("QueryEngine","Using full collection scan to execute query:",Yf(t)),this.Di.getDocumentsMatchingQuery(e,t,ic.min())}},{key:"Mi",value:function(e,t,n,r){return this.Di.getDocumentsMatchingQuery(e,n,r).next((function(e){return t.forEach((function(t){e=e.insert(t.key,t)})),e}))}}]),e}(),Jv=function(){function e(t,n,r,i){Ce(this,e),this.persistence=t,this.Fi=n,this.wt=i,this.$i=new Sc(Ul),this.Bi=new Fh((function(e){return bf(e)}),wf),this.Li=new Map,this.Ui=t.getRemoteDocumentCache(),this.Vs=t.getTargetCache(),this.Ds=t.getBundleCache(),this.qi(r)}return Ie(e,[{key:"qi",value:function(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Nv(this.Ui,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ui.setIndexManager(this.indexManager),this.Fi.initialize(this.localDocuments,this.indexManager)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.$i)}))}}]),e}();function Zv(e,t,n,r){return new Jv(e,t,n,r)}function ey(e,t){return ty.apply(this,arguments)}function ty(){return ty=u(a().mark((function e(t,n){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Il(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.mutationQueue.getAllMutationBatches(e).next((function(i){return t=i,r.qi(n),r.mutationQueue.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],u=$h(),s=Fe(t);try{for(s.s();!(i=s.n()).done;){var l=i.value;a.push(l.batchId);var c,f=Fe(l.mutations);try{for(f.s();!(c=f.n()).done;){var h=c.value;u=u.add(h.key)}}catch(b){f.e(b)}finally{f.f()}}}catch(b){s.e(b)}finally{s.f()}var d,p=Fe(n);try{for(p.s();!(d=p.n()).done;){var v=d.value;o.push(v.batchId);var y,m=Fe(v.mutations);try{for(m.s();!(y=m.n()).done;){var g=y.value;u=u.add(g.key)}}catch(b){m.e(b)}finally{m.f()}}}catch(b){p.e(b)}finally{p.f()}return r.localDocuments.getDocuments(e,u).next((function(e){return{Ki:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),ty.apply(this,arguments)}function ny(e,t){var n=Il(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.Ui.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=cc.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);Sl(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.mutationQueue.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){for(var t=$h(),n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}function ry(e){var t=Il(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.Vs.getLastRemoteSnapshotVersion(e)}))}function iy(e,t){var n=Il(e),r=t.snapshotVersion,i=n.$i;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.Ui.newChangeBuffer({trackRemovals:!0});i=n.$i;var o=[];t.targetChanges.forEach((function(a,u){var s=i.get(u);if(s){o.push(n.Vs.removeMatchingKeys(e,a.removedDocuments,u).next((function(){return n.Vs.addMatchingKeys(e,a.addedDocuments,u)})));var l=s.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.has(u)?l=l.withResumeToken(Oc.EMPTY_BYTE_STRING,Kl.min()).withLastLimboFreeSnapshotVersion(Kl.min()):a.resumeToken.approximateByteSize()>0&&(l=l.withResumeToken(a.resumeToken,r)),i=i.insert(u,l),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(s,l,a)&&o.push(n.Vs.updateTargetData(e,l))}}));var u=Vh(),s=$h();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(ay(e,a,t.documentUpdates).next((function(e){u=e.Gi,s=e.Qi}))),!r.isEqual(Kl.min())){var l=n.Vs.getLastRemoteSnapshotVersion(e).next((function(t){return n.Vs.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(l)}return cc.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.localDocuments.getLocalViewOfDocuments(e,u,s)})).next((function(){return u}))})).then((function(e){return n.$i=i,e}))}function ay(e,t,n){var r=$h(),i=$h();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=Vh();return n.forEach((function(n,a){var o=e.get(n);a.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),a.isNoDocument()&&a.version.isEqual(Kl.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!o.isValidDocument()||a.version.compareTo(o.version)>0||0===a.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):kl("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",a.version)})),{Gi:r,Qi:i}}))}function oy(e,t){var n=Il(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)}))}function uy(e,t){var n=Il(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.Vs.getTargetData(e,t).next((function(i){return i?(r=i,cc.resolve(r)):n.Vs.allocateTargetId(e).next((function(i){return r=new mp(t,i,0,e.currentSequenceNumber),n.Vs.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.$i.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.$i=n.$i.insert(e.targetId,e),n.Bi.set(t,e.targetId)),e}))}function sy(e,t,n){return ly.apply(this,arguments)}function ly(){return ly=u(a().mark((function e(t,n,r){var i,o,u;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Il(t),o=i.$i.get(n),u=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",u,(function(e){return i.persistence.referenceDelegate.removeTarget(e,o)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),vc(e.t1)){e.next=12;break}throw e.t1;case 12:kl("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.$i=i.$i.remove(n),i.Bi.delete(o.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),ly.apply(this,arguments)}function cy(e,t,n){var r=Il(e),i=Kl.min(),a=$h();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=Il(e),i=r.Bi.get(n);return void 0!==i?cc.resolve(r.$i.get(i)):r.Vs.getTargetData(t,n)}(r,e,Gf(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.Vs.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.Fi.getDocumentsMatchingQuery(e,t,n?i:Kl.min(),n?a:$h())})).next((function(e){return dy(r,Jf(t),e),{documents:e,ji:a}}))}))}function fy(e,t){var n=Il(e),r=Il(n.Vs),i=n.$i.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.te(e,t).next((function(e){return e?e.target:null}))}))}function hy(e,t){var n=Il(e),r=n.Li.get(t)||Kl.min();return n.persistence.runTransaction("Get new document changes","readonly",(function(e){return n.Ui.getAllFromCollectionGroup(e,t,nc(r,-1),Number.MAX_SAFE_INTEGER)})).then((function(e){return dy(n,t,e),e}))}function dy(e,t,n){var r=Kl.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Li.set(t,r)}function py(e,t,n,r){return vy.apply(this,arguments)}function vy(){return vy=u(a().mark((function e(t,n,r,i){var o,u,s,l,c,f,h,d,p,v;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=Il(t),u=$h(),s=Vh(),l=Fe(r);try{for(l.s();!(c=l.n()).done;)f=c.value,h=n.Wi(f.metadata.name),f.document&&(u=u.add(h)),(d=n.zi(f)).setReadTime(n.Hi(f.metadata.readTime)),s=s.insert(h,d)}catch(a){l.e(a)}finally{l.f()}return p=o.Ui.newChangeBuffer({trackRemovals:!0}),e.next=7,uy(o,function(e){return Gf(Uf(Wl.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return v=e.sent,e.abrupt("return",o.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return ay(e,p,s).next((function(t){return p.apply(e),t})).next((function(t){return o.Vs.removeMatchingKeysForTargetId(e,v.targetId).next((function(){return o.Vs.addMatchingKeys(e,u,v.targetId)})).next((function(){return o.localDocuments.getLocalViewOfDocuments(e,t.Gi,t.Qi)})).next((function(){return t.Gi}))}))})));case 9:case"end":return e.stop()}}),e)}))),vy.apply(this,arguments)}function yy(e,t){return my.apply(this,arguments)}function my(){return my=u(a().mark((function e(t,n){var r,i,o,u=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]?u[2]:$h(),e.next=3,uy(t,Gf(Sp(n.bundledQuery)));case 3:return i=e.sent,o=Il(t),e.abrupt("return",o.persistence.runTransaction("Save named query","readwrite",(function(e){var t=dd(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return o.Ds.saveNamedQuery(e,n);var a=i.withResumeToken(Oc.EMPTY_BYTE_STRING,t);return o.$i=o.$i.insert(a.targetId,a),o.Vs.updateTargetData(e,a).next((function(){return o.Vs.removeMatchingKeysForTargetId(e,i.targetId)})).next((function(){return o.Vs.addMatchingKeys(e,r,i.targetId)})).next((function(){return o.Ds.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),my.apply(this,arguments)}function gy(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function by(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function wy(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var ky=function(){function e(t,n,r,i){Ce(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return Ie(e,[{key:"Yi",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Ji",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new Al(a.error.code,a.error.message))),o?new e(t,n,a.state,i):(_l("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),_y=function(){function e(t,n,r){Ce(this,e),this.targetId=t,this.state=n,this.error=r}return Ie(e,[{key:"Yi",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Ji",value:function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new Al(i.error.code,i.error.message))),a?new e(t,i.state,r):(_l("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),xy=function(){function e(t,n){Ce(this,e),this.clientId=t,this.activeTargetIds=n}return Ie(e,null,[{key:"Ji",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=Xh(),o=0;i&&o<r.activeTargetIds.length;++o)i=Kc(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):(_l("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),Ey=function(){function e(t,n){Ce(this,e),this.clientId=t,this.onlineState=n}return Ie(e,null,[{key:"Ji",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(_l("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),Ty=function(){function e(){Ce(this,e),this.activeTargetIds=Xh()}return Ie(e,[{key:"Xi",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"Zi",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"Yi",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),Sy=function(){function e(t,n,r,i,a){Ce(this,e),this.window=t,this.js=n,this.persistenceKey=r,this.tr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.er=this.nr.bind(this),this.sr=new Sc(Ul),this.started=!1,this.ir=[];var o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.rr=gy(this.persistenceKey,this.tr),this.ur=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.sr=this.sr.insert(this.tr,new Ty),this.cr=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this.ar=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this.hr=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.lr=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.dr=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.er)}return Ie(e,[{key:"start",value:function(){var e=u(a().mark((function e(){var t,n,r,i,o,u,s,l,c,f,h,d=this;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.Ri();case 2:t=e.sent,n=Fe(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((i=r.value)!==this.tr){e.next=10;break}return e.abrupt("continue",12);case 10:(o=this.getItem(gy(this.persistenceKey,i)))&&(u=xy.Ji(i,o))&&(this.sr=this.sr.insert(u.clientId,u));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this._r(),(s=this.storage.getItem(this.lr))&&(l=this.wr(s))&&this.mr(l),c=Fe(this.ir);try{for(c.s();!(f=c.n()).done;)h=f.value,this.nr(h)}catch(a){c.e(a)}finally{c.f()}this.ir=[],this.window.addEventListener("pagehide",(function(){return d.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.ur,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.gr(this.sr)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.sr.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.yr(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.yr(e,t,n),this.pr(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(wy(this.persistenceKey,e));if(n){var r=_y.Ji(e,n);r&&(t=r.state)}}return this.Ir.Xi(e),this._r(),t}},{key:"removeLocalQueryTarget",value:function(e){this.Ir.Zi(e),this._r()}},{key:"isLocalQueryTarget",value:function(e){return this.Ir.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(wy(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.Tr(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.pr(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.Er(e)}},{key:"notifyBundleLoaded",value:function(e){this.Ar(e)}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this.er),this.removeItem(this.rr),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return kl("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){kl("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){kl("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"nr",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(kl("SharedClientState","EVENT",n.key,n.newValue),n.key===this.rr)return void _l("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.js.enqueueRetryable(u(a().mark((function e(){var r,i,o,u,s,l,c;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=43;break}if(null===n.key){e.next=41;break}if(!t.cr.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.Rr(n.key),e.abrupt("return",t.br(r,null));case 6:if(!(i=t.Pr(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.br(i.clientId,i));case 9:e.next=41;break;case 11:if(!t.ar.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(o=t.vr(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.Vr(o));case 16:e.next=41;break;case 18:if(!t.hr.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(u=t.Sr(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.Dr(u));case 23:e.next=41;break;case 25:if(n.key!==t.lr){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(s=t.wr(n.newValue))){e.next=30;break}return e.abrupt("return",t.mr(s));case 30:e.next=41;break;case 32:if(n.key!==t.ur){e.next=37;break}l=function(e){var t=_c.ot;if(null!=e)try{var n=JSON.parse(e);Sl("number"==typeof n),t=n}catch(e){_l("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue),l!==_c.ot&&t.sequenceNumberHandler(l),e.next=41;break;case 37:if(n.key!==t.dr){e.next=41;break}return c=t.Cr(n.newValue),e.next=41,Promise.all(c.map((function(e){return t.syncEngine.Nr(e)})));case 41:e.next=44;break;case 43:t.ir.push(n);case 44:case"end":return e.stop()}}),e)}))))}}},{key:"Ir",get:function(){return this.sr.get(this.tr)}},{key:"_r",value:function(){this.setItem(this.rr,this.Ir.Yi())}},{key:"yr",value:function(e,t,n){var r=new ky(this.currentUser,e,t,n),i=by(this.persistenceKey,this.currentUser,e);this.setItem(i,r.Yi())}},{key:"pr",value:function(e){var t=by(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"Er",value:function(e){var t={clientId:this.tr,onlineState:e};this.storage.setItem(this.lr,JSON.stringify(t))}},{key:"Tr",value:function(e,t,n){var r=wy(this.persistenceKey,e),i=new _y(e,t,n);this.setItem(r,i.Yi())}},{key:"Ar",value:function(e){var t=JSON.stringify(Array.from(e));this.setItem(this.dr,t)}},{key:"Rr",value:function(e){var t=this.cr.exec(e);return t?t[1]:null}},{key:"Pr",value:function(e,t){var n=this.Rr(e);return xy.Ji(n,t)}},{key:"vr",value:function(e,t){var n=this.ar.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return ky.Ji(new ml(i),r,t)}},{key:"Sr",value:function(e,t){var n=this.hr.exec(e),r=Number(n[1]);return _y.Ji(r,t)}},{key:"wr",value:function(e){return Ey.Ji(e)}},{key:"Cr",value:function(e){return JSON.parse(e)}},{key:"Vr",value:function(){var e=u(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.kr(t.batchId,t.state,t.error));case 2:kl("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Dr",value:function(e){return this.syncEngine.Or(e.targetId,e.state,e.error)}},{key:"br",value:function(e,t){var n=this,r=t?this.sr.insert(e,t):this.sr.remove(e),i=this.gr(this.sr),a=this.gr(r),o=[],u=[];return a.forEach((function(e){i.has(e)||o.push(e)})),i.forEach((function(e){a.has(e)||u.push(e)})),this.syncEngine.Mr(o,u).then((function(){n.sr=r}))}},{key:"mr",value:function(e){this.sr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"gr",value:function(e){var t=Xh();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"V",value:function(e){return!(!e||!e.localStorage)}}]),e}(),Iy=function(){function e(){Ce(this,e),this.Fr=new Ty,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return Ie(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.Fr.Xi(e),this.$r[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.$r[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.Fr.Zi(e)}},{key:"isLocalQueryTarget",value:function(e){return this.Fr.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.$r[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.Fr.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.Fr.activeTargetIds.has(e)}},{key:"start",value:function(){return this.Fr=new Ty,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),Cy=function(){function e(){Ce(this,e)}return Ie(e,[{key:"Br",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),Ay=function(){function e(){var t=this;Ce(this,e),this.Lr=function(){return t.Ur()},this.qr=function(){return t.Kr()},this.Gr=[],this.Qr()}return Ie(e,[{key:"Br",value:function(e){this.Gr.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}},{key:"Qr",value:function(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}},{key:"Ur",value:function(){kl("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=Fe(this.Gr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"Kr",value:function(){kl("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=Fe(this.Gr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"V",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),Dy={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},Ny=function(){function e(t){Ce(this,e),this.jr=t.jr,this.Wr=t.Wr}return Ie(e,[{key:"zr",value:function(e){this.Hr=e}},{key:"Jr",value:function(e){this.Yr=e}},{key:"onMessage",value:function(e){this.Xr=e}},{key:"close",value:function(){this.Wr()}},{key:"send",value:function(e){this.jr(e)}},{key:"Zr",value:function(){this.Hr()}},{key:"eo",value:function(e){this.Yr(e)}},{key:"no",value:function(e){this.Xr(e)}}]),e}(),Py=function(e){De(n,e);var t=Re(n);function n(e){var r;return Ce(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r}return Ie(n,[{key:"co",value:function(e,t,n,r){return new Promise((function(i,a){var o=new vl;o.listenOnce(cl.COMPLETE,(function(){try{switch(o.getLastErrorCode()){case ll.NO_ERROR:var t=o.getResponseJson();kl("Connection","XHR received:",JSON.stringify(t)),i(t);break;case ll.TIMEOUT:kl("Connection",'RPC "'+e+'" timed out'),a(new Al(Cl.DEADLINE_EXCEEDED,"Request time out"));break;case ll.HTTP_ERROR:var n=o.getStatus();if(kl("Connection",'RPC "'+e+'" failed with status:',n,"response text:",o.getResponseText()),n>0){var r=o.getResponseJson().error;if(r&&r.status&&r.message){var u=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(Cl).indexOf(t)>=0?t:Cl.UNKNOWN}(r.status);a(new Al(u,r.message))}else a(new Al(Cl.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new Al(Cl.UNAVAILABLE,"Connection failed."));break;default:Tl()}}finally{kl("Connection",'RPC "'+e+'" completed.')}}));var u=JSON.stringify(r);o.send(t,"POST",u,n,15)}))}},{key:"ho",value:function(e,t,n){var r=[this.so,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=ul(),a=sl(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new dl({})),this.uo(o.initMessageHeaders,t,n),"undefined"!==typeof window&&(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(yr())||"object"===typeof navigator&&"ReactNative"===navigator.product||yr().indexOf("Electron/")>=0||function(){var e=yr();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()||yr().indexOf("MSAppHost/")>=0||function(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()||(o.httpHeadersOverwriteParam="$httpHeaders");var u=r.join("");kl("Connection","Creating WebChannel: "+u,o);var s=i.createWebChannel(u,o),l=!1,c=!1,f=new Ny({jr:function(e){c?kl("Connection","Not sending because WebChannel is closed:",e):(l||(kl("Connection","Opening WebChannel transport."),s.open(),l=!0),kl("Connection","WebChannel sending:",e),s.send(e))},Wr:function(){return s.close()}}),h=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return h(s,pl.EventType.OPEN,(function(){c||kl("Connection","WebChannel transport opened.")})),h(s,pl.EventType.CLOSE,(function(){c||(c=!0,kl("Connection","WebChannel transport closed"),f.eo())})),h(s,pl.EventType.ERROR,(function(e){c||(c=!0,xl("Connection","WebChannel transport errored:",e),f.eo(new Al(Cl.UNAVAILABLE,"The operation could not be completed")))})),h(s,pl.EventType.MESSAGE,(function(e){var t;if(!c){var n=e.data[0];Sl(!!n);var r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){kl("Connection","WebChannel received error:",i);var a=i.status,o=function(e){var t=Nh[e];if(void 0!==t)return Mh(t)}(a),u=i.message;void 0===o&&(o=Cl.INTERNAL,u="Unknown error status: "+a+" with message "+i.message),c=!0,f.eo(new Al(o,u)),s.close()}else kl("Connection","WebChannel received:",n),f.no(n)}})),h(a,fl.STAT_EVENT,(function(e){e.stat===hl.PROXY?kl("Connection","Detected buffering proxy"):e.stat===hl.NOPROXY&&kl("Connection","Detected no buffering proxy")})),setTimeout((function(){f.Zr()}),0),f}}]),n}(function(){function e(t){Ce(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.so=n+"://"+t.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return Ie(e,[{key:"ro",value:function(e,t,n,r,i){var a=this.oo(e,t);kl("RestConnection","Sending: ",a,n);var o={};return this.uo(o,r,i),this.co(e,a,o,n).then((function(e){return kl("RestConnection","Received: ",e),e}),(function(t){throw xl("RestConnection","".concat(e," failed with error: "),t,"url: ",a,"request:",n),t}))}},{key:"ao",value:function(e,t,n,r,i,a){return this.ro(e,t,n,r,i)}},{key:"uo",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+gl,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"oo",value:function(e,t){var n=Dy[e];return"".concat(this.so,"/v1/").concat(t,":").concat(n)}}]),e}());function Oy(){return"undefined"!=typeof window?window:null}function Ly(){return"undefined"!=typeof document?document:null}function Ry(e){return new ld(e,!0)}var jy=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;Ce(this,e),this.js=t,this.timerId=n,this.lo=r,this.fo=i,this._o=a,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}return Ie(e,[{key:"reset",value:function(){this.wo=0}},{key:"po",value:function(){this.wo=this._o}},{key:"Io",value:function(e){var t=this;this.cancel();var n=Math.floor(this.wo+this.To()),r=Math.max(0,Date.now()-this.yo),i=Math.max(0,n-r);i>0&&kl("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.wo," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.mo=this.js.enqueueAfterDelay(this.timerId,i,(function(){return t.yo=Date.now(),e()})),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}},{key:"Eo",value:function(){null!==this.mo&&(this.mo.skipDelay(),this.mo=null)}},{key:"cancel",value:function(){null!==this.mo&&(this.mo.cancel(),this.mo=null)}},{key:"To",value:function(){return(Math.random()-.5)*this.wo}}]),e}(),My=function(){function e(t,n,r,i,a,o,u,s){Ce(this,e),this.js=t,this.Ao=r,this.Ro=i,this.bo=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=s,this.state=0,this.Po=0,this.vo=null,this.Vo=null,this.stream=null,this.So=new jy(t,n)}return Ie(e,[{key:"Do",value:function(){return 1===this.state||5===this.state||this.Co()}},{key:"Co",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.xo()}},{key:"stop",value:function(){var e=u(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.Do(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"No",value:function(){this.state=0,this.So.reset()}},{key:"ko",value:function(){var e=this;this.Co()&&null===this.vo&&(this.vo=this.js.enqueueAfterDelay(this.Ao,6e4,(function(){return e.Oo()})))}},{key:"Mo",value:function(e){this.Fo(),this.stream.send(e)}},{key:"Oo",value:function(){var e=u(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.Co()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Fo",value:function(){this.vo&&(this.vo.cancel(),this.vo=null)}},{key:"$o",value:function(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}},{key:"close",value:function(){var e=u(a().mark((function e(t,n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Fo(),this.$o(),this.So.cancel(),this.Po++,4!==t?this.So.reset():n&&n.code===Cl.RESOURCE_EXHAUSTED?(_l(n.toString()),_l("Using maximum backoff delay to prevent overloading the backend."),this.So.po()):n&&n.code===Cl.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Bo(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.Jr(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"Bo",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Lo(this.Po),n=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=c(t,2),i=r[0],a=r[1];e.Po===n&&e.Uo(i,a)}),(function(n){t((function(){var t=new Al(Cl.UNKNOWN,"Fetching auth token failed: "+n.message);return e.qo(t)}))}))}},{key:"Uo",value:function(e,t){var n=this,r=this.Lo(this.Po);this.stream=this.Ko(e,t),this.stream.zr((function(){r((function(){return n.state=2,n.Vo=n.js.enqueueAfterDelay(n.Ro,1e4,(function(){return n.Co()&&(n.state=3),Promise.resolve()})),n.listener.zr()}))})),this.stream.Jr((function(e){r((function(){return n.qo(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"xo",value:function(){var e=this;this.state=5,this.So.Io(u(a().mark((function t(){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"qo",value:function(e){return kl("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Lo",value:function(e){var t=this;return function(n){t.js.enqueueAndForget((function(){return t.Po===e?n():(kl("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),Fy=function(e){De(n,e);var t=Re(n);function n(e,r,i,a,o,u){var s;return Ce(this,n),(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,u)).wt=o,s}return Ie(n,[{key:"Ko",value:function(e,t){return this.bo.ho("Listen",e,t)}},{key:"onMessage",value:function(e){this.So.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Tl()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.dt?(Sl(void 0===t||"string"==typeof t),Oc.fromBase64String(t||"")):(Sl(void 0===t||t instanceof Uint8Array),Oc.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,u=o&&function(e){var t=void 0===e.code?Cl.UNKNOWN:Mh(e.code);return new Al(t,e.message||"")}(o);n=new nd(r,i,a,u||null)}else if("documentChange"in t){t.documentChange;var s=t.documentChange;s.document,s.document.name,s.document.updateTime;var l=md(e,s.document.name),c=dd(s.document.updateTime),f=new pf({mapValue:{fields:s.document.fields}}),h=yf.newFoundDocument(l,c,f),d=s.targetIds||[],p=s.removedTargetIds||[];n=new ed(d,p,h.key,h)}else if("documentDelete"in t){t.documentDelete;var v=t.documentDelete;v.document;var y=md(e,v.document),m=v.readTime?dd(v.readTime):Kl.min(),g=yf.newNoDocument(y,m),b=v.removedTargetIds||[];n=new ed([],b,g.key,g)}else if("documentRemove"in t){t.documentRemove;var w=t.documentRemove;w.document;var k=md(e,w.document),_=w.removedTargetIds||[];n=new ed([],_,k,null)}else{if(!("filter"in t))return Tl();t.filter;var x=t.filter;x.targetId;var E=x.count||0,T=new Rh(E),S=x.targetId;n=new td(S,T)}return n}(this.wt,e),n=function(e){if(!("targetChange"in e))return Kl.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?Kl.min():t.readTime?dd(t.readTime):Kl.min()}(e);return this.listener.Go(t,n)}},{key:"Qo",value:function(e){var t={};t.database=wd(this.wt),t.addTarget=function(e,t){var n,r=t.target;return(n=kf(r)?{documents:Id(e,r)}:{query:Cd(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=fd(e,t.resumeToken):t.snapshotVersion.compareTo(Kl.min())>0&&(n.readTime=cd(e,t.snapshotVersion.toTimestamp())),n}(this.wt,e);var n=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Tl()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.wt,e);n&&(t.labels=n),this.Mo(t)}},{key:"jo",value:function(e){var t={};t.database=wd(this.wt),t.removeTarget=e,this.Mo(t)}}]),n}(My),qy=function(e){De(n,e);var t=Re(n);function n(e,r,i,a,o,u){var s;return Ce(this,n),(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,u)).wt=o,s.Wo=!1,s}return Ie(n,[{key:"zo",get:function(){return this.Wo}},{key:"start",value:function(){this.Wo=!1,this.lastStreamToken=void 0,ta(Ne(n.prototype),"start",this).call(this)}},{key:"Bo",value:function(){this.Wo&&this.Ho([])}},{key:"Ko",value:function(e,t){return this.bo.ho("Write",e,t)}},{key:"onMessage",value:function(e){if(Sl(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Wo){this.So.reset();var t=function(e,t){return e&&e.length>0?(Sl(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?dd(e.updateTime):dd(t);return n.isEqual(Kl.min())&&(n=dd(t)),new mh(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=dd(e.commitTime);return this.listener.Jo(n,t)}return Sl(!e.writeResults||0===e.writeResults.length),this.Wo=!0,this.listener.Yo()}},{key:"Xo",value:function(){var e={};e.database=wd(this.wt),this.Mo(e)}},{key:"Ho",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return Td(t.wt,e)}))};this.Mo(n)}}]),n}(My),Vy=function(e){De(n,e);var t=Re(n);function n(e,r,i,a){var o;return Ce(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.bo=i,o.wt=a,o.Zo=!1,o}return Ie(n,[{key:"tu",value:function(){if(this.Zo)throw new Al(Cl.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"ro",value:function(e,t,n){var r=this;return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=c(i,2),o=a[0],u=a[1];return r.bo.ro(e,t,n,o,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===Cl.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new Al(Cl.UNKNOWN,e.toString())}))}},{key:"ao",value:function(e,t,n,r){var i=this;return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(a){var o=c(a,2),u=o[0],s=o[1];return i.bo.ao(e,t,n,u,s,r)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===Cl.UNAUTHENTICATED&&(i.authCredentials.invalidateToken(),i.appCheckCredentials.invalidateToken()),e):new Al(Cl.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.Zo=!0}}]),n}(function(){return Ie((function e(){Ce(this,e)}))}()),Uy=function(){function e(t,n){Ce(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}return Ie(e,[{key:"iu",value:function(){var e=this;0===this.eu&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.nu=null,e.ou("Backend didn't respond within 10 seconds."),e.ru("Offline"),Promise.resolve()})))}},{key:"uu",value:function(e){"Online"===this.state?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.cu(),this.ou("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.ru("Offline")))}},{key:"set",value:function(e){this.cu(),this.eu=0,"Online"===e&&(this.su=!1),this.ru(e)}},{key:"ru",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"ou",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.su?(_l(t),this.su=!1):kl("OnlineStateTracker",t)}},{key:"cu",value:function(){null!==this.nu&&(this.nu.cancel(),this.nu=null)}}]),e}(),By=Ie((function e(t,n,r,i,o){var s=this;Ce(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.au=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=o,this.du.Br((function(e){r.enqueueAndForget(u(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=Zy(s),!e.t0){e.next=5;break}return kl("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=u(a().mark((function e(t){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Il(t)).lu.add(4),e.next=4,Ky(n);case 4:return n._u.set("Unknown"),n.lu.delete(4),e.next=8,zy(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(s);case 5:case"end":return e.stop()}}),e)}))))})),this._u=new Uy(r,i)}));function zy(e){return Hy.apply(this,arguments)}function Hy(){return Hy=u(a().mark((function e(t){var n,r,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Zy(t)){e.next=18;break}n=Fe(t.fu),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])}))),Hy.apply(this,arguments)}function Ky(e){return Gy.apply(this,arguments)}function Gy(){return Gy=u(a().mark((function e(t){var n,r,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Fe(t.fu),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])}))),Gy.apply(this,arguments)}function Wy(e,t){var n=Il(e);n.hu.has(t.targetId)||(n.hu.set(t.targetId,t),Jy(n)?Xy(n):Cm(n).Co()&&$y(n,t))}function Qy(e,t){var n=Il(e),r=Cm(n);n.hu.delete(t),r.Co()&&Yy(n,t),0===n.hu.size&&(r.Co()?r.ko():Zy(n)&&n._u.set("Unknown"))}function $y(e,t){e.wu.Nt(t.targetId),Cm(e).Qo(t)}function Yy(e,t){e.wu.Nt(t),Cm(e).jo(t)}function Xy(e){e.wu=new id({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},te:function(t){return e.hu.get(t)||null}}),Cm(e).start(),e._u.iu()}function Jy(e){return Zy(e)&&!Cm(e).Do()&&e.hu.size>0}function Zy(e){return 0===Il(e).lu.size}function em(e){e.wu=void 0}function tm(e){return nm.apply(this,arguments)}function nm(){return nm=u(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.hu.forEach((function(e,n){$y(t,e)}));case 1:case"end":return e.stop()}}),e)}))),nm.apply(this,arguments)}function rm(e,t){return im.apply(this,arguments)}function im(){return im=u(a().mark((function e(t,n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:em(t),Jy(t)?(t._u.uu(n),Xy(t)):t._u.set("Unknown");case 1:case"end":return e.stop()}}),e)}))),im.apply(this,arguments)}function am(e,t,n){return om.apply(this,arguments)}function om(){return om=u(a().mark((function e(t,n,r){var i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t._u.set("Online"),!(n instanceof nd&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=u(a().mark((function e(t,n){var r,i,o,u;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=Fe(n.targetIds),e.prev=2,i.s();case 4:if((o=i.n()).done){e.next=14;break}if(u=o.value,e.t0=t.hu.has(u),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(u,r);case 10:t.hu.delete(u),t.wu.removeTarget(u);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),kl("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,um(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof ed?t.wu.Ut(n):n instanceof td?t.wu.zt(n):t.wu.Gt(n),r.isEqual(Kl.min())){e.next=29;break}return e.prev=14,e.next=17,ry(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.wu.Yt(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.hu.get(r);i&&e.hu.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t){var n=e.hu.get(t);if(n){e.hu.set(t,n.withResumeToken(Oc.EMPTY_BYTE_STRING,n.snapshotVersion)),Yy(e,t);var r=new mp(n.target,t,1,n.sequenceNumber);$y(e,r)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),kl("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,um(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),om.apply(this,arguments)}function um(e,t,n){return sm.apply(this,arguments)}function sm(){return sm=u(a().mark((function e(t,n,r){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(vc(n)){e.next=2;break}throw n;case 2:return t.lu.add(1),e.next=5,Ky(t);case 5:t._u.set("Offline"),r||(r=function(){return ry(t.localStore)}),t.asyncQueue.enqueueRetryable(u(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return kl("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.lu.delete(1),e.next=6,zy(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)}))),sm.apply(this,arguments)}function lm(e,t){return t().catch((function(n){return um(e,n,t)}))}function cm(e){return fm.apply(this,arguments)}function fm(){return fm=u(a().mark((function e(t){var n,r,i,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Il(t),r=Am(n),i=n.au.length>0?n.au[n.au.length-1].batchId:-1;case 2:if(!hm(n)){e.next=19;break}return e.prev=3,e.next=6,oy(n.localStore,i);case 6:if(null!==(o=e.sent)){e.next=10;break}return 0===n.au.length&&r.ko(),e.abrupt("break",19);case 10:i=o.batchId,dm(n,o),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,um(n,e.t0);case 17:e.next=2;break;case 19:pm(n)&&vm(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),fm.apply(this,arguments)}function hm(e){return Zy(e)&&e.au.length<10}function dm(e,t){e.au.push(t);var n=Am(e);n.Co()&&n.zo&&n.Ho(t.mutations)}function pm(e){return Zy(e)&&!Am(e).Do()&&e.au.length>0}function vm(e){Am(e).start()}function ym(e){return mm.apply(this,arguments)}function mm(){return mm=u(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Am(t).Xo();case 1:case"end":return e.stop()}}),e)}))),mm.apply(this,arguments)}function gm(e){return bm.apply(this,arguments)}function bm(){return bm=u(a().mark((function e(t){var n,r,i,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Am(t),r=Fe(t.au);try{for(r.s();!(i=r.n()).done;)o=i.value,n.Ho(o.mutations)}catch(a){r.e(a)}finally{r.f()}case 3:case"end":return e.stop()}}),e)}))),bm.apply(this,arguments)}function wm(e,t,n){return km.apply(this,arguments)}function km(){return km=u(a().mark((function e(t,n,r){var i,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.au.shift(),o=vp.from(i,n,r),e.next=3,lm(t,(function(){return t.remoteSyncer.applySuccessfulWrite(o)}));case 3:return e.next=5,cm(t);case 5:case"end":return e.stop()}}),e)}))),km.apply(this,arguments)}function _m(e,t){return xm.apply(this,arguments)}function xm(){return xm=u(a().mark((function e(t,n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&Am(t).zo,!e.t0){e.next=4;break}return e.next=4,function(){var e=u(a().mark((function e(t,n){var r,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!jh(i=n.code)||i===Cl.ABORTED){e.next=7;break}return r=t.au.shift(),Am(t).No(),e.next=5,lm(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,cm(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:pm(t)&&vm(t);case 5:case"end":return e.stop()}}),e)}))),xm.apply(this,arguments)}function Em(e,t){return Tm.apply(this,arguments)}function Tm(){return Tm=u(a().mark((function e(t,n){var r,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=Il(t)).asyncQueue.verifyOperationInProgress(),kl("RemoteStore","RemoteStore received new credentials"),i=Zy(r),r.lu.add(3),e.next=6,Ky(r);case 6:return i&&r._u.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.lu.delete(3),e.next=12,zy(r);case 12:case"end":return e.stop()}}),e)}))),Tm.apply(this,arguments)}function Sm(e,t){return Im.apply(this,arguments)}function Im(){return Im=u(a().mark((function e(t,n){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Il(t),!n){e.next=7;break}return r.lu.delete(2),e.next=5,zy(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.lu.add(2),e.next=12,Ky(r);case 12:r._u.set("Unknown");case 13:case"end":return e.stop()}}),e)}))),Im.apply(this,arguments)}function Cm(e){return e.mu||(e.mu=function(e,t,n){var r=Il(e);return r.tu(),new Fy(t,r.bo,r.authCredentials,r.appCheckCredentials,r.wt,n)}(e.datastore,e.asyncQueue,{zr:tm.bind(null,e),Jr:rm.bind(null,e),Go:am.bind(null,e)}),e.fu.push(function(){var t=u(a().mark((function t(n){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.mu.No(),Jy(e)?Xy(e):e._u.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.mu.stop();case 6:em(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.mu}function Am(e){return e.gu||(e.gu=function(e,t,n){var r=Il(e);return r.tu(),new qy(t,r.bo,r.authCredentials,r.appCheckCredentials,r.wt,n)}(e.datastore,e.asyncQueue,{zr:ym.bind(null,e),Jr:_m.bind(null,e),Yo:gm.bind(null,e),Jo:wm.bind(null,e)}),e.fu.push(function(){var t=u(a().mark((function t(n){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.gu.No(),t.next=4,cm(e);case 4:t.next=9;break;case 6:return t.next=8,e.gu.stop();case 8:e.au.length>0&&(kl("RemoteStore","Stopping write stream with ".concat(e.au.length," pending writes")),e.au=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.gu}var Dm=function(){function e(t,n,r,i,a){Ce(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Dl,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return Ie(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Al(Cl.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function Nm(e,t){if(_l("AsyncQueue","".concat(t,": ").concat(e)),vc(e))return new Al(Cl.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var Pm=function(){function e(t){Ce(this,e),this.comparator=t?function(e,n){return t(e,n)||Yl.comparator(e.key,n.key)}:function(e,t){return Yl.comparator(e.key,t.key)},this.keyedMap=Bh(),this.sortedSet=new Sc(this.comparator)}return Ie(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),Om=function(){function e(){Ce(this,e),this.yu=new Sc(Yl.comparator)}return Ie(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.yu.get(t);n?0!==e.type&&3===n.type?this.yu=this.yu.insert(t,e):3===e.type&&1!==n.type?this.yu=this.yu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.yu=this.yu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.yu=this.yu.remove(t):1===e.type&&2===n.type?this.yu=this.yu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):Tl():this.yu=this.yu.insert(t,e)}},{key:"pu",value:function(){var e=[];return this.yu.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),Lm=function(){function e(t,n,r,i,a,o,u,s){Ce(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=s}return Ie(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Qf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i){var a=[];return n.forEach((function(e){a.push({type:0,doc:e})})),new e(t,n,Pm.emptySet(n),a,r,i,!0,!1)}}]),e}(),Rm=Ie((function e(){Ce(this,e),this.Iu=void 0,this.listeners=[]})),jm=Ie((function e(){Ce(this,e),this.queries=new Fh((function(e){return $f(e)}),Qf),this.onlineState="Unknown",this.Tu=new Set}));function Mm(e,t){return Fm.apply(this,arguments)}function Fm(){return Fm=u(a().mark((function e(t,n){var r,i,o,u,s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Il(t),i=n.query,o=!1,(u=r.queries.get(i))||(o=!0,u=new Rm),!o){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:u.Iu=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),s=Nm(e.t0,"Initialization of query '".concat(Yf(n.query),"' failed")),e.abrupt("return",void n.onError(s));case 13:r.queries.set(i,u),u.listeners.push(n),n.Eu(r.onlineState),u.Iu&&n.Au(u.Iu)&&zm(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),Fm.apply(this,arguments)}function qm(e,t){return Vm.apply(this,arguments)}function Vm(){return Vm=u(a().mark((function e(t,n){var r,i,o,u,s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Il(t),i=n.query,o=!1,(u=r.queries.get(i))&&(s=u.listeners.indexOf(n))>=0&&(u.listeners.splice(s,1),o=0===u.listeners.length),!o){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),Vm.apply(this,arguments)}function Um(e,t){var n,r=Il(e),i=!1,a=Fe(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,u=o.query,s=r.queries.get(u);if(s){var l,c=Fe(s.listeners);try{for(c.s();!(l=c.n()).done;){l.value.Au(o)&&(i=!0)}}catch(f){c.e(f)}finally{c.f()}s.Iu=o}}}catch(f){a.e(f)}finally{a.f()}i&&zm(r)}function Bm(e,t,n){var r=Il(e),i=r.queries.get(t);if(i){var a,o=Fe(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(u){o.e(u)}finally{o.f()}}r.queries.delete(t)}function zm(e){e.Tu.forEach((function(e){e.next()}))}var Hm=function(){function e(t,n,r){Ce(this,e),this.query=t,this.Ru=n,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=r||{}}return Ie(e,[{key:"Au",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=Fe(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new Lm(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}var a=!1;return this.bu?this.vu(e)&&(this.Ru.next(e),a=!0):this.Vu(e,this.onlineState)&&(this.Su(e),a=!0),this.Pu=e,a}},{key:"onError",value:function(e){this.Ru.error(e)}},{key:"Eu",value:function(e){this.onlineState=e;var t=!1;return this.Pu&&!this.bu&&this.Vu(this.Pu,e)&&(this.Su(this.Pu),t=!0),t}},{key:"Vu",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.Du||!n)&&(!e.docs.isEmpty()||"Offline"===t)}},{key:"vu",value:function(e){if(e.docChanges.length>0)return!0;var t=this.Pu&&this.Pu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"Su",value:function(e){e=Lm.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Ru.next(e)}}]),e}(),Km=function(){function e(t,n){Ce(this,e),this.payload=t,this.byteLength=n}return Ie(e,[{key:"Cu",value:function(){return"metadata"in this.payload}}]),e}(),Gm=function(){function e(t){Ce(this,e),this.wt=t}return Ie(e,[{key:"Wi",value:function(e){return md(this.wt,e)}},{key:"zi",value:function(e){return e.metadata.exists?xd(this.wt,e.document,!1):yf.newNoDocument(this.Wi(e.metadata.name),this.Hi(e.metadata.readTime))}},{key:"Hi",value:function(e){return dd(e)}}]),e}(),Wm=function(){function e(t,n,r){Ce(this,e),this.xu=t,this.localStore=n,this.wt=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Qm(t)}return Ie(e,[{key:"Nu",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;var n=Wl.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"ku",value:function(e){var t,n=new Map,r=new Gm(this.wt),i=Fe(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var o,u=r.Wi(a.metadata.name),s=Fe(a.metadata.queries);try{for(s.s();!(o=s.n()).done;){var l=o.value,c=(n.get(l)||$h()).add(u);n.set(l,c)}}catch(f){s.e(f)}finally{s.f()}}}}catch(f){i.e(f)}finally{i.f()}return n}},{key:"complete",value:function(){var e=u(a().mark((function e(){var t,n,r,i,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,py(this.localStore,new Gm(this.wt),this.documents,this.xu.id);case 2:t=e.sent,n=this.ku(this.documents),r=Fe(this.queries),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return o=i.value,e.next=11,yy(this.localStore,o,n.get(o.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",{progress:this.progress,Ou:this.collectionGroups,Mu:t}));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function Qm(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var $m=Ie((function e(t){Ce(this,e),this.key=t})),Ym=Ie((function e(t){Ce(this,e),this.key=t})),Xm=function(){function e(t,n){Ce(this,e),this.query=t,this.Fu=n,this.$u=null,this.current=!1,this.Bu=$h(),this.mutatedKeys=$h(),this.Lu=Zf(t),this.Uu=new Pm(this.Lu)}return Ie(e,[{key:"qu",get:function(){return this.Fu}},{key:"Ku",value:function(e,t){var n=this,r=t?t.Gu:new Om,i=t?t.Uu:this.Uu,a=t?t.mutatedKeys:this.mutatedKeys,o=i,u=!1,s="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,l="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var c=i.get(e),f=Xf(n.query,t)?t:null,h=!!c&&n.mutatedKeys.has(c.key),d=!!f&&(f.hasLocalMutations||n.mutatedKeys.has(f.key)&&f.hasCommittedMutations),p=!1;c&&f?c.data.isEqual(f.data)?h!==d&&(r.track({type:3,doc:f}),p=!0):n.Qu(c,f)||(r.track({type:2,doc:f}),p=!0,(s&&n.Lu(f,s)>0||l&&n.Lu(f,l)<0)&&(u=!0)):!c&&f?(r.track({type:0,doc:f}),p=!0):c&&!f&&(r.track({type:1,doc:c}),p=!0,(s||l)&&(u=!0)),p&&(f?(o=o.add(f),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){var c="F"===this.query.limitType?o.last():o.first();o=o.delete(c.key),a=a.delete(c.key),r.track({type:1,doc:c})}return{Uu:o,Gu:r,Oi:u,mutatedKeys:a}}},{key:"Qu",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.Uu;this.Uu=e.Uu,this.mutatedKeys=e.mutatedKeys;var a=e.Gu.pu();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Tl()}};return n(e)-n(t)}(e.type,t.type)||r.Lu(e.doc,t.doc)})),this.ju(n);var o=t?this.Wu():[],u=0===this.Bu.size&&this.current?1:0,s=u!==this.$u;return this.$u=u,0!==a.length||s?{snapshot:new Lm(this.query,e.Uu,i,a,e.mutatedKeys,0===u,s,!1),zu:o}:{zu:o}}},{key:"Eu",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Uu:this.Uu,Gu:new Om,mutatedKeys:this.mutatedKeys,Oi:!1},!1)):{zu:[]}}},{key:"Hu",value:function(e){return!this.Fu.has(e)&&!!this.Uu.has(e)&&!this.Uu.get(e).hasLocalMutations}},{key:"ju",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.Fu=t.Fu.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.Fu=t.Fu.delete(e)})),this.current=e.current)}},{key:"Wu",value:function(){var e=this;if(!this.current)return[];var t=this.Bu;this.Bu=$h(),this.Uu.forEach((function(t){e.Hu(t.key)&&(e.Bu=e.Bu.add(t.key))}));var n=[];return t.forEach((function(t){e.Bu.has(t)||n.push(new Ym(t))})),this.Bu.forEach((function(e){t.has(e)||n.push(new $m(e))})),n}},{key:"Ju",value:function(e){this.Fu=e.ji,this.Bu=$h();var t=this.Ku(e.documents);return this.applyChanges(t,!0)}},{key:"Yu",value:function(){return Lm.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,0===this.$u)}}]),e}(),Jm=Ie((function e(t,n,r){Ce(this,e),this.query=t,this.targetId=n,this.view=r})),Zm=Ie((function e(t){Ce(this,e),this.key=t,this.Xu=!1})),eg=function(){function e(t,n,r,i,a,o){Ce(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.Zu={},this.tc=new Fh((function(e){return $f(e)}),Qf),this.ec=new Map,this.nc=new Set,this.sc=new Sc(Yl.comparator),this.ic=new Map,this.rc=new Lv,this.oc={},this.uc=new Map,this.cc=cv.Rn(),this.onlineState="Unknown",this.ac=void 0}return Ie(e,[{key:"isPrimaryClient",get:function(){return!0===this.ac}}]),e}();function tg(e,t){return ng.apply(this,arguments)}function ng(){return ng=u(a().mark((function e(t,n){var r,i,o,u,s,l;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Qg(t),!(u=r.tc.get(n))){e.next=6;break}i=u.targetId,r.sharedClientState.addLocalQueryTarget(i),o=u.view.Yu(),e.next=15;break;case 6:return e.next=8,uy(r.localStore,Gf(n));case 8:return s=e.sent,r.isPrimaryClient&&Wy(r.remoteStore,s),l=r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.targetId,e.next=14,rg(r,n,i,"current"===l);case 14:o=e.sent;case 15:return e.abrupt("return",o);case 16:case"end":return e.stop()}}),e)}))),ng.apply(this,arguments)}function rg(e,t,n,r){return ig.apply(this,arguments)}function ig(){return ig=u(a().mark((function e(t,n,r,i){var o,s,l,c,f,h;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.hc=function(e,n,r){return function(){var e=u(a().mark((function e(t,n,r,i){var o,u,s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=n.view.Ku(r),e.t0=o.Oi,!e.t0){e.next=6;break}return e.next=5,cy(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.Ku(t,o)}));case 5:o=e.sent;case 6:return u=i&&i.targetChanges.get(n.targetId),s=n.view.applyChanges(o,t.isPrimaryClient,u),e.abrupt("return",(Eg(t,n.targetId,s.zu),s.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,cy(t.localStore,n,!0);case 3:return o=e.sent,s=new Xm(n,o.ji),l=s.Ku(o.documents),c=Zh.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState),f=s.applyChanges(l,t.isPrimaryClient,c),Eg(t,r,f.zu),h=new Jm(n,r,s),e.abrupt("return",(t.tc.set(n,h),t.ec.has(r)?t.ec.get(r).push(n):t.ec.set(r,[n]),f.snapshot));case 11:case"end":return e.stop()}}),e)}))),ig.apply(this,arguments)}function ag(e,t){return og.apply(this,arguments)}function og(){return og=u(a().mark((function e(t,n){var r,i,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Il(t),i=r.tc.get(n),!((o=r.ec.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.ec.set(i.targetId,o.filter((function(e){return!Qf(e,n)}))),void r.tc.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,sy(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),Qy(r.remoteStore,i.targetId),_g(r,i.targetId)})).catch(sc);case 9:e.next=14;break;case 11:return _g(r,i.targetId),e.next=14,sy(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),og.apply(this,arguments)}function ug(e,t,n){return sg.apply(this,arguments)}function sg(){return sg=u(a().mark((function e(t,n,r){var i,o,u;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=$g(t),e.prev=1,e.next=4,function(e,t){var n,r,i=Il(e),a=Hl.now(),o=t.reduce((function(e,t){return e.add(t.key)}),$h());return i.persistence.runTransaction("Locally write mutations","readwrite",(function(e){var u=Vh(),s=$h();return i.Ui.getEntries(e,o).next((function(e){(u=e).forEach((function(e,t){t.isValidDocument()||(s=s.add(e))}))})).next((function(){return i.localDocuments.getOverlayedDocuments(e,u)})).next((function(r){n=r;var o,u=[],s=Fe(t);try{for(s.s();!(o=s.n()).done;){var l=o.value,c=Eh(l,n.get(l.key).overlayedDocument);null!=c&&u.push(new Ih(l.key,c,vf(c.value.mapValue),gh.exists(!0)))}}catch(f){s.e(f)}finally{s.f()}return i.mutationQueue.addMutationBatch(e,a,u,t)})).next((function(t){r=t;var a=t.applyToLocalDocumentSet(n,s);return i.documentOverlayCache.saveOverlays(e,t.batchId,a)}))})).then((function(){return{batchId:r.batchId,changes:zh(n)}}))}(i.localStore,n);case 4:return o=e.sent,i.sharedClientState.addPendingMutation(o.batchId),function(e,t,n){var r=e.oc[e.currentUser.toKey()];r||(r=new Sc(Ul)),r=r.insert(t,n),e.oc[e.currentUser.toKey()]=r}(i,o.batchId,r),e.next=9,Ig(i,o.changes);case 9:return e.next=11,cm(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),u=Nm(e.t0,"Failed to persist write"),r.reject(u);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),sg.apply(this,arguments)}function lg(e,t){return cg.apply(this,arguments)}function cg(){return cg=u(a().mark((function e(t,n){var r,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Il(t),e.prev=1,e.next=4,iy(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.ic.get(t);n&&(Sl(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.Xu=!0:e.modifiedDocuments.size>0?Sl(n.Xu):e.removedDocuments.size>0&&(Sl(n.Xu),n.Xu=!1))})),e.next=8,Ig(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,sc(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),cg.apply(this,arguments)}function fg(e,t,n){var r=Il(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.tc.forEach((function(e,n){var r=n.view.Eu(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=Il(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=Fe(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.Eu(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&zm(n)}(r.eventManager,t),i.length&&r.Zu.Go(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function hg(e,t,n){return dg.apply(this,arguments)}function dg(){return dg=u(a().mark((function e(t,n,r){var i,o,u,s,l,c;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=Il(t)).sharedClientState.updateQueryState(n,"rejected",r),o=i.ic.get(n),!(u=o&&o.key)){e.next=14;break}return s=(s=new Sc(Yl.comparator)).insert(u,yf.newNoDocument(u,Kl.min())),l=$h().add(u),c=new Jh(Kl.min(),new Map,new Ac(Ul),s,l),e.next=9,lg(i,c);case 9:i.sc=i.sc.remove(u),i.ic.delete(n),Sg(i),e.next=16;break;case 14:return e.next=16,sy(i.localStore,n,!1).then((function(){return _g(i,n,r)})).catch(sc);case 16:case"end":return e.stop()}}),e)}))),dg.apply(this,arguments)}function pg(e,t){return vg.apply(this,arguments)}function vg(){return vg=u(a().mark((function e(t,n){var r,i,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Il(t),i=n.batch.batchId,e.prev=1,e.next=4,ny(r.localStore,n);case 4:return o=e.sent,kg(r,i,null),wg(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,Ig(r,o);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,sc(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),vg.apply(this,arguments)}function yg(e,t,n){return mg.apply(this,arguments)}function mg(){return mg=u(a().mark((function e(t,n,r){var i,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Il(t),e.prev=1,e.next=4,function(e,t){var n=Il(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.mutationQueue.lookupMutationBatch(e,t).next((function(t){return Sl(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}(i.localStore,n);case 4:return o=e.sent,kg(i,n,r),wg(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,Ig(i,o);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,sc(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),mg.apply(this,arguments)}function gg(e,t){return bg.apply(this,arguments)}function bg(){return bg=u(a().mark((function e(t,n){var r,i,o,u;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Zy((r=Il(t)).remoteStore)||kl("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=Il(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.mutationQueue.getHighestUnacknowledgedBatchId(e)}))}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(o=r.uc.get(i)||[]).push(n),r.uc.set(i,o),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),u=Nm(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(u);case 16:case"end":return e.stop()}}),e,null,[[2,12]])}))),bg.apply(this,arguments)}function wg(e,t){(e.uc.get(t)||[]).forEach((function(e){e.resolve()})),e.uc.delete(t)}function kg(e,t,n){var r=Il(e),i=r.oc[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.oc[r.currentUser.toKey()]=i}}function _g(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=Fe(e.ec.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.tc.delete(a),n&&e.Zu.lc(a,n)}}catch(o){i.e(o)}finally{i.f()}e.ec.delete(t),e.isPrimaryClient&&e.rc.us(t).forEach((function(t){e.rc.containsKey(t)||xg(e,t)}))}function xg(e,t){e.nc.delete(t.path.canonicalString());var n=e.sc.get(t);null!==n&&(Qy(e.remoteStore,n),e.sc=e.sc.remove(t),e.ic.delete(n),Sg(e))}function Eg(e,t,n){var r,i=Fe(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof $m?(e.rc.addReference(a.key,t),Tg(e,a)):a instanceof Ym?(kl("SyncEngine","Document no longer in limbo: "+a.key),e.rc.removeReference(a.key,t),e.rc.containsKey(a.key)||xg(e,a.key)):Tl()}}catch(o){i.e(o)}finally{i.f()}}function Tg(e,t){var n=t.key,r=n.path.canonicalString();e.sc.get(n)||e.nc.has(r)||(kl("SyncEngine","New document in limbo: "+n),e.nc.add(r),Sg(e))}function Sg(e){for(;e.nc.size>0&&e.sc.size<e.maxConcurrentLimboResolutions;){var t=e.nc.values().next().value;e.nc.delete(t);var n=new Yl(Wl.fromString(t)),r=e.cc.next();e.ic.set(r,new Zm(n)),e.sc=e.sc.insert(n,r),Wy(e.remoteStore,new mp(Gf(Uf(n.path)),r,2,_c.ot))}}function Ig(e,t,n){return Cg.apply(this,arguments)}function Cg(){return Cg=u(a().mark((function e(t,n,r){var i,o,s,l;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Il(t),o=[],s=[],l=[],e.t0=i.tc.isEmpty(),e.t0){e.next=9;break}return i.tc.forEach((function(e,t){l.push(i.hc(t,n,r).then((function(e){if(e){i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,e.fromCache?"not-current":"current"),o.push(e);var n=Yv.Vi(t.targetId,e);s.push(n)}})))})),e.next=6,Promise.all(l);case 6:return i.Zu.Go(o),e.next=9,function(){var e=u(a().mark((function e(t,n){var r,i,o,u,s,l,c,f;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Il(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return cc.forEach(n,(function(t){return cc.forEach(t.Pi,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return cc.forEach(t.vi,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),vc(e.t0)){e.next=10;break}throw e.t0;case 10:kl("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=Fe(n);try{for(i.s();!(o=i.n()).done;)u=o.value,s=u.targetId,u.fromCache||(l=r.$i.get(s),c=l.snapshotVersion,f=l.withLastLimboFreeSnapshotVersion(c),r.$i=r.$i.insert(s,f))}catch(a){i.e(a)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,s);case 9:case"end":return e.stop()}}),e)}))),Cg.apply(this,arguments)}function Ag(e,t){return Dg.apply(this,arguments)}function Dg(){return Dg=u(a().mark((function e(t,n){var r,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=Il(t)).currentUser.isEqual(n)){e.next=11;break}return kl("SyncEngine","User change. New user:",n.toKey()),e.next=5,ey(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.uc.forEach((function(e){e.forEach((function(e){e.reject(new Al(Cl.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.uc.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,Ig(r,i.Ki);case 11:case"end":return e.stop()}}),e)}))),Dg.apply(this,arguments)}function Ng(e,t){var n=Il(e),r=n.ic.get(t);if(r&&r.Xu)return $h().add(r.key);var i=$h(),a=n.ec.get(t);if(!a)return i;var o,u=Fe(a);try{for(u.s();!(o=u.n()).done;){var s=o.value,l=n.tc.get(s);i=i.unionWith(l.view.qu)}}catch(c){u.e(c)}finally{u.f()}return i}function Pg(e,t){return Og.apply(this,arguments)}function Og(){return Og=u(a().mark((function e(t,n){var r,i,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Il(t),e.next=3,cy(r.localStore,n.query,!0);case 3:return i=e.sent,o=n.view.Ju(i),e.abrupt("return",(r.isPrimaryClient&&Eg(r,n.targetId,o.zu),o));case 6:case"end":return e.stop()}}),e)}))),Og.apply(this,arguments)}function Lg(e,t){return Rg.apply(this,arguments)}function Rg(){return Rg=u(a().mark((function e(t,n){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Il(t),e.abrupt("return",hy(r.localStore,n).then((function(e){return Ig(r,e)})));case 2:case"end":return e.stop()}}),e)}))),Rg.apply(this,arguments)}function jg(e,t,n,r){return Mg.apply(this,arguments)}function Mg(){return Mg=u(a().mark((function e(t,n,r,i){var o,u;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=Il(t),e.next=3,function(e,t){var n=Il(e),r=Il(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.yn(e,t).next((function(t){return t?n.localDocuments.getDocuments(e,t):cc.resolve(null)}))}))}(o.localStore,n);case 3:if(null===(u=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,cm(o.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(kg(o,n,i||null),wg(o,n),function(e,t){Il(Il(e).mutationQueue).In(t)}(o.localStore,n)):Tl();case 11:return e.next=13,Ig(o,u);case 13:e.next=16;break;case 15:kl("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)}))),Mg.apply(this,arguments)}function Fg(e,t){return qg.apply(this,arguments)}function qg(){return qg=u(a().mark((function e(t,n){var r,i,o,u,s,l,c,f;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Qg(r=Il(t)),$g(r),!0!==n||!0===r.ac){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,Vg(r,i.toArray());case 5:return o=e.sent,r.ac=!0,e.next=9,Sm(r.remoteStore,!0);case 9:u=Fe(o);try{for(u.s();!(s=u.n()).done;)l=s.value,Wy(r.remoteStore,l)}catch(a){u.e(a)}finally{u.f()}e.next=25;break;case 13:if(!1!==n||!1===r.ac){e.next=25;break}return c=[],f=Promise.resolve(),r.ec.forEach((function(e,t){r.sharedClientState.isLocalQueryTarget(t)?c.push(t):f=f.then((function(){return _g(r,t),sy(r.localStore,t,!0)})),Qy(r.remoteStore,t)})),e.next=19,f;case 19:return e.next=21,Vg(r,c);case 21:return function(e){var t=Il(e);t.ic.forEach((function(e,n){Qy(t.remoteStore,n)})),t.rc.cs(),t.ic=new Map,t.sc=new Sc(Yl.comparator)}(r),r.ac=!1,e.next=25,Sm(r.remoteStore,!1);case 25:case"end":return e.stop()}}),e)}))),qg.apply(this,arguments)}function Vg(e,t,n){return Ug.apply(this,arguments)}function Ug(){return Ug=u(a().mark((function e(t,n,r){var i,o,u,s,l,c,f,h,d,p,v,y,m,g;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=Il(t),o=[],u=[],s=Fe(n),e.prev=2,s.s();case 4:if((l=s.n()).done){e.next=45;break}if(c=l.value,f=void 0,!(h=i.ec.get(c))||0===h.length){e.next=34;break}return e.next=11,uy(i.localStore,Gf(h[0]));case 11:f=e.sent,d=Fe(h),e.prev=13,d.s();case 15:if((p=d.n()).done){e.next=24;break}return v=p.value,y=i.tc.get(v),e.next=20,Pg(i,y);case 20:(m=e.sent).snapshot&&u.push(m.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),d.e(e.t0);case 29:return e.prev=29,d.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,fy(i.localStore,c);case 36:return g=e.sent,e.next=39,uy(i.localStore,g);case 39:return f=e.sent,e.next=42,rg(i,Bg(g),c,!1);case 42:o.push(f);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),s.e(e.t1);case 50:return e.prev=50,s.f(),e.finish(50);case 53:return e.abrupt("return",(i.Zu.Go(u),o));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])}))),Ug.apply(this,arguments)}function Bg(e){return Vf(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function zg(e){var t=Il(e);return Il(Il(t.localStore).persistence).Ri()}function Hg(e,t,n,r){return Kg.apply(this,arguments)}function Kg(){return Kg=u(a().mark((function e(t,n,r,i){var o,u,s,l;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(o=Il(t)).ac){e.next=3;break}return e.abrupt("return",void kl("SyncEngine","Ignoring unexpected query state notification."));case 3:if(!((u=o.ec.get(n))&&u.length>0)){e.next=20;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?8:"rejected"===e.t0?15:19;break;case 8:return e.next=10,hy(o.localStore,Jf(u[0]));case 10:return s=e.sent,l=Jh.createSynthesizedRemoteEventForCurrentChange(n,"current"===r),e.next=14,Ig(o,s,l);case 14:return e.abrupt("break",20);case 15:return e.next=17,sy(o.localStore,n,!0);case 17:return _g(o,n,i),e.abrupt("break",20);case 19:Tl();case 20:case"end":return e.stop()}}),e)}))),Kg.apply(this,arguments)}function Gg(e,t,n){return Wg.apply(this,arguments)}function Wg(){return Wg=u(a().mark((function e(t,n,r){var i,o,u,s,l,c,f,h,d;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=Qg(t)).ac){e.next=45;break}o=Fe(n),e.prev=3,o.s();case 5:if((u=o.n()).done){e.next=21;break}if(s=u.value,!i.ec.has(s)){e.next=10;break}return kl("SyncEngine","Adding an already active target "+s),e.abrupt("continue",19);case 10:return e.next=12,fy(i.localStore,s);case 12:return l=e.sent,e.next=15,uy(i.localStore,l);case 15:return c=e.sent,e.next=18,rg(i,Bg(l),c.targetId,!1);case 18:Wy(i.remoteStore,c);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),o.e(e.t0);case 26:return e.prev=26,o.f(),e.finish(26);case 29:f=Fe(r),e.prev=30,d=a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=h.value,e.t0=i.ec.has(t),!e.t0){e.next=5;break}return e.next=5,sy(i.localStore,t,!1).then((function(){Qy(i.remoteStore,t),_g(i,t)})).catch(sc);case 5:case"end":return e.stop()}}),e)})),f.s();case 33:if((h=f.n()).done){e.next=37;break}return e.delegateYield(d(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),f.e(e.t2);case 42:return e.prev=42,f.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])}))),Wg.apply(this,arguments)}function Qg(e){var t=Il(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=lg.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Ng.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=hg.bind(null,t),t.Zu.Go=Um.bind(null,t.eventManager),t.Zu.lc=Bm.bind(null,t.eventManager),t}function $g(e){var t=Il(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=pg.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=yg.bind(null,t),t}function Yg(e,t,n){var r=Il(e);(function(){var e=u(a().mark((function e(t,n,r){var i,o,u,s,l;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=Il(e),r=dd(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n.Ds.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(t.localStore,i);case 6:if(!e.sent){e.next=11;break}return e.next=9,n.close();case 9:return r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)),e.abrupt("return",Promise.resolve(new Set));case 11:return r._updateProgress(Qm(i)),o=new Wm(i,t.localStore,n.wt),e.next=15,n.fc();case 15:u=e.sent;case 16:if(!u){e.next=26;break}return e.next=19,o.Nu(u);case 19:return(s=e.sent)&&r._updateProgress(s),e.next=23,n.fc();case 23:u=e.sent;case 24:e.next=16;break;case 26:return e.next=28,o.complete();case 28:return l=e.sent,e.next=31,Ig(t,l.Mu,void 0);case 31:return e.next=33,function(e,t){var n=Il(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n.Ds.saveBundleMetadata(e,t)}))}(t.localStore,i);case 33:return r._completeWith(l.progress),e.abrupt("return",Promise.resolve(l.Ou));case 37:return e.prev=37,e.t0=e.catch(0),e.abrupt("return",(xl("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0),Promise.resolve(new Set)));case 40:case"end":return e.stop()}}),e,null,[[0,37]])})));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then((function(e){r.sharedClientState.notifyBundleLoaded(e)}))}var Xg=function(){function e(){Ce(this,e),this.synchronizeTabs=!1}return Ie(e,[{key:"initialize",value:function(){var e=u(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.wt=Ry(t.databaseInfo.databaseId),this.sharedClientState=this.dc(t),this.persistence=this._c(t),e.next=5,this.persistence.start();case 5:this.localStore=this.wc(t),this.gcScheduler=this.mc(t,this.localStore),this.indexBackfillerScheduler=this.gc(t,this.localStore);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"mc",value:function(e,t){return null}},{key:"gc",value:function(e,t){return null}},{key:"wc",value:function(e){return Zv(this.persistence,new Xv,e.initialUser,this.wt)}},{key:"_c",value:function(e){return new Vv(Bv.Ms,this.wt)}},{key:"dc",value:function(e){return new Iy}},{key:"terminate",value:function(){var e=u(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),Jg=function(e){De(n,e);var t=Re(n);function n(e,r,i){var a;return Ce(this,n),(a=t.call(this)).yc=e,a.cacheSizeBytes=r,a.forceOwnership=i,a.synchronizeTabs=!1,a}return Ie(n,[{key:"initialize",value:function(){var e=u(a().mark((function e(t){var r=this;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ta(Ne(n.prototype),"initialize",this).call(this,t);case 2:return e.next=4,this.yc.initialize(this,t);case 4:return e.next=6,$g(this.yc.syncEngine);case 6:return e.next=8,cm(this.yc.remoteStore);case 8:return e.next=10,this.persistence.ci((function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"wc",value:function(e){return Zv(this.persistence,new Xv,e.initialUser,this.wt)}},{key:"mc",value:function(e,t){var n=this.persistence.referenceDelegate.garbageCollector;return new mv(n,e.asyncQueue,t)}},{key:"gc",value:function(e,t){var n=new kc(t,this.persistence);return new wc(e.asyncQueue,n)}},{key:"_c",value:function(e){var t=$v(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?nv.withCacheSize(this.cacheSizeBytes):nv.DEFAULT;return new Gv(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,Oy(),Ly(),this.wt,this.sharedClientState,!!this.forceOwnership)}},{key:"dc",value:function(e){return new Iy}}]),n}(Xg),Zg=function(e){De(n,e);var t=Re(n);function n(e,r){var i;return Ce(this,n),(i=t.call(this,e,r,!1)).yc=e,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return Ie(n,[{key:"initialize",value:function(){var e=u(a().mark((function e(t){var r,i=this;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ta(Ne(n.prototype),"initialize",this).call(this,t);case 2:if(r=this.yc.syncEngine,e.t0=this.sharedClientState instanceof Sy,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={kr:jg.bind(null,r),Or:Hg.bind(null,r),Mr:Gg.bind(null,r),Ri:zg.bind(null,r),Nr:Lg.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.ci(function(){var e=u(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fg(i.yc.syncEngine,t);case 2:i.gcScheduler&&(t&&!i.gcScheduler.started?i.gcScheduler.start():t||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(t&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():t||i.indexBackfillerScheduler.stop());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"dc",value:function(e){var t=Oy();if(!Sy.V(t))throw new Al(Cl.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=$v(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Sy(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(Jg),eb=function(){function e(){Ce(this,e)}return Ie(e,[{key:"initialize",value:function(){var e=u(a().mark((function e(t,n){var r=this;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return fg(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=Ag.bind(null,this.syncEngine),e.next=12,Sm(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new jm}},{key:"createDatastore",value:function(e){var t,n=Ry(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new Py(t));return function(e,t,n,r){return new Vy(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return fg(o.syncEngine,e,0)},a=Ay.V()?new Ay:new Cy,new By(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var u=new eg(e,t,n,r,i,a);return o&&(u.ac=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=u(a().mark((function e(t){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Il(t),kl("RemoteStore","RemoteStore shutting down."),n.lu.add(5),e.next=5,Ky(n);case 5:n.du.shutdown(),n._u.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function tb(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return u(a().mark((function r(){var i;return a().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}}),r)})))()},cancel:function(){return u(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.reject("unimplemented")}}var nb=function(){function e(t){Ce(this,e),this.observer=t,this.muted=!1}return Ie(e,[{key:"next",value:function(e){this.observer.next&&this.Ic(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.Ic(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}},{key:"Tc",value:function(){this.muted=!0}},{key:"Ic",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),rb=function(){function e(t,n){var r=this;Ce(this,e),this.Ec=t,this.wt=n,this.metadata=new Dl,this.buffer=new Uint8Array,this.Ac=new TextDecoder("utf-8"),this.Rc().then((function(e){e&&e.Cu()?r.metadata.resolve(e.payload.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.payload))))}),(function(e){return r.metadata.reject(e)}))}return Ie(e,[{key:"close",value:function(){return this.Ec.cancel()}},{key:"getMetadata",value:function(){var e=u(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fc",value:function(){var e=u(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.Rc());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Rc",value:function(){var e=u(a().mark((function e(){var t,n,r,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.bc();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.Ac.decode(t),r=Number(n),isNaN(r)&&this.Pc("length string (".concat(n,") is not valid number")),e.next=9,this.vc(r);case 9:return i=e.sent,e.abrupt("return",new Km(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Vc",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"bc",value:function(){var e=u(a().mark((function e(){var t,n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.Vc()<0)){e.next=7;break}return e.next=3,this.Sc();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.Vc())<0&&this.Pc("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"vc",value:function(){var e=u(a().mark((function e(t){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.Sc();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.Pc("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.Ac.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Pc",value:function(e){throw this.Ec.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"Sc",value:function(){var e=u(a().mark((function e(){var t,n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Ec.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),ib=function(){function e(t){Ce(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return Ie(e,[{key:"lookup",value:function(){var e=u(a().mark((function e(t){var n,r=this;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new Al(Cl.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=u(a().mark((function e(t,n){var r,i,o,u,s,l;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Il(t),i=wd(r.wt)+"/documents",o={documents:n.map((function(e){return yd(r.wt,e)}))},e.next=5,r.ao("BatchGetDocuments",i,o,n.length);case 5:return u=e.sent,s=new Map,u.forEach((function(e){var t=Ed(r.wt,e);s.set(t.key.toString(),t)})),l=[],e.abrupt("return",(n.forEach((function(e){var t=s.get(e.toString());Sl(!!t),l.push(t)})),l));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return r.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new Oh(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=u(a().mark((function e(){var t,n=this;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var r=Yl.fromPath(t);n.mutations.push(new Lh(r,n.precondition(r)))})),e.next=7,function(){var e=u(a().mark((function e(t,n){var r,i,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Il(t),i=wd(r.wt)+"/documents",o={writes:n.map((function(e){return Td(r.wt,e)}))},e.next=3,r.ro("Commit",i,o);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Tl();t=Kl.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new Al(Cl.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?gh.updateTime(t):gh.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Kl.min()))throw new Al(Cl.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return gh.updateTime(t)}return gh.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),ab=function(){function e(t,n,r,i,a){Ce(this,e),this.asyncQueue=t,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=a,this.Dc=r.maxAttempts,this.So=new jy(this.asyncQueue,"transaction_retry")}return Ie(e,[{key:"run",value:function(){this.Dc-=1,this.Cc()}},{key:"Cc",value:function(){var e=this;this.So.Io(u(a().mark((function t(){var n,r;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new ib(e.datastore),(r=e.xc(n))&&r.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.Nc(t)}))}))})).catch((function(t){e.Nc(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"xc",value:function(e){try{var t=this.updateFunction(e);return!zc(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"Nc",value:function(e){var t=this;this.Dc>0&&this.kc(e)?(this.Dc-=1,this.asyncQueue.enqueueAndForget((function(){return t.Cc(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"kc",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||!jh(t)}return!1}}]),e}(),ob=function(){function e(t,n,r,i){var o=this;Ce(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=ml.UNAUTHENTICATED,this.clientId=Vl.I(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=u(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return kl("FirestoreClient","Received user=",t.uid),e.next=3,o.authCredentialListener(t);case 3:o.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return kl("FirestoreClient","Received new app check token=",e),o.appCheckCredentialListener(e,o.user)}))}return Ie(e,[{key:"getConfiguration",value:function(){var e=u(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new Al(Cl.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new Dl;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(u(a().mark((function n(){var r;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e.onlineComponents,!n.t0){n.next=5;break}return n.next=5,e.onlineComponents.terminate();case 5:if(n.t1=e.offlineComponents,!n.t1){n.next=9;break}return n.next=9,e.offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=Nm(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function ub(e,t){return sb.apply(this,arguments)}function sb(){return sb=u(a().mark((function e(t,n){var r,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),kl("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=u(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,ey(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),sb.apply(this,arguments)}function lb(e,t){return cb.apply(this,arguments)}function cb(){return cb=u(a().mark((function e(t,n){var r,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,fb(t);case 3:return r=e.sent,kl("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return Em(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return Em(n.remoteStore,t)})),t.onlineComponents=n;case 13:case"end":return e.stop()}}),e)}))),cb.apply(this,arguments)}function fb(e){return hb.apply(this,arguments)}function hb(){return hb=u(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.offlineComponents,e.t0){e.next=5;break}return kl("FirestoreClient","Using default OfflineComponentProvider"),e.next=5,ub(t,new Xg);case 5:return e.abrupt("return",t.offlineComponents);case 6:case"end":return e.stop()}}),e)}))),hb.apply(this,arguments)}function db(e){return pb.apply(this,arguments)}function pb(){return pb=u(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.onlineComponents,e.t0){e.next=5;break}return kl("FirestoreClient","Using default OnlineComponentProvider"),e.next=5,lb(t,new eb);case 5:return e.abrupt("return",t.onlineComponents);case 6:case"end":return e.stop()}}),e)}))),pb.apply(this,arguments)}function vb(e){return fb(e).then((function(e){return e.persistence}))}function yb(e){return fb(e).then((function(e){return e.localStore}))}function mb(e){return db(e).then((function(e){return e.remoteStore}))}function gb(e){return db(e).then((function(e){return e.syncEngine}))}function bb(e){return wb.apply(this,arguments)}function wb(){return wb=u(a().mark((function e(t){var n,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,db(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=tg.bind(null,n.syncEngine),r.onUnlisten=ag.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)}))),wb.apply(this,arguments)}function kb(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new Dl;return e.asyncQueue.enqueueAndForget(u(a().mark((function i(){return a().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new nb({next:function(a){t.enqueueAndForget((function(){return qm(e,o)}));var u=a.docs.has(n);!u&&a.fromCache?i.reject(new Al(Cl.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&a.fromCache&&r&&"server"===r.source?i.reject(new Al(Cl.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new Hm(Uf(n.path),a,{includeMetadataChanges:!0,Du:!0});return Mm(e,o)},i.next=3,bb(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function _b(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new Dl;return e.asyncQueue.enqueueAndForget(u(a().mark((function i(){return a().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new nb({next:function(n){t.enqueueAndForget((function(){return qm(e,o)})),n.fromCache&&"server"===r.source?i.reject(new Al(Cl.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new Hm(n,a,{includeMetadataChanges:!0,Du:!0});return Mm(e,o)},i.next=3,bb(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}var xb=new Map;function Eb(e,t,n){if(!n)throw new Al(Cl.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function Tb(e,t,n,r){if(!0===t&&!0===r)throw new Al(Cl.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function Sb(e){if(!Yl.isDocumentKey(e))throw new Al(Cl.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function Ib(e){if(Yl.isDocumentKey(e))throw new Al(Cl.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function Cb(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":Tl()}function Ab(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Al(Cl.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=Cb(e);throw new Al(Cl.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function Db(e,t){if(t<=0)throw new Al(Cl.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var Nb=function(){function e(t){var n;if(Ce(this,e),void 0===t.host){if(void 0!==t.ssl)throw new Al(Cl.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Al(Cl.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,Tb("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return Ie(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),Pb=function(){function e(t,n,r){Ce(this,e),this._authCredentials=n,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Nb({}),this._settingsFrozen=!1,t instanceof Bc?this._databaseId=t:(this._app=t,this._databaseId=function(e){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Al(Cl.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Bc(e.options.projectId)}(t))}return Ie(e,[{key:"app",get:function(){if(!this._app)throw new Al(Cl.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new Al(Cl.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Nb(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Pl;switch(e.type){case"gapi":var t=e.client;return Sl(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty)),new jl(t,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new Al(Cl.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=xb.get(e);t&&(kl("ComponentProvider","Removing Datastore"),xb.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function Ob(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=Ab(e,Pb))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==t&&xl("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},a),{host:"".concat(t,":").concat(n),ssl:!1})),i.mockUserToken){var o,u;if("string"==typeof i.mockUserToken)o=i.mockUserToken,u=ml.MOCK_USER;else{o=vr(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var s=i.mockUserToken.sub||i.mockUserToken.user_id;if(!s)throw new Al(Cl.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new ml(s)}e._authCredentials=new Ol(new Nl(o,u))}}var Lb=function(){function e(t,n,r){Ce(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return Ie(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new jb(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),Rb=function(){function e(t,n,r){Ce(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return Ie(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),jb=function(e){De(n,e);var t=Re(n);function n(e,r,i){var a;return Ce(this,n),(a=t.call(this,e,r,Uf(i)))._path=i,a.type="collection",a}return Ie(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new Lb(this.firestore,null,new Yl(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(Rb);function Mb(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Ar(e),Eb("collection","path",t),e instanceof Pb){var a=Wl.fromString.apply(Wl,[t].concat(r));return Ib(a),new jb(e,null,a)}if(!(e instanceof Lb||e instanceof jb))throw new Al(Cl.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Wl.fromString.apply(Wl,[t].concat(r)));return Ib(o),new jb(e.firestore,null,o)}function Fb(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Ar(e),1===arguments.length&&(t=Vl.I()),Eb("doc","path",t),e instanceof Pb){var a=Wl.fromString.apply(Wl,[t].concat(r));return Sb(a),new Lb(e,null,new Yl(a))}if(!(e instanceof Lb||e instanceof jb))throw new Al(Cl.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Wl.fromString.apply(Wl,[t].concat(r)));return Sb(o),new Lb(e.firestore,e instanceof jb?e.converter:null,new Yl(o))}function qb(e,t){return e=Ar(e),t=Ar(t),(e instanceof Lb||e instanceof jb)&&(t instanceof Lb||t instanceof jb)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function Vb(e,t){return e=Ar(e),t=Ar(t),e instanceof Rb&&t instanceof Rb&&e.firestore===t.firestore&&Qf(e._query,t._query)&&e.converter===t.converter}var Ub=function(){function e(){var t=this;Ce(this,e),this.Oc=Promise.resolve(),this.Mc=[],this.Fc=!1,this.$c=[],this.Bc=null,this.Lc=!1,this.Uc=!1,this.qc=[],this.So=new jy(this,"async_queue_retry"),this.Kc=function(){var e=Ly();e&&kl("AsyncQueue","Visibility state changed to "+e.visibilityState),t.So.Eo()};var n=Ly();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Kc)}return Ie(e,[{key:"isShuttingDown",get:function(){return this.Fc}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.Gc(),this.Qc(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.Fc){this.Fc=!0,this.Uc=e||!1;var t=Ly();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Kc)}}},{key:"enqueue",value:function(e){var t=this;if(this.Gc(),this.Fc)return new Promise((function(){}));var n=new Dl;return this.Qc((function(){return t.Fc&&t.Uc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.Mc.push(e),t.jc()}))}},{key:"jc",value:function(){var e=u(a().mark((function e(){var t=this;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.Mc.length){e.next=14;break}return e.prev=1,e.next=4,this.Mc[0]();case 4:this.Mc.shift(),this.So.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),vc(e.t0)){e.next=12;break}throw e.t0;case 12:kl("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.Mc.length>0&&this.So.Io((function(){return t.jc()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"Qc",value:function(e){var t=this,n=this.Oc.then((function(){return t.Lc=!0,e().catch((function(e){t.Bc=e,t.Lc=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw _l("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.Lc=!1,e}))}));return this.Oc=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.Gc(),this.qc.indexOf(e)>-1&&(t=0);var i=Dm.createAndSchedule(this,e,t,n,(function(e){return r.Wc(e)}));return this.$c.push(i),i}},{key:"Gc",value:function(){this.Bc&&Tl()}},{key:"verifyOperationInProgress",value:function(){}},{key:"zc",value:function(){var e=u(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.Oc,e.next=3,t;case 3:if(t!==this.Oc){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Hc",value:function(e){var t,n=Fe(this.$c);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"Jc",value:function(e){var t=this;return this.zc().then((function(){t.$c.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=Fe(t.$c);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.zc()}))}},{key:"Yc",value:function(e){this.qc.push(e)}},{key:"Wc",value:function(e){var t=this.$c.indexOf(e);this.$c.splice(t,1)}}]),e}();function Bb(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=Fe(["next","error","complete"]);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e)}var zb=function(){function e(){Ce(this,e),this._progressObserver={},this._taskCompletionResolver=new Dl,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return Ie(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),Hb=function(e){De(n,e);var t=Re(n);function n(e,r,i){var a;return Ce(this,n),(a=t.call(this,e,r,i)).type="firestore",a._queue=new Ub,a._persistenceKey="name"in e?e.name:"[DEFAULT]",a}return Ie(n,[{key:"_terminate",value:function(){return this._firestoreClient||Gb(this),this._firestoreClient.terminate()}}]),n}(Pb);function Kb(e){return e._firestoreClient||Gb(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function Gb(e){var t,n=e._freezeSettings(),r=function(e,t,n,r){return new Uc(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new ob(e._authCredentials,e._appCheckCredentials,e._queue,r)}function Wb(e,t,n){var r=new Dl;return e.asyncQueue.enqueue(u(a().mark((function i(){var o;return a().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,ub(e,n);case 3:return i.next=5,lb(e,t);case 5:r.resolve(),i.next=14;break;case 8:if(i.prev=8,i.t0=i.catch(0),function(e){return"FirebaseError"===e.name?e.code===Cl.FAILED_PRECONDITION||e.code===Cl.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||(22===e.code||20===e.code||11===e.code)}(o=i.t0)){i.next=13;break}throw o;case 13:console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+o),r.reject(o);case 14:case"end":return i.stop()}}),i,null,[[0,8]])})))).then((function(){return r.promise}))}function Qb(e){return function(e){return e.asyncQueue.enqueue(u(a().mark((function t(){var n,r;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,vb(e);case 2:return n=t.sent,t.next=5,mb(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=Il(e);return t.lu.delete(0),zy(t)}(r)));case 7:case"end":return t.stop()}}),t)}))))}(Kb(e=Ab(e,Hb)))}function $b(e){return function(e){return e.asyncQueue.enqueue(u(a().mark((function t(){var n,r;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,vb(e);case 2:return n=t.sent,t.next=5,mb(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=u(a().mark((function e(t){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Il(t)).lu.add(0),e.next=4,Ky(n);case 4:n._u.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}}),t)}))))}(Kb(e=Ab(e,Hb)))}function Yb(e,t){var n=Kb(e=Ab(e,Hb)),r=new zb;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new rb(e,t)}(function(e,t){if(e instanceof Uint8Array)return tb(e,t);if(e instanceof ArrayBuffer)return tb(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?(new TextEncoder).encode(e):e),t)}(n,Ry(t));e.asyncQueue.enqueueAndForget(u(a().mark((function t(){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Yg,t.next=3,gb(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,r),r}function Xb(e,t){return function(e,t){return e.asyncQueue.enqueue(u(a().mark((function n(){return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=Il(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n.Ds.getNamedQuery(e,t)}))},n.next=3,yb(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}(Kb(e=Ab(e,Hb)),t).then((function(t){return t?new Rb(e,null,t.query):null}))}function Jb(e){if(e._initialized||e._terminated)throw new Al(Cl.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var Zb=function(){function e(){Ce(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new Al(Cl.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new $l(n)}return Ie(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var ew=function(){function e(t){Ce(this,e),this._byteString=t}return Ie(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(Oc.fromBase64String(t))}catch(t){throw new Al(Cl.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(Oc.fromUint8Array(t))}}]),e}(),tw=Ie((function e(t){Ce(this,e),this._methodName=t})),nw=function(){function e(t,n){if(Ce(this,e),!isFinite(t)||t<-90||t>90)throw new Al(Cl.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new Al(Cl.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return Ie(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return Ul(this._lat,e._lat)||Ul(this._long,e._long)}}]),e}(),rw=/^__.*__$/,iw=function(){function e(t,n,r){Ce(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return Ie(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new Ih(e,this.data,this.fieldMask,t,this.fieldTransforms):new Sh(e,this.data,t,this.fieldTransforms)}}]),e}(),aw=function(){function e(t,n,r){Ce(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return Ie(e,[{key:"toMutation",value:function(e,t){return new Ih(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function ow(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Tl()}}var uw=function(){function e(t,n,r,i,a,o){Ce(this,e),this.settings=t,this.databaseId=n,this.wt=r,this.ignoreUndefinedProperties=i,void 0===a&&this.Xc(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return Ie(e,[{key:"path",get:function(){return this.settings.path}},{key:"Zc",get:function(){return this.settings.Zc}},{key:"ta",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.wt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"ea",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ta({path:n,na:!1});return r.sa(e),r}},{key:"ia",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ta({path:n,na:!1});return r.Xc(),r}},{key:"ra",value:function(e){return this.ta({path:void 0,na:!0})}},{key:"oa",value:function(e){return Iw(e,this.settings.methodName,this.settings.ua||!1,this.path,this.settings.ca)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"Xc",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.sa(this.path.get(e))}},{key:"sa",value:function(e){if(0===e.length)throw this.oa("Document fields must not be empty");if(ow(this.Zc)&&rw.test(e))throw this.oa('Document fields cannot begin and end with "__"')}}]),e}(),sw=function(){function e(t,n,r){Ce(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.wt=r||Ry(t)}return Ie(e,[{key:"aa",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new uw({Zc:e,methodName:t,ca:n,path:$l.emptyPath(),na:!1,ua:r},this.databaseId,this.wt,this.ignoreUndefinedProperties)}}]),e}();function lw(e){var t=e._freezeSettings(),n=Ry(e._databaseId);return new sw(e._databaseId,!!t.ignoreUndefinedProperties,n)}function cw(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.aa(a.merge||a.mergeFields?2:0,t,n,i);xw("Data must be an object, but it was:",o,r);var u,s,l=kw(r,o);if(a.merge)u=new Pc(o.fieldMask),s=o.fieldTransforms;else if(a.mergeFields){var c,f=[],h=Fe(a.mergeFields);try{for(h.s();!(c=h.n()).done;){var d=c.value,p=Ew(t,d,n);if(!o.contains(p))throw new Al(Cl.INVALID_ARGUMENT,"Field '".concat(p,"' is specified in your field mask but missing from your input data."));Cw(f,p)||f.push(p)}}catch(v){h.e(v)}finally{h.f()}u=new Pc(f),s=o.fieldTransforms.filter((function(e){return u.covers(e.field)}))}else u=null,s=o.fieldTransforms;return new iw(new pf(l),u,s)}var fw=function(e){De(n,e);var t=Re(n);function n(){return Ce(this,n),t.apply(this,arguments)}return Ie(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.Zc)throw 1===e.Zc?e.oa("".concat(this._methodName,"() can only appear at the top level of your update data")):e.oa("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(tw);function hw(e,t,n){return new uw({Zc:3,ca:t.settings.ca,methodName:e._methodName,na:n},t.databaseId,t.wt,t.ignoreUndefinedProperties)}var dw=function(e){De(n,e);var t=Re(n);function n(){return Ce(this,n),t.apply(this,arguments)}return Ie(n,[{key:"_toFieldTransform",value:function(e){return new yh(e.path,new sh)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(tw),pw=function(e){De(n,e);var t=Re(n);function n(e,r){var i;return Ce(this,n),(i=t.call(this,e)).ha=r,i}return Ie(n,[{key:"_toFieldTransform",value:function(e){var t=hw(this,e,!0),n=this.ha.map((function(e){return ww(e,t)})),r=new lh(n);return new yh(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(tw),vw=function(e){De(n,e);var t=Re(n);function n(e,r){var i;return Ce(this,n),(i=t.call(this,e)).ha=r,i}return Ie(n,[{key:"_toFieldTransform",value:function(e){var t=hw(this,e,!0),n=this.ha.map((function(e){return ww(e,t)})),r=new fh(n);return new yh(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(tw),yw=function(e){De(n,e);var t=Re(n);function n(e,r){var i;return Ce(this,n),(i=t.call(this,e)).la=r,i}return Ie(n,[{key:"_toFieldTransform",value:function(e){var t=new dh(e.wt,rh(e.wt,this.la));return new yh(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}(tw);function mw(e,t,n,r){var i=e.aa(1,t,n);xw("Data must be an object, but it was:",i,r);var a=[],o=pf.empty();Ec(r,(function(e,r){var u=Sw(t,e,n);r=Ar(r);var s=i.ia(u);if(r instanceof fw)a.push(u);else{var l=ww(r,s);null!=l&&(a.push(u),o.set(u,l))}}));var u=new Pc(a);return new aw(o,u,i.fieldTransforms)}function gw(e,t,n,r,i,a){var o=e.aa(1,t,n),u=[Ew(t,r,n)],s=[i];if(a.length%2!=0)throw new Al(Cl.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var l=0;l<a.length;l+=2)u.push(Ew(t,a[l])),s.push(a[l+1]);for(var c=[],f=pf.empty(),h=u.length-1;h>=0;--h)if(!Cw(c,u[h])){var d=u[h],p=s[h];p=Ar(p);var v=o.ia(d);if(p instanceof fw)c.push(d);else{var y=ww(p,v);null!=y&&(c.push(d),f.set(d,y))}}var m=new Pc(c);return new aw(f,m,o.fieldTransforms)}function bw(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return ww(n,e.aa(r?4:3,t))}function ww(e,t){if(_w(e=Ar(e)))return xw("Unsupported field value:",t,e),kw(e,t);if(e instanceof tw)return function(e,t){if(!ow(t.Zc))throw t.oa("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.oa("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.na&&4!==t.Zc)throw t.oa("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=Fe(e);try{for(a.s();!(n=a.n()).done;){var o=ww(n.value,t.ra(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(u){a.e(u)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=Ar(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return rh(t.wt,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=Hl.fromDate(e);return{timestampValue:cd(t.wt,n)}}if(e instanceof Hl){var r=new Hl(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:cd(t.wt,r)}}if(e instanceof nw)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof ew)return{bytesValue:fd(t.wt,e._byteString)};if(e instanceof Lb){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.oa("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:pd(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.oa("Unsupported field value: ".concat(Cb(e)))}(e,t)}function kw(e,t){var n={};return Tc(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Ec(e,(function(e,r){var i=ww(r,t.ea(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function _w(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Hl||e instanceof nw||e instanceof ew||e instanceof Lb||e instanceof tw)}function xw(e,t,n){if(!_w(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=Cb(n);throw"an object"===r?t.oa(e+" a custom object"):t.oa(e+" "+r)}}function Ew(e,t,n){if((t=Ar(t))instanceof Zb)return t._internalPath;if("string"==typeof t)return Sw(e,t);throw Iw("Field path arguments must be of type string or ",e,!1,void 0,n)}var Tw=new RegExp("[~\\*/\\[\\]]");function Sw(e,t,n){if(t.search(Tw)>=0)throw Iw("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return je(Zb,Te(t.split(".")))._internalPath}catch(r){throw Iw("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function Iw(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,u="Function ".concat(t,"() called with invalid data");n&&(u+=" (via `toFirestore()`)"),u+=". ";var s="";return(a||o)&&(s+=" (found",a&&(s+=" in field ".concat(r)),o&&(s+=" in document ".concat(i)),s+=")"),new Al(Cl.INVALID_ARGUMENT,u+e+s)}function Cw(e,t){return e.some((function(e){return e.isEqual(t)}))}var Aw=function(){function e(t,n,r,i,a){Ce(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return Ie(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new Lb(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new Dw(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(Nw("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),Dw=function(e){De(n,e);var t=Re(n);function n(){return Ce(this,n),t.apply(this,arguments)}return Ie(n,[{key:"data",value:function(){return ta(Ne(n.prototype),"data",this).call(this)}}]),n}(Aw);function Nw(e,t){return"string"==typeof t?Sw(e,t):t instanceof Zb?t._internalPath:t._delegate._internalPath}var Pw=function(){function e(t,n){Ce(this,e),this.hasPendingWrites=t,this.fromCache=n}return Ie(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),Ow=function(e){De(n,e);var t=Re(n);function n(e,r,i,a,o,u){var s;return Ce(this,n),(s=t.call(this,e,r,i,a,u))._firestore=e,s._firestoreImpl=e,s.metadata=o,s}return Ie(n,[{key:"exists",value:function(){return ta(Ne(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new Lw(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(Nw("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(Aw),Lw=function(e){De(n,e);var t=Re(n);function n(){return Ce(this,n),t.apply(this,arguments)}return Ie(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return ta(Ne(n.prototype),"data",this).call(this,e)}}]),n}(Ow),Rw=function(){function e(t,n,r,i){Ce(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new Pw(i.hasPendingWrites,i.fromCache),this.query=r}return Ie(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new Lw(n._firestore,n._userDataWriter,r.key,r,new Pw(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Al(Cl.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){return{type:"added",doc:new Lw(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Pw(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new Lw(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Pw(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:jw(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}]),e}();function jw(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Tl()}}function Mw(e,t){return e instanceof Ow&&t instanceof Ow?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof Rw&&t instanceof Rw&&e._firestore===t._firestore&&Vb(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}function Fw(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Al(Cl.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var qw=Ie((function e(){Ce(this,e)}));function Vw(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=o._apply(e)}return e}var Uw=function(e){De(n,e);var t=Re(n);function n(e,r,i){var a;return Ce(this,n),(a=t.call(this)).fa=e,a.da=r,a._a=i,a.type="where",a}return Ie(n,[{key:"_apply",value:function(e){var t=lw(e.firestore),n=function(e,t,n,r,i,a,o){var u;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new Al(Cl.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){Jw(o,a);var s,l=[],c=Fe(o);try{for(c.s();!(s=c.n()).done;){var f=s.value;l.push(Xw(r,e,f))}}catch(d){c.e(d)}finally{c.f()}u={arrayValue:{values:l}}}else u=Xw(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||Jw(o,a),u=bw(n,"where",o,"in"===a||"not-in"===a);var h=Tf.create(i,a,u);return function(e,t){if(t.ht()){var n=zf(e);if(null!==n&&!n.isEqual(t.field))throw new Al(Cl.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(t.field.toString(),"'"));var r=Bf(e);null!==r&&Zw(e,t.field,r)}var i=function(e,t){var n,r=Fe(e.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(t.indexOf(i.op)>=0)return i.op}}catch(d){r.e(d)}finally{r.f()}return null}(e,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==i)throw i===t.op?new Al(Cl.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new Al(Cl.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(i.toString(),"' filters."))}(e,h),h}(e._query,0,t,e.firestore._databaseId,this.fa,this.da,this._a);return new Rb(e.firestore,e.converter,function(e,t){var n=e.filters.concat([t]);return new qf(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}(e._query,n))}}]),n}(qw);var Bw=function(e){De(n,e);var t=Re(n);function n(e,r){var i;return Ce(this,n),(i=t.call(this)).fa=e,i.wa=r,i.type="orderBy",i}return Ie(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new Al(Cl.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Al(Cl.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Rf(t,n);return function(e,t){if(null===Bf(e)){var n=zf(e);null!==n&&Zw(e,n,t.field)}}(e,r),r}(e._query,this.fa,this.wa);return new Rb(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new qf(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}]),n}(qw);var zw=function(e){De(n,e);var t=Re(n);function n(e,r,i){var a;return Ce(this,n),(a=t.call(this)).type=e,a.ma=r,a.ga=i,a}return Ie(n,[{key:"_apply",value:function(e){return new Rb(e.firestore,e.converter,Wf(e._query,this.ma,this.ga))}}]),n}(qw);var Hw=function(e){De(n,e);var t=Re(n);function n(e,r,i){var a;return Ce(this,n),(a=t.call(this)).type=e,a.ya=r,a.pa=i,a}return Ie(n,[{key:"_apply",value:function(e){var t=Yw(e,this.type,this.ya,this.pa);return new Rb(e.firestore,e.converter,function(e,t){return new qf(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}]),n}(qw);function Kw(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Hw("startAt",t,!0)}function Gw(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Hw("startAfter",t,!1)}var Ww=function(e){De(n,e);var t=Re(n);function n(e,r,i){var a;return Ce(this,n),(a=t.call(this)).type=e,a.ya=r,a.pa=i,a}return Ie(n,[{key:"_apply",value:function(e){var t=Yw(e,this.type,this.ya,this.pa);return new Rb(e.firestore,e.converter,function(e,t){return new qf(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}]),n}(qw);function Qw(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Ww("endBefore",t,!1)}function $w(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Ww("endAt",t,!0)}function Yw(e,t,n,r){if(n[0]=Ar(n[0]),n[0]instanceof Aw)return function(e,t,n,r,i){if(!r)throw new Al(Cl.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],u=Fe(Kf(e));try{for(u.s();!(a=u.n()).done;){var s=a.value;if(s.field.isKeyField())o.push(tf(t,r.key));else{var l=r.data.field(s.field);if(Fc(l))throw new Al(Cl.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===l){var c=s.field.canonicalString();throw new Al(Cl.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(c,"' (used as the orderBy) does not exist."))}o.push(l)}}}catch(f){u.e(f)}finally{u.f()}return new Lf(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=lw(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new Al(Cl.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var u=[],s=0;s<i.length;s++){var l=i[s];if(o[s].field.isKeyField()){if("string"!=typeof l)throw new Al(Cl.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof l));if(!Hf(e)&&-1!==l.indexOf("/"))throw new Al(Cl.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(l,"' contains a slash."));var c=e.path.child(Wl.fromString(l));if(!Yl.isDocumentKey(c))throw new Al(Cl.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(c,"' is not because it contains an odd number of segments."));var f=new Yl(c);u.push(tf(t,f))}else{var h=bw(n,r,l);u.push(h)}}return new Lf(u,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function Xw(e,t,n){if("string"==typeof(n=Ar(n))){if(""===n)throw new Al(Cl.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Hf(t)&&-1!==n.indexOf("/"))throw new Al(Cl.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(Wl.fromString(n));if(!Yl.isDocumentKey(r))throw new Al(Cl.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return tf(e,new Yl(r))}if(n instanceof Lb)return tf(e,n._key);throw new Al(Cl.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(Cb(n),"."))}function Jw(e,t){if(!Array.isArray(e)||0===e.length)throw new Al(Cl.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."));if(e.length>10)throw new Al(Cl.INVALID_ARGUMENT,"Invalid Query. '".concat(t.toString(),"' filters support a maximum of 10 elements in the value array."))}function Zw(e,t,n){if(!n.isEqual(t))throw new Al(Cl.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var ek={maxAttempts:5},tk=function(){function e(){Ce(this,e)}return Ie(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Qc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return jc(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Mc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Tl()}}},{key:"convertObject",value:function(e,t){var n=this,r={};return Ec(e.fields,(function(e,i){r[e]=n.convertValue(i,t)})),r}},{key:"convertGeoPoint",value:function(e){return new nw(jc(e.latitude),jc(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=qc(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Vc(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=Rc(e);return new Hl(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=Wl.fromString(e);Sl(Fd(n));var r=new Bc(n.get(1),n.get(3)),i=new Yl(n.popFirst(5));return r.isEqual(t)||_l("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function nk(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var rk=function(e){De(n,e);var t=Re(n);function n(e){var r;return Ce(this,n),(r=t.call(this)).firestore=e,r}return Ie(n,[{key:"convertBytes",value:function(e){return new ew(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new Lb(this.firestore,null,t)}}]),n}(tk),ik=function(){function e(t,n){Ce(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=lw(t)}return Ie(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=ak(e,this._firestore),i=nk(r.converter,t,n),a=cw(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,gh.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=ak(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=Ar(t))||t instanceof Zb?gw(this._dataReader,"WriteBatch.update",i._key,t,n,o):mw(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,gh.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=ak(e,this._firestore);return this._mutations=this._mutations.concat(new Oh(t._key,gh.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new Al(Cl.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function ak(e,t){if((e=Ar(e)).firestore!==t)throw new Al(Cl.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var ok=function(e){De(n,e);var t=Re(n);function n(e){var r;return Ce(this,n),(r=t.call(this)).firestore=e,r}return Ie(n,[{key:"convertBytes",value:function(e){return new ew(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new Lb(this.firestore,null,t)}}]),n}(tk);function uk(e){e=Ab(e,Lb);var t=Ab(e.firestore,Hb),n=Kb(t),r=new ok(t);return function(e,t){var n=new Dl;return e.asyncQueue.enqueueAndForget(u(a().mark((function r(){return a().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=u(a().mark((function e(t,n,r){var i,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=Il(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.localDocuments.getDocument(e,t)}))}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new Al(Cl.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),o=Nm(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(o);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,yb(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._key).then((function(n){return new Ow(t,r,e._key,n,new Pw(null!==n&&n.hasLocalMutations,!0),e.converter)}))}function sk(e){e=Ab(e,Rb);var t=Ab(e.firestore,Hb),n=Kb(t),r=new ok(t);return function(e,t){var n=new Dl;return e.asyncQueue.enqueueAndForget(u(a().mark((function r(){return a().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=u(a().mark((function e(t,n,r){var i,o,u,s,l;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,cy(t,n,!0);case 3:i=e.sent,o=new Xm(n,i.ji),u=o.Ku(i.documents),s=o.applyChanges(u,!1),r.resolve(s.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),l=Nm(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(l);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,yb(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._query).then((function(n){return new Rw(t,r,e,n)}))}function lk(e,t,n){e=Ab(e,Lb);var r=Ab(e.firestore,Hb),i=nk(e.converter,t,n);return dk(r,[cw(lw(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,gh.none())])}function ck(e,t,n){e=Ab(e,Lb);for(var r=Ab(e.firestore,Hb),i=lw(r),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return dk(r,[("string"==typeof(t=Ar(t))||t instanceof Zb?gw(i,"updateDoc",e._key,t,n,o):mw(i,"updateDoc",e._key,t)).toMutation(e._key,gh.exists(!0))])}function fk(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,o,s;e=Ar(e);var l={includeMetadataChanges:!1},c=0;"object"!=typeof n[c]||Bb(n[c])||(l=n[c],c++);var f,h,d,p={includeMetadataChanges:l.includeMetadataChanges};if(Bb(n[c])){var v=n[c];n[c]=null===(i=v.next)||void 0===i?void 0:i.bind(v),n[c+1]=null===(o=v.error)||void 0===o?void 0:o.bind(v),n[c+2]=null===(s=v.complete)||void 0===s?void 0:s.bind(v)}if(e instanceof Lb)h=Ab(e.firestore,Hb),d=Uf(e._key.path),f={next:function(t){n[c]&&n[c](pk(h,e,t))},error:n[c+1],complete:n[c+2]};else{var y=Ab(e,Rb);h=Ab(y.firestore,Hb),d=y._query;var m=new ok(h);f={next:function(e){n[c]&&n[c](new Rw(h,m,y,e))},error:n[c+1],complete:n[c+2]},Fw(e._query)}return function(e,t,n,r){var i=new nb(r),o=new Hm(t,i,n);return e.asyncQueue.enqueueAndForget(u(a().mark((function t(){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Mm,t.next=3,bb(e);case 3:return t.t1=t.sent,t.t2=o,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.Tc(),e.asyncQueue.enqueueAndForget(u(a().mark((function t(){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=qm,t.next=3,bb(e);case 3:return t.t1=t.sent,t.t2=o,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(Kb(h),d,p,f)}function hk(e,t){return function(e,t){var n=new nb(t);return e.asyncQueue.enqueueAndForget(u(a().mark((function t(){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){Il(e).Tu.add(t),t.next()},t.next=3,bb(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.Tc(),e.asyncQueue.enqueueAndForget(u(a().mark((function t(){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){Il(e).Tu.delete(t)},t.next=3,bb(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(Kb(e=Ab(e,Hb)),Bb(t)?t:{next:t})}function dk(e,t){return function(e,t){var n=new Dl;return e.asyncQueue.enqueueAndForget(u(a().mark((function r(){return a().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=ug,r.next=3,gb(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(Kb(e),t)}function pk(e,t,n){var r=n.docs.get(t._key),i=new ok(e);return new Ow(e,i,t._key,r,new Pw(n.hasPendingWrites,n.fromCache),t.converter)}var vk=function(e){De(n,e);var t=Re(n);function n(e,r){var i;return Ce(this,n),(i=t.call(this,e,r))._firestore=e,i}return Ie(n,[{key:"get",value:function(e){var t=this,r=ak(e,this._firestore),i=new ok(this._firestore);return ta(Ne(n.prototype),"get",this).call(this,e).then((function(e){return new Ow(t._firestore,i,r._key,e._document,new Pw(!1,!1),r.converter)}))}}]),n}(function(){function e(t,n){Ce(this,e),this._firestore=t,this._transaction=n,this._dataReader=lw(t)}return Ie(e,[{key:"get",value:function(e){var t=this,n=ak(e,this._firestore),r=new rk(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return Tl();var i=e[0];if(i.isFoundDocument())return new Aw(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new Aw(t._firestore,r,n._key,null,n.converter);throw Tl()}))}},{key:"set",value:function(e,t,n){var r=ak(e,this._firestore),i=nk(r.converter,t,n),a=cw(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=ak(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=Ar(t))||t instanceof Zb?gw(this._dataReader,"Transaction.update",i._key,t,n,o):mw(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=ak(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function yk(e,t,n){e=Ab(e,Hb);var r=Object.assign(Object.assign({},ek),n);return function(e){if(e.maxAttempts<1)throw new Al(Cl.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){var r=new Dl;return e.asyncQueue.enqueueAndForget(u(a().mark((function i(){var o;return a().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,function(e){return db(e).then((function(e){return e.datastore}))}(e);case 2:o=i.sent,new ab(e.asyncQueue,o,n,t,r).run();case 4:case"end":return i.stop()}}),i)})))),r.promise}(Kb(e),(function(n){return t(new vk(e,n))}),r)}function mk(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new pw("arrayUnion",t)}function gk(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new vw("arrayRemove",t)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){gl=e}(xi),yi(new Dr("firestore",(function(e,n){var r=n.options,i=e.getProvider("app").getImmediate(),a=new Hb(i,new Ll(e.getProvider("auth-internal")),new Fl(e.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:t},r),a._setSettings(r),a}),"PUBLIC")),Ai(yl,"3.4.12",e),Ai(yl,"3.4.12","esm2017")}();function bk(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Al("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function wk(){if("undefined"===typeof Uint8Array)throw new Al("unimplemented","Uint8Arrays are not available in this environment.")}function kk(){if("undefined"==typeof atob)throw new Al("unimplemented","Blobs are unavailable in Firestore in this environment.")}var _k=function(){function e(t){Ce(this,e),this._delegate=t}return Ie(e,[{key:"toBase64",value:function(){return kk(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return wk(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return kk(),new e(ew.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return wk(),new e(ew.fromUint8Array(t))}}]),e}();function xk(e){return function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=e,i=Fe(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"===typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var Ek=function(){function e(){Ce(this,e)}return Ie(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){Jb(e=Ab(e,Hb));var n=Kb(e),r=e._freezeSettings(),i=new eb;return Wb(n,i,new Jg(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){Jb(e=Ab(e,Hb));var t=Kb(e),n=e._freezeSettings(),r=new eb;return Wb(t,r,new Zg(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new Al(Cl.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new Dl;return e._queue.enqueueAndForgetEvenWhileRestricted(u(a().mark((function n(){return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=u(a().mark((function e(t){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(hc.V()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,hc.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()($v(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}(e._delegate)}}]),e}(),Tk=function(){function e(t,n,r){var i=this;Ce(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof Bc||(this._appCompat=t)}return Ie(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||xl("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Ob(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return Qb(this._delegate)}},{key:"disableNetwork",value:function(){return $b(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&Tb("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return function(e){return function(e){var t=new Dl;return e.asyncQueue.enqueueAndForget(u(a().mark((function n(){return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=gg,n.next=3,gb(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}(Kb(e=Ab(e,Hb)))}(this._delegate)}},{key:"onSnapshotsInSync",value:function(e){return hk(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new Al("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new qk(this,Mb(this._delegate,e))}catch(t){throw Nk(t,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new Dk(this,Fb(this._delegate,e))}catch(t){throw Nk(t,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new jk(this,function(e,t){if(e=Ab(e,Pb),Eb("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Al(Cl.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new Rb(e,null,function(e){return new qf(Wl.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw Nk(t,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return yk(this._delegate,(function(n){return e(new Ik(t,n))}))}},{key:"batch",value:function(){var e=this;return Kb(this._delegate),new Ck(new ik(this._delegate,(function(t){return dk(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return Yb(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return Xb(this._delegate,e).then((function(e){return e?new jk(t,e):null}))}}]),e}(),Sk=function(e){De(n,e);var t=Re(n);function n(e){var r;return Ce(this,n),(r=t.call(this)).firestore=e,r}return Ie(n,[{key:"convertBytes",value:function(e){return new _k(new ew(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return Dk.forKey(t,this.firestore,null)}}]),n}(tk);var Ik=function(){function e(t,n){Ce(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new Sk(t)}return Ie(e,[{key:"get",value:function(e){var t=this,n=Vk(e);return this._delegate.get(n).then((function(e){return new Lk(t._firestore,new Ow(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=Vk(e);return n?(bk("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=Vk(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=Vk(e);return this._delegate.delete(t),this}}]),e}(),Ck=function(){function e(t){Ce(this,e),this._delegate=t}return Ie(e,[{key:"set",value:function(e,t,n){var r=Vk(e);return n?(bk("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=Vk(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=Vk(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),Ak=function(){function e(t,n,r){Ce(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return Ie(e,[{key:"fromFirestore",value:function(e,t){var n=new Lw(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Rk(this._firestore,n),null!==t&&void 0!==t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new Sk(t),n),i.set(n,a)),a}}]),e}();Ak.INSTANCES=new WeakMap;var Dk=function(){function e(t,n){Ce(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new Sk(t)}return Ie(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new qk(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new qk(this.firestore,Mb(this._delegate,e))}catch(t){throw Nk(t,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=Ar(e))instanceof Lb&&qb(this._delegate,e)}},{key:"set",value:function(e,t){t=bk("DocumentReference.set",t);try{return t?lk(this._delegate,e,t):lk(this._delegate,e)}catch(n){throw Nk(n,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?ck(this._delegate,e):ck.apply(void 0,[this._delegate,e,t].concat(r))}catch(a){throw Nk(a,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return function(e){return dk(Ab(e.firestore,Hb),[new Oh(e._key,gh.none())])}(this._delegate)}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=Pk(n),a=Ok(n,(function(t){return new Lk(e.firestore,new Ow(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return fk(this._delegate,i,a)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?uk(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=Ab(e,Lb);var t=Ab(e.firestore,Hb);return kb(Kb(t),e._key,{source:"server"}).then((function(n){return pk(t,e,n)}))}(this._delegate):function(e){e=Ab(e,Lb);var t=Ab(e.firestore,Hb);return kb(Kb(t),e._key).then((function(n){return pk(t,e,n)}))}(this._delegate),t.then((function(e){return new Lk(n.firestore,new Ow(n.firestore._delegate,n._userDataWriter,e._key,e._document,e.metadata,n._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(Ak.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!==0)throw new Al("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new Lb(n._delegate,r,new Yl(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new Lb(n._delegate,r,t))}}]),e}();function Nk(e,t,n){return e.message=e.message.replace(t,n),e}function Pk(e){var t,n=Fe(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"===typeof r&&!xk(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function Ok(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=xk(e[0])?e[0]:xk(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var Lk=function(){function e(t,n){Ce(this,e),this._firestore=t,this._delegate=n}return Ie(e,[{key:"ref",get:function(){return new Dk(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return Mw(this._delegate,e._delegate)}}]),e}(),Rk=function(e){De(n,e);var t=Re(n);function n(){return Ce(this,n),t.apply(this,arguments)}return Ie(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return function(e,t){e||Tl()}(void 0!==t),t}}]),n}(Lk),jk=function(){function e(t,n){Ce(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new Sk(t)}return Ie(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,Vw(this._delegate,function(e,t,n){var r=t,i=Nw("where",e);return new Uw(i,r,n)}(t,n,r)))}catch(i){throw Nk(i,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,Vw(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=Nw("orderBy",e);return new Bw(n,t)}(t,n)))}catch(r){throw Nk(r,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,Vw(this._delegate,function(e){return Db("limit",e),new zw("limit",e,"F")}(t)))}catch(n){throw Nk(n,"limit()","Query.limit()")}}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,Vw(this._delegate,function(e){return Db("limitToLast",e),new zw("limitToLast",e,"L")}(t)))}catch(n){throw Nk(n,"limitToLast()","Query.limitToLast()")}}},{key:"startAt",value:function(){try{return new e(this.firestore,Vw(this._delegate,Kw.apply(void 0,arguments)))}catch(t){throw Nk(t,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,Vw(this._delegate,Gw.apply(void 0,arguments)))}catch(t){throw Nk(t,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,Vw(this._delegate,Qw.apply(void 0,arguments)))}catch(t){throw Nk(t,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,Vw(this._delegate,$w.apply(void 0,arguments)))}catch(t){throw Nk(t,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return Vb(this._delegate,e._delegate)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?sk(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=Ab(e,Rb);var t=Ab(e.firestore,Hb),n=Kb(t),r=new ok(t);return _b(n,e._query,{source:"server"}).then((function(n){return new Rw(t,r,e,n)}))}(this._delegate):function(e){e=Ab(e,Rb);var t=Ab(e.firestore,Hb),n=Kb(t),r=new ok(t);return Fw(e._query),_b(n,e._query).then((function(n){return new Rw(t,r,e,n)}))}(this._delegate),t.then((function(e){return new Fk(n.firestore,new Rw(n.firestore._delegate,n._userDataWriter,n._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=Pk(n),a=Ok(n,(function(t){return new Fk(e.firestore,new Rw(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return fk(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(Ak.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),Mk=function(){function e(t,n){Ce(this,e),this._firestore=t,this._delegate=n}return Ie(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new Rk(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),Fk=function(){function e(t,n){Ce(this,e),this._firestore=t,this._delegate=n}return Ie(e,[{key:"query",get:function(){return new jk(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new Rk(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new Mk(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new Rk(n._firestore,r))}))}},{key:"isEqual",value:function(e){return Mw(this._delegate,e._delegate)}}]),e}(),qk=function(e){De(n,e);var t=Re(n);function n(e,r){var i;return Ce(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return Ie(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new Dk(this.firestore,e):null}},{key:"doc",value:function(e){try{return new Dk(this.firestore,void 0===e?Fb(this._delegate):Fb(this._delegate,e))}catch(t){throw Nk(t,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return function(e,t){var n=Ab(e.firestore,Hb),r=Fb(e),i=nk(e.converter,t);return dk(n,[cw(lw(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,gh.exists(!1))]).then((function(){return r}))}(this._delegate,e).then((function(e){return new Dk(t.firestore,e)}))}},{key:"isEqual",value:function(e){return qb(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter(Ak.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),n}(jk);function Vk(e){return Ab(e,Lb)}var Uk,Bk=function(){function e(){Ce(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=je(Zb,n)}return Ie(e,[{key:"isEqual",value:function(e){return(e=Ar(e))instanceof Zb&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e($l.keyField().canonicalString())}}]),e}(),zk=function(){function e(t){Ce(this,e),this._delegate=t}return Ie(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new dw("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new fw("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=mk.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=gk.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=function(e){return new yw("increment",e)}(t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),Hk={Firestore:Tk,GeoPoint:nw,Timestamp:Hl,Blob:_k,Transaction:Ik,WriteBatch:Ck,DocumentReference:Dk,DocumentSnapshot:Lk,Query:jk,QueryDocumentSnapshot:Rk,QuerySnapshot:Fk,CollectionReference:qk,FieldPath:Bk,FieldValue:zk,setLogLevel:function(e){!function(e){bl.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};(function(e,t){e.INTERNAL.registerComponent(new Dr("firestore-compat",(function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},Hk)))})(Uk=Zi,(function(e,t){return new Tk(e,t,new Ek)})),Uk.registerVersion("@firebase/firestore-compat","0.1.21");var Kk="participant_responses",Gk={apiKey:{NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_USE_PHOTODIODE:"true",REACT_APP_USE_EEG:"true",REACT_APP_VOLUME:"true"}.REACT_APP_apiKey,authDomain:{NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_USE_PHOTODIODE:"true",REACT_APP_USE_EEG:"true",REACT_APP_VOLUME:"true"}.REACT_APP_authDomain,databaseURL:{NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_USE_PHOTODIODE:"true",REACT_APP_USE_EEG:"true",REACT_APP_VOLUME:"true"}.REACT_APP_databaseURL,projectId:{NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_USE_PHOTODIODE:"true",REACT_APP_USE_EEG:"true",REACT_APP_VOLUME:"true"}.REACT_APP_projectId||"no-firebase",storageBucket:{NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_USE_PHOTODIODE:"true",REACT_APP_USE_EEG:"true",REACT_APP_VOLUME:"true"}.REACT_APP_storageBucket,messagingSenderId:{NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_USE_PHOTODIODE:"true",REACT_APP_USE_EEG:"true",REACT_APP_VOLUME:"true"}.REACT_APP_messagingSenderId,appId:{NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_USE_PHOTODIODE:"true",REACT_APP_USE_EEG:"true",REACT_APP_VOLUME:"true"}.REACT_APP_appId},Wk=Zi.initializeApp(Gk).firestore();"localhost"===window.location.hostname&&Wk.useEmulator("localhost",8080);var Qk=function(){var e=(new Date).toISOString(),n=c((0,t.useState)(!1),2),r=n[0],i=n[1],o=c((0,t.useState)(!1),2),s=o[0],l=o[1],f=c((0,t.useState)(!1),2),h=f[0],d=f[1],p=c((0,t.useState)(""),2),v=p[0],y=p[1],m=c((0,t.useState)(""),2),g=m[0],b=m[1],w=c((0,t.useState)("default"),2),k=w[0],x=w[1],E=c((0,t.useState)(!1),2),T=E[0],S=E[1],I=new URLSearchParams(window.location.search),C=function(){var e=u(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),A=function(){},D=(0,t.useCallback)((function(e,t,n){e&&(y(n),b(t)),i(e)}),[e]);return(0,t.useEffect)((function(){if(console.log("Turk:",bn.USE_MTURK),console.log("Firebase:",bn.USE_FIREBASE),console.log("Prolific:",bn.USE_PROLIFIC),console.log("Electron:",bn.USE_ELECTRON),console.log("Video:",bn.USE_CAMERA),console.log("Volume:",bn.USE_VOLUME),console.log("Event Marker:",bn.USE_EEG),console.log("Photodiode:",bn.USE_PHOTODIODE),bn.USE_ELECTRON){var e=window.require("electron").ipcRenderer;l(e),e.send("updateEnvironmentVariables",bn);var t=e.sendSync("syncCredentials");t.envParticipantId&&y(t.envParticipantId),t.envStudyId&&b(t.envStudyId),x("desktop")}else if(bn.USE_MTURK)window.lodash=_.noConflict(),d(new PsiTurk(un,"/complete")),x("mturk"),D(!0,"mturk",un);else if(bn.USE_PROLIFIC){var n=Zt();bn.USE_FIREBASE&&n?(x("firebase"),D(!0,"prolific",n)):S(!0)}else if(bn.USE_FIREBASE){x("firebase");var r=I.get("participantID"),i=I.get("studyID");r&&y(r),i&&b(i)}else x("default")}),[]),T?(0,_e.jsx)("div",{className:"centered-h-v",children:(0,_e.jsx)("div",{className:"width-50 alert alert-danger",children:"Please ask your task provider to enable firebase."})}):(0,_e.jsx)(_e.Fragment,{children:r?(0,_e.jsx)(lr,{participantId:v,studyId:g,startDate:e,taskVersion:nn,dataUpdateFunction:{desktop:function(e){s.send("data",e)},firebase:function(e){!function(e){console.log(e);var t=e.participant_id,n=e.study_id,r=e.start_date;Wk.collection(Kk).doc(n).collection("participants").doc(t).collection("data").doc(r).update("results",Zi.firestore.FieldValue.arrayUnion(e))}(e)},mturk:function(e){h.recordTrialData(e)},default:A}[k],dataFinishFunction:{desktop:function(){s.send("end","true")},mturk:function(){var e=function(){var e=u(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h.saveData(),e.next=3,Xt(5e3);case 3:h.completeHIT();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()},firebase:A,default:function(e){e.localSave("csv","neuro-task.csv")}}[k]}):(0,_e.jsx)(xe,{validationFunction:{desktop:C,default:C,firebase:function(t,n){return function(e,t,n){return Wk.collection(Kk).doc(t).collection("participants").doc(e).collection("data").doc(n).set({start_time:n,app_version:window.navigator.appVersion,app_platform:window.navigator.platform,results:[]}).then((function(){return!0})).catch((function(e){return console.error(e),!1}))}(t,n,e)}}[k],envParticipantId:v,envStudyId:g,onLogin:D})})};r.render((0,_e.jsx)(Qk,{}),document.getElementById("root"))}()}();
//# sourceMappingURL=main.dbe90c26.js.map